function PI(t,n){for(var r=0;r<n.length;r++){const i=n[r];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(i,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var Cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fy={exports:{}},If={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function MI(){if(GE)return If;GE=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:t,type:i,key:d,ref:l!==void 0?l:null,props:u}}return If.Fragment=n,If.jsx=r,If.jsxs=r,If}var YE;function zI(){return YE||(YE=1,fy.exports=MI()),fy.exports}var e=zI(),py={exports:{}},bn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function II(){if(ZE)return bn;ZE=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;function b(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function A(F,fe,te){this.props=F,this.context=fe,this.refs=_,this.updater=te||w}A.prototype.isReactComponent={},A.prototype.setState=function(F,fe){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,fe,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function D(){}D.prototype=A.prototype;function P(F,fe,te){this.props=F,this.context=fe,this.refs=_,this.updater=te||w}var M=P.prototype=new D;M.constructor=P,C(M,A.prototype),M.isPureReactComponent=!0;var N=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function V(F,fe,te,R,Y,q){return te=q.ref,{$$typeof:t,type:F,key:fe,ref:te!==void 0?te:null,props:q}}function $(F,fe){return V(F.type,fe,void 0,void 0,void 0,F.props)}function ae(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function he(F){var fe={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(te){return fe[te]})}var re=/\/+/g;function ce(F,fe){return typeof F=="object"&&F!==null&&F.key!=null?he(""+F.key):fe.toString(36)}function Se(){}function je(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Se,Se):(F.status="pending",F.then(function(fe){F.status==="pending"&&(F.status="fulfilled",F.value=fe)},function(fe){F.status==="pending"&&(F.status="rejected",F.reason=fe)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function de(F,fe,te,R,Y){var q=typeof F;(q==="undefined"||q==="boolean")&&(F=null);var le=!1;if(F===null)le=!0;else switch(q){case"bigint":case"string":case"number":le=!0;break;case"object":switch(F.$$typeof){case t:case n:le=!0;break;case x:return le=F._init,de(le(F._payload),fe,te,R,Y)}}if(le)return Y=Y(F),le=R===""?"."+ce(F,0):R,N(Y)?(te="",le!=null&&(te=le.replace(re,"$&/")+"/"),de(Y,fe,te,"",function(ye){return ye})):Y!=null&&(ae(Y)&&(Y=$(Y,te+(Y.key==null||F&&F.key===Y.key?"":(""+Y.key).replace(re,"$&/")+"/")+le)),fe.push(Y)),1;le=0;var We=R===""?".":R+":";if(N(F))for(var pe=0;pe<F.length;pe++)R=F[pe],q=We+ce(R,pe),le+=de(R,fe,te,q,Y);else if(pe=b(F),typeof pe=="function")for(F=pe.call(F),pe=0;!(R=F.next()).done;)R=R.value,q=We+ce(R,pe++),le+=de(R,fe,te,q,Y);else if(q==="object"){if(typeof F.then=="function")return de(je(F),fe,te,R,Y);throw fe=String(F),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return le}function G(F,fe,te){if(F==null)return F;var R=[],Y=0;return de(F,R,"","",function(q){return fe.call(te,q,Y++)}),R}function U(F){if(F._status===-1){var fe=F._result;fe=fe(),fe.then(function(te){(F._status===0||F._status===-1)&&(F._status=1,F._result=te)},function(te){(F._status===0||F._status===-1)&&(F._status=2,F._result=te)}),F._status===-1&&(F._status=0,F._result=fe)}if(F._status===1)return F._result.default;throw F._result}var W=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function me(){}return bn.Children={map:G,forEach:function(F,fe,te){G(F,function(){fe.apply(this,arguments)},te)},count:function(F){var fe=0;return G(F,function(){fe++}),fe},toArray:function(F){return G(F,function(fe){return fe})||[]},only:function(F){if(!ae(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},bn.Component=A,bn.Fragment=r,bn.Profiler=l,bn.PureComponent=P,bn.StrictMode=i,bn.Suspense=f,bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,bn.__COMPILER_RUNTIME={__proto__:null,c:function(F){return z.H.useMemoCache(F)}},bn.cache=function(F){return function(){return F.apply(null,arguments)}},bn.cloneElement=function(F,fe,te){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var R=C({},F.props),Y=F.key,q=void 0;if(fe!=null)for(le in fe.ref!==void 0&&(q=void 0),fe.key!==void 0&&(Y=""+fe.key),fe)!I.call(fe,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&fe.ref===void 0||(R[le]=fe[le]);var le=arguments.length-2;if(le===1)R.children=te;else if(1<le){for(var We=Array(le),pe=0;pe<le;pe++)We[pe]=arguments[pe+2];R.children=We}return V(F.type,Y,void 0,void 0,q,R)},bn.createContext=function(F){return F={$$typeof:d,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:u,_context:F},F},bn.createElement=function(F,fe,te){var R,Y={},q=null;if(fe!=null)for(R in fe.key!==void 0&&(q=""+fe.key),fe)I.call(fe,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(Y[R]=fe[R]);var le=arguments.length-2;if(le===1)Y.children=te;else if(1<le){for(var We=Array(le),pe=0;pe<le;pe++)We[pe]=arguments[pe+2];Y.children=We}if(F&&F.defaultProps)for(R in le=F.defaultProps,le)Y[R]===void 0&&(Y[R]=le[R]);return V(F,q,void 0,void 0,null,Y)},bn.createRef=function(){return{current:null}},bn.forwardRef=function(F){return{$$typeof:p,render:F}},bn.isValidElement=ae,bn.lazy=function(F){return{$$typeof:x,_payload:{_status:-1,_result:F},_init:U}},bn.memo=function(F,fe){return{$$typeof:g,type:F,compare:fe===void 0?null:fe}},bn.startTransition=function(F){var fe=z.T,te={};z.T=te;try{var R=F(),Y=z.S;Y!==null&&Y(te,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(me,W)}catch(q){W(q)}finally{z.T=fe}},bn.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},bn.use=function(F){return z.H.use(F)},bn.useActionState=function(F,fe,te){return z.H.useActionState(F,fe,te)},bn.useCallback=function(F,fe){return z.H.useCallback(F,fe)},bn.useContext=function(F){return z.H.useContext(F)},bn.useDebugValue=function(){},bn.useDeferredValue=function(F,fe){return z.H.useDeferredValue(F,fe)},bn.useEffect=function(F,fe,te){var R=z.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return R.useEffect(F,fe)},bn.useId=function(){return z.H.useId()},bn.useImperativeHandle=function(F,fe,te){return z.H.useImperativeHandle(F,fe,te)},bn.useInsertionEffect=function(F,fe){return z.H.useInsertionEffect(F,fe)},bn.useLayoutEffect=function(F,fe){return z.H.useLayoutEffect(F,fe)},bn.useMemo=function(F,fe){return z.H.useMemo(F,fe)},bn.useOptimistic=function(F,fe){return z.H.useOptimistic(F,fe)},bn.useReducer=function(F,fe,te){return z.H.useReducer(F,fe,te)},bn.useRef=function(F){return z.H.useRef(F)},bn.useState=function(F){return z.H.useState(F)},bn.useSyncExternalStore=function(F,fe,te){return z.H.useSyncExternalStore(F,fe,te)},bn.useTransition=function(){return z.H.useTransition()},bn.version="19.1.1",bn}var XE;function rS(){return XE||(XE=1,py.exports=II()),py.exports}var v=rS();const wn=Jp(v),KE=PI({__proto__:null,default:wn},[v]);var my={exports:{}},Nf={},gy={exports:{}},xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function NI(){return QE||(QE=1,(function(t){function n(G,U){var W=G.length;G.push(U);e:for(;0<W;){var me=W-1>>>1,F=G[me];if(0<l(F,U))G[me]=U,G[W]=F,W=me;else break e}}function r(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var U=G[0],W=G.pop();if(W!==U){G[0]=W;e:for(var me=0,F=G.length,fe=F>>>1;me<fe;){var te=2*(me+1)-1,R=G[te],Y=te+1,q=G[Y];if(0>l(R,W))Y<F&&0>l(q,R)?(G[me]=q,G[Y]=W,me=Y):(G[me]=R,G[te]=W,me=te);else if(Y<F&&0>l(q,W))G[me]=q,G[Y]=W,me=Y;else break e}}return U}function l(G,U){var W=G.sortIndex-U.sortIndex;return W!==0?W:G.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var f=[],g=[],x=1,y=null,b=3,w=!1,C=!1,_=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(G){for(var U=r(g);U!==null;){if(U.callback===null)i(g);else if(U.startTime<=G)i(g),U.sortIndex=U.expirationTime,n(f,U);else break;U=r(g)}}function z(G){if(_=!1,N(G),!C)if(r(f)!==null)C=!0,I||(I=!0,ce());else{var U=r(g);U!==null&&de(z,U.startTime-G)}}var I=!1,V=-1,$=5,ae=-1;function he(){return A?!0:!(t.unstable_now()-ae<$)}function re(){if(A=!1,I){var G=t.unstable_now();ae=G;var U=!0;try{e:{C=!1,_&&(_=!1,P(V),V=-1),w=!0;var W=b;try{t:{for(N(G),y=r(f);y!==null&&!(y.expirationTime>G&&he());){var me=y.callback;if(typeof me=="function"){y.callback=null,b=y.priorityLevel;var F=me(y.expirationTime<=G);if(G=t.unstable_now(),typeof F=="function"){y.callback=F,N(G),U=!0;break t}y===r(f)&&i(f),N(G)}else i(f);y=r(f)}if(y!==null)U=!0;else{var fe=r(g);fe!==null&&de(z,fe.startTime-G),U=!1}}break e}finally{y=null,b=W,w=!1}U=void 0}}finally{U?ce():I=!1}}}var ce;if(typeof M=="function")ce=function(){M(re)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,je=Se.port2;Se.port1.onmessage=re,ce=function(){je.postMessage(null)}}else ce=function(){D(re,0)};function de(G,U){V=D(function(){G(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(G){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var W=b;b=U;try{return G()}finally{b=W}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(G,U){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=b;b=G;try{return U()}finally{b=W}},t.unstable_scheduleCallback=function(G,U,W){var me=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?me+W:me):W=me,G){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=W+F,G={id:x++,callback:U,priorityLevel:G,startTime:W,expirationTime:F,sortIndex:-1},W>me?(G.sortIndex=W,n(g,G),r(f)===null&&G===r(g)&&(_?(P(V),V=-1):_=!0,de(z,W-me))):(G.sortIndex=F,n(f,G),C||w||(C=!0,I||(I=!0,ce()))),G},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(G){var U=b;return function(){var W=b;b=U;try{return G.apply(this,arguments)}finally{b=W}}}})(xy)),xy}var JE;function LI(){return JE||(JE=1,gy.exports=NI()),gy.exports}var vy={exports:{}},Gs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function OI(){if(e_)return Gs;e_=1;var t=rS();function n(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(f,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:f,containerInfo:g,implementation:x}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gs.createPortal=function(f,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(f,g,null,x)},Gs.flushSync=function(f){var g=d.T,x=i.p;try{if(d.T=null,i.p=2,f)return f()}finally{d.T=g,i.p=x,i.d.f()}},Gs.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},Gs.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Gs.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var x=g.as,y=p(x,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):x==="script"&&i.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Gs.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=p(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},Gs.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=p(x,g.crossOrigin);i.d.L(f,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Gs.preloadModule=function(f,g){if(typeof f=="string")if(g){var x=p(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},Gs.requestFormReset=function(f){i.d.r(f)},Gs.unstable_batchedUpdates=function(f,g){return f(g)},Gs.useFormState=function(f,g,x){return d.H.useFormState(f,g,x)},Gs.useFormStatus=function(){return d.H.useHostTransitionStatus()},Gs.version="19.1.1",Gs}var t_;function zA(){if(t_)return vy.exports;t_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),vy.exports=OI(),vy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function BI(){if(n_)return Nf;n_=1;var t=LI(),n=rS(),r=zA();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function u(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function d(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function p(s){if(u(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=u(s),a===null)throw Error(i(188));return a!==s?null:s}for(var c=s,m=a;;){var S=c.return;if(S===null)break;var E=S.alternate;if(E===null){if(m=S.return,m!==null){c=m;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===c)return p(S),s;if(E===m)return p(S),a;E=E.sibling}throw Error(i(188))}if(c.return!==m.return)c=S,m=E;else{for(var H=!1,ne=S.child;ne;){if(ne===c){H=!0,c=S,m=E;break}if(ne===m){H=!0,m=S,c=E;break}ne=ne.sibling}if(!H){for(ne=E.child;ne;){if(ne===c){H=!0,c=E,m=S;break}if(ne===m){H=!0,m=E,c=S;break}ne=ne.sibling}if(!H)throw Error(i(189))}}if(c.alternate!==m)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var x=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var Se=Symbol.for("react.client.reference");function je(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Se?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case A:return"Profiler";case _:return"StrictMode";case z:return"Suspense";case I:return"SuspenseList";case ae:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case M:return(s.displayName||"Context")+".Provider";case P:return(s._context.displayName||"Context")+".Consumer";case N:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return a=s.displayName||null,a!==null?a:je(s.type)||"Memo";case $:a=s._payload,s=s._init;try{return je(s(a))}catch{}}return null}var de=Array.isArray,G=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},me=[],F=-1;function fe(s){return{current:s}}function te(s){0>F||(s.current=me[F],me[F]=null,F--)}function R(s,a){F++,me[F]=s.current,s.current=a}var Y=fe(null),q=fe(null),le=fe(null),We=fe(null);function pe(s,a){switch(R(le,a),R(q,s),R(Y,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?bE(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=bE(a),s=SE(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(Y),R(Y,s)}function ye(){te(Y),te(q),te(le)}function Ze(s){s.memoizedState!==null&&R(We,s);var a=Y.current,c=SE(a,s.type);a!==c&&(R(q,s),R(Y,c))}function ht(s){q.current===s&&(te(Y),te(q)),We.current===s&&(te(We),kf._currentValue=W)}var rt=Object.prototype.hasOwnProperty,vt=t.unstable_scheduleCallback,Ue=t.unstable_cancelCallback,qt=t.unstable_shouldYield,Je=t.unstable_requestPaint,Ge=t.unstable_now,Ve=t.unstable_getCurrentPriorityLevel,se=t.unstable_ImmediatePriority,be=t.unstable_UserBlockingPriority,at=t.unstable_NormalPriority,St=t.unstable_LowPriority,An=t.unstable_IdlePriority,qe=t.log,Me=t.unstable_setDisableYieldValue,nt=null,wt=null;function Xe(s){if(typeof qe=="function"&&Me(s),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(nt,s)}catch{}}var pt=Math.clz32?Math.clz32:Mt,ot=Math.log,Ne=Math.LN2;function Mt(s){return s>>>=0,s===0?32:31-(ot(s)/Ne|0)|0}var Kt=256,ln=4194304;function Zt(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Pn(s,a,c){var m=s.pendingLanes;if(m===0)return 0;var S=0,E=s.suspendedLanes,H=s.pingedLanes;s=s.warmLanes;var ne=m&134217727;return ne!==0?(m=ne&~E,m!==0?S=Zt(m):(H&=ne,H!==0?S=Zt(H):c||(c=ne&~s,c!==0&&(S=Zt(c))))):(ne=m&~E,ne!==0?S=Zt(ne):H!==0?S=Zt(H):c||(c=m&~s,c!==0&&(S=Zt(c)))),S===0?0:a!==0&&a!==S&&(a&E)===0&&(E=S&-S,c=a&-a,E>=c||E===32&&(c&4194048)!==0)?a:S}function lt(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function vn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(){var s=Kt;return Kt<<=1,(Kt&4194048)===0&&(Kt=256),s}function ts(){var s=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),s}function Zn(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function Oi(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function bi(s,a,c,m,S,E){var H=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var ne=s.entanglements,ve=s.expirationTimes,Le=s.hiddenUpdates;for(c=H&~c;0<c;){var Ye=31-pt(c),et=1<<Ye;ne[Ye]=0,ve[Ye]=-1;var Oe=Le[Ye];if(Oe!==null)for(Le[Ye]=null,Ye=0;Ye<Oe.length;Ye++){var $e=Oe[Ye];$e!==null&&($e.lane&=-536870913)}c&=~et}m!==0&&el(s,m,0),E!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=E&~(H&~a))}function el(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var m=31-pt(a);s.entangledLanes|=a,s.entanglements[m]=s.entanglements[m]|1073741824|c&4194090}function ns(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var m=31-pt(c),S=1<<m;S&a|s[m]&a&&(s[m]|=a),c&=~S}}function Bi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function $i(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function po(){var s=U.p;return s!==0?s:(s=window.event,s===void 0?32:FE(s.type))}function $s(s,a){var c=U.p;try{return U.p=s,a()}finally{U.p=c}}var Fi=Math.random().toString(36).slice(2),Er="__reactFiber$"+Fi,rs="__reactProps$"+Fi,ya="__reactContainer$"+Fi,vs="__reactEvents$"+Fi,Nt="__reactListeners$"+Fi,Fl="__reactHandles$"+Fi,tl="__reactResources$"+Fi,Si="__reactMarker$"+Fi;function Dr(s){delete s[Er],delete s[rs],delete s[vs],delete s[Nt],delete s[Fl]}function us(s){var a=s[Er];if(a)return a;for(var c=s.parentNode;c;){if(a=c[ya]||c[Er]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=_E(s);s!==null;){if(c=s[Er])return c;s=_E(s)}return a}s=c,c=s.parentNode}return null}function ys(s){if(s=s[Er]||s[ya]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Fs(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function ri(s){var a=s[tl];return a||(a=s[tl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function xr(s){s[Si]=!0}var nl=new Set,mo={};function si(s,a){ii(s,a),ii(s+"Capture",a)}function ii(s,a){for(mo[s]=a,s=0;s<a.length;s++)nl.add(a[s])}var rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rs={},dt={};function Uc(s){return rt.call(dt,s)?!0:rt.call(Rs,s)?!1:rl.test(s)?dt[s]=!0:(Rs[s]=!0,!1)}function Vi(s,a,c){if(Uc(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function Ui(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function ai(s,a,c,m){if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+m)}}var Ha,wi;function Ci(s){if(Ha===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Ha=a&&a[1]||"",wi=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ha+s+wi}var Wa=!1;function oi(s,a){if(!s||Wa)return"";Wa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch($e){var Oe=$e}Reflect.construct(s,[],et)}else{try{et.call()}catch($e){Oe=$e}s.call(et.prototype)}}else{try{throw Error()}catch($e){Oe=$e}(et=s())&&typeof et.catch=="function"&&et.catch(function(){})}}catch($e){if($e&&Oe&&typeof $e.stack=="string")return[$e.stack,Oe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),H=E[0],ne=E[1];if(H&&ne){var ve=H.split(`
`),Le=ne.split(`
`);for(S=m=0;m<ve.length&&!ve[m].includes("DetermineComponentFrameRoot");)m++;for(;S<Le.length&&!Le[S].includes("DetermineComponentFrameRoot");)S++;if(m===ve.length||S===Le.length)for(m=ve.length-1,S=Le.length-1;1<=m&&0<=S&&ve[m]!==Le[S];)S--;for(;1<=m&&0<=S;m--,S--)if(ve[m]!==Le[S]){if(m!==1||S!==1)do if(m--,S--,0>S||ve[m]!==Le[S]){var Ye=`
`+ve[m].replace(" at new "," at ");return s.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",s.displayName)),Ye}while(1<=m&&0<=S);break}}}finally{Wa=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ci(c):""}function Rn(s){switch(s.tag){case 26:case 27:case 5:return Ci(s.type);case 16:return Ci("Lazy");case 13:return Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return oi(s.type,!1);case 11:return oi(s.type.render,!1);case 1:return oi(s.type,!0);case 31:return Ci("Activity");default:return""}}function ar(s){try{var a="";do a+=Rn(s),s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Pr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Hi(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ei(s){var a=Hi(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),m=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var S=c.get,E=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return S.call(this)},set:function(H){m=""+H,E.call(this,H)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(H){m=""+H},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Wi(s){s._valueTracker||(s._valueTracker=Ei(s))}function cn(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),m="";return s&&(m=Hi(s)?s.checked?"true":"false":s.value),s=m,s!==c?(a.setValue(s),!0):!1}function or(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var qi=/[\n"\\]/g;function Mr(s){return s.replace(qi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ss(s,a,c,m,S,E,H,ne){s.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?s.type=H:s.removeAttribute("type"),a!=null?H==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Pr(a)):s.value!==""+Pr(a)&&(s.value=""+Pr(a)):H!=="submit"&&H!=="reset"||s.removeAttribute("value"),a!=null?Gi(s,H,Pr(a)):c!=null?Gi(s,H,Pr(c)):m!=null&&s.removeAttribute("value"),S==null&&E!=null&&(s.defaultChecked=!!E),S!=null&&(s.checked=S&&typeof S!="function"&&typeof S!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?s.name=""+Pr(ne):s.removeAttribute("name")}function go(s,a,c,m,S,E,H,ne){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||c!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;c=c!=null?""+Pr(c):"",a=a!=null?""+Pr(a):c,ne||a===s.value||(s.value=a),s.defaultValue=a}m=m??S,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=ne?s.checked:!!m,s.defaultChecked=!!m,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(s.name=H)}function Gi(s,a,c){a==="number"&&or(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function js(s,a,c,m){if(s=s.options,a){a={};for(var S=0;S<c.length;S++)a["$"+c[S]]=!0;for(c=0;c<s.length;c++)S=a.hasOwnProperty("$"+s[c].value),s[c].selected!==S&&(s[c].selected=S),S&&m&&(s[c].defaultSelected=!0)}else{for(c=""+Pr(c),a=null,S=0;S<s.length;S++){if(s[S].value===c){s[S].selected=!0,m&&(s[S].defaultSelected=!0);return}a!==null||s[S].disabled||(a=s[S])}a!==null&&(a.selected=!0)}}function dr(s,a,c){if(a!=null&&(a=""+Pr(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+Pr(c):""}function Yi(s,a,c,m){if(a==null){if(m!=null){if(c!=null)throw Error(i(92));if(de(m)){if(1<m.length)throw Error(i(93));m=m[0]}c=m}c==null&&(c=""),a=c}c=Pr(a),s.defaultValue=c,m=s.textContent,m===c&&m!==""&&m!==null&&(s.value=m)}function ks(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var qa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function En(s,a,c){var m=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":m?s.setProperty(a,c):typeof c!="number"||c===0||qa.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function Or(s,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var S in a)m=a[S],a.hasOwnProperty(S)&&c[S]!==m&&En(s,S,m)}else for(var E in a)a.hasOwnProperty(E)&&En(s,E,a[E])}function bs(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zi(s){return vo.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Vs=null;function li(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ss=null,Us=null;function Xi(s){var a=ys(s);if(a&&(s=a.stateNode)){var c=s[rs]||null;e:switch(s=a.stateNode,a.type){case"input":if(ss(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Mr(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var m=c[a];if(m!==s&&m.form===s.form){var S=m[rs]||null;if(!S)throw Error(i(90));ss(m,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(a=0;a<c.length;a++)m=c[a],m.form===s.form&&cn(m)}break e;case"textarea":dr(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&js(s,!!c.multiple,a,!1)}}}var Yt=!1;function Br(s,a,c){if(Yt)return s(a,c);Yt=!0;try{var m=s(a);return m}finally{if(Yt=!1,(Ss!==null||Us!==null)&&(rg(),Ss&&(a=Ss,s=Us,Us=Ss=null,Xi(a),s)))for(a=0;a<s.length;a++)Xi(s[a])}}function Mn(s,a){var c=s.stateNode;if(c===null)return null;var m=c[rs]||null;if(m===null)return null;c=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hs=!1;if(_r)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{Hs=!1}var ws=null,ci=null,Ki=null;function Ga(){if(Ki)return Ki;var s,a=ci,c=a.length,m,S="value"in ws?ws.value:ws.textContent,E=S.length;for(s=0;s<c&&a[s]===S[s];s++);var H=c-s;for(m=1;m<=H&&a[c-m]===S[E-m];m++);return Ki=S.slice(s,1<m?1-m:void 0)}function vr(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ds(){return!0}function sl(){return!1}function ue(s){function a(c,m,S,E,H){this._reactName=c,this._targetInst=S,this.type=m,this.nativeEvent=E,this.target=H,this.currentTarget=null;for(var ne in s)s.hasOwnProperty(ne)&&(c=s[ne],this[ne]=c?c(E):E[ne]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ds:sl,this.isPropagationStopped=sl,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),a}var Ce={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Be=ue(Ce),jt=x({},Ce,{view:0,detail:0}),ct=ue(jt),dn,Ot,jn,mn=x({},jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==jn&&(jn&&s.type==="mousemove"?(dn=s.screenX-jn.screenX,Ot=s.screenY-jn.screenY):Ot=dn=0,jn=s),dn)},movementY:function(s){return"movementY"in s?s.movementY:Ot}}),zr=ue(mn),is=x({},mn,{dataTransfer:0}),Qi=ue(is),Ya=x({},jt,{relatedTarget:0}),Za=ue(Ya),il=x({},Ce,{animationName:0,elapsedTime:0,pseudoElement:0}),Vh=ue(il),Uh=x({},Ce,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Hc=ue(Uh),Hh=x({},Ce,{data:0}),ui=ue(Hh),Wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function td(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ja[s])?!!a[s]:!1}function Ds(){return td}var Wc=x({},jt,{key:function(s){if(s.key){var a=Wh[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=vr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ed[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(s){return s.type==="keypress"?vr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?vr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),qh=ue(Wc),qc=x({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=ue(qc),Gh=x({},jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),nd=ue(Gh),Gc=x({},Ce,{propertyName:0,elapsedTime:0,pseudoElement:0}),yo=ue(Gc),rd=x({},mn,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),sd=ue(rd),Ul=x({},Ce,{newState:0,oldState:0}),Xa=ue(Ul),Yc=[9,13,27,32],Ka=_r&&"CompositionEvent"in window,as=null;_r&&"documentMode"in document&&(as=document.documentMode);var B=_r&&"TextEvent"in window&&!as,ie=_r&&(!Ka||as&&8<as&&11>=as),it=" ",Lt=!1;function Sn(s,a){switch(s){case"keyup":return Yc.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function en(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xn=!1;function _i(s,a){switch(s){case"compositionend":return en(a);case"keypress":return a.which!==32?null:(Lt=!0,it);case"textInput":return s=a.data,s===it&&Lt?null:s;default:return null}}function Cs(s,a){if(Xn)return s==="compositionend"||!Ka&&Sn(s,a)?(s=Ga(),Ki=ci=ws=null,Xn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ie&&a.locale!=="ko"?null:a.data;default:return null}}var $r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!$r[s.type]:a==="textarea"}function Fr(s,a,c,m){Ss?Us?Us.push(m):Us=[m]:Ss=m,a=cg(a,"onChange"),0<a.length&&(c=new Be("onChange","change",null,c,m),s.push({event:c,listeners:a}))}var hs=null,ba=null;function jo(s){gE(s,0)}function id(s){var a=Fs(s);if(cn(a))return s}function Hl(s,a){if(s==="change")return a}var Yh=!1;if(_r){var Wl;if(_r){var Zh="oninput"in document;if(!Zh){var Qa=document.createElement("div");Qa.setAttribute("oninput","return;"),Zh=typeof Qa.oninput=="function"}Wl=Zh}else Wl=!1;Yh=Wl&&(!document.documentMode||9<document.documentMode)}function Zc(){hs&&(hs.detachEvent("onpropertychange",Sm),ba=hs=null)}function Sm(s){if(s.propertyName==="value"&&id(ba)){var a=[];Fr(a,ba,s,li(s)),Br(jo,a)}}function Xh(s,a,c){s==="focusin"?(Zc(),hs=a,ba=c,hs.attachEvent("onpropertychange",Sm)):s==="focusout"&&Zc()}function Lv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return id(ba)}function Ja(s,a){if(s==="click")return id(a)}function Ov(s,a){if(s==="input"||s==="change")return id(a)}function ql(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var di=typeof Object.is=="function"?Object.is:ql;function hi(s,a){if(di(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),m=Object.keys(a);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var S=c[m];if(!rt.call(a,S)||!di(s[S],a[S]))return!1}return!0}function Xc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Kh(s,a){var c=Xc(s);s=0;for(var m;c;){if(c.nodeType===3){if(m=s+c.textContent.length,s<=a&&m>=a)return{node:c,offset:a-s};s=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Xc(c)}}function ad(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?ad(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Kc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=or(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=or(s.document)}return a}function Qc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var od=_r&&"documentMode"in document&&11>=document.documentMode,Ji=null,Gl=null,al=null,ld=!1;function wm(s,a,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ld||Ji==null||Ji!==or(m)||(m=Ji,"selectionStart"in m&&Qc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),al&&hi(al,m)||(al=m,m=cg(Gl,"onSelect"),0<m.length&&(a=new Be("onSelect","select",null,a,c),s.push({event:a,listeners:m}),a.target=Ji)))}function Sa(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var Yl={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},cd={},Cm={};_r&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function bo(s){if(cd[s])return cd[s];if(!Yl[s])return s;var a=Yl[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in Cm)return cd[s]=a[c];return s}var Em=bo("animationend"),ea=bo("animationiteration"),Jc=bo("animationstart"),Bv=bo("transitionrun"),ud=bo("transitionstart"),$v=bo("transitioncancel"),Qh=bo("transitionend"),_m=new Map,ol="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ol.push("scrollEnd");function ta(s,a){_m.set(s,a),si(a,[s])}var ll=new WeakMap;function fi(s,a){if(typeof s=="object"&&s!==null){var c=ll.get(s);return c!==void 0?c:(a={value:s,source:a,stack:ar(a)},ll.set(s,a),a)}return{value:s,source:a,stack:ar(a)}}var pi=[],Zl=0,na=0;function eu(){for(var s=Zl,a=na=Zl=0;a<s;){var c=pi[a];pi[a++]=null;var m=pi[a];pi[a++]=null;var S=pi[a];pi[a++]=null;var E=pi[a];if(pi[a++]=null,m!==null&&S!==null){var H=m.pending;H===null?S.next=S:(S.next=H.next,H.next=S),m.pending=S}E!==0&&nu(c,S,E)}}function tu(s,a,c,m){pi[Zl++]=s,pi[Zl++]=a,pi[Zl++]=c,pi[Zl++]=m,na|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function cl(s,a,c,m){return tu(s,a,c,m),So(s)}function Xl(s,a){return tu(s,null,null,a),So(s)}function nu(s,a,c){s.lanes|=c;var m=s.alternate;m!==null&&(m.lanes|=c);for(var S=!1,E=s.return;E!==null;)E.childLanes|=c,m=E.alternate,m!==null&&(m.childLanes|=c),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(S=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,S&&a!==null&&(S=31-pt(c),s=E.hiddenUpdates,m=s[S],m===null?s[S]=[a]:m.push(a),a.lane=c|536870912),E):null}function So(s){if(50<Sf)throw Sf=0,L0=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ul={};function Tm(s,a,c,m){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(s,a,c,m){return new Tm(s,a,c,m)}function dd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function wa(s,a){var c=s.alternate;return c===null?(c=mi(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Jh(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function ru(s,a,c,m,S,E){var H=0;if(m=s,typeof s=="function")dd(s)&&(H=1);else if(typeof s=="string")H=yI(s,c,Y.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ae:return s=mi(31,c,a,S),s.elementType=ae,s.lanes=E,s;case C:return wo(c.children,S,E,a);case _:H=8,S|=24;break;case A:return s=mi(12,c,a,S|2),s.elementType=A,s.lanes=E,s;case z:return s=mi(13,c,a,S),s.elementType=z,s.lanes=E,s;case I:return s=mi(19,c,a,S),s.elementType=I,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:case M:H=10;break e;case P:H=9;break e;case N:H=11;break e;case V:H=14;break e;case $:H=16,m=null;break e}H=29,c=Error(i(130,s===null?"null":typeof s,"")),m=null}return a=mi(H,c,a,S),a.elementType=s,a.type=m,a.lanes=E,a}function wo(s,a,c,m){return s=mi(7,s,m,a),s.lanes=c,s}function ef(s,a,c){return s=mi(6,s,null,a),s.lanes=c,s}function hd(s,a,c){return a=mi(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var dl=[],Kl=0,o=null,h=0,j=[],T=0,O=null,K=1,xe="";function ze(s,a){dl[Kl++]=h,dl[Kl++]=o,o=s,h=a}function Fe(s,a,c){j[T++]=K,j[T++]=xe,j[T++]=O,O=s;var m=K;s=xe;var S=32-pt(m)-1;m&=~(1<<S),c+=1;var E=32-pt(a)+S;if(30<E){var H=S-S%5;E=(m&(1<<H)-1).toString(32),m>>=H,S-=H,K=1<<32-pt(a)+S|c<<S|m,xe=E+s}else K=1<<E|c<<S|m,xe=s}function st(s){s.return!==null&&(ze(s,1),Fe(s,1,0))}function Ct(s){for(;s===o;)o=dl[--Kl],dl[Kl]=null,h=dl[--Kl],dl[Kl]=null;for(;s===O;)O=j[--T],j[T]=null,xe=j[--T],j[T]=null,K=j[--T],j[T]=null}var Bt=null,Wt=null,un=!1,yr=null,Ir=!1,Es=Error(i(519));function Ti(s){var a=Error(i(418,""));throw Jl(fi(a,s)),Es}function Am(s){var a=s.stateNode,c=s.type,m=s.memoizedProps;switch(a[Er]=s,a[rs]=m,c){case"dialog":In("cancel",a),In("close",a);break;case"iframe":case"object":case"embed":In("load",a);break;case"video":case"audio":for(c=0;c<Cf.length;c++)In(Cf[c],a);break;case"source":In("error",a);break;case"img":case"image":case"link":In("error",a),In("load",a);break;case"details":In("toggle",a);break;case"input":In("invalid",a),go(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Wi(a);break;case"select":In("invalid",a);break;case"textarea":In("invalid",a),Yi(a,m.value,m.defaultValue,m.children),Wi(a)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||m.suppressHydrationWarning===!0||jE(a.textContent,c)?(m.popover!=null&&(In("beforetoggle",a),In("toggle",a)),m.onScroll!=null&&In("scroll",a),m.onScrollEnd!=null&&In("scrollend",a),m.onClick!=null&&(a.onclick=ug),a=!0):a=!1,a||Ti(s)}function Rm(s){for(Bt=s.return;Bt;)switch(Bt.tag){case 5:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:Bt=Bt.return}}function su(s){if(s!==Bt)return!1;if(!un)return Rm(s),un=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||J0(s.type,s.memoizedProps)),c=!c),c&&Wt&&Ti(s),Rm(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(a===0){Wt=ro(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;s=s.nextSibling}Wt=null}}else a===27?(a=Wt,pc(s.type)?(s=ry,ry=null,Wt=s):Wt=a):Wt=Bt?ro(s.stateNode.nextSibling):null;return!0}function Ql(){Wt=Bt=null,un=!1}function km(){var s=yr;return s!==null&&(ki===null?ki=s:ki.push.apply(ki,s),yr=null),s}function Jl(s){yr===null?yr=[s]:yr.push(s)}var Tr=fe(null),Ca=null,eo=null;function Co(s,a,c){R(Tr,a._currentValue),a._currentValue=c}function to(s){s._currentValue=Tr.current,te(Tr)}function iu(s,a,c){for(;s!==null;){var m=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),s===c)break;s=s.return}}function fd(s,a,c,m){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var E=S.dependencies;if(E!==null){var H=S.child;E=E.firstContext;e:for(;E!==null;){var ne=E;E=S;for(var ve=0;ve<a.length;ve++)if(ne.context===a[ve]){E.lanes|=c,ne=E.alternate,ne!==null&&(ne.lanes|=c),iu(E.return,c,s),m||(H=null);break e}E=ne.next}}else if(S.tag===18){if(H=S.return,H===null)throw Error(i(341));H.lanes|=c,E=H.alternate,E!==null&&(E.lanes|=c),iu(H,c,s),H=null}else H=S.child;if(H!==null)H.return=S;else for(H=S;H!==null;){if(H===s){H=null;break}if(S=H.sibling,S!==null){S.return=H.return,H=S;break}H=H.return}S=H}}function au(s,a,c,m){s=null;for(var S=a,E=!1;S!==null;){if(!E){if((S.flags&524288)!==0)E=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var H=S.alternate;if(H===null)throw Error(i(387));if(H=H.memoizedProps,H!==null){var ne=S.type;di(S.pendingProps.value,H.value)||(s!==null?s.push(ne):s=[ne])}}else if(S===We.current){if(H=S.alternate,H===null)throw Error(i(387));H.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(kf):s=[kf])}S=S.return}s!==null&&fd(a,s,c,m),a.flags|=262144}function Dm(s){for(s=s.firstContext;s!==null;){if(!di(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ou(s){Ca=s,eo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function qs(s){return aw(Ca,s)}function Pm(s,a){return Ca===null&&ou(s),aw(s,a)}function aw(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},eo===null){if(s===null)throw Error(i(308));eo=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else eo=eo.next=a;return c}var vz=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,m){s.push(m)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},yz=t.unstable_scheduleCallback,jz=t.unstable_NormalPriority,fs={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fv(){return{controller:new vz,data:new Map,refCount:0}}function tf(s){s.refCount--,s.refCount===0&&yz(jz,function(){s.controller.abort()})}var nf=null,Vv=0,pd=0,md=null;function bz(s,a){if(nf===null){var c=nf=[];Vv=0,pd=H0(),md={status:"pending",value:void 0,then:function(m){c.push(m)}}}return Vv++,a.then(ow,ow),a}function ow(){if(--Vv===0&&nf!==null){md!==null&&(md.status="fulfilled");var s=nf;nf=null,pd=0,md=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Sz(s,a){var c=[],m={status:"pending",value:null,reason:null,then:function(S){c.push(S)}};return s.then(function(){m.status="fulfilled",m.value=a;for(var S=0;S<c.length;S++)(0,c[S])(a)},function(S){for(m.status="rejected",m.reason=S,S=0;S<c.length;S++)(0,c[S])(void 0)}),m}var lw=G.S;G.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&bz(s,a),lw!==null&&lw(s,a)};var lu=fe(null);function Uv(){var s=lu.current;return s!==null?s:jr.pooledCache}function Mm(s,a){a===null?R(lu,lu.current):R(lu,a.pool)}function cw(){var s=Uv();return s===null?null:{parent:fs._currentValue,pool:s}}var rf=Error(i(460)),uw=Error(i(474)),zm=Error(i(542)),Hv={then:function(){}};function dw(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Im(){}function hw(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(Im,Im),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,pw(s),s;default:if(typeof a.status=="string")a.then(Im,Im);else{if(s=jr,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(m){if(a.status==="pending"){var S=a;S.status="fulfilled",S.value=m}},function(m){if(a.status==="pending"){var S=a;S.status="rejected",S.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,pw(s),s}throw sf=a,rf}}var sf=null;function fw(){if(sf===null)throw Error(i(459));var s=sf;return sf=null,s}function pw(s){if(s===rf||s===zm)throw Error(i(483))}var ec=!1;function Wv(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qv(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function tc(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function nc(s,a,c){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(cr&2)!==0){var S=m.pending;return S===null?a.next=a:(a.next=S.next,S.next=a),m.pending=a,a=So(s),nu(s,null,c),a}return tu(s,m,a,c),So(s)}function af(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var m=a.lanes;m&=s.pendingLanes,c|=m,a.lanes=c,ns(s,c)}}function Gv(s,a){var c=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var S=null,E=null;if(c=c.firstBaseUpdate,c!==null){do{var H={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};E===null?S=E=H:E=E.next=H,c=c.next}while(c!==null);E===null?S=E=a:E=E.next=a}else S=E=a;c={baseState:m.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var Yv=!1;function of(){if(Yv){var s=md;if(s!==null)throw s}}function lf(s,a,c,m){Yv=!1;var S=s.updateQueue;ec=!1;var E=S.firstBaseUpdate,H=S.lastBaseUpdate,ne=S.shared.pending;if(ne!==null){S.shared.pending=null;var ve=ne,Le=ve.next;ve.next=null,H===null?E=Le:H.next=Le,H=ve;var Ye=s.alternate;Ye!==null&&(Ye=Ye.updateQueue,ne=Ye.lastBaseUpdate,ne!==H&&(ne===null?Ye.firstBaseUpdate=Le:ne.next=Le,Ye.lastBaseUpdate=ve))}if(E!==null){var et=S.baseState;H=0,Ye=Le=ve=null,ne=E;do{var Oe=ne.lane&-536870913,$e=Oe!==ne.lane;if($e?(Gn&Oe)===Oe:(m&Oe)===Oe){Oe!==0&&Oe===pd&&(Yv=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var an=s,tn=ne;Oe=a;var pr=c;switch(tn.tag){case 1:if(an=tn.payload,typeof an=="function"){et=an.call(pr,et,Oe);break e}et=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=tn.payload,Oe=typeof an=="function"?an.call(pr,et,Oe):an,Oe==null)break e;et=x({},et,Oe);break e;case 2:ec=!0}}Oe=ne.callback,Oe!==null&&(s.flags|=64,$e&&(s.flags|=8192),$e=S.callbacks,$e===null?S.callbacks=[Oe]:$e.push(Oe))}else $e={lane:Oe,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ye===null?(Le=Ye=$e,ve=et):Ye=Ye.next=$e,H|=Oe;if(ne=ne.next,ne===null){if(ne=S.shared.pending,ne===null)break;$e=ne,ne=$e.next,$e.next=null,S.lastBaseUpdate=$e,S.shared.pending=null}}while(!0);Ye===null&&(ve=et),S.baseState=ve,S.firstBaseUpdate=Le,S.lastBaseUpdate=Ye,E===null&&(S.shared.lanes=0),uc|=H,s.lanes=H,s.memoizedState=et}}function mw(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function gw(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)mw(c[s],a)}var gd=fe(null),Nm=fe(0);function xw(s,a){s=vl,R(Nm,s),R(gd,a),vl=s|a.baseLanes}function Zv(){R(Nm,vl),R(gd,gd.current)}function Xv(){vl=Nm.current,te(gd),te(Nm)}var rc=0,_n=null,hr=null,os=null,Lm=!1,xd=!1,cu=!1,Om=0,cf=0,vd=null,wz=0;function Zr(){throw Error(i(321))}function Kv(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!di(s[c],a[c]))return!1;return!0}function Qv(s,a,c,m,S,E){return rc=E,_n=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=s===null||s.memoizedState===null?eC:tC,cu=!1,E=c(m,S),cu=!1,xd&&(E=yw(a,c,m,S)),vw(s),E}function vw(s){G.H=Hm;var a=hr!==null&&hr.next!==null;if(rc=0,os=hr=_n=null,Lm=!1,cf=0,vd=null,a)throw Error(i(300));s===null||_s||(s=s.dependencies,s!==null&&Dm(s)&&(_s=!0))}function yw(s,a,c,m){_n=s;var S=0;do{if(xd&&(vd=null),cf=0,xd=!1,25<=S)throw Error(i(301));if(S+=1,os=hr=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}G.H=kz,E=a(c,m)}while(xd);return E}function Cz(){var s=G.H,a=s.useState()[0];return a=typeof a.then=="function"?uf(a):a,s=s.useState()[0],(hr!==null?hr.memoizedState:null)!==s&&(_n.flags|=1024),a}function Jv(){var s=Om!==0;return Om=0,s}function e0(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function t0(s){if(Lm){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Lm=!1}rc=0,os=hr=_n=null,xd=!1,cf=Om=0,vd=null}function Ai(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return os===null?_n.memoizedState=os=s:os=os.next=s,os}function ls(){if(hr===null){var s=_n.alternate;s=s!==null?s.memoizedState:null}else s=hr.next;var a=os===null?_n.memoizedState:os.next;if(a!==null)os=a,hr=s;else{if(s===null)throw _n.alternate===null?Error(i(467)):Error(i(310));hr=s,s={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},os===null?_n.memoizedState=os=s:os=os.next=s}return os}function n0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uf(s){var a=cf;return cf+=1,vd===null&&(vd=[]),s=hw(vd,s,a),a=_n,(os===null?a.memoizedState:os.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?eC:tC),s}function Bm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return uf(s);if(s.$$typeof===M)return qs(s)}throw Error(i(438,String(s)))}function r0(s){var a=null,c=_n.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var m=_n.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(S){return S.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=n0(),_n.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),m=0;m<s;m++)c[m]=he;return a.index++,c}function hl(s,a){return typeof a=="function"?a(s):a}function $m(s){var a=ls();return s0(a,hr,s)}function s0(s,a,c){var m=s.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=c;var S=s.baseQueue,E=m.pending;if(E!==null){if(S!==null){var H=S.next;S.next=E.next,E.next=H}a.baseQueue=S=E,m.pending=null}if(E=s.baseState,S===null)s.memoizedState=E;else{a=S.next;var ne=H=null,ve=null,Le=a,Ye=!1;do{var et=Le.lane&-536870913;if(et!==Le.lane?(Gn&et)===et:(rc&et)===et){var Oe=Le.revertLane;if(Oe===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),et===pd&&(Ye=!0);else if((rc&Oe)===Oe){Le=Le.next,Oe===pd&&(Ye=!0);continue}else et={lane:0,revertLane:Le.revertLane,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},ve===null?(ne=ve=et,H=E):ve=ve.next=et,_n.lanes|=Oe,uc|=Oe;et=Le.action,cu&&c(E,et),E=Le.hasEagerState?Le.eagerState:c(E,et)}else Oe={lane:et,revertLane:Le.revertLane,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},ve===null?(ne=ve=Oe,H=E):ve=ve.next=Oe,_n.lanes|=et,uc|=et;Le=Le.next}while(Le!==null&&Le!==a);if(ve===null?H=E:ve.next=ne,!di(E,s.memoizedState)&&(_s=!0,Ye&&(c=md,c!==null)))throw c;s.memoizedState=E,s.baseState=H,s.baseQueue=ve,m.lastRenderedState=E}return S===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function i0(s){var a=ls(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var m=c.dispatch,S=c.pending,E=a.memoizedState;if(S!==null){c.pending=null;var H=S=S.next;do E=s(E,H.action),H=H.next;while(H!==S);di(E,a.memoizedState)||(_s=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),c.lastRenderedState=E}return[E,m]}function jw(s,a,c){var m=_n,S=ls(),E=un;if(E){if(c===void 0)throw Error(i(407));c=c()}else c=a();var H=!di((hr||S).memoizedState,c);H&&(S.memoizedState=c,_s=!0),S=S.queue;var ne=ww.bind(null,m,S,s);if(df(2048,8,ne,[s]),S.getSnapshot!==a||H||os!==null&&os.memoizedState.tag&1){if(m.flags|=2048,yd(9,Fm(),Sw.bind(null,m,S,c,a),null),jr===null)throw Error(i(349));E||(rc&124)!==0||bw(m,a,c)}return c}function bw(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=_n.updateQueue,a===null?(a=n0(),_n.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function Sw(s,a,c,m){a.value=c,a.getSnapshot=m,Cw(a)&&Ew(s)}function ww(s,a,c){return c(function(){Cw(a)&&Ew(s)})}function Cw(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!di(s,c)}catch{return!0}}function Ew(s){var a=Xl(s,2);a!==null&&oa(a,s,2)}function a0(s){var a=Ai();if(typeof s=="function"){var c=s;if(s=c(),cu){Xe(!0);try{c()}finally{Xe(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:s},a}function _w(s,a,c,m){return s.baseState=c,s0(s,hr,typeof m=="function"?m:hl)}function Ez(s,a,c,m,S){if(Um(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){E.listeners.push(H)}};G.T!==null?c(!0):E.isTransition=!1,m(E),c=a.pending,c===null?(E.next=a.pending=E,Tw(a,E)):(E.next=c.next,a.pending=c.next=E)}}function Tw(s,a){var c=a.action,m=a.payload,S=s.state;if(a.isTransition){var E=G.T,H={};G.T=H;try{var ne=c(S,m),ve=G.S;ve!==null&&ve(H,ne),Aw(s,a,ne)}catch(Le){o0(s,a,Le)}finally{G.T=E}}else try{E=c(S,m),Aw(s,a,E)}catch(Le){o0(s,a,Le)}}function Aw(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){Rw(s,a,m)},function(m){return o0(s,a,m)}):Rw(s,a,c)}function Rw(s,a,c){a.status="fulfilled",a.value=c,kw(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,Tw(s,c)))}function o0(s,a,c){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=c,kw(a),a=a.next;while(a!==m)}s.action=null}function kw(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Dw(s,a){return a}function Pw(s,a){if(un){var c=jr.formState;if(c!==null){e:{var m=_n;if(un){if(Wt){t:{for(var S=Wt,E=Ir;S.nodeType!==8;){if(!E){S=null;break t}if(S=ro(S.nextSibling),S===null){S=null;break t}}E=S.data,S=E==="F!"||E==="F"?S:null}if(S){Wt=ro(S.nextSibling),m=S.data==="F!";break e}}Ti(m)}m=!1}m&&(a=c[0])}}return c=Ai(),c.memoizedState=c.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dw,lastRenderedState:a},c.queue=m,c=Kw.bind(null,_n,m),m.dispatch=c,m=a0(!1),E=h0.bind(null,_n,!1,m.queue),m=Ai(),S={state:a,dispatch:null,action:s,pending:null},m.queue=S,c=Ez.bind(null,_n,S,E,c),S.dispatch=c,m.memoizedState=s,[a,c,!1]}function Mw(s){var a=ls();return zw(a,hr,s)}function zw(s,a,c){if(a=s0(s,a,Dw)[0],s=$m(hl)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=uf(a)}catch(H){throw H===rf?zm:H}else m=a;a=ls();var S=a.queue,E=S.dispatch;return c!==a.memoizedState&&(_n.flags|=2048,yd(9,Fm(),_z.bind(null,S,c),null)),[m,E,s]}function _z(s,a){s.action=a}function Iw(s){var a=ls(),c=hr;if(c!==null)return zw(a,c,s);ls(),a=a.memoizedState,c=ls();var m=c.queue.dispatch;return c.memoizedState=s,[a,m,!1]}function yd(s,a,c,m){return s={tag:s,create:c,deps:m,inst:a,next:null},a=_n.updateQueue,a===null&&(a=n0(),_n.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(m=c.next,c.next=s,s.next=m,a.lastEffect=s),s}function Fm(){return{destroy:void 0,resource:void 0}}function Nw(){return ls().memoizedState}function Vm(s,a,c,m){var S=Ai();m=m===void 0?null:m,_n.flags|=s,S.memoizedState=yd(1|a,Fm(),c,m)}function df(s,a,c,m){var S=ls();m=m===void 0?null:m;var E=S.memoizedState.inst;hr!==null&&m!==null&&Kv(m,hr.memoizedState.deps)?S.memoizedState=yd(a,E,c,m):(_n.flags|=s,S.memoizedState=yd(1|a,E,c,m))}function Lw(s,a){Vm(8390656,8,s,a)}function Ow(s,a){df(2048,8,s,a)}function Bw(s,a){return df(4,2,s,a)}function $w(s,a){return df(4,4,s,a)}function Fw(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Vw(s,a,c){c=c!=null?c.concat([s]):null,df(4,4,Fw.bind(null,a,s),c)}function l0(){}function Uw(s,a){var c=ls();a=a===void 0?null:a;var m=c.memoizedState;return a!==null&&Kv(a,m[1])?m[0]:(c.memoizedState=[s,a],s)}function Hw(s,a){var c=ls();a=a===void 0?null:a;var m=c.memoizedState;if(a!==null&&Kv(a,m[1]))return m[0];if(m=s(),cu){Xe(!0);try{s()}finally{Xe(!1)}}return c.memoizedState=[m,a],m}function c0(s,a,c){return c===void 0||(rc&1073741824)!==0?s.memoizedState=a:(s.memoizedState=c,s=GC(),_n.lanes|=s,uc|=s,c)}function Ww(s,a,c,m){return di(c,a)?c:gd.current!==null?(s=c0(s,c,m),di(s,a)||(_s=!0),s):(rc&42)===0?(_s=!0,s.memoizedState=c):(s=GC(),_n.lanes|=s,uc|=s,a)}function qw(s,a,c,m,S){var E=U.p;U.p=E!==0&&8>E?E:8;var H=G.T,ne={};G.T=ne,h0(s,!1,a,c);try{var ve=S(),Le=G.S;if(Le!==null&&Le(ne,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Ye=Sz(ve,m);hf(s,a,Ye,aa(s))}else hf(s,a,m,aa(s))}catch(et){hf(s,a,{then:function(){},status:"rejected",reason:et},aa())}finally{U.p=E,G.T=H}}function Tz(){}function u0(s,a,c,m){if(s.tag!==5)throw Error(i(476));var S=Gw(s).queue;qw(s,S,a,W,c===null?Tz:function(){return Yw(s),c(m)})}function Gw(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:W},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Yw(s){var a=Gw(s).next.queue;hf(s,a,{},aa())}function d0(){return qs(kf)}function Zw(){return ls().memoizedState}function Xw(){return ls().memoizedState}function Az(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=aa();s=tc(c);var m=nc(a,s,c);m!==null&&(oa(m,a,c),af(m,a,c)),a={cache:Fv()},s.payload=a;return}a=a.return}}function Rz(s,a,c){var m=aa();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Um(s)?Qw(a,c):(c=cl(s,a,c,m),c!==null&&(oa(c,s,m),Jw(c,a,m)))}function Kw(s,a,c){var m=aa();hf(s,a,c,m)}function hf(s,a,c,m){var S={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Um(s))Qw(a,S);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var H=a.lastRenderedState,ne=E(H,c);if(S.hasEagerState=!0,S.eagerState=ne,di(ne,H))return tu(s,a,S,0),jr===null&&eu(),!1}catch{}finally{}if(c=cl(s,a,S,m),c!==null)return oa(c,s,m),Jw(c,a,m),!0}return!1}function h0(s,a,c,m){if(m={lane:2,revertLane:H0(),action:m,hasEagerState:!1,eagerState:null,next:null},Um(s)){if(a)throw Error(i(479))}else a=cl(s,c,m,2),a!==null&&oa(a,s,2)}function Um(s){var a=s.alternate;return s===_n||a!==null&&a===_n}function Qw(s,a){xd=Lm=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function Jw(s,a,c){if((c&4194048)!==0){var m=a.lanes;m&=s.pendingLanes,c|=m,a.lanes=c,ns(s,c)}}var Hm={readContext:qs,use:Bm,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr},eC={readContext:qs,use:Bm,useCallback:function(s,a){return Ai().memoizedState=[s,a===void 0?null:a],s},useContext:qs,useEffect:Lw,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Vm(4194308,4,Fw.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Vm(4194308,4,s,a)},useInsertionEffect:function(s,a){Vm(4,2,s,a)},useMemo:function(s,a){var c=Ai();a=a===void 0?null:a;var m=s();if(cu){Xe(!0);try{s()}finally{Xe(!1)}}return c.memoizedState=[m,a],m},useReducer:function(s,a,c){var m=Ai();if(c!==void 0){var S=c(a);if(cu){Xe(!0);try{c(a)}finally{Xe(!1)}}}else S=a;return m.memoizedState=m.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},m.queue=s,s=s.dispatch=Rz.bind(null,_n,s),[m.memoizedState,s]},useRef:function(s){var a=Ai();return s={current:s},a.memoizedState=s},useState:function(s){s=a0(s);var a=s.queue,c=Kw.bind(null,_n,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:l0,useDeferredValue:function(s,a){var c=Ai();return c0(c,s,a)},useTransition:function(){var s=a0(!1);return s=qw.bind(null,_n,s.queue,!0,!1),Ai().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var m=_n,S=Ai();if(un){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),jr===null)throw Error(i(349));(Gn&124)!==0||bw(m,a,c)}S.memoizedState=c;var E={value:c,getSnapshot:a};return S.queue=E,Lw(ww.bind(null,m,E,s),[s]),m.flags|=2048,yd(9,Fm(),Sw.bind(null,m,E,c,a),null),c},useId:function(){var s=Ai(),a=jr.identifierPrefix;if(un){var c=xe,m=K;c=(m&~(1<<32-pt(m)-1)).toString(32)+c,a=""+a+"R"+c,c=Om++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=wz++,a=""+a+"r"+c.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:d0,useFormState:Pw,useActionState:Pw,useOptimistic:function(s){var a=Ai();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=h0.bind(null,_n,!0,c),c.dispatch=a,[s,a]},useMemoCache:r0,useCacheRefresh:function(){return Ai().memoizedState=Az.bind(null,_n)}},tC={readContext:qs,use:Bm,useCallback:Uw,useContext:qs,useEffect:Ow,useImperativeHandle:Vw,useInsertionEffect:Bw,useLayoutEffect:$w,useMemo:Hw,useReducer:$m,useRef:Nw,useState:function(){return $m(hl)},useDebugValue:l0,useDeferredValue:function(s,a){var c=ls();return Ww(c,hr.memoizedState,s,a)},useTransition:function(){var s=$m(hl)[0],a=ls().memoizedState;return[typeof s=="boolean"?s:uf(s),a]},useSyncExternalStore:jw,useId:Zw,useHostTransitionStatus:d0,useFormState:Mw,useActionState:Mw,useOptimistic:function(s,a){var c=ls();return _w(c,hr,s,a)},useMemoCache:r0,useCacheRefresh:Xw},kz={readContext:qs,use:Bm,useCallback:Uw,useContext:qs,useEffect:Ow,useImperativeHandle:Vw,useInsertionEffect:Bw,useLayoutEffect:$w,useMemo:Hw,useReducer:i0,useRef:Nw,useState:function(){return i0(hl)},useDebugValue:l0,useDeferredValue:function(s,a){var c=ls();return hr===null?c0(c,s,a):Ww(c,hr.memoizedState,s,a)},useTransition:function(){var s=i0(hl)[0],a=ls().memoizedState;return[typeof s=="boolean"?s:uf(s),a]},useSyncExternalStore:jw,useId:Zw,useHostTransitionStatus:d0,useFormState:Iw,useActionState:Iw,useOptimistic:function(s,a){var c=ls();return hr!==null?_w(c,hr,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:r0,useCacheRefresh:Xw},jd=null,ff=0;function Wm(s){var a=ff;return ff+=1,jd===null&&(jd=[]),hw(jd,s,a)}function pf(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function qm(s,a){throw a.$$typeof===y?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function nC(s){var a=s._init;return a(s._payload)}function rC(s){function a(De,we){if(s){var Ie=De.deletions;Ie===null?(De.deletions=[we],De.flags|=16):Ie.push(we)}}function c(De,we){if(!s)return null;for(;we!==null;)a(De,we),we=we.sibling;return null}function m(De){for(var we=new Map;De!==null;)De.key!==null?we.set(De.key,De):we.set(De.index,De),De=De.sibling;return we}function S(De,we){return De=wa(De,we),De.index=0,De.sibling=null,De}function E(De,we,Ie){return De.index=Ie,s?(Ie=De.alternate,Ie!==null?(Ie=Ie.index,Ie<we?(De.flags|=67108866,we):Ie):(De.flags|=67108866,we)):(De.flags|=1048576,we)}function H(De){return s&&De.alternate===null&&(De.flags|=67108866),De}function ne(De,we,Ie,Ke){return we===null||we.tag!==6?(we=ef(Ie,De.mode,Ke),we.return=De,we):(we=S(we,Ie),we.return=De,we)}function ve(De,we,Ie,Ke){var Ft=Ie.type;return Ft===C?Ye(De,we,Ie.props.children,Ke,Ie.key):we!==null&&(we.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===$&&nC(Ft)===we.type)?(we=S(we,Ie.props),pf(we,Ie),we.return=De,we):(we=ru(Ie.type,Ie.key,Ie.props,null,De.mode,Ke),pf(we,Ie),we.return=De,we)}function Le(De,we,Ie,Ke){return we===null||we.tag!==4||we.stateNode.containerInfo!==Ie.containerInfo||we.stateNode.implementation!==Ie.implementation?(we=hd(Ie,De.mode,Ke),we.return=De,we):(we=S(we,Ie.children||[]),we.return=De,we)}function Ye(De,we,Ie,Ke,Ft){return we===null||we.tag!==7?(we=wo(Ie,De.mode,Ke,Ft),we.return=De,we):(we=S(we,Ie),we.return=De,we)}function et(De,we,Ie){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=ef(""+we,De.mode,Ie),we.return=De,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case b:return Ie=ru(we.type,we.key,we.props,null,De.mode,Ie),pf(Ie,we),Ie.return=De,Ie;case w:return we=hd(we,De.mode,Ie),we.return=De,we;case $:var Ke=we._init;return we=Ke(we._payload),et(De,we,Ie)}if(de(we)||ce(we))return we=wo(we,De.mode,Ie,null),we.return=De,we;if(typeof we.then=="function")return et(De,Wm(we),Ie);if(we.$$typeof===M)return et(De,Pm(De,we),Ie);qm(De,we)}return null}function Oe(De,we,Ie,Ke){var Ft=we!==null?we.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ft!==null?null:ne(De,we,""+Ie,Ke);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:return Ie.key===Ft?ve(De,we,Ie,Ke):null;case w:return Ie.key===Ft?Le(De,we,Ie,Ke):null;case $:return Ft=Ie._init,Ie=Ft(Ie._payload),Oe(De,we,Ie,Ke)}if(de(Ie)||ce(Ie))return Ft!==null?null:Ye(De,we,Ie,Ke,null);if(typeof Ie.then=="function")return Oe(De,we,Wm(Ie),Ke);if(Ie.$$typeof===M)return Oe(De,we,Pm(De,Ie),Ke);qm(De,Ie)}return null}function $e(De,we,Ie,Ke,Ft){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return De=De.get(Ie)||null,ne(we,De,""+Ke,Ft);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case b:return De=De.get(Ke.key===null?Ie:Ke.key)||null,ve(we,De,Ke,Ft);case w:return De=De.get(Ke.key===null?Ie:Ke.key)||null,Le(we,De,Ke,Ft);case $:var kn=Ke._init;return Ke=kn(Ke._payload),$e(De,we,Ie,Ke,Ft)}if(de(Ke)||ce(Ke))return De=De.get(Ie)||null,Ye(we,De,Ke,Ft,null);if(typeof Ke.then=="function")return $e(De,we,Ie,Wm(Ke),Ft);if(Ke.$$typeof===M)return $e(De,we,Ie,Pm(we,Ke),Ft);qm(we,Ke)}return null}function an(De,we,Ie,Ke){for(var Ft=null,kn=null,Gt=we,nn=we=0,As=null;Gt!==null&&nn<Ie.length;nn++){Gt.index>nn?(As=Gt,Gt=null):As=Gt.sibling;var Kn=Oe(De,Gt,Ie[nn],Ke);if(Kn===null){Gt===null&&(Gt=As);break}s&&Gt&&Kn.alternate===null&&a(De,Gt),we=E(Kn,we,nn),kn===null?Ft=Kn:kn.sibling=Kn,kn=Kn,Gt=As}if(nn===Ie.length)return c(De,Gt),un&&ze(De,nn),Ft;if(Gt===null){for(;nn<Ie.length;nn++)Gt=et(De,Ie[nn],Ke),Gt!==null&&(we=E(Gt,we,nn),kn===null?Ft=Gt:kn.sibling=Gt,kn=Gt);return un&&ze(De,nn),Ft}for(Gt=m(Gt);nn<Ie.length;nn++)As=$e(Gt,De,nn,Ie[nn],Ke),As!==null&&(s&&As.alternate!==null&&Gt.delete(As.key===null?nn:As.key),we=E(As,we,nn),kn===null?Ft=As:kn.sibling=As,kn=As);return s&&Gt.forEach(function(yc){return a(De,yc)}),un&&ze(De,nn),Ft}function tn(De,we,Ie,Ke){if(Ie==null)throw Error(i(151));for(var Ft=null,kn=null,Gt=we,nn=we=0,As=null,Kn=Ie.next();Gt!==null&&!Kn.done;nn++,Kn=Ie.next()){Gt.index>nn?(As=Gt,Gt=null):As=Gt.sibling;var yc=Oe(De,Gt,Kn.value,Ke);if(yc===null){Gt===null&&(Gt=As);break}s&&Gt&&yc.alternate===null&&a(De,Gt),we=E(yc,we,nn),kn===null?Ft=yc:kn.sibling=yc,kn=yc,Gt=As}if(Kn.done)return c(De,Gt),un&&ze(De,nn),Ft;if(Gt===null){for(;!Kn.done;nn++,Kn=Ie.next())Kn=et(De,Kn.value,Ke),Kn!==null&&(we=E(Kn,we,nn),kn===null?Ft=Kn:kn.sibling=Kn,kn=Kn);return un&&ze(De,nn),Ft}for(Gt=m(Gt);!Kn.done;nn++,Kn=Ie.next())Kn=$e(Gt,De,nn,Kn.value,Ke),Kn!==null&&(s&&Kn.alternate!==null&&Gt.delete(Kn.key===null?nn:Kn.key),we=E(Kn,we,nn),kn===null?Ft=Kn:kn.sibling=Kn,kn=Kn);return s&&Gt.forEach(function(DI){return a(De,DI)}),un&&ze(De,nn),Ft}function pr(De,we,Ie,Ke){if(typeof Ie=="object"&&Ie!==null&&Ie.type===C&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:e:{for(var Ft=Ie.key;we!==null;){if(we.key===Ft){if(Ft=Ie.type,Ft===C){if(we.tag===7){c(De,we.sibling),Ke=S(we,Ie.props.children),Ke.return=De,De=Ke;break e}}else if(we.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===$&&nC(Ft)===we.type){c(De,we.sibling),Ke=S(we,Ie.props),pf(Ke,Ie),Ke.return=De,De=Ke;break e}c(De,we);break}else a(De,we);we=we.sibling}Ie.type===C?(Ke=wo(Ie.props.children,De.mode,Ke,Ie.key),Ke.return=De,De=Ke):(Ke=ru(Ie.type,Ie.key,Ie.props,null,De.mode,Ke),pf(Ke,Ie),Ke.return=De,De=Ke)}return H(De);case w:e:{for(Ft=Ie.key;we!==null;){if(we.key===Ft)if(we.tag===4&&we.stateNode.containerInfo===Ie.containerInfo&&we.stateNode.implementation===Ie.implementation){c(De,we.sibling),Ke=S(we,Ie.children||[]),Ke.return=De,De=Ke;break e}else{c(De,we);break}else a(De,we);we=we.sibling}Ke=hd(Ie,De.mode,Ke),Ke.return=De,De=Ke}return H(De);case $:return Ft=Ie._init,Ie=Ft(Ie._payload),pr(De,we,Ie,Ke)}if(de(Ie))return an(De,we,Ie,Ke);if(ce(Ie)){if(Ft=ce(Ie),typeof Ft!="function")throw Error(i(150));return Ie=Ft.call(Ie),tn(De,we,Ie,Ke)}if(typeof Ie.then=="function")return pr(De,we,Wm(Ie),Ke);if(Ie.$$typeof===M)return pr(De,we,Pm(De,Ie),Ke);qm(De,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,we!==null&&we.tag===6?(c(De,we.sibling),Ke=S(we,Ie),Ke.return=De,De=Ke):(c(De,we),Ke=ef(Ie,De.mode,Ke),Ke.return=De,De=Ke),H(De)):c(De,we)}return function(De,we,Ie,Ke){try{ff=0;var Ft=pr(De,we,Ie,Ke);return jd=null,Ft}catch(Gt){if(Gt===rf||Gt===zm)throw Gt;var kn=mi(29,Gt,null,De.mode);return kn.lanes=Ke,kn.return=De,kn}finally{}}}var bd=rC(!0),sC=rC(!1),Ea=fe(null),Eo=null;function sc(s){var a=s.alternate;R(ps,ps.current&1),R(Ea,s),Eo===null&&(a===null||gd.current!==null||a.memoizedState!==null)&&(Eo=s)}function iC(s){if(s.tag===22){if(R(ps,ps.current),R(Ea,s),Eo===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Eo=s)}}else ic()}function ic(){R(ps,ps.current),R(Ea,Ea.current)}function fl(s){te(Ea),Eo===s&&(Eo=null),te(ps)}var ps=fe(0);function Gm(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||ny(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function f0(s,a,c,m){a=s.memoizedState,c=c(m,a),c=c==null?a:x({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var p0={enqueueSetState:function(s,a,c){s=s._reactInternals;var m=aa(),S=tc(m);S.payload=a,c!=null&&(S.callback=c),a=nc(s,S,m),a!==null&&(oa(a,s,m),af(a,s,m))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var m=aa(),S=tc(m);S.tag=1,S.payload=a,c!=null&&(S.callback=c),a=nc(s,S,m),a!==null&&(oa(a,s,m),af(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=aa(),m=tc(c);m.tag=2,a!=null&&(m.callback=a),a=nc(s,m,c),a!==null&&(oa(a,s,c),af(a,s,c))}};function aC(s,a,c,m,S,E,H){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,H):a.prototype&&a.prototype.isPureReactComponent?!hi(c,m)||!hi(S,E):!0}function oC(s,a,c,m){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,m),a.state!==s&&p0.enqueueReplaceState(a,a.state,null)}function uu(s,a){var c=a;if("ref"in a){c={};for(var m in a)m!=="ref"&&(c[m]=a[m])}if(s=s.defaultProps){c===a&&(c=x({},c));for(var S in s)c[S]===void 0&&(c[S]=s[S])}return c}var Ym=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function lC(s){Ym(s)}function cC(s){console.error(s)}function uC(s){Ym(s)}function Zm(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function dC(s,a,c){try{var m=s.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function m0(s,a,c){return c=tc(c),c.tag=3,c.payload={element:null},c.callback=function(){Zm(s,a)},c}function hC(s){return s=tc(s),s.tag=3,s}function fC(s,a,c,m){var S=c.type.getDerivedStateFromError;if(typeof S=="function"){var E=m.value;s.payload=function(){return S(E)},s.callback=function(){dC(a,c,m)}}var H=c.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(s.callback=function(){dC(a,c,m),typeof S!="function"&&(dc===null?dc=new Set([this]):dc.add(this));var ne=m.stack;this.componentDidCatch(m.value,{componentStack:ne!==null?ne:""})})}function Dz(s,a,c,m,S){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=c.alternate,a!==null&&au(a,c,S,!0),c=Ea.current,c!==null){switch(c.tag){case 13:return Eo===null?B0():c.alternate===null&&Vr===0&&(Vr=3),c.flags&=-257,c.flags|=65536,c.lanes=S,m===Hv?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([m]):a.add(m),F0(s,m,S)),!1;case 22:return c.flags|=65536,m===Hv?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([m]):c.add(m)),F0(s,m,S)),!1}throw Error(i(435,c.tag))}return F0(s,m,S),B0(),!1}if(un)return a=Ea.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=S,m!==Es&&(s=Error(i(422),{cause:m}),Jl(fi(s,c)))):(m!==Es&&(a=Error(i(423),{cause:m}),Jl(fi(a,c))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,m=fi(m,c),S=m0(s.stateNode,m,S),Gv(s,S),Vr!==4&&(Vr=2)),!1;var E=Error(i(520),{cause:m});if(E=fi(E,c),bf===null?bf=[E]:bf.push(E),Vr!==4&&(Vr=2),a===null)return!0;m=fi(m,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=S&-S,c.lanes|=s,s=m0(c.stateNode,m,s),Gv(c,s),!1;case 1:if(a=c.type,E=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(dc===null||!dc.has(E))))return c.flags|=65536,S&=-S,c.lanes|=S,S=hC(S),fC(S,s,c,m),Gv(c,S),!1}c=c.return}while(c!==null);return!1}var pC=Error(i(461)),_s=!1;function Ps(s,a,c,m){a.child=s===null?sC(a,null,c,m):bd(a,s.child,c,m)}function mC(s,a,c,m,S){c=c.render;var E=a.ref;if("ref"in m){var H={};for(var ne in m)ne!=="ref"&&(H[ne]=m[ne])}else H=m;return ou(a),m=Qv(s,a,c,H,E,S),ne=Jv(),s!==null&&!_s?(e0(s,a,S),pl(s,a,S)):(un&&ne&&st(a),a.flags|=1,Ps(s,a,m,S),a.child)}function gC(s,a,c,m,S){if(s===null){var E=c.type;return typeof E=="function"&&!dd(E)&&E.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=E,xC(s,a,E,m,S)):(s=ru(c.type,null,m,a,a.mode,S),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!w0(s,S)){var H=E.memoizedProps;if(c=c.compare,c=c!==null?c:hi,c(H,m)&&s.ref===a.ref)return pl(s,a,S)}return a.flags|=1,s=wa(E,m),s.ref=a.ref,s.return=a,a.child=s}function xC(s,a,c,m,S){if(s!==null){var E=s.memoizedProps;if(hi(E,m)&&s.ref===a.ref)if(_s=!1,a.pendingProps=m=E,w0(s,S))(s.flags&131072)!==0&&(_s=!0);else return a.lanes=s.lanes,pl(s,a,S)}return g0(s,a,c,m,S)}function vC(s,a,c){var m=a.pendingProps,S=m.children,E=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=E!==null?E.baseLanes|c:c,s!==null){for(S=a.child=s.child,E=0;S!==null;)E=E|S.lanes|S.childLanes,S=S.sibling;a.childLanes=E&~m}else a.childLanes=0,a.child=null;return yC(s,a,m,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Mm(a,E!==null?E.cachePool:null),E!==null?xw(a,E):Zv(),iC(a);else return a.lanes=a.childLanes=536870912,yC(s,a,E!==null?E.baseLanes|c:c,c)}else E!==null?(Mm(a,E.cachePool),xw(a,E),ic(),a.memoizedState=null):(s!==null&&Mm(a,null),Zv(),ic());return Ps(s,a,S,c),a.child}function yC(s,a,c,m){var S=Uv();return S=S===null?null:{parent:fs._currentValue,pool:S},a.memoizedState={baseLanes:c,cachePool:S},s!==null&&Mm(a,null),Zv(),iC(a),s!==null&&au(s,a,m,!0),null}function Xm(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function g0(s,a,c,m,S){return ou(a),c=Qv(s,a,c,m,void 0,S),m=Jv(),s!==null&&!_s?(e0(s,a,S),pl(s,a,S)):(un&&m&&st(a),a.flags|=1,Ps(s,a,c,S),a.child)}function jC(s,a,c,m,S,E){return ou(a),a.updateQueue=null,c=yw(a,m,c,S),vw(s),m=Jv(),s!==null&&!_s?(e0(s,a,E),pl(s,a,E)):(un&&m&&st(a),a.flags|=1,Ps(s,a,c,E),a.child)}function bC(s,a,c,m,S){if(ou(a),a.stateNode===null){var E=ul,H=c.contextType;typeof H=="object"&&H!==null&&(E=qs(H)),E=new c(m,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=p0,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=m,E.state=a.memoizedState,E.refs={},Wv(a),H=c.contextType,E.context=typeof H=="object"&&H!==null?qs(H):ul,E.state=a.memoizedState,H=c.getDerivedStateFromProps,typeof H=="function"&&(f0(a,c,H,m),E.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(H=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),H!==E.state&&p0.enqueueReplaceState(E,E.state,null),lf(a,m,E,S),of(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(s===null){E=a.stateNode;var ne=a.memoizedProps,ve=uu(c,ne);E.props=ve;var Le=E.context,Ye=c.contextType;H=ul,typeof Ye=="object"&&Ye!==null&&(H=qs(Ye));var et=c.getDerivedStateFromProps;Ye=typeof et=="function"||typeof E.getSnapshotBeforeUpdate=="function",ne=a.pendingProps!==ne,Ye||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(ne||Le!==H)&&oC(a,E,m,H),ec=!1;var Oe=a.memoizedState;E.state=Oe,lf(a,m,E,S),of(),Le=a.memoizedState,ne||Oe!==Le||ec?(typeof et=="function"&&(f0(a,c,et,m),Le=a.memoizedState),(ve=ec||aC(a,c,ve,m,Oe,Le,H))?(Ye||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=Le),E.props=m,E.state=Le,E.context=H,m=ve):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{E=a.stateNode,qv(s,a),H=a.memoizedProps,Ye=uu(c,H),E.props=Ye,et=a.pendingProps,Oe=E.context,Le=c.contextType,ve=ul,typeof Le=="object"&&Le!==null&&(ve=qs(Le)),ne=c.getDerivedStateFromProps,(Le=typeof ne=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H!==et||Oe!==ve)&&oC(a,E,m,ve),ec=!1,Oe=a.memoizedState,E.state=Oe,lf(a,m,E,S),of();var $e=a.memoizedState;H!==et||Oe!==$e||ec||s!==null&&s.dependencies!==null&&Dm(s.dependencies)?(typeof ne=="function"&&(f0(a,c,ne,m),$e=a.memoizedState),(Ye=ec||aC(a,c,Ye,m,Oe,$e,ve)||s!==null&&s.dependencies!==null&&Dm(s.dependencies))?(Le||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,$e,ve),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,$e,ve)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||H===s.memoizedProps&&Oe===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&Oe===s.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=$e),E.props=m,E.state=$e,E.context=ve,m=Ye):(typeof E.componentDidUpdate!="function"||H===s.memoizedProps&&Oe===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&Oe===s.memoizedState||(a.flags|=1024),m=!1)}return E=m,Xm(s,a),m=(a.flags&128)!==0,E||m?(E=a.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&m?(a.child=bd(a,s.child,null,S),a.child=bd(a,null,c,S)):Ps(s,a,c,S),a.memoizedState=E.state,s=a.child):s=pl(s,a,S),s}function SC(s,a,c,m){return Ql(),a.flags|=256,Ps(s,a,c,m),a.child}var x0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function v0(s){return{baseLanes:s,cachePool:cw()}}function y0(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=_a),s}function wC(s,a,c){var m=a.pendingProps,S=!1,E=(a.flags&128)!==0,H;if((H=E)||(H=s!==null&&s.memoizedState===null?!1:(ps.current&2)!==0),H&&(S=!0,a.flags&=-129),H=(a.flags&32)!==0,a.flags&=-33,s===null){if(un){if(S?sc(a):ic(),un){var ne=Wt,ve;if(ve=ne){e:{for(ve=ne,ne=Ir;ve.nodeType!==8;){if(!ne){ne=null;break e}if(ve=ro(ve.nextSibling),ve===null){ne=null;break e}}ne=ve}ne!==null?(a.memoizedState={dehydrated:ne,treeContext:O!==null?{id:K,overflow:xe}:null,retryLane:536870912,hydrationErrors:null},ve=mi(18,null,null,0),ve.stateNode=ne,ve.return=a,a.child=ve,Bt=a,Wt=null,ve=!0):ve=!1}ve||Ti(a)}if(ne=a.memoizedState,ne!==null&&(ne=ne.dehydrated,ne!==null))return ny(ne)?a.lanes=32:a.lanes=536870912,null;fl(a)}return ne=m.children,m=m.fallback,S?(ic(),S=a.mode,ne=Km({mode:"hidden",children:ne},S),m=wo(m,S,c,null),ne.return=a,m.return=a,ne.sibling=m,a.child=ne,S=a.child,S.memoizedState=v0(c),S.childLanes=y0(s,H,c),a.memoizedState=x0,m):(sc(a),j0(a,ne))}if(ve=s.memoizedState,ve!==null&&(ne=ve.dehydrated,ne!==null)){if(E)a.flags&256?(sc(a),a.flags&=-257,a=b0(s,a,c)):a.memoizedState!==null?(ic(),a.child=s.child,a.flags|=128,a=null):(ic(),S=m.fallback,ne=a.mode,m=Km({mode:"visible",children:m.children},ne),S=wo(S,ne,c,null),S.flags|=2,m.return=a,S.return=a,m.sibling=S,a.child=m,bd(a,s.child,null,c),m=a.child,m.memoizedState=v0(c),m.childLanes=y0(s,H,c),a.memoizedState=x0,a=S);else if(sc(a),ny(ne)){if(H=ne.nextSibling&&ne.nextSibling.dataset,H)var Le=H.dgst;H=Le,m=Error(i(419)),m.stack="",m.digest=H,Jl({value:m,source:null,stack:null}),a=b0(s,a,c)}else if(_s||au(s,a,c,!1),H=(c&s.childLanes)!==0,_s||H){if(H=jr,H!==null&&(m=c&-c,m=(m&42)!==0?1:Bi(m),m=(m&(H.suspendedLanes|c))!==0?0:m,m!==0&&m!==ve.retryLane))throw ve.retryLane=m,Xl(s,m),oa(H,s,m),pC;ne.data==="$?"||B0(),a=b0(s,a,c)}else ne.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=ve.treeContext,Wt=ro(ne.nextSibling),Bt=a,un=!0,yr=null,Ir=!1,s!==null&&(j[T++]=K,j[T++]=xe,j[T++]=O,K=s.id,xe=s.overflow,O=a),a=j0(a,m.children),a.flags|=4096);return a}return S?(ic(),S=m.fallback,ne=a.mode,ve=s.child,Le=ve.sibling,m=wa(ve,{mode:"hidden",children:m.children}),m.subtreeFlags=ve.subtreeFlags&65011712,Le!==null?S=wa(Le,S):(S=wo(S,ne,c,null),S.flags|=2),S.return=a,m.return=a,m.sibling=S,a.child=m,m=S,S=a.child,ne=s.child.memoizedState,ne===null?ne=v0(c):(ve=ne.cachePool,ve!==null?(Le=fs._currentValue,ve=ve.parent!==Le?{parent:Le,pool:Le}:ve):ve=cw(),ne={baseLanes:ne.baseLanes|c,cachePool:ve}),S.memoizedState=ne,S.childLanes=y0(s,H,c),a.memoizedState=x0,m):(sc(a),c=s.child,s=c.sibling,c=wa(c,{mode:"visible",children:m.children}),c.return=a,c.sibling=null,s!==null&&(H=a.deletions,H===null?(a.deletions=[s],a.flags|=16):H.push(s)),a.child=c,a.memoizedState=null,c)}function j0(s,a){return a=Km({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Km(s,a){return s=mi(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function b0(s,a,c){return bd(a,s.child,null,c),s=j0(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function CC(s,a,c){s.lanes|=a;var m=s.alternate;m!==null&&(m.lanes|=a),iu(s.return,a,c)}function S0(s,a,c,m,S){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:S}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=c,E.tailMode=S)}function EC(s,a,c){var m=a.pendingProps,S=m.revealOrder,E=m.tail;if(Ps(s,a,m.children,c),m=ps.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&CC(s,c,a);else if(s.tag===19)CC(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(R(ps,m),S){case"forwards":for(c=a.child,S=null;c!==null;)s=c.alternate,s!==null&&Gm(s)===null&&(S=c),c=c.sibling;c=S,c===null?(S=a.child,a.child=null):(S=c.sibling,c.sibling=null),S0(a,!1,S,c,E);break;case"backwards":for(c=null,S=a.child,a.child=null;S!==null;){if(s=S.alternate,s!==null&&Gm(s)===null){a.child=S;break}s=S.sibling,S.sibling=c,c=S,S=s}S0(a,!0,c,null,E);break;case"together":S0(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function pl(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),uc|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(au(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,c=wa(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=wa(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function w0(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Dm(s)))}function Pz(s,a,c){switch(a.tag){case 3:pe(a,a.stateNode.containerInfo),Co(a,fs,s.memoizedState.cache),Ql();break;case 27:case 5:Ze(a);break;case 4:pe(a,a.stateNode.containerInfo);break;case 10:Co(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(sc(a),a.flags|=128,null):(c&a.child.childLanes)!==0?wC(s,a,c):(sc(a),s=pl(s,a,c),s!==null?s.sibling:null);sc(a);break;case 19:var S=(s.flags&128)!==0;if(m=(c&a.childLanes)!==0,m||(au(s,a,c,!1),m=(c&a.childLanes)!==0),S){if(m)return EC(s,a,c);a.flags|=128}if(S=a.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),R(ps,ps.current),m)break;return null;case 22:case 23:return a.lanes=0,vC(s,a,c);case 24:Co(a,fs,s.memoizedState.cache)}return pl(s,a,c)}function _C(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)_s=!0;else{if(!w0(s,c)&&(a.flags&128)===0)return _s=!1,Pz(s,a,c);_s=(s.flags&131072)!==0}else _s=!1,un&&(a.flags&1048576)!==0&&Fe(a,h,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var m=a.elementType,S=m._init;if(m=S(m._payload),a.type=m,typeof m=="function")dd(m)?(s=uu(m,s),a.tag=1,a=bC(null,a,m,s,c)):(a.tag=0,a=g0(null,a,m,s,c));else{if(m!=null){if(S=m.$$typeof,S===N){a.tag=11,a=mC(null,a,m,s,c);break e}else if(S===V){a.tag=14,a=gC(null,a,m,s,c);break e}}throw a=je(m)||m,Error(i(306,a,""))}}return a;case 0:return g0(s,a,a.type,a.pendingProps,c);case 1:return m=a.type,S=uu(m,a.pendingProps),bC(s,a,m,S,c);case 3:e:{if(pe(a,a.stateNode.containerInfo),s===null)throw Error(i(387));m=a.pendingProps;var E=a.memoizedState;S=E.element,qv(s,a),lf(a,m,null,c);var H=a.memoizedState;if(m=H.cache,Co(a,fs,m),m!==E.cache&&fd(a,[fs],c,!0),of(),m=H.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:H.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=SC(s,a,m,c);break e}else if(m!==S){S=fi(Error(i(424)),a),Jl(S),a=SC(s,a,m,c);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Wt=ro(s.firstChild),Bt=a,un=!0,yr=null,Ir=!0,c=sC(a,null,m,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ql(),m===S){a=pl(s,a,c);break e}Ps(s,a,m,c)}a=a.child}return a;case 26:return Xm(s,a),s===null?(c=kE(a.type,null,a.pendingProps,null))?a.memoizedState=c:un||(c=a.type,s=a.pendingProps,m=dg(le.current).createElement(c),m[Er]=a,m[rs]=s,zs(m,c,s),xr(m),a.stateNode=m):a.memoizedState=kE(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Ze(a),s===null&&un&&(m=a.stateNode=TE(a.type,a.pendingProps,le.current),Bt=a,Ir=!0,S=Wt,pc(a.type)?(ry=S,Wt=ro(m.firstChild)):Wt=S),Ps(s,a,a.pendingProps.children,c),Xm(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&un&&((S=m=Wt)&&(m=aI(m,a.type,a.pendingProps,Ir),m!==null?(a.stateNode=m,Bt=a,Wt=ro(m.firstChild),Ir=!1,S=!0):S=!1),S||Ti(a)),Ze(a),S=a.type,E=a.pendingProps,H=s!==null?s.memoizedProps:null,m=E.children,J0(S,E)?m=null:H!==null&&J0(S,H)&&(a.flags|=32),a.memoizedState!==null&&(S=Qv(s,a,Cz,null,null,c),kf._currentValue=S),Xm(s,a),Ps(s,a,m,c),a.child;case 6:return s===null&&un&&((s=c=Wt)&&(c=oI(c,a.pendingProps,Ir),c!==null?(a.stateNode=c,Bt=a,Wt=null,s=!0):s=!1),s||Ti(a)),null;case 13:return wC(s,a,c);case 4:return pe(a,a.stateNode.containerInfo),m=a.pendingProps,s===null?a.child=bd(a,null,m,c):Ps(s,a,m,c),a.child;case 11:return mC(s,a,a.type,a.pendingProps,c);case 7:return Ps(s,a,a.pendingProps,c),a.child;case 8:return Ps(s,a,a.pendingProps.children,c),a.child;case 12:return Ps(s,a,a.pendingProps.children,c),a.child;case 10:return m=a.pendingProps,Co(a,a.type,m.value),Ps(s,a,m.children,c),a.child;case 9:return S=a.type._context,m=a.pendingProps.children,ou(a),S=qs(S),m=m(S),a.flags|=1,Ps(s,a,m,c),a.child;case 14:return gC(s,a,a.type,a.pendingProps,c);case 15:return xC(s,a,a.type,a.pendingProps,c);case 19:return EC(s,a,c);case 31:return m=a.pendingProps,c=a.mode,m={mode:m.mode,children:m.children},s===null?(c=Km(m,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=wa(s.child,m),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return vC(s,a,c);case 24:return ou(a),m=qs(fs),s===null?(S=Uv(),S===null&&(S=jr,E=Fv(),S.pooledCache=E,E.refCount++,E!==null&&(S.pooledCacheLanes|=c),S=E),a.memoizedState={parent:m,cache:S},Wv(a),Co(a,fs,S)):((s.lanes&c)!==0&&(qv(s,a),lf(a,null,null,c),of()),S=s.memoizedState,E=a.memoizedState,S.parent!==m?(S={parent:m,cache:m},a.memoizedState=S,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=S),Co(a,fs,m)):(m=E.cache,Co(a,fs,m),m!==S.cache&&fd(a,[fs],c,!0))),Ps(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ml(s){s.flags|=4}function TC(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!IE(a)){if(a=Ea.current,a!==null&&((Gn&4194048)===Gn?Eo!==null:(Gn&62914560)!==Gn&&(Gn&536870912)===0||a!==Eo))throw sf=Hv,uw;s.flags|=8192}}function Qm(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?ts():536870912,s.lanes|=a,Ed|=a)}function mf(s,a){if(!un)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Nr(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,m=0;if(a)for(var S=s.child;S!==null;)c|=S.lanes|S.childLanes,m|=S.subtreeFlags&65011712,m|=S.flags&65011712,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)c|=S.lanes|S.childLanes,m|=S.subtreeFlags,m|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=m,s.childLanes=c,a}function Mz(s,a,c){var m=a.pendingProps;switch(Ct(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(a),null;case 1:return Nr(a),null;case 3:return c=a.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),to(fs),ye(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(su(a)?ml(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,km())),Nr(a),null;case 26:return c=a.memoizedState,s===null?(ml(a),c!==null?(Nr(a),TC(a,c)):(Nr(a),a.flags&=-16777217)):c?c!==s.memoizedState?(ml(a),Nr(a),TC(a,c)):(Nr(a),a.flags&=-16777217):(s.memoizedProps!==m&&ml(a),Nr(a),a.flags&=-16777217),null;case 27:ht(a),c=le.current;var S=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==m&&ml(a);else{if(!m){if(a.stateNode===null)throw Error(i(166));return Nr(a),null}s=Y.current,su(a)?Am(a):(s=TE(S,m,c),a.stateNode=s,ml(a))}return Nr(a),null;case 5:if(ht(a),c=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==m&&ml(a);else{if(!m){if(a.stateNode===null)throw Error(i(166));return Nr(a),null}if(s=Y.current,su(a))Am(a);else{switch(S=dg(le.current),s){case 1:s=S.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=S.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=S.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=S.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?S.createElement("select",{is:m.is}):S.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?S.createElement(c,{is:m.is}):S.createElement(c)}}s[Er]=a,s[rs]=m;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)s.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=s;e:switch(zs(s,c,m),c){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ml(a)}}return Nr(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==m&&ml(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(i(166));if(s=le.current,su(a)){if(s=a.stateNode,c=a.memoizedProps,m=null,S=Bt,S!==null)switch(S.tag){case 27:case 5:m=S.memoizedProps}s[Er]=a,s=!!(s.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||jE(s.nodeValue,c)),s||Ti(a)}else s=dg(s).createTextNode(m),s[Er]=a,a.stateNode=s}return Nr(a),null;case 13:if(m=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=su(a),m!==null&&m.dehydrated!==null){if(s===null){if(!S)throw Error(i(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[Er]=a}else Ql(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nr(a),S=!1}else S=km(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=S),S=!0;if(!S)return a.flags&256?(fl(a),a):(fl(a),null)}if(fl(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=m!==null,s=s!==null&&s.memoizedState!==null,c){m=a.child,S=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(S=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==S&&(m.flags|=2048)}return c!==s&&c&&(a.child.flags|=8192),Qm(a,a.updateQueue),Nr(a),null;case 4:return ye(),s===null&&Y0(a.stateNode.containerInfo),Nr(a),null;case 10:return to(a.type),Nr(a),null;case 19:if(te(ps),S=a.memoizedState,S===null)return Nr(a),null;if(m=(a.flags&128)!==0,E=S.rendering,E===null)if(m)mf(S,!1);else{if(Vr!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=Gm(s),E!==null){for(a.flags|=128,mf(S,!1),s=E.updateQueue,a.updateQueue=s,Qm(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)Jh(c,s),c=c.sibling;return R(ps,ps.current&1|2),a.child}s=s.sibling}S.tail!==null&&Ge()>tg&&(a.flags|=128,m=!0,mf(S,!1),a.lanes=4194304)}else{if(!m)if(s=Gm(E),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,Qm(a,s),mf(S,!0),S.tail===null&&S.tailMode==="hidden"&&!E.alternate&&!un)return Nr(a),null}else 2*Ge()-S.renderingStartTime>tg&&c!==536870912&&(a.flags|=128,m=!0,mf(S,!1),a.lanes=4194304);S.isBackwards?(E.sibling=a.child,a.child=E):(s=S.last,s!==null?s.sibling=E:a.child=E,S.last=E)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=Ge(),a.sibling=null,s=ps.current,R(ps,m?s&1|2:s&1),a):(Nr(a),null);case 22:case 23:return fl(a),Xv(),m=a.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(c&536870912)!==0&&(a.flags&128)===0&&(Nr(a),a.subtreeFlags&6&&(a.flags|=8192)):Nr(a),c=a.updateQueue,c!==null&&Qm(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==c&&(a.flags|=2048),s!==null&&te(lu),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),to(fs),Nr(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function zz(s,a){switch(Ct(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return to(fs),ye(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return ht(a),null;case 13:if(fl(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ql()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return te(ps),null;case 4:return ye(),null;case 10:return to(a.type),null;case 22:case 23:return fl(a),Xv(),s!==null&&te(lu),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return to(fs),null;case 25:return null;default:return null}}function AC(s,a){switch(Ct(a),a.tag){case 3:to(fs),ye();break;case 26:case 27:case 5:ht(a);break;case 4:ye();break;case 13:fl(a);break;case 19:te(ps);break;case 10:to(a.type);break;case 22:case 23:fl(a),Xv(),s!==null&&te(lu);break;case 24:to(fs)}}function gf(s,a){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var S=m.next;c=S;do{if((c.tag&s)===s){m=void 0;var E=c.create,H=c.inst;m=E(),H.destroy=m}c=c.next}while(c!==S)}}catch(ne){gr(a,a.return,ne)}}function ac(s,a,c){try{var m=a.updateQueue,S=m!==null?m.lastEffect:null;if(S!==null){var E=S.next;m=E;do{if((m.tag&s)===s){var H=m.inst,ne=H.destroy;if(ne!==void 0){H.destroy=void 0,S=a;var ve=c,Le=ne;try{Le()}catch(Ye){gr(S,ve,Ye)}}}m=m.next}while(m!==E)}}catch(Ye){gr(a,a.return,Ye)}}function RC(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{gw(a,c)}catch(m){gr(s,s.return,m)}}}function kC(s,a,c){c.props=uu(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(m){gr(s,a,m)}}function xf(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof c=="function"?s.refCleanup=c(m):c.current=m}}catch(S){gr(s,a,S)}}function _o(s,a){var c=s.ref,m=s.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(S){gr(s,a,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(S){gr(s,a,S)}else c.current=null}function DC(s){var a=s.type,c=s.memoizedProps,m=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(S){gr(s,s.return,S)}}function C0(s,a,c){try{var m=s.stateNode;tI(m,s.type,c,a),m[rs]=a}catch(S){gr(s,s.return,S)}}function PC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&pc(s.type)||s.tag===4}function E0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||PC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&pc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function _0(s,a,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=ug));else if(m!==4&&(m===27&&pc(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(_0(s,a,c),s=s.sibling;s!==null;)_0(s,a,c),s=s.sibling}function Jm(s,a,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(m!==4&&(m===27&&pc(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Jm(s,a,c),s=s.sibling;s!==null;)Jm(s,a,c),s=s.sibling}function MC(s){var a=s.stateNode,c=s.memoizedProps;try{for(var m=s.type,S=a.attributes;S.length;)a.removeAttributeNode(S[0]);zs(a,m,c),a[Er]=s,a[rs]=c}catch(E){gr(s,s.return,E)}}var gl=!1,Xr=!1,T0=!1,zC=typeof WeakSet=="function"?WeakSet:Set,Ts=null;function Iz(s,a){if(s=s.containerInfo,K0=xg,s=Kc(s),Qc(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var S=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{c.nodeType,E.nodeType}catch{c=null;break e}var H=0,ne=-1,ve=-1,Le=0,Ye=0,et=s,Oe=null;t:for(;;){for(var $e;et!==c||S!==0&&et.nodeType!==3||(ne=H+S),et!==E||m!==0&&et.nodeType!==3||(ve=H+m),et.nodeType===3&&(H+=et.nodeValue.length),($e=et.firstChild)!==null;)Oe=et,et=$e;for(;;){if(et===s)break t;if(Oe===c&&++Le===S&&(ne=H),Oe===E&&++Ye===m&&(ve=H),($e=et.nextSibling)!==null)break;et=Oe,Oe=et.parentNode}et=$e}c=ne===-1||ve===-1?null:{start:ne,end:ve}}else c=null}c=c||{start:0,end:0}}else c=null;for(Q0={focusedElem:s,selectionRange:c},xg=!1,Ts=a;Ts!==null;)if(a=Ts,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Ts=s;else for(;Ts!==null;){switch(a=Ts,E=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,c=a,S=E.memoizedProps,E=E.memoizedState,m=c.stateNode;try{var an=uu(c.type,S,c.elementType===c.type);s=m.getSnapshotBeforeUpdate(an,E),m.__reactInternalSnapshotBeforeUpdate=s}catch(tn){gr(c,c.return,tn)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)ty(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ty(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Ts=s;break}Ts=a.return}}function IC(s,a,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:oc(s,c),m&4&&gf(5,c);break;case 1:if(oc(s,c),m&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(H){gr(c,c.return,H)}else{var S=uu(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(S,a,s.__reactInternalSnapshotBeforeUpdate)}catch(H){gr(c,c.return,H)}}m&64&&RC(c),m&512&&xf(c,c.return);break;case 3:if(oc(s,c),m&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{gw(s,a)}catch(H){gr(c,c.return,H)}}break;case 27:a===null&&m&4&&MC(c);case 26:case 5:oc(s,c),a===null&&m&4&&DC(c),m&512&&xf(c,c.return);break;case 12:oc(s,c);break;case 13:oc(s,c),m&4&&OC(s,c),m&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=Hz.bind(null,c),lI(s,c))));break;case 22:if(m=c.memoizedState!==null||gl,!m){a=a!==null&&a.memoizedState!==null||Xr,S=gl;var E=Xr;gl=m,(Xr=a)&&!E?lc(s,c,(c.subtreeFlags&8772)!==0):oc(s,c),gl=S,Xr=E}break;case 30:break;default:oc(s,c)}}function NC(s){var a=s.alternate;a!==null&&(s.alternate=null,NC(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Dr(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ar=null,Ri=!1;function xl(s,a,c){for(c=c.child;c!==null;)LC(s,a,c),c=c.sibling}function LC(s,a,c){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(nt,c)}catch{}switch(c.tag){case 26:Xr||_o(c,a),xl(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Xr||_o(c,a);var m=Ar,S=Ri;pc(c.type)&&(Ar=c.stateNode,Ri=!1),xl(s,a,c),_f(c.stateNode),Ar=m,Ri=S;break;case 5:Xr||_o(c,a);case 6:if(m=Ar,S=Ri,Ar=null,xl(s,a,c),Ar=m,Ri=S,Ar!==null)if(Ri)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(c.stateNode)}catch(E){gr(c,a,E)}else try{Ar.removeChild(c.stateNode)}catch(E){gr(c,a,E)}break;case 18:Ar!==null&&(Ri?(s=Ar,EE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),zf(s)):EE(Ar,c.stateNode));break;case 4:m=Ar,S=Ri,Ar=c.stateNode.containerInfo,Ri=!0,xl(s,a,c),Ar=m,Ri=S;break;case 0:case 11:case 14:case 15:Xr||ac(2,c,a),Xr||ac(4,c,a),xl(s,a,c);break;case 1:Xr||(_o(c,a),m=c.stateNode,typeof m.componentWillUnmount=="function"&&kC(c,a,m)),xl(s,a,c);break;case 21:xl(s,a,c);break;case 22:Xr=(m=Xr)||c.memoizedState!==null,xl(s,a,c),Xr=m;break;default:xl(s,a,c)}}function OC(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zf(s)}catch(c){gr(a,a.return,c)}}function Nz(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new zC),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new zC),a;default:throw Error(i(435,s.tag))}}function A0(s,a){var c=Nz(s);a.forEach(function(m){var S=Wz.bind(null,s,m);c.has(m)||(c.add(m),m.then(S,S))})}function ra(s,a){var c=a.deletions;if(c!==null)for(var m=0;m<c.length;m++){var S=c[m],E=s,H=a,ne=H;e:for(;ne!==null;){switch(ne.tag){case 27:if(pc(ne.type)){Ar=ne.stateNode,Ri=!1;break e}break;case 5:Ar=ne.stateNode,Ri=!1;break e;case 3:case 4:Ar=ne.stateNode.containerInfo,Ri=!0;break e}ne=ne.return}if(Ar===null)throw Error(i(160));LC(E,H,S),Ar=null,Ri=!1,E=S.alternate,E!==null&&(E.return=null),S.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)BC(a,s),a=a.sibling}var no=null;function BC(s,a){var c=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ra(a,s),sa(s),m&4&&(ac(3,s,s.return),gf(3,s),ac(5,s,s.return));break;case 1:ra(a,s),sa(s),m&512&&(Xr||c===null||_o(c,c.return)),m&64&&gl&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var S=no;if(ra(a,s),sa(s),m&512&&(Xr||c===null||_o(c,c.return)),m&4){var E=c!==null?c.memoizedState:null;if(m=s.memoizedState,c===null)if(m===null)if(s.stateNode===null){e:{m=s.type,c=s.memoizedProps,S=S.ownerDocument||S;t:switch(m){case"title":E=S.getElementsByTagName("title")[0],(!E||E[Si]||E[Er]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=S.createElement(m),S.head.insertBefore(E,S.querySelector("head > title"))),zs(E,m,c),E[Er]=s,xr(E),m=E;break e;case"link":var H=ME("link","href",S).get(m+(c.href||""));if(H){for(var ne=0;ne<H.length;ne++)if(E=H[ne],E.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&E.getAttribute("rel")===(c.rel==null?null:c.rel)&&E.getAttribute("title")===(c.title==null?null:c.title)&&E.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){H.splice(ne,1);break t}}E=S.createElement(m),zs(E,m,c),S.head.appendChild(E);break;case"meta":if(H=ME("meta","content",S).get(m+(c.content||""))){for(ne=0;ne<H.length;ne++)if(E=H[ne],E.getAttribute("content")===(c.content==null?null:""+c.content)&&E.getAttribute("name")===(c.name==null?null:c.name)&&E.getAttribute("property")===(c.property==null?null:c.property)&&E.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&E.getAttribute("charset")===(c.charSet==null?null:c.charSet)){H.splice(ne,1);break t}}E=S.createElement(m),zs(E,m,c),S.head.appendChild(E);break;default:throw Error(i(468,m))}E[Er]=s,xr(E),m=E}s.stateNode=m}else zE(S,s.type,s.stateNode);else s.stateNode=PE(S,m,s.memoizedProps);else E!==m?(E===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):E.count--,m===null?zE(S,s.type,s.stateNode):PE(S,m,s.memoizedProps)):m===null&&s.stateNode!==null&&C0(s,s.memoizedProps,c.memoizedProps)}break;case 27:ra(a,s),sa(s),m&512&&(Xr||c===null||_o(c,c.return)),c!==null&&m&4&&C0(s,s.memoizedProps,c.memoizedProps);break;case 5:if(ra(a,s),sa(s),m&512&&(Xr||c===null||_o(c,c.return)),s.flags&32){S=s.stateNode;try{ks(S,"")}catch($e){gr(s,s.return,$e)}}m&4&&s.stateNode!=null&&(S=s.memoizedProps,C0(s,S,c!==null?c.memoizedProps:S)),m&1024&&(T0=!0);break;case 6:if(ra(a,s),sa(s),m&4){if(s.stateNode===null)throw Error(i(162));m=s.memoizedProps,c=s.stateNode;try{c.nodeValue=m}catch($e){gr(s,s.return,$e)}}break;case 3:if(pg=null,S=no,no=hg(a.containerInfo),ra(a,s),no=S,sa(s),m&4&&c!==null&&c.memoizedState.isDehydrated)try{zf(a.containerInfo)}catch($e){gr(s,s.return,$e)}T0&&(T0=!1,$C(s));break;case 4:m=no,no=hg(s.stateNode.containerInfo),ra(a,s),sa(s),no=m;break;case 12:ra(a,s),sa(s);break;case 13:ra(a,s),sa(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(z0=Ge()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,A0(s,m)));break;case 22:S=s.memoizedState!==null;var ve=c!==null&&c.memoizedState!==null,Le=gl,Ye=Xr;if(gl=Le||S,Xr=Ye||ve,ra(a,s),Xr=Ye,gl=Le,sa(s),m&8192)e:for(a=s.stateNode,a._visibility=S?a._visibility&-2:a._visibility|1,S&&(c===null||ve||gl||Xr||du(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){ve=c=a;try{if(E=ve.stateNode,S)H=E.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{ne=ve.stateNode;var et=ve.memoizedProps.style,Oe=et!=null&&et.hasOwnProperty("display")?et.display:null;ne.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch($e){gr(ve,ve.return,$e)}}}else if(a.tag===6){if(c===null){ve=a;try{ve.stateNode.nodeValue=S?"":ve.memoizedProps}catch($e){gr(ve,ve.return,$e)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=s.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,A0(s,c))));break;case 19:ra(a,s),sa(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,A0(s,m)));break;case 30:break;case 21:break;default:ra(a,s),sa(s)}}function sa(s){var a=s.flags;if(a&2){try{for(var c,m=s.return;m!==null;){if(PC(m)){c=m;break}m=m.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var S=c.stateNode,E=E0(s);Jm(s,E,S);break;case 5:var H=c.stateNode;c.flags&32&&(ks(H,""),c.flags&=-33);var ne=E0(s);Jm(s,ne,H);break;case 3:case 4:var ve=c.stateNode.containerInfo,Le=E0(s);_0(s,Le,ve);break;default:throw Error(i(161))}}catch(Ye){gr(s,s.return,Ye)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function $C(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;$C(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function oc(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)IC(s,a.alternate,a),a=a.sibling}function du(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ac(4,a,a.return),du(a);break;case 1:_o(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&kC(a,a.return,c),du(a);break;case 27:_f(a.stateNode);case 26:case 5:_o(a,a.return),du(a);break;case 22:a.memoizedState===null&&du(a);break;case 30:du(a);break;default:du(a)}s=s.sibling}}function lc(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,S=s,E=a,H=E.flags;switch(E.tag){case 0:case 11:case 15:lc(S,E,c),gf(4,E);break;case 1:if(lc(S,E,c),m=E,S=m.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Le){gr(m,m.return,Le)}if(m=E,S=m.updateQueue,S!==null){var ne=m.stateNode;try{var ve=S.shared.hiddenCallbacks;if(ve!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ve.length;S++)mw(ve[S],ne)}catch(Le){gr(m,m.return,Le)}}c&&H&64&&RC(E),xf(E,E.return);break;case 27:MC(E);case 26:case 5:lc(S,E,c),c&&m===null&&H&4&&DC(E),xf(E,E.return);break;case 12:lc(S,E,c);break;case 13:lc(S,E,c),c&&H&4&&OC(S,E);break;case 22:E.memoizedState===null&&lc(S,E,c),xf(E,E.return);break;case 30:break;default:lc(S,E,c)}a=a.sibling}}function R0(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&tf(c))}function k0(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&tf(s))}function To(s,a,c,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)FC(s,a,c,m),a=a.sibling}function FC(s,a,c,m){var S=a.flags;switch(a.tag){case 0:case 11:case 15:To(s,a,c,m),S&2048&&gf(9,a);break;case 1:To(s,a,c,m);break;case 3:To(s,a,c,m),S&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&tf(s)));break;case 12:if(S&2048){To(s,a,c,m),s=a.stateNode;try{var E=a.memoizedProps,H=E.id,ne=E.onPostCommit;typeof ne=="function"&&ne(H,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ve){gr(a,a.return,ve)}}else To(s,a,c,m);break;case 13:To(s,a,c,m);break;case 23:break;case 22:E=a.stateNode,H=a.alternate,a.memoizedState!==null?E._visibility&2?To(s,a,c,m):vf(s,a):E._visibility&2?To(s,a,c,m):(E._visibility|=2,Sd(s,a,c,m,(a.subtreeFlags&10256)!==0)),S&2048&&R0(H,a);break;case 24:To(s,a,c,m),S&2048&&k0(a.alternate,a);break;default:To(s,a,c,m)}}function Sd(s,a,c,m,S){for(S=S&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=s,H=a,ne=c,ve=m,Le=H.flags;switch(H.tag){case 0:case 11:case 15:Sd(E,H,ne,ve,S),gf(8,H);break;case 23:break;case 22:var Ye=H.stateNode;H.memoizedState!==null?Ye._visibility&2?Sd(E,H,ne,ve,S):vf(E,H):(Ye._visibility|=2,Sd(E,H,ne,ve,S)),S&&Le&2048&&R0(H.alternate,H);break;case 24:Sd(E,H,ne,ve,S),S&&Le&2048&&k0(H.alternate,H);break;default:Sd(E,H,ne,ve,S)}a=a.sibling}}function vf(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,m=a,S=m.flags;switch(m.tag){case 22:vf(c,m),S&2048&&R0(m.alternate,m);break;case 24:vf(c,m),S&2048&&k0(m.alternate,m);break;default:vf(c,m)}a=a.sibling}}var yf=8192;function wd(s){if(s.subtreeFlags&yf)for(s=s.child;s!==null;)VC(s),s=s.sibling}function VC(s){switch(s.tag){case 26:wd(s),s.flags&yf&&s.memoizedState!==null&&bI(no,s.memoizedState,s.memoizedProps);break;case 5:wd(s);break;case 3:case 4:var a=no;no=hg(s.stateNode.containerInfo),wd(s),no=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=yf,yf=16777216,wd(s),yf=a):wd(s));break;default:wd(s)}}function UC(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function jf(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var m=a[c];Ts=m,WC(m,s)}UC(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)HC(s),s=s.sibling}function HC(s){switch(s.tag){case 0:case 11:case 15:jf(s),s.flags&2048&&ac(9,s,s.return);break;case 3:jf(s);break;case 12:jf(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,eg(s)):jf(s);break;default:jf(s)}}function eg(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var m=a[c];Ts=m,WC(m,s)}UC(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ac(8,a,a.return),eg(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,eg(a));break;default:eg(a)}s=s.sibling}}function WC(s,a){for(;Ts!==null;){var c=Ts;switch(c.tag){case 0:case 11:case 15:ac(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:tf(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,Ts=m;else e:for(c=s;Ts!==null;){m=Ts;var S=m.sibling,E=m.return;if(NC(m),m===c){Ts=null;break e}if(S!==null){S.return=E,Ts=S;break e}Ts=E}}}var Lz={getCacheForType:function(s){var a=qs(fs),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c}},Oz=typeof WeakMap=="function"?WeakMap:Map,cr=0,jr=null,zn=null,Gn=0,ur=0,ia=null,cc=!1,Cd=!1,D0=!1,vl=0,Vr=0,uc=0,hu=0,P0=0,_a=0,Ed=0,bf=null,ki=null,M0=!1,z0=0,tg=1/0,ng=null,dc=null,Ms=0,hc=null,_d=null,Td=0,I0=0,N0=null,qC=null,Sf=0,L0=null;function aa(){if((cr&2)!==0&&Gn!==0)return Gn&-Gn;if(G.T!==null){var s=pd;return s!==0?s:H0()}return po()}function GC(){_a===0&&(_a=(Gn&536870912)===0||un?Sr():536870912);var s=Ea.current;return s!==null&&(s.flags|=32),_a}function oa(s,a,c){(s===jr&&(ur===2||ur===9)||s.cancelPendingCommit!==null)&&(Ad(s,0),fc(s,Gn,_a,!1)),Oi(s,c),((cr&2)===0||s!==jr)&&(s===jr&&((cr&2)===0&&(hu|=c),Vr===4&&fc(s,Gn,_a,!1)),Ao(s))}function YC(s,a,c){if((cr&6)!==0)throw Error(i(327));var m=!c&&(a&124)===0&&(a&s.expiredLanes)===0||lt(s,a),S=m?Fz(s,a):$0(s,a,!0),E=m;do{if(S===0){Cd&&!m&&fc(s,a,0,!1);break}else{if(c=s.current.alternate,E&&!Bz(c)){S=$0(s,a,!1),E=!1;continue}if(S===2){if(E=a,s.errorRecoveryDisabledLanes&E)var H=0;else H=s.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){a=H;e:{var ne=s;S=bf;var ve=ne.current.memoizedState.isDehydrated;if(ve&&(Ad(ne,H).flags|=256),H=$0(ne,H,!1),H!==2){if(D0&&!ve){ne.errorRecoveryDisabledLanes|=E,hu|=E,S=4;break e}E=ki,ki=S,E!==null&&(ki===null?ki=E:ki.push.apply(ki,E))}S=H}if(E=!1,S!==2)continue}}if(S===1){Ad(s,0),fc(s,a,0,!0);break}e:{switch(m=s,E=S,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:fc(m,a,_a,!cc);break e;case 2:ki=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(S=z0+300-Ge(),10<S)){if(fc(m,a,_a,!cc),Pn(m,0,!0)!==0)break e;m.timeoutHandle=wE(ZC.bind(null,m,c,ki,ng,M0,a,_a,hu,Ed,cc,E,2,-0,0),S);break e}ZC(m,c,ki,ng,M0,a,_a,hu,Ed,cc,E,0,-0,0)}}break}while(!0);Ao(s)}function ZC(s,a,c,m,S,E,H,ne,ve,Le,Ye,et,Oe,$e){if(s.timeoutHandle=-1,et=a.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(Rf={stylesheets:null,count:0,unsuspend:jI},VC(a),et=SI(),et!==null)){s.cancelPendingCommit=et(nE.bind(null,s,a,E,c,m,S,H,ne,ve,Ye,1,Oe,$e)),fc(s,E,H,!Le);return}nE(s,a,E,c,m,S,H,ne,ve)}function Bz(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var S=c[m],E=S.getSnapshot;S=S.value;try{if(!di(E(),S))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fc(s,a,c,m){a&=~P0,a&=~hu,s.suspendedLanes|=a,s.pingedLanes&=~a,m&&(s.warmLanes|=a),m=s.expirationTimes;for(var S=a;0<S;){var E=31-pt(S),H=1<<E;m[E]=-1,S&=~H}c!==0&&el(s,c,a)}function rg(){return(cr&6)===0?(wf(0),!1):!0}function O0(){if(zn!==null){if(ur===0)var s=zn.return;else s=zn,eo=Ca=null,t0(s),jd=null,ff=0,s=zn;for(;s!==null;)AC(s.alternate,s),s=s.return;zn=null}}function Ad(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,rI(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),O0(),jr=s,zn=c=wa(s.current,null),Gn=a,ur=0,ia=null,cc=!1,Cd=lt(s,a),D0=!1,Ed=_a=P0=hu=uc=Vr=0,ki=bf=null,M0=!1,(a&8)!==0&&(a|=a&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=a;0<m;){var S=31-pt(m),E=1<<S;a|=s[S],m&=~E}return vl=a,eu(),c}function XC(s,a){_n=null,G.H=Hm,a===rf||a===zm?(a=fw(),ur=3):a===uw?(a=fw(),ur=4):ur=a===pC?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ia=a,zn===null&&(Vr=1,Zm(s,fi(a,s.current)))}function KC(){var s=G.H;return G.H=Hm,s===null?Hm:s}function QC(){var s=G.A;return G.A=Lz,s}function B0(){Vr=4,cc||(Gn&4194048)!==Gn&&Ea.current!==null||(Cd=!0),(uc&134217727)===0&&(hu&134217727)===0||jr===null||fc(jr,Gn,_a,!1)}function $0(s,a,c){var m=cr;cr|=2;var S=KC(),E=QC();(jr!==s||Gn!==a)&&(ng=null,Ad(s,a)),a=!1;var H=Vr;e:do try{if(ur!==0&&zn!==null){var ne=zn,ve=ia;switch(ur){case 8:O0(),H=6;break e;case 3:case 2:case 9:case 6:Ea.current===null&&(a=!0);var Le=ur;if(ur=0,ia=null,Rd(s,ne,ve,Le),c&&Cd){H=0;break e}break;default:Le=ur,ur=0,ia=null,Rd(s,ne,ve,Le)}}$z(),H=Vr;break}catch(Ye){XC(s,Ye)}while(!0);return a&&s.shellSuspendCounter++,eo=Ca=null,cr=m,G.H=S,G.A=E,zn===null&&(jr=null,Gn=0,eu()),H}function $z(){for(;zn!==null;)JC(zn)}function Fz(s,a){var c=cr;cr|=2;var m=KC(),S=QC();jr!==s||Gn!==a?(ng=null,tg=Ge()+500,Ad(s,a)):Cd=lt(s,a);e:do try{if(ur!==0&&zn!==null){a=zn;var E=ia;t:switch(ur){case 1:ur=0,ia=null,Rd(s,a,E,1);break;case 2:case 9:if(dw(E)){ur=0,ia=null,eE(a);break}a=function(){ur!==2&&ur!==9||jr!==s||(ur=7),Ao(s)},E.then(a,a);break e;case 3:ur=7;break e;case 4:ur=5;break e;case 7:dw(E)?(ur=0,ia=null,eE(a)):(ur=0,ia=null,Rd(s,a,E,7));break;case 5:var H=null;switch(zn.tag){case 26:H=zn.memoizedState;case 5:case 27:var ne=zn;if(!H||IE(H)){ur=0,ia=null;var ve=ne.sibling;if(ve!==null)zn=ve;else{var Le=ne.return;Le!==null?(zn=Le,sg(Le)):zn=null}break t}}ur=0,ia=null,Rd(s,a,E,5);break;case 6:ur=0,ia=null,Rd(s,a,E,6);break;case 8:O0(),Vr=6;break e;default:throw Error(i(462))}}Vz();break}catch(Ye){XC(s,Ye)}while(!0);return eo=Ca=null,G.H=m,G.A=S,cr=c,zn!==null?0:(jr=null,Gn=0,eu(),Vr)}function Vz(){for(;zn!==null&&!qt();)JC(zn)}function JC(s){var a=_C(s.alternate,s,vl);s.memoizedProps=s.pendingProps,a===null?sg(s):zn=a}function eE(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=jC(c,a,a.pendingProps,a.type,void 0,Gn);break;case 11:a=jC(c,a,a.pendingProps,a.type.render,a.ref,Gn);break;case 5:t0(a);default:AC(c,a),a=zn=Jh(a,vl),a=_C(c,a,vl)}s.memoizedProps=s.pendingProps,a===null?sg(s):zn=a}function Rd(s,a,c,m){eo=Ca=null,t0(a),jd=null,ff=0;var S=a.return;try{if(Dz(s,S,a,c,Gn)){Vr=1,Zm(s,fi(c,s.current)),zn=null;return}}catch(E){if(S!==null)throw zn=S,E;Vr=1,Zm(s,fi(c,s.current)),zn=null;return}a.flags&32768?(un||m===1?s=!0:Cd||(Gn&536870912)!==0?s=!1:(cc=s=!0,(m===2||m===9||m===3||m===6)&&(m=Ea.current,m!==null&&m.tag===13&&(m.flags|=16384))),tE(a,s)):sg(a)}function sg(s){var a=s;do{if((a.flags&32768)!==0){tE(a,cc);return}s=a.return;var c=Mz(a.alternate,a,vl);if(c!==null){zn=c;return}if(a=a.sibling,a!==null){zn=a;return}zn=a=s}while(a!==null);Vr===0&&(Vr=5)}function tE(s,a){do{var c=zz(s.alternate,s);if(c!==null){c.flags&=32767,zn=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){zn=s;return}zn=s=c}while(s!==null);Vr=6,zn=null}function nE(s,a,c,m,S,E,H,ne,ve){s.cancelPendingCommit=null;do ig();while(Ms!==0);if((cr&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=na,bi(s,c,E,H,ne,ve),s===jr&&(zn=jr=null,Gn=0),_d=a,hc=s,Td=c,I0=E,N0=S,qC=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,qz(at,function(){return oE(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,S=U.p,U.p=2,H=cr,cr|=4;try{Iz(s,a,c)}finally{cr=H,U.p=S,G.T=m}}Ms=1,rE(),sE(),iE()}}function rE(){if(Ms===1){Ms=0;var s=hc,a=_d,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var m=U.p;U.p=2;var S=cr;cr|=4;try{BC(a,s);var E=Q0,H=Kc(s.containerInfo),ne=E.focusedElem,ve=E.selectionRange;if(H!==ne&&ne&&ne.ownerDocument&&ad(ne.ownerDocument.documentElement,ne)){if(ve!==null&&Qc(ne)){var Le=ve.start,Ye=ve.end;if(Ye===void 0&&(Ye=Le),"selectionStart"in ne)ne.selectionStart=Le,ne.selectionEnd=Math.min(Ye,ne.value.length);else{var et=ne.ownerDocument||document,Oe=et&&et.defaultView||window;if(Oe.getSelection){var $e=Oe.getSelection(),an=ne.textContent.length,tn=Math.min(ve.start,an),pr=ve.end===void 0?tn:Math.min(ve.end,an);!$e.extend&&tn>pr&&(H=pr,pr=tn,tn=H);var De=Kh(ne,tn),we=Kh(ne,pr);if(De&&we&&($e.rangeCount!==1||$e.anchorNode!==De.node||$e.anchorOffset!==De.offset||$e.focusNode!==we.node||$e.focusOffset!==we.offset)){var Ie=et.createRange();Ie.setStart(De.node,De.offset),$e.removeAllRanges(),tn>pr?($e.addRange(Ie),$e.extend(we.node,we.offset)):(Ie.setEnd(we.node,we.offset),$e.addRange(Ie))}}}}for(et=[],$e=ne;$e=$e.parentNode;)$e.nodeType===1&&et.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<et.length;ne++){var Ke=et[ne];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}xg=!!K0,Q0=K0=null}finally{cr=S,U.p=m,G.T=c}}s.current=a,Ms=2}}function sE(){if(Ms===2){Ms=0;var s=hc,a=_d,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var m=U.p;U.p=2;var S=cr;cr|=4;try{IC(s,a.alternate,a)}finally{cr=S,U.p=m,G.T=c}}Ms=3}}function iE(){if(Ms===4||Ms===3){Ms=0,Je();var s=hc,a=_d,c=Td,m=qC;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ms=5:(Ms=0,_d=hc=null,aE(s,s.pendingLanes));var S=s.pendingLanes;if(S===0&&(dc=null),$i(c),a=a.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(nt,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=G.T,S=U.p,U.p=2,G.T=null;try{for(var E=s.onRecoverableError,H=0;H<m.length;H++){var ne=m[H];E(ne.value,{componentStack:ne.stack})}}finally{G.T=a,U.p=S}}(Td&3)!==0&&ig(),Ao(s),S=s.pendingLanes,(c&4194090)!==0&&(S&42)!==0?s===L0?Sf++:(Sf=0,L0=s):Sf=0,wf(0)}}function aE(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,tf(a)))}function ig(s){return rE(),sE(),iE(),oE()}function oE(){if(Ms!==5)return!1;var s=hc,a=I0;I0=0;var c=$i(Td),m=G.T,S=U.p;try{U.p=32>c?32:c,G.T=null,c=N0,N0=null;var E=hc,H=Td;if(Ms=0,_d=hc=null,Td=0,(cr&6)!==0)throw Error(i(331));var ne=cr;if(cr|=4,HC(E.current),FC(E,E.current,H,c),cr=ne,wf(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(nt,E)}catch{}return!0}finally{U.p=S,G.T=m,aE(s,a)}}function lE(s,a,c){a=fi(c,a),a=m0(s.stateNode,a,2),s=nc(s,a,2),s!==null&&(Oi(s,2),Ao(s))}function gr(s,a,c){if(s.tag===3)lE(s,s,c);else for(;a!==null;){if(a.tag===3){lE(a,s,c);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(dc===null||!dc.has(m))){s=fi(c,s),c=hC(2),m=nc(a,c,2),m!==null&&(fC(c,m,a,s),Oi(m,2),Ao(m));break}}a=a.return}}function F0(s,a,c){var m=s.pingCache;if(m===null){m=s.pingCache=new Oz;var S=new Set;m.set(a,S)}else S=m.get(a),S===void 0&&(S=new Set,m.set(a,S));S.has(c)||(D0=!0,S.add(c),s=Uz.bind(null,s,a,c),a.then(s,s))}function Uz(s,a,c){var m=s.pingCache;m!==null&&m.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,jr===s&&(Gn&c)===c&&(Vr===4||Vr===3&&(Gn&62914560)===Gn&&300>Ge()-z0?(cr&2)===0&&Ad(s,0):P0|=c,Ed===Gn&&(Ed=0)),Ao(s)}function cE(s,a){a===0&&(a=ts()),s=Xl(s,a),s!==null&&(Oi(s,a),Ao(s))}function Hz(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),cE(s,c)}function Wz(s,a){var c=0;switch(s.tag){case 13:var m=s.stateNode,S=s.memoizedState;S!==null&&(c=S.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(a),cE(s,c)}function qz(s,a){return vt(s,a)}var ag=null,kd=null,V0=!1,og=!1,U0=!1,fu=0;function Ao(s){s!==kd&&s.next===null&&(kd===null?ag=kd=s:kd=kd.next=s),og=!0,V0||(V0=!0,Yz())}function wf(s,a){if(!U0&&og){U0=!0;do for(var c=!1,m=ag;m!==null;){if(s!==0){var S=m.pendingLanes;if(S===0)var E=0;else{var H=m.suspendedLanes,ne=m.pingedLanes;E=(1<<31-pt(42|s)+1)-1,E&=S&~(H&~ne),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(c=!0,fE(m,E))}else E=Gn,E=Pn(m,m===jr?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||lt(m,E)||(c=!0,fE(m,E));m=m.next}while(c);U0=!1}}function Gz(){uE()}function uE(){og=V0=!1;var s=0;fu!==0&&(nI()&&(s=fu),fu=0);for(var a=Ge(),c=null,m=ag;m!==null;){var S=m.next,E=dE(m,a);E===0?(m.next=null,c===null?ag=S:c.next=S,S===null&&(kd=c)):(c=m,(s!==0||(E&3)!==0)&&(og=!0)),m=S}wf(s)}function dE(s,a){for(var c=s.suspendedLanes,m=s.pingedLanes,S=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var H=31-pt(E),ne=1<<H,ve=S[H];ve===-1?((ne&c)===0||(ne&m)!==0)&&(S[H]=vn(ne,a)):ve<=a&&(s.expiredLanes|=ne),E&=~ne}if(a=jr,c=Gn,c=Pn(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,c===0||s===a&&(ur===2||ur===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Ue(m),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||lt(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(m!==null&&Ue(m),$i(c)){case 2:case 8:c=be;break;case 32:c=at;break;case 268435456:c=An;break;default:c=at}return m=hE.bind(null,s),c=vt(c,m),s.callbackPriority=a,s.callbackNode=c,a}return m!==null&&m!==null&&Ue(m),s.callbackPriority=2,s.callbackNode=null,2}function hE(s,a){if(Ms!==0&&Ms!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(ig()&&s.callbackNode!==c)return null;var m=Gn;return m=Pn(s,s===jr?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(YC(s,m,a),dE(s,Ge()),s.callbackNode!=null&&s.callbackNode===c?hE.bind(null,s):null)}function fE(s,a){if(ig())return null;YC(s,a,!0)}function Yz(){sI(function(){(cr&6)!==0?vt(se,Gz):uE()})}function H0(){return fu===0&&(fu=Sr()),fu}function pE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Zi(""+s)}function mE(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function Zz(s,a,c,m,S){if(a==="submit"&&c&&c.stateNode===S){var E=pE((S[rs]||null).action),H=m.submitter;H&&(a=(a=H[rs]||null)?pE(a.formAction):H.getAttribute("formAction"),a!==null&&(E=a,H=null));var ne=new Be("action","action",null,m,S);s.push({event:ne,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(fu!==0){var ve=H?mE(S,H):new FormData(S);u0(c,{pending:!0,data:ve,method:S.method,action:E},null,ve)}}else typeof E=="function"&&(ne.preventDefault(),ve=H?mE(S,H):new FormData(S),u0(c,{pending:!0,data:ve,method:S.method,action:E},E,ve))},currentTarget:S}]})}}for(var W0=0;W0<ol.length;W0++){var q0=ol[W0],Xz=q0.toLowerCase(),Kz=q0[0].toUpperCase()+q0.slice(1);ta(Xz,"on"+Kz)}ta(Em,"onAnimationEnd"),ta(ea,"onAnimationIteration"),ta(Jc,"onAnimationStart"),ta("dblclick","onDoubleClick"),ta("focusin","onFocus"),ta("focusout","onBlur"),ta(Bv,"onTransitionRun"),ta(ud,"onTransitionStart"),ta($v,"onTransitionCancel"),ta(Qh,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cf));function gE(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var m=s[c],S=m.event;m=m.listeners;e:{var E=void 0;if(a)for(var H=m.length-1;0<=H;H--){var ne=m[H],ve=ne.instance,Le=ne.currentTarget;if(ne=ne.listener,ve!==E&&S.isPropagationStopped())break e;E=ne,S.currentTarget=Le;try{E(S)}catch(Ye){Ym(Ye)}S.currentTarget=null,E=ve}else for(H=0;H<m.length;H++){if(ne=m[H],ve=ne.instance,Le=ne.currentTarget,ne=ne.listener,ve!==E&&S.isPropagationStopped())break e;E=ne,S.currentTarget=Le;try{E(S)}catch(Ye){Ym(Ye)}S.currentTarget=null,E=ve}}}}function In(s,a){var c=a[vs];c===void 0&&(c=a[vs]=new Set);var m=s+"__bubble";c.has(m)||(xE(a,s,2,!1),c.add(m))}function G0(s,a,c){var m=0;a&&(m|=4),xE(c,s,m,a)}var lg="_reactListening"+Math.random().toString(36).slice(2);function Y0(s){if(!s[lg]){s[lg]=!0,nl.forEach(function(c){c!=="selectionchange"&&(Qz.has(c)||G0(c,!1,s),G0(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[lg]||(a[lg]=!0,G0("selectionchange",!1,a))}}function xE(s,a,c,m){switch(FE(a)){case 2:var S=EI;break;case 8:S=_I;break;default:S=ly}c=S.bind(null,a,c,s),S=void 0,!Hs||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(S=!0),m?S!==void 0?s.addEventListener(a,c,{capture:!0,passive:S}):s.addEventListener(a,c,!0):S!==void 0?s.addEventListener(a,c,{passive:S}):s.addEventListener(a,c,!1)}function Z0(s,a,c,m,S){var E=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var H=m.tag;if(H===3||H===4){var ne=m.stateNode.containerInfo;if(ne===S)break;if(H===4)for(H=m.return;H!==null;){var ve=H.tag;if((ve===3||ve===4)&&H.stateNode.containerInfo===S)return;H=H.return}for(;ne!==null;){if(H=us(ne),H===null)return;if(ve=H.tag,ve===5||ve===6||ve===26||ve===27){m=E=H;continue e}ne=ne.parentNode}}m=m.return}Br(function(){var Le=E,Ye=li(c),et=[];e:{var Oe=_m.get(s);if(Oe!==void 0){var $e=Be,an=s;switch(s){case"keypress":if(vr(c)===0)break e;case"keydown":case"keyup":$e=qh;break;case"focusin":an="focus",$e=Za;break;case"focusout":an="blur",$e=Za;break;case"beforeblur":case"afterblur":$e=Za;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=zr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=Qi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=nd;break;case Em:case ea:case Jc:$e=Vh;break;case Qh:$e=yo;break;case"scroll":case"scrollend":$e=ct;break;case"wheel":$e=sd;break;case"copy":case"cut":case"paste":$e=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Vl;break;case"toggle":case"beforetoggle":$e=Xa}var tn=(a&4)!==0,pr=!tn&&(s==="scroll"||s==="scrollend"),De=tn?Oe!==null?Oe+"Capture":null:Oe;tn=[];for(var we=Le,Ie;we!==null;){var Ke=we;if(Ie=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Ie===null||De===null||(Ke=Mn(we,De),Ke!=null&&tn.push(Ef(we,Ke,Ie))),pr)break;we=we.return}0<tn.length&&(Oe=new $e(Oe,an,null,c,Ye),et.push({event:Oe,listeners:tn}))}}if((a&7)===0){e:{if(Oe=s==="mouseover"||s==="pointerover",$e=s==="mouseout"||s==="pointerout",Oe&&c!==Vs&&(an=c.relatedTarget||c.fromElement)&&(us(an)||an[ya]))break e;if(($e||Oe)&&(Oe=Ye.window===Ye?Ye:(Oe=Ye.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,$e?(an=c.relatedTarget||c.toElement,$e=Le,an=an?us(an):null,an!==null&&(pr=u(an),tn=an.tag,an!==pr||tn!==5&&tn!==27&&tn!==6)&&(an=null)):($e=null,an=Le),$e!==an)){if(tn=zr,Ke="onMouseLeave",De="onMouseEnter",we="mouse",(s==="pointerout"||s==="pointerover")&&(tn=Vl,Ke="onPointerLeave",De="onPointerEnter",we="pointer"),pr=$e==null?Oe:Fs($e),Ie=an==null?Oe:Fs(an),Oe=new tn(Ke,we+"leave",$e,c,Ye),Oe.target=pr,Oe.relatedTarget=Ie,Ke=null,us(Ye)===Le&&(tn=new tn(De,we+"enter",an,c,Ye),tn.target=Ie,tn.relatedTarget=pr,Ke=tn),pr=Ke,$e&&an)t:{for(tn=$e,De=an,we=0,Ie=tn;Ie;Ie=Dd(Ie))we++;for(Ie=0,Ke=De;Ke;Ke=Dd(Ke))Ie++;for(;0<we-Ie;)tn=Dd(tn),we--;for(;0<Ie-we;)De=Dd(De),Ie--;for(;we--;){if(tn===De||De!==null&&tn===De.alternate)break t;tn=Dd(tn),De=Dd(De)}tn=null}else tn=null;$e!==null&&vE(et,Oe,$e,tn,!1),an!==null&&pr!==null&&vE(et,pr,an,tn,!0)}}e:{if(Oe=Le?Fs(Le):window,$e=Oe.nodeName&&Oe.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Oe.type==="file")var Ft=Hl;else if($n(Oe))if(Yh)Ft=Ov;else{Ft=Lv;var kn=Xh}else $e=Oe.nodeName,!$e||$e.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Le&&bs(Le.elementType)&&(Ft=Hl):Ft=Ja;if(Ft&&(Ft=Ft(s,Le))){Fr(et,Ft,c,Ye);break e}kn&&kn(s,Oe,Le),s==="focusout"&&Le&&Oe.type==="number"&&Le.memoizedProps.value!=null&&Gi(Oe,"number",Oe.value)}switch(kn=Le?Fs(Le):window,s){case"focusin":($n(kn)||kn.contentEditable==="true")&&(Ji=kn,Gl=Le,al=null);break;case"focusout":al=Gl=Ji=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,wm(et,c,Ye);break;case"selectionchange":if(od)break;case"keydown":case"keyup":wm(et,c,Ye)}var Gt;if(Ka)e:{switch(s){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else Xn?Sn(s,c)&&(nn="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(nn="onCompositionStart");nn&&(ie&&c.locale!=="ko"&&(Xn||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&Xn&&(Gt=Ga()):(ws=Ye,ci="value"in ws?ws.value:ws.textContent,Xn=!0)),kn=cg(Le,nn),0<kn.length&&(nn=new ui(nn,s,null,c,Ye),et.push({event:nn,listeners:kn}),Gt?nn.data=Gt:(Gt=en(c),Gt!==null&&(nn.data=Gt)))),(Gt=B?_i(s,c):Cs(s,c))&&(nn=cg(Le,"onBeforeInput"),0<nn.length&&(kn=new ui("onBeforeInput","beforeinput",null,c,Ye),et.push({event:kn,listeners:nn}),kn.data=Gt)),Zz(et,s,Le,c,Ye)}gE(et,a)})}function Ef(s,a,c){return{instance:s,listener:a,currentTarget:c}}function cg(s,a){for(var c=a+"Capture",m=[];s!==null;){var S=s,E=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||E===null||(S=Mn(s,c),S!=null&&m.unshift(Ef(s,S,E)),S=Mn(s,a),S!=null&&m.push(Ef(s,S,E))),s.tag===3)return m;s=s.return}return[]}function Dd(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vE(s,a,c,m,S){for(var E=a._reactName,H=[];c!==null&&c!==m;){var ne=c,ve=ne.alternate,Le=ne.stateNode;if(ne=ne.tag,ve!==null&&ve===m)break;ne!==5&&ne!==26&&ne!==27||Le===null||(ve=Le,S?(Le=Mn(c,E),Le!=null&&H.unshift(Ef(c,Le,ve))):S||(Le=Mn(c,E),Le!=null&&H.push(Ef(c,Le,ve)))),c=c.return}H.length!==0&&s.push({event:a,listeners:H})}var Jz=/\r\n?/g,eI=/\u0000|\uFFFD/g;function yE(s){return(typeof s=="string"?s:""+s).replace(Jz,`
`).replace(eI,"")}function jE(s,a){return a=yE(a),yE(s)===a}function ug(){}function fr(s,a,c,m,S,E){switch(c){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||ks(s,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&ks(s,""+m);break;case"className":Ui(s,"class",m);break;case"tabIndex":Ui(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(s,c,m);break;case"style":Or(s,m,E);break;case"data":if(a!=="object"){Ui(s,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(c);break}m=Zi(""+m),s.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(c==="formAction"?(a!=="input"&&fr(s,a,"name",S.name,S,null),fr(s,a,"formEncType",S.formEncType,S,null),fr(s,a,"formMethod",S.formMethod,S,null),fr(s,a,"formTarget",S.formTarget,S,null)):(fr(s,a,"encType",S.encType,S,null),fr(s,a,"method",S.method,S,null),fr(s,a,"target",S.target,S,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(c);break}m=Zi(""+m),s.setAttribute(c,m);break;case"onClick":m!=null&&(s.onclick=ug);break;case"onScroll":m!=null&&In("scroll",s);break;case"onScrollEnd":m!=null&&In("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(c=m.__html,c!=null){if(S.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}c=Zi(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,""+m):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":m===!0?s.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,m):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(c,m):s.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(c):s.setAttribute(c,m);break;case"popover":In("beforetoggle",s),In("toggle",s),Vi(s,"popover",m);break;case"xlinkActuate":ai(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ai(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ai(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ai(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ai(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ai(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ai(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ai(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ai(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Vi(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=xo.get(c)||c,Vi(s,c,m))}}function X0(s,a,c,m,S,E){switch(c){case"style":Or(s,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(c=m.__html,c!=null){if(S.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof m=="string"?ks(s,m):(typeof m=="number"||typeof m=="bigint")&&ks(s,""+m);break;case"onScroll":m!=null&&In("scroll",s);break;case"onScrollEnd":m!=null&&In("scrollend",s);break;case"onClick":m!=null&&(s.onclick=ug);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(S=c.endsWith("Capture"),a=c.slice(2,S?c.length-7:void 0),E=s[rs]||null,E=E!=null?E[c]:null,typeof E=="function"&&s.removeEventListener(a,E,S),typeof m=="function")){typeof E!="function"&&E!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,m,S);break e}c in s?s[c]=m:m===!0?s.setAttribute(c,""):Vi(s,c,m)}}}function zs(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":In("error",s),In("load",s);var m=!1,S=!1,E;for(E in c)if(c.hasOwnProperty(E)){var H=c[E];if(H!=null)switch(E){case"src":m=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:fr(s,a,E,H,c,null)}}S&&fr(s,a,"srcSet",c.srcSet,c,null),m&&fr(s,a,"src",c.src,c,null);return;case"input":In("invalid",s);var ne=E=H=S=null,ve=null,Le=null;for(m in c)if(c.hasOwnProperty(m)){var Ye=c[m];if(Ye!=null)switch(m){case"name":S=Ye;break;case"type":H=Ye;break;case"checked":ve=Ye;break;case"defaultChecked":Le=Ye;break;case"value":E=Ye;break;case"defaultValue":ne=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(i(137,a));break;default:fr(s,a,m,Ye,c,null)}}go(s,E,ne,ve,Le,H,S,!1),Wi(s);return;case"select":In("invalid",s),m=H=E=null;for(S in c)if(c.hasOwnProperty(S)&&(ne=c[S],ne!=null))switch(S){case"value":E=ne;break;case"defaultValue":H=ne;break;case"multiple":m=ne;default:fr(s,a,S,ne,c,null)}a=E,c=H,s.multiple=!!m,a!=null?js(s,!!m,a,!1):c!=null&&js(s,!!m,c,!0);return;case"textarea":In("invalid",s),E=S=m=null;for(H in c)if(c.hasOwnProperty(H)&&(ne=c[H],ne!=null))switch(H){case"value":m=ne;break;case"defaultValue":S=ne;break;case"children":E=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(91));break;default:fr(s,a,H,ne,c,null)}Yi(s,m,S,E),Wi(s);return;case"option":for(ve in c)if(c.hasOwnProperty(ve)&&(m=c[ve],m!=null))switch(ve){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:fr(s,a,ve,m,c,null)}return;case"dialog":In("beforetoggle",s),In("toggle",s),In("cancel",s),In("close",s);break;case"iframe":case"object":In("load",s);break;case"video":case"audio":for(m=0;m<Cf.length;m++)In(Cf[m],s);break;case"image":In("error",s),In("load",s);break;case"details":In("toggle",s);break;case"embed":case"source":case"link":In("error",s),In("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in c)if(c.hasOwnProperty(Le)&&(m=c[Le],m!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:fr(s,a,Le,m,c,null)}return;default:if(bs(a)){for(Ye in c)c.hasOwnProperty(Ye)&&(m=c[Ye],m!==void 0&&X0(s,a,Ye,m,c,void 0));return}}for(ne in c)c.hasOwnProperty(ne)&&(m=c[ne],m!=null&&fr(s,a,ne,m,c,null))}function tI(s,a,c,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,E=null,H=null,ne=null,ve=null,Le=null,Ye=null;for($e in c){var et=c[$e];if(c.hasOwnProperty($e)&&et!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":ve=et;default:m.hasOwnProperty($e)||fr(s,a,$e,null,m,et)}}for(var Oe in m){var $e=m[Oe];if(et=c[Oe],m.hasOwnProperty(Oe)&&($e!=null||et!=null))switch(Oe){case"type":E=$e;break;case"name":S=$e;break;case"checked":Le=$e;break;case"defaultChecked":Ye=$e;break;case"value":H=$e;break;case"defaultValue":ne=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(i(137,a));break;default:$e!==et&&fr(s,a,Oe,$e,m,et)}}ss(s,H,ne,ve,Le,Ye,E,S);return;case"select":$e=H=ne=Oe=null;for(E in c)if(ve=c[E],c.hasOwnProperty(E)&&ve!=null)switch(E){case"value":break;case"multiple":$e=ve;default:m.hasOwnProperty(E)||fr(s,a,E,null,m,ve)}for(S in m)if(E=m[S],ve=c[S],m.hasOwnProperty(S)&&(E!=null||ve!=null))switch(S){case"value":Oe=E;break;case"defaultValue":ne=E;break;case"multiple":H=E;default:E!==ve&&fr(s,a,S,E,m,ve)}a=ne,c=H,m=$e,Oe!=null?js(s,!!c,Oe,!1):!!m!=!!c&&(a!=null?js(s,!!c,a,!0):js(s,!!c,c?[]:"",!1));return;case"textarea":$e=Oe=null;for(ne in c)if(S=c[ne],c.hasOwnProperty(ne)&&S!=null&&!m.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:fr(s,a,ne,null,m,S)}for(H in m)if(S=m[H],E=c[H],m.hasOwnProperty(H)&&(S!=null||E!=null))switch(H){case"value":Oe=S;break;case"defaultValue":$e=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:S!==E&&fr(s,a,H,S,m,E)}dr(s,Oe,$e);return;case"option":for(var an in c)if(Oe=c[an],c.hasOwnProperty(an)&&Oe!=null&&!m.hasOwnProperty(an))switch(an){case"selected":s.selected=!1;break;default:fr(s,a,an,null,m,Oe)}for(ve in m)if(Oe=m[ve],$e=c[ve],m.hasOwnProperty(ve)&&Oe!==$e&&(Oe!=null||$e!=null))switch(ve){case"selected":s.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:fr(s,a,ve,Oe,m,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tn in c)Oe=c[tn],c.hasOwnProperty(tn)&&Oe!=null&&!m.hasOwnProperty(tn)&&fr(s,a,tn,null,m,Oe);for(Le in m)if(Oe=m[Le],$e=c[Le],m.hasOwnProperty(Le)&&Oe!==$e&&(Oe!=null||$e!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,a));break;default:fr(s,a,Le,Oe,m,$e)}return;default:if(bs(a)){for(var pr in c)Oe=c[pr],c.hasOwnProperty(pr)&&Oe!==void 0&&!m.hasOwnProperty(pr)&&X0(s,a,pr,void 0,m,Oe);for(Ye in m)Oe=m[Ye],$e=c[Ye],!m.hasOwnProperty(Ye)||Oe===$e||Oe===void 0&&$e===void 0||X0(s,a,Ye,Oe,m,$e);return}}for(var De in c)Oe=c[De],c.hasOwnProperty(De)&&Oe!=null&&!m.hasOwnProperty(De)&&fr(s,a,De,null,m,Oe);for(et in m)Oe=m[et],$e=c[et],!m.hasOwnProperty(et)||Oe===$e||Oe==null&&$e==null||fr(s,a,et,Oe,m,$e)}var K0=null,Q0=null;function dg(s){return s.nodeType===9?s:s.ownerDocument}function bE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SE(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function J0(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ey=null;function nI(){var s=window.event;return s&&s.type==="popstate"?s===ey?!1:(ey=s,!0):(ey=null,!1)}var wE=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,sI=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(s){return CE.resolve(null).then(s).catch(iI)}:wE;function iI(s){setTimeout(function(){throw s})}function pc(s){return s==="head"}function EE(s,a){var c=a,m=0,S=0;do{var E=c.nextSibling;if(s.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"){if(0<m&&8>m){c=m;var H=s.ownerDocument;if(c&1&&_f(H.documentElement),c&2&&_f(H.body),c&4)for(c=H.head,_f(c),H=c.firstChild;H;){var ne=H.nextSibling,ve=H.nodeName;H[Si]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&H.rel.toLowerCase()==="stylesheet"||c.removeChild(H),H=ne}}if(S===0){s.removeChild(E),zf(a);return}S--}else c==="$"||c==="$?"||c==="$!"?S++:m=c.charCodeAt(0)-48;else m=0;c=E}while(c);zf(a)}function ty(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":ty(c),Dr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function aI(s,a,c,m){for(;s.nodeType===1;){var S=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[Si])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==S.rel||s.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||s.getAttribute("title")!==(S.title==null?null:S.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(S.src==null?null:S.src)||s.getAttribute("type")!==(S.type==null?null:S.type)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=S.name==null?null:""+S.name;if(S.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=ro(s.nextSibling),s===null)break}return null}function oI(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=ro(s.nextSibling),s===null))return null;return s}function ny(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function lI(s,a){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")a();else{var m=function(){a(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function ro(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var ry=null;function _E(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}function TE(s,a,c){switch(a=dg(c),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function _f(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Dr(s)}var Ta=new Map,AE=new Set;function hg(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var yl=U.d;U.d={f:cI,r:uI,D:dI,C:hI,L:fI,m:pI,X:gI,S:mI,M:xI};function cI(){var s=yl.f(),a=rg();return s||a}function uI(s){var a=ys(s);a!==null&&a.tag===5&&a.type==="form"?Yw(a):yl.r(s)}var Pd=typeof document>"u"?null:document;function RE(s,a,c){var m=Pd;if(m&&typeof a=="string"&&a){var S=Mr(a);S='link[rel="'+s+'"][href="'+S+'"]',typeof c=="string"&&(S+='[crossorigin="'+c+'"]'),AE.has(S)||(AE.add(S),s={rel:s,crossOrigin:c,href:a},m.querySelector(S)===null&&(a=m.createElement("link"),zs(a,"link",s),xr(a),m.head.appendChild(a)))}}function dI(s){yl.D(s),RE("dns-prefetch",s,null)}function hI(s,a){yl.C(s,a),RE("preconnect",s,a)}function fI(s,a,c){yl.L(s,a,c);var m=Pd;if(m&&s&&a){var S='link[rel="preload"][as="'+Mr(a)+'"]';a==="image"&&c&&c.imageSrcSet?(S+='[imagesrcset="'+Mr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(S+='[imagesizes="'+Mr(c.imageSizes)+'"]')):S+='[href="'+Mr(s)+'"]';var E=S;switch(a){case"style":E=Md(s);break;case"script":E=zd(s)}Ta.has(E)||(s=x({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),Ta.set(E,s),m.querySelector(S)!==null||a==="style"&&m.querySelector(Tf(E))||a==="script"&&m.querySelector(Af(E))||(a=m.createElement("link"),zs(a,"link",s),xr(a),m.head.appendChild(a)))}}function pI(s,a){yl.m(s,a);var c=Pd;if(c&&s){var m=a&&typeof a.as=="string"?a.as:"script",S='link[rel="modulepreload"][as="'+Mr(m)+'"][href="'+Mr(s)+'"]',E=S;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=zd(s)}if(!Ta.has(E)&&(s=x({rel:"modulepreload",href:s},a),Ta.set(E,s),c.querySelector(S)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Af(E)))return}m=c.createElement("link"),zs(m,"link",s),xr(m),c.head.appendChild(m)}}}function mI(s,a,c){yl.S(s,a,c);var m=Pd;if(m&&s){var S=ri(m).hoistableStyles,E=Md(s);a=a||"default";var H=S.get(E);if(!H){var ne={loading:0,preload:null};if(H=m.querySelector(Tf(E)))ne.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":a},c),(c=Ta.get(E))&&sy(s,c);var ve=H=m.createElement("link");xr(ve),zs(ve,"link",s),ve._p=new Promise(function(Le,Ye){ve.onload=Le,ve.onerror=Ye}),ve.addEventListener("load",function(){ne.loading|=1}),ve.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,fg(H,a,m)}H={type:"stylesheet",instance:H,count:1,state:ne},S.set(E,H)}}}function gI(s,a){yl.X(s,a);var c=Pd;if(c&&s){var m=ri(c).hoistableScripts,S=zd(s),E=m.get(S);E||(E=c.querySelector(Af(S)),E||(s=x({src:s,async:!0},a),(a=Ta.get(S))&&iy(s,a),E=c.createElement("script"),xr(E),zs(E,"link",s),c.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(S,E))}}function xI(s,a){yl.M(s,a);var c=Pd;if(c&&s){var m=ri(c).hoistableScripts,S=zd(s),E=m.get(S);E||(E=c.querySelector(Af(S)),E||(s=x({src:s,async:!0,type:"module"},a),(a=Ta.get(S))&&iy(s,a),E=c.createElement("script"),xr(E),zs(E,"link",s),c.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(S,E))}}function kE(s,a,c,m){var S=(S=le.current)?hg(S):null;if(!S)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Md(c.href),c=ri(S).hoistableStyles,m=c.get(a),m||(m={type:"style",instance:null,count:0,state:null},c.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Md(c.href);var E=ri(S).hoistableStyles,H=E.get(s);if(H||(S=S.ownerDocument||S,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,H),(E=S.querySelector(Tf(s)))&&!E._p&&(H.instance=E,H.state.loading=5),Ta.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ta.set(s,c),E||vI(S,s,c,H.state))),a&&m===null)throw Error(i(528,""));return H}if(a&&m!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zd(c),c=ri(S).hoistableScripts,m=c.get(a),m||(m={type:"script",instance:null,count:0,state:null},c.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Md(s){return'href="'+Mr(s)+'"'}function Tf(s){return'link[rel="stylesheet"]['+s+"]"}function DE(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function vI(s,a,c,m){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=s.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),zs(a,"link",c),xr(a),s.head.appendChild(a))}function zd(s){return'[src="'+Mr(s)+'"]'}function Af(s){return"script[async]"+s}function PE(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var m=s.querySelector('style[data-href~="'+Mr(c.href)+'"]');if(m)return a.instance=m,xr(m),m;var S=x({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),xr(m),zs(m,"style",S),fg(m,c.precedence,s),a.instance=m;case"stylesheet":S=Md(c.href);var E=s.querySelector(Tf(S));if(E)return a.state.loading|=4,a.instance=E,xr(E),E;m=DE(c),(S=Ta.get(S))&&sy(m,S),E=(s.ownerDocument||s).createElement("link"),xr(E);var H=E;return H._p=new Promise(function(ne,ve){H.onload=ne,H.onerror=ve}),zs(E,"link",m),a.state.loading|=4,fg(E,c.precedence,s),a.instance=E;case"script":return E=zd(c.src),(S=s.querySelector(Af(E)))?(a.instance=S,xr(S),S):(m=c,(S=Ta.get(E))&&(m=x({},c),iy(m,S)),s=s.ownerDocument||s,S=s.createElement("script"),xr(S),zs(S,"link",m),s.head.appendChild(S),a.instance=S);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,fg(m,c.precedence,s));return a.instance}function fg(s,a,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=m.length?m[m.length-1]:null,E=S,H=0;H<m.length;H++){var ne=m[H];if(ne.dataset.precedence===a)E=ne;else if(E!==S)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function sy(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function iy(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var pg=null;function ME(s,a,c){if(pg===null){var m=new Map,S=pg=new Map;S.set(c,m)}else S=pg,m=S.get(c),m||(m=new Map,S.set(c,m));if(m.has(s))return m;for(m.set(s,null),c=c.getElementsByTagName(s),S=0;S<c.length;S++){var E=c[S];if(!(E[Si]||E[Er]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var H=E.getAttribute(a)||"";H=s+H;var ne=m.get(H);ne?ne.push(E):m.set(H,[E])}}return m}function zE(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function yI(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function IE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Rf=null;function jI(){}function bI(s,a,c){if(Rf===null)throw Error(i(475));var m=Rf;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var S=Md(c.href),E=s.querySelector(Tf(S));if(E){s=E._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=mg.bind(m),s.then(m,m)),a.state.loading|=4,a.instance=E,xr(E);return}E=s.ownerDocument||s,c=DE(c),(S=Ta.get(S))&&sy(c,S),E=E.createElement("link"),xr(E);var H=E;H._p=new Promise(function(ne,ve){H.onload=ne,H.onerror=ve}),zs(E,"link",c),a.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=mg.bind(m),s.addEventListener("load",a),s.addEventListener("error",a))}}function SI(){if(Rf===null)throw Error(i(475));var s=Rf;return s.stylesheets&&s.count===0&&ay(s,s.stylesheets),0<s.count?function(a){var c=setTimeout(function(){if(s.stylesheets&&ay(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c)}}:null}function mg(){if(this.count--,this.count===0){if(this.stylesheets)ay(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var gg=null;function ay(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,gg=new Map,a.forEach(wI,s),gg=null,mg.call(s))}function wI(s,a){if(!(a.state.loading&4)){var c=gg.get(s);if(c)var m=c.get(null);else{c=new Map,gg.set(s,c);for(var S=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<S.length;E++){var H=S[E];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(c.set(H.dataset.precedence,H),m=H)}m&&c.set(null,m)}S=a.instance,H=S.getAttribute("data-precedence"),E=c.get(H)||m,E===m&&c.set(null,S),c.set(H,S),this.count++,m=mg.bind(this),S.addEventListener("load",m),S.addEventListener("error",m),E?E.parentNode.insertBefore(S,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(S,s.firstChild)),a.state.loading|=4}}var kf={$$typeof:M,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function CI(s,a,c,m,S,E,H,ne){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zn(0),this.hiddenUpdates=Zn(null),this.identifierPrefix=m,this.onUncaughtError=S,this.onCaughtError=E,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function NE(s,a,c,m,S,E,H,ne,ve,Le,Ye,et){return s=new CI(s,a,c,H,ne,ve,Le,et),a=1,E===!0&&(a|=24),E=mi(3,null,null,a),s.current=E,E.stateNode=s,a=Fv(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:m,isDehydrated:c,cache:a},Wv(E),s}function LE(s){return s?(s=ul,s):ul}function OE(s,a,c,m,S,E){S=LE(S),m.context===null?m.context=S:m.pendingContext=S,m=tc(a),m.payload={element:c},E=E===void 0?null:E,E!==null&&(m.callback=E),c=nc(s,m,a),c!==null&&(oa(c,s,a),af(c,s,a))}function BE(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function oy(s,a){BE(s,a),(s=s.alternate)&&BE(s,a)}function $E(s){if(s.tag===13){var a=Xl(s,67108864);a!==null&&oa(a,s,67108864),oy(s,67108864)}}var xg=!0;function EI(s,a,c,m){var S=G.T;G.T=null;var E=U.p;try{U.p=2,ly(s,a,c,m)}finally{U.p=E,G.T=S}}function _I(s,a,c,m){var S=G.T;G.T=null;var E=U.p;try{U.p=8,ly(s,a,c,m)}finally{U.p=E,G.T=S}}function ly(s,a,c,m){if(xg){var S=cy(m);if(S===null)Z0(s,a,m,vg,c),VE(s,m);else if(AI(S,s,a,c,m))m.stopPropagation();else if(VE(s,m),a&4&&-1<TI.indexOf(s)){for(;S!==null;){var E=ys(S);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var H=Zt(E.pendingLanes);if(H!==0){var ne=E;for(ne.pendingLanes|=2,ne.entangledLanes|=2;H;){var ve=1<<31-pt(H);ne.entanglements[1]|=ve,H&=~ve}Ao(E),(cr&6)===0&&(tg=Ge()+500,wf(0))}}break;case 13:ne=Xl(E,2),ne!==null&&oa(ne,E,2),rg(),oy(E,2)}if(E=cy(m),E===null&&Z0(s,a,m,vg,c),E===S)break;S=E}S!==null&&m.stopPropagation()}else Z0(s,a,m,null,c)}}function cy(s){return s=li(s),uy(s)}var vg=null;function uy(s){if(vg=null,s=us(s),s!==null){var a=u(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=d(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return vg=s,null}function FE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case se:return 2;case be:return 8;case at:case St:return 32;case An:return 268435456;default:return 32}default:return 32}}var dy=!1,mc=null,gc=null,xc=null,Df=new Map,Pf=new Map,vc=[],TI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VE(s,a){switch(s){case"focusin":case"focusout":mc=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":xc=null;break;case"pointerover":case"pointerout":Df.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pf.delete(a.pointerId)}}function Mf(s,a,c,m,S,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:c,eventSystemFlags:m,nativeEvent:E,targetContainers:[S]},a!==null&&(a=ys(a),a!==null&&$E(a)),s):(s.eventSystemFlags|=m,a=s.targetContainers,S!==null&&a.indexOf(S)===-1&&a.push(S),s)}function AI(s,a,c,m,S){switch(a){case"focusin":return mc=Mf(mc,s,a,c,m,S),!0;case"dragenter":return gc=Mf(gc,s,a,c,m,S),!0;case"mouseover":return xc=Mf(xc,s,a,c,m,S),!0;case"pointerover":var E=S.pointerId;return Df.set(E,Mf(Df.get(E)||null,s,a,c,m,S)),!0;case"gotpointercapture":return E=S.pointerId,Pf.set(E,Mf(Pf.get(E)||null,s,a,c,m,S)),!0}return!1}function UE(s){var a=us(s.target);if(a!==null){var c=u(a);if(c!==null){if(a=c.tag,a===13){if(a=d(c),a!==null){s.blockedOn=a,$s(s.priority,function(){if(c.tag===13){var m=aa();m=Bi(m);var S=Xl(c,m);S!==null&&oa(S,c,m),oy(c,m)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yg(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=cy(s.nativeEvent);if(c===null){c=s.nativeEvent;var m=new c.constructor(c.type,c);Vs=m,c.target.dispatchEvent(m),Vs=null}else return a=ys(c),a!==null&&$E(a),s.blockedOn=c,!1;a.shift()}return!0}function HE(s,a,c){yg(s)&&c.delete(a)}function RI(){dy=!1,mc!==null&&yg(mc)&&(mc=null),gc!==null&&yg(gc)&&(gc=null),xc!==null&&yg(xc)&&(xc=null),Df.forEach(HE),Pf.forEach(HE)}function jg(s,a){s.blockedOn===a&&(s.blockedOn=null,dy||(dy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,RI)))}var bg=null;function WE(s){bg!==s&&(bg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bg===s&&(bg=null);for(var a=0;a<s.length;a+=3){var c=s[a],m=s[a+1],S=s[a+2];if(typeof m!="function"){if(uy(m||c)===null)continue;break}var E=ys(c);E!==null&&(s.splice(a,3),a-=3,u0(E,{pending:!0,data:S,method:c.method,action:m},m,S))}}))}function zf(s){function a(ve){return jg(ve,s)}mc!==null&&jg(mc,s),gc!==null&&jg(gc,s),xc!==null&&jg(xc,s),Df.forEach(a),Pf.forEach(a);for(var c=0;c<vc.length;c++){var m=vc[c];m.blockedOn===s&&(m.blockedOn=null)}for(;0<vc.length&&(c=vc[0],c.blockedOn===null);)UE(c),c.blockedOn===null&&vc.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var S=c[m],E=c[m+1],H=S[rs]||null;if(typeof E=="function")H||WE(c);else if(H){var ne=null;if(E&&E.hasAttribute("formAction")){if(S=E,H=E[rs]||null)ne=H.formAction;else if(uy(S)!==null)continue}else ne=H.action;typeof ne=="function"?c[m+1]=ne:(c.splice(m,3),m-=3),WE(c)}}}function hy(s){this._internalRoot=s}Sg.prototype.render=hy.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,m=aa();OE(c,m,s,a,null,null)},Sg.prototype.unmount=hy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;OE(s.current,2,null,s,null,null),rg(),a[ya]=null}};function Sg(s){this._internalRoot=s}Sg.prototype.unstable_scheduleHydration=function(s){if(s){var a=po();s={blockedOn:null,target:s,priority:a};for(var c=0;c<vc.length&&a!==0&&a<vc[c].priority;c++);vc.splice(c,0,s),c===0&&UE(s)}};var qE=n.version;if(qE!=="19.1.1")throw Error(i(527,qE,"19.1.1"));U.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var kI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wg.isDisabled&&wg.supportsFiber)try{nt=wg.inject(kI),wt=wg}catch{}}return Nf.createRoot=function(s,a){if(!l(s))throw Error(i(299));var c=!1,m="",S=lC,E=cC,H=uC,ne=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(S=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(H=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(ne=a.unstable_transitionCallbacks)),a=NE(s,1,!1,null,null,c,m,S,E,H,ne,null),s[ya]=a.current,Y0(s),new hy(a)},Nf.hydrateRoot=function(s,a,c){if(!l(s))throw Error(i(299));var m=!1,S="",E=lC,H=cC,ne=uC,ve=null,Le=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(S=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(H=c.onCaughtError),c.onRecoverableError!==void 0&&(ne=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ve=c.unstable_transitionCallbacks),c.formState!==void 0&&(Le=c.formState)),a=NE(s,1,!0,a,c??null,m,S,E,H,ne,ve,Le),a.context=LE(null),c=a.current,m=aa(),m=Bi(m),S=tc(m),S.callback=null,nc(c,S,m),c=m,a.current.lanes=c,Oi(a,c),Ao(a),s[ya]=a.current,Y0(s),new Sg(a)},Nf.version="19.1.1",Nf}var r_;function $I(){if(r_)return my.exports;r_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),my.exports=BI(),my.exports}var FI=$I();const VI=Jp(FI);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var s_="popstate";function UI(t={}){function n(i,l){let{pathname:u,search:d,hash:p}=i.location;return Ij("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(i,l){return typeof l=="string"?l:kp(l)}return WI(n,r,null,t)}function Rr(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function Oa(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function HI(){return Math.random().toString(36).substring(2,10)}function i_(t,n){return{usr:t.state,key:t.key,idx:n}}function Ij(t,n,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?Dh(n):n,state:r,key:n&&n.key||i||HI()}}function kp({pathname:t="/",search:n="",hash:r=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Dh(t){let n={};if(t){let r=t.indexOf("#");r>=0&&(n.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(n.search=t.substring(i),t=t.substring(0,i)),t&&(n.pathname=t)}return n}function WI(t,n,r,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",f=null,g=x();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function x(){return(d.state||{idx:null}).idx}function y(){p="POP";let A=x(),D=A==null?null:A-g;g=A,f&&f({action:p,location:_.location,delta:D})}function b(A,D){p="PUSH";let P=Ij(_.location,A,D);g=x()+1;let M=i_(P,g),N=_.createHref(P);try{d.pushState(M,"",N)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;l.location.assign(N)}u&&f&&f({action:p,location:_.location,delta:1})}function w(A,D){p="REPLACE";let P=Ij(_.location,A,D);g=x();let M=i_(P,g),N=_.createHref(P);d.replaceState(M,"",N),u&&f&&f({action:p,location:_.location,delta:0})}function C(A){return qI(A)}let _={get action(){return p},get location(){return t(l,d)},listen(A){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(s_,y),f=A,()=>{l.removeEventListener(s_,y),f=null}},createHref(A){return n(l,A)},createURL:C,encodeLocation(A){let D=C(A);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:b,replace:w,go(A){return d.go(A)}};return _}function qI(t,n=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Rr(r,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:kp(t);return i=i.replace(/ $/,"%20"),!n&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function IA(t,n,r="/"){return GI(t,n,r,!1)}function GI(t,n,r,i){let l=typeof n=="string"?Dh(n):n,u=Nl(l.pathname||"/",r);if(u==null)return null;let d=NA(t);YI(d);let p=null;for(let f=0;p==null&&f<d.length;++f){let g=iN(u);p=rN(d[f],g,i)}return p}function NA(t,n=[],r=[],i="",l=!1){let u=(d,p,f=l,g)=>{let x={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&f)return;Rr(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let y=kl([i,x.relativePath]),b=r.concat(x);d.children&&d.children.length>0&&(Rr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),NA(d.children,n,b,y,f)),!(d.path==null&&!d.index)&&n.push({path:y,score:tN(y,d.index),routesMeta:b})};return t.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let f of LA(d.path))u(d,p,!0,f)}),n}function LA(t){let n=t.split("/");if(n.length===0)return[];let[r,...i]=n,l=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=LA(i.join("/")),p=[];return p.push(...d.map(f=>f===""?u:[u,f].join("/"))),l&&p.push(...d),p.map(f=>t.startsWith("/")&&f===""?"/":f)}function YI(t){t.sort((n,r)=>n.score!==r.score?r.score-n.score:nN(n.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var ZI=/^:[\w-]+$/,XI=3,KI=2,QI=1,JI=10,eN=-2,a_=t=>t==="*";function tN(t,n){let r=t.split("/"),i=r.length;return r.some(a_)&&(i+=eN),n&&(i+=KI),r.filter(l=>!a_(l)).reduce((l,u)=>l+(ZI.test(u)?XI:u===""?QI:JI),i)}function nN(t,n){return t.length===n.length&&t.slice(0,-1).every((i,l)=>i===n[l])?t[t.length-1]-n[n.length-1]:0}function rN(t,n,r=!1){let{routesMeta:i}=t,l={},u="/",d=[];for(let p=0;p<i.length;++p){let f=i[p],g=p===i.length-1,x=u==="/"?n:n.slice(u.length)||"/",y=_x({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},x),b=f.route;if(!y&&g&&r&&!i[i.length-1].route.index&&(y=_x({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},x)),!y)return null;Object.assign(l,y.params),d.push({params:l,pathname:kl([u,y.pathname]),pathnameBase:cN(kl([u,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(u=kl([u,y.pathnameBase]))}return d}function _x(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=sN(t.path,t.caseSensitive,t.end),l=n.match(r);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((g,{paramName:x,isOptional:y},b)=>{if(x==="*"){let C=p[b]||"";d=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const w=p[b];return y&&!w?g[x]=void 0:g[x]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:t}}function sN(t,n=!1,r=!0){Oa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,f)=>(i.push({paramName:p,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),i]}function iN(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Oa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function Nl(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function aN(t,n="/"){let{pathname:r,search:i="",hash:l=""}=typeof t=="string"?Dh(t):t;return{pathname:r?r.startsWith("/")?r:oN(r,n):n,search:uN(i),hash:dN(l)}}function oN(t,n){let r=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function yy(t,n,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lN(t){return t.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function sS(t){let n=lN(t);return n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase)}function iS(t,n,r,i=!1){let l;typeof t=="string"?l=Dh(t):(l={...t},Rr(!l.pathname||!l.pathname.includes("?"),yy("?","pathname","search",l)),Rr(!l.pathname||!l.pathname.includes("#"),yy("#","pathname","hash",l)),Rr(!l.search||!l.search.includes("#"),yy("#","search","hash",l)));let u=t===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=r;else{let y=n.length-1;if(!i&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),y-=1;l.pathname=b.join("/")}p=y>=0?n[y]:"/"}let f=aN(l,p),g=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(g||x)&&(f.pathname+="/"),f}var kl=t=>t.join("/").replace(/\/\/+/g,"/"),cN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var OA=["POST","PUT","PATCH","DELETE"];new Set(OA);var fN=["GET",...OA];new Set(fN);var Ph=v.createContext(null);Ph.displayName="DataRouter";var Kx=v.createContext(null);Kx.displayName="DataRouterState";v.createContext(!1);var BA=v.createContext({isTransitioning:!1});BA.displayName="ViewTransition";var pN=v.createContext(new Map);pN.displayName="Fetchers";var mN=v.createContext(null);mN.displayName="Await";var co=v.createContext(null);co.displayName="Navigation";var em=v.createContext(null);em.displayName="Location";var uo=v.createContext({outlet:null,matches:[],isDataRoute:!1});uo.displayName="Route";var aS=v.createContext(null);aS.displayName="RouteError";function gN(t,{relative:n}={}){Rr(Mh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=v.useContext(co),{hash:l,pathname:u,search:d}=tm(t,{relative:n}),p=u;return r!=="/"&&(p=u==="/"?r:kl([r,u])),i.createHref({pathname:p,search:d,hash:l})}function Mh(){return v.useContext(em)!=null}function ho(){return Rr(Mh(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(em).location}var $A="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FA(t){v.useContext(co).static||v.useLayoutEffect(t)}function Ua(){let{isDataRoute:t}=v.useContext(uo);return t?RN():xN()}function xN(){Rr(Mh(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Ph),{basename:n,navigator:r}=v.useContext(co),{matches:i}=v.useContext(uo),{pathname:l}=ho(),u=JSON.stringify(sS(i)),d=v.useRef(!1);return FA(()=>{d.current=!0}),v.useCallback((f,g={})=>{if(Oa(d.current,$A),!d.current)return;if(typeof f=="number"){r.go(f);return}let x=iS(f,JSON.parse(u),l,g.relative==="path");t==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:kl([n,x.pathname])),(g.replace?r.replace:r.push)(x,g.state,g)},[n,r,u,l,t])}v.createContext(null);function Qx(){let{matches:t}=v.useContext(uo),n=t[t.length-1];return n?n.params:{}}function tm(t,{relative:n}={}){let{matches:r}=v.useContext(uo),{pathname:i}=ho(),l=JSON.stringify(sS(r));return v.useMemo(()=>iS(t,JSON.parse(l),i,n==="path"),[t,l,i,n])}function vN(t,n){return VA(t,n)}function VA(t,n,r,i,l){Rr(Mh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=v.useContext(co),{matches:d}=v.useContext(uo),p=d[d.length-1],f=p?p.params:{},g=p?p.pathname:"/",x=p?p.pathnameBase:"/",y=p&&p.route;{let P=y&&y.path||"";UA(g,!y||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let b=ho(),w;if(n){let P=typeof n=="string"?Dh(n):n;Rr(x==="/"||P.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${P.pathname}" was given in the \`location\` prop.`),w=P}else w=b;let C=w.pathname||"/",_=C;if(x!=="/"){let P=x.replace(/^\//,"").split("/");_="/"+C.replace(/^\//,"").split("/").slice(P.length).join("/")}let A=IA(t,{pathname:_});Oa(y||A!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Oa(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=wN(A&&A.map(P=>Object.assign({},P,{params:Object.assign({},f,P.params),pathname:kl([x,u.encodeLocation?u.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?x:kl([x,u.encodeLocation?u.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),d,r,i,l);return n&&D?v.createElement(em.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},D):D}function yN(){let t=AN(),n=hN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:u},"ErrorBoundary")," or"," ",v.createElement("code",{style:u},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},n),r?v.createElement("pre",{style:l},r):null,d)}var jN=v.createElement(yN,null),bN=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){this.props.unstable_onError?this.props.unstable_onError(t,n):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(uo.Provider,{value:this.props.routeContext},v.createElement(aS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function SN({routeContext:t,match:n,children:r}){let i=v.useContext(Ph);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(uo.Provider,{value:t},r)}function wN(t,n=[],r=null,i=null,l=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(n.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let u=t,d=r?.errors;if(d!=null){let g=u.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);Rr(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let p=!1,f=-1;if(r)for(let g=0;g<u.length;g++){let x=u[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=g),x.route.id){let{loaderData:y,errors:b}=r,w=x.route.loader&&!y.hasOwnProperty(x.route.id)&&(!b||b[x.route.id]===void 0);if(x.route.lazy||w){p=!0,f>=0?u=u.slice(0,f+1):u=[u[0]];break}}}return u.reduceRight((g,x,y)=>{let b,w=!1,C=null,_=null;r&&(b=d&&x.route.id?d[x.route.id]:void 0,C=x.route.errorElement||jN,p&&(f<0&&y===0?(UA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):f===y&&(w=!0,_=x.route.hydrateFallbackElement||null)));let A=n.concat(u.slice(0,y+1)),D=()=>{let P;return b?P=C:w?P=_:x.route.Component?P=v.createElement(x.route.Component,null):x.route.element?P=x.route.element:P=g,v.createElement(SN,{match:x,routeContext:{outlet:g,matches:A,isDataRoute:r!=null},children:P})};return r&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?v.createElement(bN,{location:r.location,revalidation:r.revalidation,component:C,error:b,children:D(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:i}):D()},null)}function oS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CN(t){let n=v.useContext(Ph);return Rr(n,oS(t)),n}function EN(t){let n=v.useContext(Kx);return Rr(n,oS(t)),n}function _N(t){let n=v.useContext(uo);return Rr(n,oS(t)),n}function lS(t){let n=_N(t),r=n.matches[n.matches.length-1];return Rr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function TN(){return lS("useRouteId")}function AN(){let t=v.useContext(aS),n=EN("useRouteError"),r=lS("useRouteError");return t!==void 0?t:n.errors?.[r]}function RN(){let{router:t}=CN("useNavigate"),n=lS("useNavigate"),r=v.useRef(!1);return FA(()=>{r.current=!0}),v.useCallback(async(l,u={})=>{Oa(r.current,$A),r.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:n,...u}))},[t,n])}var o_={};function UA(t,n,r){!n&&!o_[t]&&(o_[t]=!0,Oa(!1,r))}v.memo(kN);function kN({routes:t,future:n,state:r,unstable_onError:i}){return VA(t,void 0,r,i,n)}function Au({to:t,replace:n,state:r,relative:i}){Rr(Mh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=v.useContext(co);Oa(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=v.useContext(uo),{pathname:d}=ho(),p=Ua(),f=iS(t,sS(u),d,i==="path"),g=JSON.stringify(f);return v.useEffect(()=>{p(JSON.parse(g),{replace:n,state:r,relative:i})},[p,g,i,n,r]),null}function Un(t){Rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DN({basename:t="/",children:n=null,location:r,navigationType:i="POP",navigator:l,static:u=!1}){Rr(!Mh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),p=v.useMemo(()=>({basename:d,navigator:l,static:u,future:{}}),[d,l,u]);typeof r=="string"&&(r=Dh(r));let{pathname:f="/",search:g="",hash:x="",state:y=null,key:b="default"}=r,w=v.useMemo(()=>{let C=Nl(f,d);return C==null?null:{location:{pathname:C,search:g,hash:x,state:y,key:b},navigationType:i}},[d,f,g,x,y,b,i]);return Oa(w!=null,`<Router basename="${d}"> is not able to match the URL "${f}${g}${x}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:v.createElement(co.Provider,{value:p},v.createElement(em.Provider,{children:n,value:w}))}function PN({children:t,location:n}){return vN(Nj(t),n)}function Nj(t,n=[]){let r=[];return v.Children.forEach(t,(i,l)=>{if(!v.isValidElement(i))return;let u=[...n,l];if(i.type===v.Fragment){r.push.apply(r,Nj(i.props.children,u));return}Rr(i.type===Un,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rr(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Nj(i.props.children,u)),r.push(d)}),r}var tx="get",nx="application/x-www-form-urlencoded";function Jx(t){return t!=null&&typeof t.tagName=="string"}function MN(t){return Jx(t)&&t.tagName.toLowerCase()==="button"}function zN(t){return Jx(t)&&t.tagName.toLowerCase()==="form"}function IN(t){return Jx(t)&&t.tagName.toLowerCase()==="input"}function NN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LN(t,n){return t.button===0&&(!n||n==="_self")&&!NN(t)}function Lj(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((n,r)=>{let i=t[r];return n.concat(Array.isArray(i)?i.map(l=>[r,l]):[[r,i]])},[]))}function ON(t,n){let r=Lj(t);return n&&n.forEach((i,l)=>{r.has(l)||n.getAll(l).forEach(u=>{r.append(l,u)})}),r}var Eg=null;function BN(){if(Eg===null)try{new FormData(document.createElement("form"),0),Eg=!1}catch{Eg=!0}return Eg}var $N=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jy(t){return t!=null&&!$N.has(t)?(Oa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nx}"`),null):t}function FN(t,n){let r,i,l,u,d;if(zN(t)){let p=t.getAttribute("action");i=p?Nl(p,n):null,r=t.getAttribute("method")||tx,l=jy(t.getAttribute("enctype"))||nx,u=new FormData(t)}else if(MN(t)||IN(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||p.getAttribute("action");if(i=f?Nl(f,n):null,r=t.getAttribute("formmethod")||p.getAttribute("method")||tx,l=jy(t.getAttribute("formenctype"))||jy(p.getAttribute("enctype"))||nx,u=new FormData(p,t),!BN()){let{name:g,type:x,value:y}=t;if(x==="image"){let b=g?`${g}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else g&&u.append(g,y)}}else{if(Jx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=tx,i=null,l=nx,d=t}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:r.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cS(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function VN(t,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${r}`:n&&Nl(i.pathname,n)==="/"?i.pathname=`${n.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function UN(t,n){if(t.id in n)return n[t.id];try{let r=await import(t.module);return n[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function WN(t,n,r){let i=await Promise.all(t.map(async l=>{let u=n.routes[l.route.id];if(u){let d=await UN(u,r);return d.links?d.links():[]}return[]}));return ZN(i.flat(1).filter(HN).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function l_(t,n,r,i,l,u){let d=(f,g)=>r[g]?f.route.id!==r[g].route.id:!0,p=(f,g)=>r[g].pathname!==f.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==f.params["*"];return u==="assets"?n.filter((f,g)=>d(f,g)||p(f,g)):u==="data"?n.filter((f,g)=>{let x=i.routes[f.route.id];if(!x||!x.hasLoader)return!1;if(d(f,g)||p(f,g))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function qN(t,n,{includeHydrateFallback:r}={}){return GN(t.map(i=>{let l=n.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function GN(t){return[...new Set(t)]}function YN(t){let n={},r=Object.keys(t).sort();for(let i of r)n[i]=t[i];return n}function ZN(t,n){let r=new Set;return new Set(n),t.reduce((i,l)=>{let u=JSON.stringify(YN(l));return r.has(u)||(r.add(u),i.push({key:u,link:l})),i},[])}function HA(){let t=v.useContext(Ph);return cS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function XN(){let t=v.useContext(Kx);return cS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var uS=v.createContext(void 0);uS.displayName="FrameworkContext";function WA(){let t=v.useContext(uS);return cS(t,"You must render this element inside a <HydratedRouter> element"),t}function KN(t,n){let r=v.useContext(uS),[i,l]=v.useState(!1),[u,d]=v.useState(!1),{onFocus:p,onBlur:f,onMouseEnter:g,onMouseLeave:x,onTouchStart:y}=n,b=v.useRef(null);v.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let _=D=>{D.forEach(P=>{d(P.isIntersecting)})},A=new IntersectionObserver(_,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[t]),v.useEffect(()=>{if(i){let _=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(_)}}},[i]);let w=()=>{l(!0)},C=()=>{l(!1),d(!1)};return r?t!=="intent"?[u,b,{}]:[u,b,{onFocus:Lf(p,w),onBlur:Lf(f,C),onMouseEnter:Lf(g,w),onMouseLeave:Lf(x,C),onTouchStart:Lf(y,w)}]:[!1,b,{}]}function Lf(t,n){return r=>{t&&t(r),r.defaultPrevented||n(r)}}function QN({page:t,...n}){let{router:r}=HA(),i=v.useMemo(()=>IA(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?v.createElement(eL,{page:t,matches:i,...n}):null}function JN(t){let{manifest:n,routeModules:r}=WA(),[i,l]=v.useState([]);return v.useEffect(()=>{let u=!1;return WN(t,n,r).then(d=>{u||l(d)}),()=>{u=!0}},[t,n,r]),i}function eL({page:t,matches:n,...r}){let i=ho(),{manifest:l,routeModules:u}=WA(),{basename:d}=HA(),{loaderData:p,matches:f}=XN(),g=v.useMemo(()=>l_(t,n,f,l,i,"data"),[t,n,f,l,i]),x=v.useMemo(()=>l_(t,n,f,l,i,"assets"),[t,n,f,l,i]),y=v.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let C=new Set,_=!1;if(n.forEach(D=>{let P=l.routes[D.route.id];!P||!P.hasLoader||(!g.some(M=>M.route.id===D.route.id)&&D.route.id in p&&u[D.route.id]?.shouldRevalidate||P.hasClientLoader?_=!0:C.add(D.route.id))}),C.size===0)return[];let A=VN(t,d,"data");return _&&C.size>0&&A.searchParams.set("_routes",n.filter(D=>C.has(D.route.id)).map(D=>D.route.id).join(",")),[A.pathname+A.search]},[d,p,i,l,g,n,t,u]),b=v.useMemo(()=>qN(x,l),[x,l]),w=JN(x);return v.createElement(v.Fragment,null,y.map(C=>v.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...r})),b.map(C=>v.createElement("link",{key:C,rel:"modulepreload",href:C,...r})),w.map(({key:C,link:_})=>v.createElement("link",{key:C,nonce:r.nonce,..._})))}function tL(...t){return n=>{t.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var qA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qA&&(window.__reactRouterVersion="7.8.2")}catch{}function nL({basename:t,children:n,window:r}){let i=v.useRef();i.current==null&&(i.current=UI({window:r,v5Compat:!0}));let l=i.current,[u,d]=v.useState({action:l.action,location:l.location}),p=v.useCallback(f=>{v.startTransition(()=>d(f))},[d]);return v.useLayoutEffect(()=>l.listen(p),[l,p]),v.createElement(DN,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l})}var GA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mr=v.forwardRef(function({onClick:n,discover:r="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:f,to:g,preventScrollReset:x,viewTransition:y,...b},w){let{basename:C}=v.useContext(co),_=typeof g=="string"&&GA.test(g),A,D=!1;if(typeof g=="string"&&_&&(A=g,qA))try{let ae=new URL(window.location.href),he=g.startsWith("//")?new URL(ae.protocol+g):new URL(g),re=Nl(he.pathname,C);he.origin===ae.origin&&re!=null?g=re+he.search+he.hash:D=!0}catch{Oa(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=gN(g,{relative:l}),[M,N,z]=KN(i,b),I=aL(g,{replace:d,state:p,target:f,preventScrollReset:x,relative:l,viewTransition:y});function V(ae){n&&n(ae),ae.defaultPrevented||I(ae)}let $=v.createElement("a",{...b,...z,href:A||P,onClick:D||u?n:V,ref:tL(w,N),target:f,"data-discover":!_&&r==="render"?"true":void 0});return M&&!_?v.createElement(v.Fragment,null,$,v.createElement(QN,{page:P})):$});mr.displayName="Link";var rL=v.forwardRef(function({"aria-current":n="page",caseSensitive:r=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:f,...g},x){let y=tm(d,{relative:g.relative}),b=ho(),w=v.useContext(Kx),{navigator:C,basename:_}=v.useContext(co),A=w!=null&&hL(y)&&p===!0,D=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,P=b.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(P=P.toLowerCase(),M=M?M.toLowerCase():null,D=D.toLowerCase()),M&&_&&(M=Nl(M,_)||M);const N=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let z=P===D||!l&&P.startsWith(D)&&P.charAt(N)==="/",I=M!=null&&(M===D||!l&&M.startsWith(D)&&M.charAt(D.length)==="/"),V={isActive:z,isPending:I,isTransitioning:A},$=z?n:void 0,ae;typeof i=="function"?ae=i(V):ae=[i,z?"active":null,I?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let he=typeof u=="function"?u(V):u;return v.createElement(mr,{...g,"aria-current":$,className:ae,ref:x,style:he,to:d,viewTransition:p},typeof f=="function"?f(V):f)});rL.displayName="NavLink";var sL=v.forwardRef(({discover:t="render",fetcherKey:n,navigate:r,reloadDocument:i,replace:l,state:u,method:d=tx,action:p,onSubmit:f,relative:g,preventScrollReset:x,viewTransition:y,...b},w)=>{let C=uL(),_=dL(p,{relative:g}),A=d.toLowerCase()==="get"?"get":"post",D=typeof p=="string"&&GA.test(p),P=M=>{if(f&&f(M),M.defaultPrevented)return;M.preventDefault();let N=M.nativeEvent.submitter,z=N?.getAttribute("formmethod")||d;C(N||M.currentTarget,{fetcherKey:n,method:z,navigate:r,replace:l,state:u,relative:g,preventScrollReset:x,viewTransition:y})};return v.createElement("form",{ref:w,method:A,action:_,onSubmit:i?f:P,...b,"data-discover":!D&&t==="render"?"true":void 0})});sL.displayName="Form";function iL(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YA(t){let n=v.useContext(Ph);return Rr(n,iL(t)),n}function aL(t,{target:n,replace:r,state:i,preventScrollReset:l,relative:u,viewTransition:d}={}){let p=Ua(),f=ho(),g=tm(t,{relative:u});return v.useCallback(x=>{if(LN(x,n)){x.preventDefault();let y=r!==void 0?r:kp(f)===kp(g);p(t,{replace:y,state:i,preventScrollReset:l,relative:u,viewTransition:d})}},[f,p,g,r,i,n,t,l,u,d])}function oL(t){Oa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=v.useRef(Lj(t)),r=v.useRef(!1),i=ho(),l=v.useMemo(()=>ON(i.search,r.current?null:n.current),[i.search]),u=Ua(),d=v.useCallback((p,f)=>{const g=Lj(typeof p=="function"?p(new URLSearchParams(l)):p);r.current=!0,u("?"+g,f)},[u,l]);return[l,d]}var lL=0,cL=()=>`__${String(++lL)}__`;function uL(){let{router:t}=YA("useSubmit"),{basename:n}=v.useContext(co),r=TN();return v.useCallback(async(i,l={})=>{let{action:u,method:d,encType:p,formData:f,body:g}=FN(i,n);if(l.navigate===!1){let x=l.fetcherKey||cL();await t.fetch(x,r,l.action||u,{preventScrollReset:l.preventScrollReset,formData:f,body:g,formMethod:l.method||d,formEncType:l.encType||p,flushSync:l.flushSync})}else await t.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:f,body:g,formMethod:l.method||d,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,n,r])}function dL(t,{relative:n}={}){let{basename:r}=v.useContext(co),i=v.useContext(uo);Rr(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...tm(t||".",{relative:n})},d=ho();if(t==null){u.search=d.search;let p=new URLSearchParams(u.search),f=p.getAll("index");if(f.some(x=>x==="")){p.delete("index"),f.filter(y=>y).forEach(y=>p.append("index",y));let x=p.toString();u.search=x?`?${x}`:""}}return(!t||t===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:kl([r,u.pathname])),kp(u)}function hL(t,{relative:n}={}){let r=v.useContext(BA);Rr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=YA("useViewTransitionState"),l=tm(t,{relative:n});if(!r.isTransitioning)return!1;let u=Nl(r.currentLocation.pathname,i)||r.currentLocation.pathname,d=Nl(r.nextLocation.pathname,i)||r.nextLocation.pathname;return _x(l.pathname,d)!=null||_x(l.pathname,u)!=null}var dS=zA();function fL(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}function ev(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function pL(){return!!globalThis?.document}function ZA(t){return t.parentElement&&ZA(t.parentElement)?!0:t.hidden}function mL(t){const n=t.getAttribute("contenteditable");return n!=="false"&&n!=null}function gL(t){return!!t.getAttribute("disabled")||!!t.getAttribute("aria-disabled")}function xL(t){return XA(t)?.defaultView??window}function XA(t){return ev(t)?t.ownerDocument:document}function vL(t){return t.view??window}function yL(t){return XA(t).activeElement}function jL(t){const n=vL(t);return typeof n.PointerEvent<"u"&&t instanceof n.PointerEvent?t.pointerType==="mouse":t instanceof n.MouseEvent}function KA(t){return!!t.touches}function bL(t){return KA(t)&&t.touches.length>1}function SL(t,n="page"){const r=t.touches[0]||t.changedTouches[0];return{x:r[`${n}X`],y:r[`${n}Y`]}}function wL(t,n="page"){return{x:t[`${n}X`],y:t[`${n}Y`]}}function QA(t,n="page"){return KA(t)?SL(t,n):wL(t,n)}function CL(t){return n=>{const r=jL(n);(!r||r&&n.button===0)&&t(n)}}function EL(t,n=!1){function r(l){t(l,{point:QA(l)})}return n?CL(r):r}function rx(t,n,r,i){return fL(t,n,EL(r,n==="pointerdown"),i)}function _L(t,...n){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const r={...t};for(const i of n)if(i!=null)for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&(l in r&&delete r[l],r[l]=i[l]);return r}const gn=t=>t?"":void 0,Bo=t=>t?!0:void 0;function Oj(t){return Array.isArray(t)}function gs(t){const n=typeof t;return t!=null&&(n==="object"||n==="function")&&!Oj(t)}function TL(t){const n=t==null?0:t.length;return n?t[n-1]:void 0}function AL(t){const n=parseFloat(t.toString()),r=t.toString().replace(String(n),"");return{unitless:!r,value:n,unit:r}}function Bj(t){if(t==null)return t;const{unitless:n}=AL(t);return n||typeof t=="number"?`${t}px`:t}const JA=(t,n)=>parseInt(t[1],10)>parseInt(n[1],10)?1:-1,hS=t=>Object.fromEntries(Object.entries(t).sort(JA));function c_(t){const n=hS(t);return Object.assign(Object.values(n),n)}function RL(t){const n=Object.keys(hS(t));return new Set(n)}function u_(t){if(!t)return t;t=Bj(t)??t;const n=-.02;return typeof t=="number"?`${t+n}`:t.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function Qf(t,n){const r=["@media screen"];return t&&r.push("and",`(min-width: ${Bj(t)})`),n&&r.push("and",`(max-width: ${Bj(n)})`),r.join(" ")}function kL(t){if(!t)return null;t.base=t.base??"0px";const n=c_(t),r=Object.entries(t).sort(JA).map(([u,d],p,f)=>{let[,g]=f[p+1]??[];return g=parseFloat(g)>0?u_(g):void 0,{_minW:u_(d),breakpoint:u,minW:d,maxW:g,maxWQuery:Qf(null,g),minWQuery:Qf(d),minMaxQuery:Qf(d,g)}}),i=RL(t),l=Array.from(i.values());return{keys:i,normalized:n,isResponsive(u){const d=Object.keys(u);return d.length>0&&d.every(p=>i.has(p))},asObject:hS(t),asArray:c_(t),details:r,get(u){return r.find(d=>d.breakpoint===u)},media:[null,...n.map(u=>Qf(u)).slice(1)],toArrayValue(u){if(!gs(u))throw new Error("toArrayValue: value must be an object");const d=l.map(p=>u[p]??null);for(;TL(d)===null;)d.pop();return d},toObjectValue(u){if(!Array.isArray(u))throw new Error("toObjectValue: value must be an array");return u.reduce((d,p,f)=>{const g=l[f];return g!=null&&p!=null&&(d[g]=p),d},{})}}}function eR(...t){return function(...r){t.forEach(i=>i?.(...r))}}function sn(...t){return function(r){t.some(i=>(i?.(r),r?.defaultPrevented))}}function Lc(t){return v.Children.toArray(t).filter(n=>v.isValidElement(n))}function nm(t){const n=Object.assign({},t);for(let r in n)n[r]===void 0&&delete n[r];return n}function DL(t,n){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${n}`}function Vn(t={}){const{name:n,strict:r=!0,hookName:i="useContext",providerName:l="Provider",errorMessage:u,defaultValue:d}=t,p=v.createContext(d);p.displayName=n;function f(){const g=v.useContext(p);if(!g&&r){const x=new Error(u??DL(i,l));throw x.name="ContextError",Error.captureStackTrace?.(x,f),x}return g}return[p.Provider,f,p]}const gt=(...t)=>t.filter(Boolean).join(" "),tR=t=>t.hasAttribute("tabindex"),PL=t=>tR(t)&&t.tabIndex===-1;function nR(t){if(!ev(t)||ZA(t)||gL(t))return!1;const{localName:n}=t;if(["input","select","textarea","button"].indexOf(n)>=0)return!0;const i={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return n in i?i[n]():mL(t)?!0:tR(t)}function ML(t){return t?ev(t)&&nR(t)&&!PL(t):!1}const zL=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],IL=zL.join(),NL=t=>t.offsetWidth>0&&t.offsetHeight>0;function LL(t){const n=Array.from(t.querySelectorAll(IL));return n.unshift(t),n.filter(r=>nR(r)&&NL(r))}function OL(t,n,r,i){const l=typeof n=="string"?n.split("."):[n];for(i=0;i<l.length&&t;i+=1)t=t[l[i]];return t===void 0?r:t}const BL=t=>{const n=new WeakMap;return(i,l,u,d)=>{if(typeof i>"u")return t(i,l,u);n.has(i)||n.set(i,new Map);const p=n.get(i);if(p.has(l))return p.get(l);const f=t(i,l,u,d);return p.set(l,f),f}},rR=BL(OL),$L=t=>t.default||t;function sR(t){const{wasSelected:n,enabled:r,isSelected:i,mode:l="unmount"}=t;return!!(!r||i||l==="keepMounted"&&n)}function FL(t){const n=parseFloat(t);return typeof n!="number"||Number.isNaN(n)?0:n}function fS(t,n){let r=FL(t);const i=10**(n??10);return r=Math.round(r*i)/i,n?r.toFixed(n):r.toString()}function $j(t){if(!Number.isFinite(t))return 0;let n=1,r=0;for(;Math.round(t*n)/n!==t;)n*=10,r+=1;return r}function d_(t,n,r){return(t-n)*100/(r-n)}function VL(t,n,r){return(r-n)*t+n}function h_(t,n,r){const i=Math.round((t-n)/r)*r+n,l=$j(r);return fS(i,l)}function sx(t,n,r){return t==null?t:(r<n&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(t,n),r))}function rm(t,n=[]){const r=Object.assign({},t);for(const i of n)i in r&&delete r[i];return r}function iR(t,n){const r={};for(const i of n)i in t&&(r[i]=t[i]);return r}const aR=Object.freeze(["base","sm","md","lg","xl","2xl"]);function tv(t,n){return Array.isArray(t)?t.map(r=>r===null?null:n(r)):gs(t)?Object.keys(t).reduce((r,i)=>(r[i]=n(t[i]),r),{}):t!=null?n(t):null}function UL(t,n=aR){const r={};return t.forEach((i,l)=>{const u=n[l];i!=null&&(r[u]=i)}),r}const HL=t=>typeof t=="function";function ca(t,...n){return HL(t)?t(...n):t}function WL(t){const n=t.ownerDocument.defaultView||window,{overflow:r,overflowX:i,overflowY:l}=n.getComputedStyle(t);return/auto|scroll|overlay|hidden/.test(r+l+i)}function qL(t){return t.localName==="html"?t:t.assignedSlot||t.parentElement||t.ownerDocument.documentElement}function oR(t){return["html","body","#document"].includes(t.localName)?t.ownerDocument.body:ev(t)&&WL(t)?t:oR(qL(t))}function GL(t,n){const r={},i={};for(const[l,u]of Object.entries(t))n.includes(l)?r[l]=u:i[l]=u;return[r,i]}function YL(t,...n){const r=Object.getOwnPropertyDescriptors(t),i=Object.keys(r),l=d=>{const p={};for(let f=0;f<d.length;f++){const g=d[f];r[g]&&(Object.defineProperty(p,g,r[g]),delete r[g])}return p},u=d=>l(Array.isArray(d)?d:i.filter(d));return n.map(u).concat(l(i))}function f_(t,n,r={}){const{stop:i,getKey:l}=r;function u(d,p=[]){if(gs(d)||Array.isArray(d)){const f={};for(const[g,x]of Object.entries(d)){const y=l?.(g)??g,b=[...p,y];if(i?.(d,b))return n(d,p);f[y]=u(x,b)}return f}return n(d,p)}return u(t)}const sm=t=>{const{condition:n,message:r}=t};var Jf={exports:{}};Jf.exports;var p_;function ZL(){return p_||(p_=1,(function(t,n){var r=200,i="__lodash_hash_undefined__",l=800,u=16,d=9007199254740991,p="[object Arguments]",f="[object Array]",g="[object AsyncFunction]",x="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",C="[object GeneratorFunction]",_="[object Map]",A="[object Number]",D="[object Null]",P="[object Object]",M="[object Proxy]",N="[object RegExp]",z="[object Set]",I="[object String]",V="[object Undefined]",$="[object WeakMap]",ae="[object ArrayBuffer]",he="[object DataView]",re="[object Float32Array]",ce="[object Float64Array]",Se="[object Int8Array]",je="[object Int16Array]",de="[object Int32Array]",G="[object Uint8Array]",U="[object Uint8ClampedArray]",W="[object Uint16Array]",me="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,fe=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,R={};R[re]=R[ce]=R[Se]=R[je]=R[de]=R[G]=R[U]=R[W]=R[me]=!0,R[p]=R[f]=R[ae]=R[x]=R[he]=R[y]=R[b]=R[w]=R[_]=R[A]=R[P]=R[N]=R[z]=R[I]=R[$]=!1;var Y=typeof Cg=="object"&&Cg&&Cg.Object===Object&&Cg,q=typeof self=="object"&&self&&self.Object===Object&&self,le=Y||q||Function("return this")(),We=n&&!n.nodeType&&n,pe=We&&!0&&t&&!t.nodeType&&t,ye=pe&&pe.exports===We,Ze=ye&&Y.process,ht=(function(){try{var ue=pe&&pe.require&&pe.require("util").types;return ue||Ze&&Ze.binding&&Ze.binding("util")}catch{}})(),rt=ht&&ht.isTypedArray;function vt(ue,Ce,Be){switch(Be.length){case 0:return ue.call(Ce);case 1:return ue.call(Ce,Be[0]);case 2:return ue.call(Ce,Be[0],Be[1]);case 3:return ue.call(Ce,Be[0],Be[1],Be[2])}return ue.apply(Ce,Be)}function Ue(ue,Ce){for(var Be=-1,jt=Array(ue);++Be<ue;)jt[Be]=Ce(Be);return jt}function qt(ue){return function(Ce){return ue(Ce)}}function Je(ue,Ce){return ue?.[Ce]}function Ge(ue,Ce){return function(Be){return ue(Ce(Be))}}var Ve=Array.prototype,se=Function.prototype,be=Object.prototype,at=le["__core-js_shared__"],St=se.toString,An=be.hasOwnProperty,qe=(function(){var ue=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return ue?"Symbol(src)_1."+ue:""})(),Me=be.toString,nt=St.call(Object),wt=RegExp("^"+St.call(An).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xe=ye?le.Buffer:void 0,pt=le.Symbol,ot=le.Uint8Array;Xe&&Xe.allocUnsafe;var Ne=Ge(Object.getPrototypeOf,Object),Mt=Object.create,Kt=be.propertyIsEnumerable,ln=Ve.splice,Zt=pt?pt.toStringTag:void 0,Pn=(function(){try{var ue=Mr(Object,"defineProperty");return ue({},"",{}),ue}catch{}})(),lt=Xe?Xe.isBuffer:void 0,vn=Math.max,Sr=Date.now,ts=Mr(le,"Map"),Zn=Mr(Object,"create"),Oi=(function(){function ue(){}return function(Ce){if(!_r(Ce))return{};if(Mt)return Mt(Ce);ue.prototype=Ce;var Be=new ue;return ue.prototype=void 0,Be}})();function bi(ue){var Ce=-1,Be=ue==null?0:ue.length;for(this.clear();++Ce<Be;){var jt=ue[Ce];this.set(jt[0],jt[1])}}function el(){this.__data__=Zn?Zn(null):{},this.size=0}function ns(ue){var Ce=this.has(ue)&&delete this.__data__[ue];return this.size-=Ce?1:0,Ce}function Bi(ue){var Ce=this.__data__;if(Zn){var Be=Ce[ue];return Be===i?void 0:Be}return An.call(Ce,ue)?Ce[ue]:void 0}function $i(ue){var Ce=this.__data__;return Zn?Ce[ue]!==void 0:An.call(Ce,ue)}function po(ue,Ce){var Be=this.__data__;return this.size+=this.has(ue)?0:1,Be[ue]=Zn&&Ce===void 0?i:Ce,this}bi.prototype.clear=el,bi.prototype.delete=ns,bi.prototype.get=Bi,bi.prototype.has=$i,bi.prototype.set=po;function $s(ue){var Ce=-1,Be=ue==null?0:ue.length;for(this.clear();++Ce<Be;){var jt=ue[Ce];this.set(jt[0],jt[1])}}function Fi(){this.__data__=[],this.size=0}function Er(ue){var Ce=this.__data__,Be=Rs(Ce,ue);if(Be<0)return!1;var jt=Ce.length-1;return Be==jt?Ce.pop():ln.call(Ce,Be,1),--this.size,!0}function rs(ue){var Ce=this.__data__,Be=Rs(Ce,ue);return Be<0?void 0:Ce[Be][1]}function ya(ue){return Rs(this.__data__,ue)>-1}function vs(ue,Ce){var Be=this.__data__,jt=Rs(Be,ue);return jt<0?(++this.size,Be.push([ue,Ce])):Be[jt][1]=Ce,this}$s.prototype.clear=Fi,$s.prototype.delete=Er,$s.prototype.get=rs,$s.prototype.has=ya,$s.prototype.set=vs;function Nt(ue){var Ce=-1,Be=ue==null?0:ue.length;for(this.clear();++Ce<Be;){var jt=ue[Ce];this.set(jt[0],jt[1])}}function Fl(){this.size=0,this.__data__={hash:new bi,map:new(ts||$s),string:new bi}}function tl(ue){var Ce=qi(this,ue).delete(ue);return this.size-=Ce?1:0,Ce}function Si(ue){return qi(this,ue).get(ue)}function Dr(ue){return qi(this,ue).has(ue)}function us(ue,Ce){var Be=qi(this,ue),jt=Be.size;return Be.set(ue,Ce),this.size+=Be.size==jt?0:1,this}Nt.prototype.clear=Fl,Nt.prototype.delete=tl,Nt.prototype.get=Si,Nt.prototype.has=Dr,Nt.prototype.set=us;function ys(ue){var Ce=this.__data__=new $s(ue);this.size=Ce.size}function Fs(){this.__data__=new $s,this.size=0}function ri(ue){var Ce=this.__data__,Be=Ce.delete(ue);return this.size=Ce.size,Be}function xr(ue){return this.__data__.get(ue)}function nl(ue){return this.__data__.has(ue)}function mo(ue,Ce){var Be=this.__data__;if(Be instanceof $s){var jt=Be.__data__;if(!ts||jt.length<r-1)return jt.push([ue,Ce]),this.size=++Be.size,this;Be=this.__data__=new Nt(jt)}return Be.set(ue,Ce),this.size=Be.size,this}ys.prototype.clear=Fs,ys.prototype.delete=ri,ys.prototype.get=xr,ys.prototype.has=nl,ys.prototype.set=mo;function si(ue,Ce){var Be=Ss(ue),jt=!Be&&li(ue),ct=!Be&&!jt&&Yt(ue),dn=!Be&&!jt&&!ct&&ws(ue),Ot=Be||jt||ct||dn,jn=Ot?Ue(ue.length,String):[],mn=jn.length;for(var zr in ue)Ot&&(zr=="length"||ct&&(zr=="offset"||zr=="parent")||dn&&(zr=="buffer"||zr=="byteLength"||zr=="byteOffset")||Gi(zr,mn))||jn.push(zr);return jn}function ii(ue,Ce,Be){(Be!==void 0&&!Vs(ue[Ce],Be)||Be===void 0&&!(Ce in ue))&&dt(ue,Ce,Be)}function rl(ue,Ce,Be){var jt=ue[Ce];(!(An.call(ue,Ce)&&Vs(jt,Be))||Be===void 0&&!(Ce in ue))&&dt(ue,Ce,Be)}function Rs(ue,Ce){for(var Be=ue.length;Be--;)if(Vs(ue[Be][0],Ce))return Be;return-1}function dt(ue,Ce,Be){Ce=="__proto__"&&Pn?Pn(ue,Ce,{configurable:!0,enumerable:!0,value:Be,writable:!0}):ue[Ce]=Be}var Uc=or();function Vi(ue){return ue==null?ue===void 0?V:D:Zt&&Zt in Object(ue)?ss(ue):En(ue)}function Ui(ue){return Hs(ue)&&Vi(ue)==p}function ai(ue){if(!_r(ue)||Yi(ue))return!1;var Ce=Br(ue)?wt:fe;return Ce.test(Zi(ue))}function Ha(ue){return Hs(ue)&&Mn(ue.length)&&!!R[Vi(ue)]}function wi(ue){if(!_r(ue))return qa(ue);var Ce=ks(ue),Be=[];for(var jt in ue)jt=="constructor"&&(Ce||!An.call(ue,jt))||Be.push(jt);return Be}function Ci(ue,Ce,Be,jt,ct){ue!==Ce&&Uc(Ce,function(dn,Ot){if(ct||(ct=new ys),_r(dn))Wa(ue,Ce,Ot,Be,Ci,jt,ct);else{var jn=jt?jt(bs(ue,Ot),dn,Ot+"",ue,Ce,ct):void 0;jn===void 0&&(jn=dn),ii(ue,Ot,jn)}},Ki)}function Wa(ue,Ce,Be,jt,ct,dn,Ot){var jn=bs(ue,Be),mn=bs(Ce,Be),zr=Ot.get(mn);if(zr){ii(ue,Be,zr);return}var is=dn?dn(jn,mn,Be+"",ue,Ce,Ot):void 0,Qi=is===void 0;if(Qi){var Ya=Ss(mn),Za=!Ya&&Yt(mn),il=!Ya&&!Za&&ws(mn);is=mn,Ya||Za||il?Ss(jn)?is=jn:Xi(jn)?is=Ei(jn):Za?(Qi=!1,is=ar(mn)):il?(Qi=!1,is=Hi(mn)):is=[]:Ws(mn)||li(mn)?(is=jn,li(jn)?is=ci(jn):(!_r(jn)||Br(jn))&&(is=go(mn))):Qi=!1}Qi&&(Ot.set(mn,is),ct(is,mn,jt,dn,Ot),Ot.delete(mn)),ii(ue,Be,is)}function oi(ue,Ce){return xo(Or(ue,Ce,ds),ue+"")}var Rn=Pn?function(ue,Ce){return Pn(ue,"toString",{configurable:!0,enumerable:!1,value:vr(Ce),writable:!0})}:ds;function ar(ue,Ce){return ue.slice()}function Pr(ue){var Ce=new ue.constructor(ue.byteLength);return new ot(Ce).set(new ot(ue)),Ce}function Hi(ue,Ce){var Be=Pr(ue.buffer);return new ue.constructor(Be,ue.byteOffset,ue.length)}function Ei(ue,Ce){var Be=-1,jt=ue.length;for(Ce||(Ce=Array(jt));++Be<jt;)Ce[Be]=ue[Be];return Ce}function Wi(ue,Ce,Be,jt){var ct=!Be;Be||(Be={});for(var dn=-1,Ot=Ce.length;++dn<Ot;){var jn=Ce[dn],mn=void 0;mn===void 0&&(mn=ue[jn]),ct?dt(Be,jn,mn):rl(Be,jn,mn)}return Be}function cn(ue){return oi(function(Ce,Be){var jt=-1,ct=Be.length,dn=ct>1?Be[ct-1]:void 0,Ot=ct>2?Be[2]:void 0;for(dn=ue.length>3&&typeof dn=="function"?(ct--,dn):void 0,Ot&&js(Be[0],Be[1],Ot)&&(dn=ct<3?void 0:dn,ct=1),Ce=Object(Ce);++jt<ct;){var jn=Be[jt];jn&&ue(Ce,jn,jt,dn)}return Ce})}function or(ue){return function(Ce,Be,jt){for(var ct=-1,dn=Object(Ce),Ot=jt(Ce),jn=Ot.length;jn--;){var mn=Ot[++ct];if(Be(dn[mn],mn,dn)===!1)break}return Ce}}function qi(ue,Ce){var Be=ue.__data__;return dr(Ce)?Be[typeof Ce=="string"?"string":"hash"]:Be.map}function Mr(ue,Ce){var Be=Je(ue,Ce);return ai(Be)?Be:void 0}function ss(ue){var Ce=An.call(ue,Zt),Be=ue[Zt];try{ue[Zt]=void 0;var jt=!0}catch{}var ct=Me.call(ue);return jt&&(Ce?ue[Zt]=Be:delete ue[Zt]),ct}function go(ue){return typeof ue.constructor=="function"&&!ks(ue)?Oi(Ne(ue)):{}}function Gi(ue,Ce){var Be=typeof ue;return Ce=Ce??d,!!Ce&&(Be=="number"||Be!="symbol"&&te.test(ue))&&ue>-1&&ue%1==0&&ue<Ce}function js(ue,Ce,Be){if(!_r(Be))return!1;var jt=typeof Ce;return(jt=="number"?Us(Be)&&Gi(Ce,Be.length):jt=="string"&&Ce in Be)?Vs(Be[Ce],ue):!1}function dr(ue){var Ce=typeof ue;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?ue!=="__proto__":ue===null}function Yi(ue){return!!qe&&qe in ue}function ks(ue){var Ce=ue&&ue.constructor,Be=typeof Ce=="function"&&Ce.prototype||be;return ue===Be}function qa(ue){var Ce=[];if(ue!=null)for(var Be in Object(ue))Ce.push(Be);return Ce}function En(ue){return Me.call(ue)}function Or(ue,Ce,Be){return Ce=vn(Ce===void 0?ue.length-1:Ce,0),function(){for(var jt=arguments,ct=-1,dn=vn(jt.length-Ce,0),Ot=Array(dn);++ct<dn;)Ot[ct]=jt[Ce+ct];ct=-1;for(var jn=Array(Ce+1);++ct<Ce;)jn[ct]=jt[ct];return jn[Ce]=Be(Ot),vt(ue,this,jn)}}function bs(ue,Ce){if(!(Ce==="constructor"&&typeof ue[Ce]=="function")&&Ce!="__proto__")return ue[Ce]}var xo=vo(Rn);function vo(ue){var Ce=0,Be=0;return function(){var jt=Sr(),ct=u-(jt-Be);if(Be=jt,ct>0){if(++Ce>=l)return arguments[0]}else Ce=0;return ue.apply(void 0,arguments)}}function Zi(ue){if(ue!=null){try{return St.call(ue)}catch{}try{return ue+""}catch{}}return""}function Vs(ue,Ce){return ue===Ce||ue!==ue&&Ce!==Ce}var li=Ui((function(){return arguments})())?Ui:function(ue){return Hs(ue)&&An.call(ue,"callee")&&!Kt.call(ue,"callee")},Ss=Array.isArray;function Us(ue){return ue!=null&&Mn(ue.length)&&!Br(ue)}function Xi(ue){return Hs(ue)&&Us(ue)}var Yt=lt||sl;function Br(ue){if(!_r(ue))return!1;var Ce=Vi(ue);return Ce==w||Ce==C||Ce==g||Ce==M}function Mn(ue){return typeof ue=="number"&&ue>-1&&ue%1==0&&ue<=d}function _r(ue){var Ce=typeof ue;return ue!=null&&(Ce=="object"||Ce=="function")}function Hs(ue){return ue!=null&&typeof ue=="object"}function Ws(ue){if(!Hs(ue)||Vi(ue)!=P)return!1;var Ce=Ne(ue);if(Ce===null)return!0;var Be=An.call(Ce,"constructor")&&Ce.constructor;return typeof Be=="function"&&Be instanceof Be&&St.call(Be)==nt}var ws=rt?qt(rt):Ha;function ci(ue){return Wi(ue,Ki(ue))}function Ki(ue){return Us(ue)?si(ue):wi(ue)}var Ga=cn(function(ue,Ce,Be,jt){Ci(ue,Ce,Be,jt)});function vr(ue){return function(){return ue}}function ds(ue){return ue}function sl(){return!1}t.exports=Ga})(Jf,Jf.exports)),Jf.exports}var XL=ZL();const Ia=Jp(XL);function Yr(t,n=[]){const r=v.useRef(t);return v.useEffect(()=>{r.current=t}),v.useCallback((...i)=>r.current?.(...i),n)}function fp(t,n,r,i){const l=Yr(r);return v.useEffect(()=>{const u=typeof t=="function"?t():t??document;if(!(!r||!u))return u.addEventListener(n,l,i),()=>{u.removeEventListener(n,l,i)}},[n,t,i,l,r]),()=>{(typeof t=="function"?t():t??document)?.removeEventListener(n,l,i)}}function KL(t){const{isOpen:n,ref:r}=t,[i,l]=v.useState(n),[u,d]=v.useState(!1);return v.useEffect(()=>{u||(l(n),d(!0))},[n,u,i]),fp(()=>r.current,"animationend",()=>{l(n)}),{present:!(n?!1:!i),onComplete(){const f=xL(r.current),g=new f.CustomEvent("animationend",{bubbles:!0});r.current?.dispatchEvent(g)}}}function zh(t){const{value:n,defaultValue:r,onChange:i,shouldUpdate:l=(b,w)=>b!==w}=t,u=Yr(i),d=Yr(l),[p,f]=v.useState(r),g=n!==void 0,x=g?n:p,y=Yr(b=>{const C=typeof b=="function"?b(x):b;d(x,C)&&(g||f(C),u(C))},[g,u,x,d]);return[x,y]}function QL(t={}){const{onChange:n,precision:r,defaultValue:i,value:l,step:u=1,min:d=Number.MIN_SAFE_INTEGER,max:p=Number.MAX_SAFE_INTEGER,keepWithinRange:f=!0}=t,g=Yr(n),[x,y]=v.useState(()=>i==null?"":by(i,u,r)??""),b=typeof l<"u",w=b?l:x,C=lR(Cc(w),u),_=r??C,A=v.useCallback(he=>{he!==w&&(b||y(he.toString()),g?.(he.toString(),Cc(he)))},[g,b,w]),D=v.useCallback(he=>{let re=he;return f&&(re=sx(re,d,p)),fS(re,_)},[_,f,p,d]),P=v.useCallback((he=u)=>{let re;w===""?re=Cc(he):re=Cc(w)+he,re=D(re),A(re)},[D,u,A,w]),M=v.useCallback((he=u)=>{let re;w===""?re=Cc(-he):re=Cc(w)-he,re=D(re),A(re)},[D,u,A,w]),N=v.useCallback(()=>{let he;i==null?he="":he=by(i,u,r)??d,A(he)},[i,r,u,A,d]),z=v.useCallback(he=>{const re=by(he,u,_)??d;A(re)},[_,u,A,d]),I=Cc(w);return{isOutOfRange:I>p||I<d,isAtMax:I===p,isAtMin:I===d,precision:_,value:w,valueAsNumber:I,update:A,reset:N,increment:P,decrement:M,clamp:D,cast:z,setValue:y}}function Cc(t){return parseFloat(t.toString().replace(/[^\w.-]+/g,""))}function lR(t,n){return Math.max($j(n),$j(t))}function by(t,n,r){const i=Cc(t);if(Number.isNaN(i))return;const l=lR(i,n);return fS(i,r??l)}function It(t={}){const{onClose:n,onOpen:r,isOpen:i,id:l}=t,u=Yr(r),d=Yr(n),[p,f]=v.useState(t.defaultIsOpen||!1),g=i!==void 0?i:p,x=i!==void 0,y=v.useId(),b=l??`disclosure-${y}`,w=v.useCallback(()=>{x||f(!1),d?.()},[x,d]),C=v.useCallback(()=>{x||f(!0),u?.()},[x,u]),_=v.useCallback(()=>{g?w():C()},[g,C,w]);function A(P={}){return{...P,"aria-expanded":g,"aria-controls":b,onClick(M){P.onClick?.(M),_()}}}function D(P={}){return{...P,hidden:!g,id:b}}return{isOpen:g,onOpen:C,onClose:w,onToggle:_,isControlled:x,getButtonProps:A,getDisclosureProps:D}}const Dl=globalThis?.document?v.useLayoutEffect:v.useEffect,Dc=(t,n)=>{const r=v.useRef(!1),i=v.useRef(!1);v.useEffect(()=>{if(r.current&&i.current)return t();i.current=!0},n),v.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])};function JL(t){const n=t.current;if(!n)return!1;const r=yL(n);return!r||n.contains(r)?!1:!!ML(r)}function eO(t,n){const{visible:r,focusRef:i}=n,l=!r;Dc(()=>{if(!l||JL(t))return;const u=i?.current||t.current;let d;if(u)return d=requestAnimationFrame(()=>{u.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(d)}},[l,t,i])}function tO(t,n){const r=v.useId();return v.useMemo(()=>t||[n,r].filter(Boolean).join("-"),[t,n,r])}function nO(t,...n){const r=tO(t);return v.useMemo(()=>n.map(i=>`${i}-${r}`),[r,n])}function rO(t,n){const r=Yr(t);v.useEffect(()=>{let i=null;const l=()=>r();return n!==null&&(i=window.setInterval(l,n)),()=>{i&&window.clearInterval(i)}},[n,r])}function cR(t){const n=v.useRef(null);return n.current=t,n}function sO(t,n){if(t!=null){if(typeof t=="function"){t(n);return}try{t.current=n}catch{throw new Error(`Cannot assign value '${n}' to ref '${t}'`)}}}function kr(...t){return n=>{t.forEach(r=>{sO(r,n)})}}function iO(...t){return v.useMemo(()=>kr(...t),t)}function aO(t){const{ref:n,handler:r,enabled:i=!0}=t,l=Yr(r),d=v.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;v.useEffect(()=>{if(!i)return;const p=y=>{Sy(y,n)&&(d.isPointerDown=!0)},f=y=>{if(d.ignoreEmulatedMouseEvents){d.ignoreEmulatedMouseEvents=!1;return}d.isPointerDown&&r&&Sy(y,n)&&(d.isPointerDown=!1,l(y))},g=y=>{d.ignoreEmulatedMouseEvents=!0,r&&d.isPointerDown&&Sy(y,n)&&(d.isPointerDown=!1,l(y))},x=uR(n.current);return x.addEventListener("mousedown",p,!0),x.addEventListener("mouseup",f,!0),x.addEventListener("touchstart",p,!0),x.addEventListener("touchend",g,!0),()=>{x.removeEventListener("mousedown",p,!0),x.removeEventListener("mouseup",f,!0),x.removeEventListener("touchstart",p,!0),x.removeEventListener("touchend",g,!0)}},[r,n,l,d,i])}function Sy(t,n){const r=t.composedPath?.()[0]??t.target;return r&&!uR(r).contains(r)?!1:!n.current?.contains(r)}function uR(t){return t?.ownerDocument??document}function oO(t,n){const r=Yr(t);v.useEffect(()=>{if(n==null)return;let i=null;return i=window.setTimeout(()=>{r()},n),()=>{i&&window.clearTimeout(i)}},[n,r])}const dR=1/60*1e3,lO=typeof performance<"u"?()=>performance.now():()=>Date.now(),hR=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(lO()),dR);function cO(t){let n=[],r=[],i=0,l=!1,u=!1;const d=new WeakSet,p={schedule:(f,g=!1,x=!1)=>{const y=x&&l,b=y?n:r;return g&&d.add(f),b.indexOf(f)===-1&&(b.push(f),y&&l&&(i=n.length)),f},cancel:f=>{const g=r.indexOf(f);g!==-1&&r.splice(g,1),d.delete(f)},process:f=>{if(l){u=!0;return}if(l=!0,[n,r]=[r,n],r.length=0,i=n.length,i)for(let g=0;g<i;g++){const x=n[g];x(f),d.has(x)&&(p.schedule(x),t())}l=!1,u&&(u=!1,p.process(f))}};return p}const uO=40;let Fj=!0,Dp=!1,Vj=!1;const sh={delta:0,timestamp:0},im=["read","update","preRender","render","postRender"],nv=im.reduce((t,n)=>(t[n]=cO(()=>Dp=!0),t),{}),dO=im.reduce((t,n)=>{const r=nv[n];return t[n]=(i,l=!1,u=!1)=>(Dp||pO(),r.schedule(i,l,u)),t},{}),hO=im.reduce((t,n)=>(t[n]=nv[n].cancel,t),{});im.reduce((t,n)=>(t[n]=()=>nv[n].process(sh),t),{});const fO=t=>nv[t].process(sh),fR=t=>{Dp=!1,sh.delta=Fj?dR:Math.max(Math.min(t-sh.timestamp,uO),1),sh.timestamp=t,Vj=!0,im.forEach(fO),Vj=!1,Dp&&(Fj=!1,hR(fR))},pO=()=>{Dp=!0,Fj=!0,Vj||hR(fR)},m_=()=>sh;var mO=Object.defineProperty,gO=(t,n,r)=>n in t?mO(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,so=(t,n,r)=>(gO(t,typeof n!="symbol"?n+"":n,r),r);class xO{constructor(n,r,i){if(so(this,"history",[]),so(this,"startEvent",null),so(this,"lastEvent",null),so(this,"lastEventInfo",null),so(this,"handlers",{}),so(this,"removeListeners",()=>{}),so(this,"threshold",3),so(this,"win"),so(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const p=wy(this.lastEventInfo,this.history),f=this.startEvent!==null,g=bO(p.offset,{x:0,y:0})>=this.threshold;if(!f&&!g)return;const{timestamp:x}=m_();this.history.push({...p.point,timestamp:x});const{onStart:y,onMove:b}=this.handlers;f||(y?.(this.lastEvent,p),this.startEvent=this.lastEvent),b?.(this.lastEvent,p)}),so(this,"onPointerMove",(p,f)=>{this.lastEvent=p,this.lastEventInfo=f,dO.update(this.updatePoint,!0)}),so(this,"onPointerUp",(p,f)=>{const g=wy(f,this.history),{onEnd:x,onSessionEnd:y}=this.handlers;y?.(p,g),this.end(),!(!x||!this.startEvent)&&x?.(p,g)}),this.win=n.view??window,bL(n))return;this.handlers=r,i&&(this.threshold=i),n.stopPropagation(),n.preventDefault();const l={point:QA(n)},{timestamp:u}=m_();this.history=[{...l.point,timestamp:u}];const{onSessionStart:d}=r;d?.(n,wy(l,this.history)),this.removeListeners=jO(rx(this.win,"pointermove",this.onPointerMove),rx(this.win,"pointerup",this.onPointerUp),rx(this.win,"pointercancel",this.onPointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners?.(),hO.update(this.updatePoint)}}function g_(t,n){return{x:t.x-n.x,y:t.y-n.y}}function wy(t,n){return{point:t.point,delta:g_(t.point,n[n.length-1]),offset:g_(t.point,n[0]),velocity:yO(n,.1)}}const vO=t=>t*1e3;function yO(t,n){if(t.length<2)return{x:0,y:0};let r=t.length-1,i=null;const l=t[t.length-1];for(;r>=0&&(i=t[r],!(l.timestamp-i.timestamp>vO(n)));)r--;if(!i)return{x:0,y:0};const u=(l.timestamp-i.timestamp)/1e3;if(u===0)return{x:0,y:0};const d={x:(l.x-i.x)/u,y:(l.y-i.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function jO(...t){return n=>t.reduce((r,i)=>i(r),n)}function Cy(t,n){return Math.abs(t-n)}function x_(t){return"x"in t&&"y"in t}function bO(t,n){if(typeof t=="number"&&typeof n=="number")return Cy(t,n);if(x_(t)&&x_(n)){const r=Cy(t.x,n.x),i=Cy(t.y,n.y);return Math.sqrt(r**2+i**2)}return 0}function SO(t,n){const{onPan:r,onPanStart:i,onPanEnd:l,onPanSessionStart:u,onPanSessionEnd:d,threshold:p}=n,f=!!(r||i||l||u||d),g=v.useRef(null),x=cR({onSessionStart:u,onSessionEnd:d,onStart:i,onMove:r,onEnd(y,b){g.current=null,l?.(y,b)}});v.useEffect(()=>{g.current?.updateHandlers(x.current)}),v.useEffect(()=>{const y=t.current;if(!y||!f)return;function b(w){g.current=new xO(w,x.current,p)}return rx(y,"pointerdown",b)},[t,f,x,p]),v.useEffect(()=>()=>{g.current?.end(),g.current=null},[])}const ms={open:(t,n)=>`${t}[data-open], ${t}[open], ${t}[data-state=open] ${n}`,closed:(t,n)=>`${t}[data-closed], ${t}[data-state=closed] ${n}`,hover:(t,n)=>`${t}:hover ${n}, ${t}[data-hover] ${n}`,focus:(t,n)=>`${t}:focus ${n}, ${t}[data-focus] ${n}`,focusVisible:(t,n)=>`${t}:focus-visible ${n}`,focusWithin:(t,n)=>`${t}:focus-within ${n}`,active:(t,n)=>`${t}:active ${n}, ${t}[data-active] ${n}`,disabled:(t,n)=>`${t}:disabled ${n}, ${t}[data-disabled] ${n}`,invalid:(t,n)=>`${t}:invalid ${n}, ${t}[data-invalid] ${n}`,checked:(t,n)=>`${t}:checked ${n}, ${t}[data-checked] ${n}`,placeholderShown:(t,n)=>`${t}:placeholder-shown ${n}`},Ro=t=>pR(n=>t(n,"&"),"[role=group]","[data-group]",".group"),jl=t=>pR(n=>t(n,"~ &"),"[data-peer]",".peer"),pR=(t,...n)=>n.map(t).join(", "),rv={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within, &[data-focus-within]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty, &[data-empty]",_expanded:"&[aria-expanded=true], &[data-expanded], &[data-state=expanded]",_checked:"&[aria-checked=true], &[data-checked], &[data-state=checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate], &[data-state=indeterminate]",_groupOpen:Ro(ms.open),_groupClosed:Ro(ms.closed),_groupHover:Ro(ms.hover),_peerHover:jl(ms.hover),_groupFocus:Ro(ms.focus),_peerFocus:jl(ms.focus),_groupFocusVisible:Ro(ms.focusVisible),_peerFocusVisible:jl(ms.focusVisible),_groupActive:Ro(ms.active),_peerActive:jl(ms.active),_groupDisabled:Ro(ms.disabled),_peerDisabled:jl(ms.disabled),_groupInvalid:Ro(ms.invalid),_peerInvalid:jl(ms.invalid),_groupChecked:Ro(ms.checked),_peerChecked:jl(ms.checked),_groupFocusWithin:Ro(ms.focusWithin),_peerFocusWithin:jl(ms.focusWithin),_peerPlaceholderShown:jl(ms.placeholderShown),_placeholder:"&::placeholder, &[data-placeholder]",_placeholderShown:"&:placeholder-shown, &[data-placeholder-shown]",_fullScreen:"&:fullscreen, &[data-fullscreen]",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]",_open:"&[data-open], &[open], &[data-state=open]",_closed:"&[data-closed], &[data-state=closed]",_complete:"&[data-complete]",_incomplete:"&[data-incomplete]",_current:"&[data-current]"},mR=Object.keys(rv),wO=t=>/!(important)?$/.test(t),v_=t=>typeof t=="string"?t.replace(/!(important)?$/,"").trim():t,CO=(t,n)=>r=>{const i=String(n),l=wO(i),u=v_(i),d=t?`${t}.${u}`:u;let p=gs(r.__cssMap)&&d in r.__cssMap?r.__cssMap[d].varRef:n;return p=v_(p),l?`${p} !important`:p};function pS(t){const{scale:n,transform:r,compose:i}=t;return(u,d)=>{const p=CO(n,u)(d);let f=r?.(p,d)??p;return i&&(f=i(f,d)),f}}const _g=(...t)=>n=>t.reduce((r,i)=>i(r),n);function Aa(t,n){return r=>{const i={property:r,scale:t};return i.transform=pS({scale:t,transform:n}),i}}const EO=({rtl:t,ltr:n})=>r=>r.direction==="rtl"?t:n;function _O(t){const{property:n,scale:r,transform:i}=t;return{scale:r,property:EO(n),transform:r?pS({scale:r,compose:i}):i}}const gR=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function TO(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...gR].join(" ")}function AO(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...gR].join(" ")}const RO={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},kO={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function DO(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}const PO={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},Uj={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},MO=new Set(Object.values(Uj)),Hj=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),zO=t=>t.trim();function IO(t,n){if(t==null||Hj.has(t))return t;if(!(Wj(t)||Hj.has(t)))return`url('${t}')`;const l=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),u=l?.[1],d=l?.[2];if(!u||!d)return t;const p=u.includes("-gradient")?u:`${u}-gradient`,[f,...g]=d.split(",").map(zO).filter(Boolean);if(g?.length===0)return t;const x=f in Uj?Uj[f]:f;g.unshift(x);const y=g.map(b=>{if(MO.has(b))return b;const w=b.indexOf(" "),[C,_]=w!==-1?[b.substr(0,w),b.substr(w+1)]:[b],A=Wj(_)?_:_&&_.split(" "),D=`colors.${C}`,P=D in n.__cssMap?n.__cssMap[D].varRef:C;return A?[P,...Array.isArray(A)?A:[A]].join(" "):P});return`${p}(${y.join(", ")})`}const Wj=t=>typeof t=="string"&&t.includes("(")&&t.includes(")"),NO=(t,n)=>IO(t,n??{});function LO(t){return/^var\(--.+\)$/.test(t)}const OO=t=>{const n=parseFloat(t.toString()),r=t.toString().replace(String(n),"");return{unitless:!r,value:n,unit:r}},ko=t=>n=>`${t}(${n})`,Hn={filter(t){return t!=="auto"?t:RO},backdropFilter(t){return t!=="auto"?t:kO},ring(t){return DO(Hn.px(t))},bgClip(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}},transform(t){return t==="auto"?TO():t==="auto-gpu"?AO():t},vh(t){return t==="$100vh"?"var(--chakra-vh)":t},px(t){if(t==null)return t;const{unitless:n}=OO(t);return n||typeof t=="number"?`${t}px`:t},fraction(t){return typeof t!="number"||t>1?t:`${t*100}%`},float(t,n){const r={left:"right",right:"left"};return n.direction==="rtl"?r[t]:t},degree(t){if(LO(t)||t==null)return t;const n=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||n?`${t}deg`:t},gradient:NO,blur:ko("blur"),opacity:ko("opacity"),brightness:ko("brightness"),contrast:ko("contrast"),dropShadow:ko("drop-shadow"),grayscale:ko("grayscale"),hueRotate:t=>ko("hue-rotate")(Hn.degree(t)),invert:ko("invert"),saturate:ko("saturate"),sepia:ko("sepia"),bgImage(t){return t==null||Wj(t)||Hj.has(t)?t:`url(${t})`},outline(t){const n=String(t)==="0"||String(t)==="none";return t!==null&&n?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){const{space:n,divide:r}=PO[t]??{},i={flexDirection:t};return n&&(i[n]=1),r&&(i[r]=1),i}},Re={borderWidths:Aa("borderWidths"),borderStyles:Aa("borderStyles"),colors:Aa("colors"),borders:Aa("borders"),gradients:Aa("gradients",Hn.gradient),radii:Aa("radii",Hn.px),space:Aa("space",_g(Hn.vh,Hn.px)),spaceT:Aa("space",_g(Hn.vh,Hn.px)),degreeT(t){return{property:t,transform:Hn.degree}},prop(t,n,r){return{property:t,scale:n,...n&&{transform:pS({scale:n,transform:r})}}},propT(t,n){return{property:t,transform:n}},sizes:Aa("sizes",_g(Hn.vh,Hn.px)),sizesT:Aa("sizes",_g(Hn.vh,Hn.fraction)),shadows:Aa("shadows"),logical:_O,blur:Aa("blur",Hn.blur)},ix={background:Re.colors("background"),backgroundColor:Re.colors("backgroundColor"),backgroundImage:Re.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Hn.bgClip},bgSize:Re.prop("backgroundSize"),bgPosition:Re.prop("backgroundPosition"),bg:Re.colors("background"),bgColor:Re.colors("backgroundColor"),bgPos:Re.prop("backgroundPosition"),bgRepeat:Re.prop("backgroundRepeat"),bgAttachment:Re.prop("backgroundAttachment"),bgGradient:Re.gradients("backgroundImage"),bgClip:{transform:Hn.bgClip}};Object.assign(ix,{bgImage:ix.backgroundImage,bgImg:ix.backgroundImage});const er={border:Re.borders("border"),borderWidth:Re.borderWidths("borderWidth"),borderStyle:Re.borderStyles("borderStyle"),borderColor:Re.colors("borderColor"),borderRadius:Re.radii("borderRadius"),borderTop:Re.borders("borderTop"),borderBlockStart:Re.borders("borderBlockStart"),borderTopLeftRadius:Re.radii("borderTopLeftRadius"),borderStartStartRadius:Re.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Re.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Re.radii("borderTopRightRadius"),borderStartEndRadius:Re.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Re.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Re.borders("borderRight"),borderInlineEnd:Re.borders("borderInlineEnd"),borderBottom:Re.borders("borderBottom"),borderBlockEnd:Re.borders("borderBlockEnd"),borderBottomLeftRadius:Re.radii("borderBottomLeftRadius"),borderBottomRightRadius:Re.radii("borderBottomRightRadius"),borderLeft:Re.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Re.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Re.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Re.borders(["borderLeft","borderRight"]),borderInline:Re.borders("borderInline"),borderY:Re.borders(["borderTop","borderBottom"]),borderBlock:Re.borders("borderBlock"),borderTopWidth:Re.borderWidths("borderTopWidth"),borderBlockStartWidth:Re.borderWidths("borderBlockStartWidth"),borderTopColor:Re.colors("borderTopColor"),borderBlockStartColor:Re.colors("borderBlockStartColor"),borderTopStyle:Re.borderStyles("borderTopStyle"),borderBlockStartStyle:Re.borderStyles("borderBlockStartStyle"),borderBottomWidth:Re.borderWidths("borderBottomWidth"),borderBlockEndWidth:Re.borderWidths("borderBlockEndWidth"),borderBottomColor:Re.colors("borderBottomColor"),borderBlockEndColor:Re.colors("borderBlockEndColor"),borderBottomStyle:Re.borderStyles("borderBottomStyle"),borderBlockEndStyle:Re.borderStyles("borderBlockEndStyle"),borderLeftWidth:Re.borderWidths("borderLeftWidth"),borderInlineStartWidth:Re.borderWidths("borderInlineStartWidth"),borderLeftColor:Re.colors("borderLeftColor"),borderInlineStartColor:Re.colors("borderInlineStartColor"),borderLeftStyle:Re.borderStyles("borderLeftStyle"),borderInlineStartStyle:Re.borderStyles("borderInlineStartStyle"),borderRightWidth:Re.borderWidths("borderRightWidth"),borderInlineEndWidth:Re.borderWidths("borderInlineEndWidth"),borderRightColor:Re.colors("borderRightColor"),borderInlineEndColor:Re.colors("borderInlineEndColor"),borderRightStyle:Re.borderStyles("borderRightStyle"),borderInlineEndStyle:Re.borderStyles("borderInlineEndStyle"),borderTopRadius:Re.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Re.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Re.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Re.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(er,{rounded:er.borderRadius,roundedTop:er.borderTopRadius,roundedTopLeft:er.borderTopLeftRadius,roundedTopRight:er.borderTopRightRadius,roundedTopStart:er.borderStartStartRadius,roundedTopEnd:er.borderStartEndRadius,roundedBottom:er.borderBottomRadius,roundedBottomLeft:er.borderBottomLeftRadius,roundedBottomRight:er.borderBottomRightRadius,roundedBottomStart:er.borderEndStartRadius,roundedBottomEnd:er.borderEndEndRadius,roundedLeft:er.borderLeftRadius,roundedRight:er.borderRightRadius,roundedStart:er.borderInlineStartRadius,roundedEnd:er.borderInlineEndRadius,borderStart:er.borderInlineStart,borderEnd:er.borderInlineEnd,borderTopStartRadius:er.borderStartStartRadius,borderTopEndRadius:er.borderStartEndRadius,borderBottomStartRadius:er.borderEndStartRadius,borderBottomEndRadius:er.borderEndEndRadius,borderStartRadius:er.borderInlineStartRadius,borderEndRadius:er.borderInlineEndRadius,borderStartWidth:er.borderInlineStartWidth,borderEndWidth:er.borderInlineEndWidth,borderStartColor:er.borderInlineStartColor,borderEndColor:er.borderInlineEndColor,borderStartStyle:er.borderInlineStartStyle,borderEndStyle:er.borderInlineEndStyle});const BO={color:Re.colors("color"),textColor:Re.colors("color"),fill:Re.colors("fill"),stroke:Re.colors("stroke"),accentColor:Re.colors("accentColor"),textFillColor:Re.colors("textFillColor")},Tx={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Hn.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Re.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Re.space("gap"),rowGap:Re.space("rowGap"),columnGap:Re.space("columnGap")};Object.assign(Tx,{flexDir:Tx.flexDirection});const Da={width:Re.sizesT("width"),inlineSize:Re.sizesT("inlineSize"),height:Re.sizes("height"),blockSize:Re.sizes("blockSize"),boxSize:Re.sizes(["width","height"]),minWidth:Re.sizes("minWidth"),minInlineSize:Re.sizes("minInlineSize"),minHeight:Re.sizes("minHeight"),minBlockSize:Re.sizes("minBlockSize"),maxWidth:Re.sizes("maxWidth"),maxInlineSize:Re.sizes("maxInlineSize"),maxHeight:Re.sizes("maxHeight"),maxBlockSize:Re.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,n)=>({[`@media screen and (min-width: ${n.__breakpoints?.get(t)?.minW??t})`]:{display:"none"}})},hideBelow:{scale:"breakpoints",transform:(t,n)=>({[`@media screen and (max-width: ${n.__breakpoints?.get(t)?._minW??t})`]:{display:"none"}})},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Re.propT("float",Hn.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Da,{w:Da.width,h:Da.height,minW:Da.minWidth,maxW:Da.maxWidth,minH:Da.minHeight,maxH:Da.maxHeight,overscroll:Da.overscrollBehavior,overscrollX:Da.overscrollBehaviorX,overscrollY:Da.overscrollBehaviorY});const $O={filter:{transform:Hn.filter},blur:Re.blur("--chakra-blur"),brightness:Re.propT("--chakra-brightness",Hn.brightness),contrast:Re.propT("--chakra-contrast",Hn.contrast),hueRotate:Re.propT("--chakra-hue-rotate",Hn.hueRotate),invert:Re.propT("--chakra-invert",Hn.invert),saturate:Re.propT("--chakra-saturate",Hn.saturate),dropShadow:Re.propT("--chakra-drop-shadow",Hn.dropShadow),backdropFilter:{transform:Hn.backdropFilter},backdropBlur:Re.blur("--chakra-backdrop-blur"),backdropBrightness:Re.propT("--chakra-backdrop-brightness",Hn.brightness),backdropContrast:Re.propT("--chakra-backdrop-contrast",Hn.contrast),backdropHueRotate:Re.propT("--chakra-backdrop-hue-rotate",Hn.hueRotate),backdropInvert:Re.propT("--chakra-backdrop-invert",Hn.invert),backdropSaturate:Re.propT("--chakra-backdrop-saturate",Hn.saturate)},FO={ring:{transform:Hn.ring},ringColor:Re.colors("--chakra-ring-color"),ringOffset:Re.prop("--chakra-ring-offset-width"),ringOffsetColor:Re.colors("--chakra-ring-offset-color"),ringInset:Re.prop("--chakra-ring-inset")},VO={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Hn.outline},outlineOffset:!0,outlineColor:Re.colors("outlineColor")},xR={gridGap:Re.space("gridGap"),gridColumnGap:Re.space("gridColumnGap"),gridRowGap:Re.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0};function UO(t,n,r,i){const l=typeof n=="string"?n.split("."):[n];for(i=0;i<l.length&&t;i+=1)t=t[l[i]];return t===void 0?r:t}const HO=t=>{const n=new WeakMap;return(i,l,u,d)=>{if(typeof i>"u")return t(i,l,u);n.has(i)||n.set(i,new Map);const p=n.get(i);if(p.has(l))return p.get(l);const f=t(i,l,u,d);return p.set(l,f),f}},WO=HO(UO),qO={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},GO={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},Ey=(t,n,r)=>{const i={},l=WO(t,n,{});for(const u in l)u in r&&r[u]!=null||(i[u]=l[u]);return i},YO={srOnly:{transform(t){return t===!0?qO:t==="focusable"?GO:{}}},layerStyle:{processResult:!0,transform:(t,n,r)=>Ey(n,`layerStyles.${t}`,r)},textStyle:{processResult:!0,transform:(t,n,r)=>Ey(n,`textStyles.${t}`,r)},apply:{processResult:!0,transform:(t,n,r)=>Ey(n,t,r)}},pp={position:!0,pos:Re.prop("position"),zIndex:Re.prop("zIndex","zIndices"),inset:Re.spaceT("inset"),insetX:Re.spaceT(["left","right"]),insetInline:Re.spaceT("insetInline"),insetY:Re.spaceT(["top","bottom"]),insetBlock:Re.spaceT("insetBlock"),top:Re.spaceT("top"),insetBlockStart:Re.spaceT("insetBlockStart"),bottom:Re.spaceT("bottom"),insetBlockEnd:Re.spaceT("insetBlockEnd"),left:Re.spaceT("left"),insetInlineStart:Re.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Re.spaceT("right"),insetInlineEnd:Re.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(pp,{insetStart:pp.insetInlineStart,insetEnd:pp.insetInlineEnd});const qj={boxShadow:Re.shadows("boxShadow"),mixBlendMode:!0,blendMode:Re.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Re.prop("backgroundBlendMode"),opacity:!0};Object.assign(qj,{shadow:qj.boxShadow});const wr={margin:Re.spaceT("margin"),marginTop:Re.spaceT("marginTop"),marginBlockStart:Re.spaceT("marginBlockStart"),marginRight:Re.spaceT("marginRight"),marginInlineEnd:Re.spaceT("marginInlineEnd"),marginBottom:Re.spaceT("marginBottom"),marginBlockEnd:Re.spaceT("marginBlockEnd"),marginLeft:Re.spaceT("marginLeft"),marginInlineStart:Re.spaceT("marginInlineStart"),marginX:Re.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Re.spaceT("marginInline"),marginY:Re.spaceT(["marginTop","marginBottom"]),marginBlock:Re.spaceT("marginBlock"),padding:Re.space("padding"),paddingTop:Re.space("paddingTop"),paddingBlockStart:Re.space("paddingBlockStart"),paddingRight:Re.space("paddingRight"),paddingBottom:Re.space("paddingBottom"),paddingBlockEnd:Re.space("paddingBlockEnd"),paddingLeft:Re.space("paddingLeft"),paddingInlineStart:Re.space("paddingInlineStart"),paddingInlineEnd:Re.space("paddingInlineEnd"),paddingX:Re.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Re.space("paddingInline"),paddingY:Re.space(["paddingTop","paddingBottom"]),paddingBlock:Re.space("paddingBlock")};Object.assign(wr,{m:wr.margin,mt:wr.marginTop,mr:wr.marginRight,me:wr.marginInlineEnd,marginEnd:wr.marginInlineEnd,mb:wr.marginBottom,ml:wr.marginLeft,ms:wr.marginInlineStart,marginStart:wr.marginInlineStart,mx:wr.marginX,my:wr.marginY,p:wr.padding,pt:wr.paddingTop,py:wr.paddingY,px:wr.paddingX,pb:wr.paddingBottom,pl:wr.paddingLeft,ps:wr.paddingInlineStart,paddingStart:wr.paddingInlineStart,pr:wr.paddingRight,pe:wr.paddingInlineEnd,paddingEnd:wr.paddingInlineEnd});const ZO={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Re.spaceT("scrollMargin"),scrollMarginTop:Re.spaceT("scrollMarginTop"),scrollMarginBottom:Re.spaceT("scrollMarginBottom"),scrollMarginLeft:Re.spaceT("scrollMarginLeft"),scrollMarginRight:Re.spaceT("scrollMarginRight"),scrollMarginX:Re.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Re.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Re.spaceT("scrollPadding"),scrollPaddingTop:Re.spaceT("scrollPaddingTop"),scrollPaddingBottom:Re.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Re.spaceT("scrollPaddingLeft"),scrollPaddingRight:Re.spaceT("scrollPaddingRight"),scrollPaddingX:Re.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Re.spaceT(["scrollPaddingTop","scrollPaddingBottom"])},XO={fontFamily:Re.prop("fontFamily","fonts"),fontSize:Re.prop("fontSize","fontSizes",Hn.px),fontWeight:Re.prop("fontWeight","fontWeights"),lineHeight:Re.prop("lineHeight","lineHeights"),letterSpacing:Re.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(t===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},KO={textDecorationColor:Re.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Re.shadows("textShadow")},QO={clipPath:!0,transform:Re.propT("transform",Hn.transform),transformOrigin:!0,translateX:Re.spaceT("--chakra-translate-x"),translateY:Re.spaceT("--chakra-translate-y"),skewX:Re.degreeT("--chakra-skew-x"),skewY:Re.degreeT("--chakra-skew-y"),scaleX:Re.prop("--chakra-scale-x"),scaleY:Re.prop("--chakra-scale-y"),scale:Re.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Re.degreeT("--chakra-rotate")},JO={listStyleType:!0,listStylePosition:!0,listStylePos:Re.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Re.prop("listStyleImage")},e4={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Re.prop("transitionDuration","transition.duration"),transitionProperty:Re.prop("transitionProperty","transition.property"),transitionTimingFunction:Re.prop("transitionTimingFunction","transition.easing")},mS=Ia({},ix,er,BO,Tx,Da,$O,FO,VO,xR,YO,pp,qj,wr,ZO,XO,KO,QO,JO,e4),t4=Object.assign({},wr,Da,Tx,xR,pp),n4=Object.keys(t4),r4=[...Object.keys(mS),...mR],s4={...mS,...rv},i4=t=>t in s4,a4=t=>n=>{if(!n.__breakpoints)return t;const{isResponsive:r,toArrayValue:i,media:l}=n.__breakpoints,u={};for(const d in t){let p=ca(t[d],n);if(p==null)continue;if(p=gs(p)&&r(p)?i(p):p,!Array.isArray(p)){u[d]=p;continue}const f=p.slice(0,l.length).length;for(let g=0;g<f;g+=1){const x=l?.[g];if(!x){u[d]=p[g];continue}u[x]=u[x]||{},p[g]!=null&&(u[x][d]=p[g])}}return u};function o4(t){const n=[];let r="",i=!1;for(let l=0;l<t.length;l++){const u=t[l];u==="("?(i=!0,r+=u):u===")"?(i=!1,r+=u):u===","&&!i?(n.push(r),r=""):r+=u}return r=r.trim(),r&&n.push(r),n}function l4(t){return/^var\(--.+\)$/.test(t)}const c4=(t,n)=>t.startsWith("--")&&typeof n=="string"&&!l4(n),u4=(t,n)=>{if(n==null)return n;const r=d=>t.__cssMap?.[d]?.varRef,i=d=>r(d)??d,[l,u]=o4(n);return n=r(l)??i(u)??i(n),n};function d4(t){const{configs:n={},pseudos:r={},theme:i}=t,l=(u,d=!1)=>{const p=ca(u,i),f=a4(p)(i);let g={};for(let x in f){const y=f[x];let b=ca(y,i);x in r&&(x=r[x]),c4(x,b)&&(b=u4(i,b));let w=n[x];if(w===!0&&(w={property:x}),gs(b)){g[x]=g[x]??{},g[x]=Ia({},g[x],l(b,!0));continue}let C=w?.transform?.(b,i,p)??b;C=w?.processResult?l(C,!0):C;const _=ca(w?.property,i);if(!d&&w?.static){const A=ca(w.static,i);g=Ia({},g,A)}if(_&&Array.isArray(_)){for(const A of _)g[A]=C;continue}if(_){_==="&"&&gs(C)?g=Ia({},g,C):g[_]=C;continue}if(gs(C)){g=Ia({},g,C);continue}g[x]=C}return g};return l}const vR=t=>n=>d4({theme:n,pseudos:rv,configs:mS})(t);function br(t){return{definePartsStyle(n){return n},defineMultiStyleConfig(n){return{parts:t,...n}}}}function h4(t,n,r){return t.__cssMap?.[`${n}.${r}`]?.varRef??r}function f4(t,n){if(Array.isArray(t))return t;if(gs(t))return n(t);if(t!=null)return[t]}function p4(t,n){for(let r=n+1;r<t.length;r++)if(t[r]!=null)return r;return-1}function m4(t){const n=t.__breakpoints;return function(i,l,u,d){if(!n)return;const p={},f=f4(u,n.toArrayValue);if(!f)return p;const g=f.length,x=g===1,y=!!i.parts;for(let b=0;b<g;b++){const w=n.details[b],C=n.details[p4(f,b)],_=Qf(w.minW,C?._minW),A=ca(i[l]?.[f[b]],d);if(A){if(y){i.parts?.forEach(D=>{Ia(p,{[D]:x?A[D]:{[_]:A[D]}})});continue}if(!y){x?Ia(p,A):p[_]=A;continue}p[_]=A}}return p}}function g4(t){return n=>{const{variant:r,size:i,theme:l}=n,u=m4(l);return Ia({},ca(t.baseStyle??{},n),u(t,"sizes",i,n),u(t,"variants",r,n))}}function Yn(t){return rm(t,["styleConfig","size","variant","colorScheme"])}function yR(t){return gs(t)&&t.reference?t.reference:String(t)}const sv=(t,...n)=>n.map(yR).join(` ${t} `).replace(/calc/g,""),y_=(...t)=>`calc(${sv("+",...t)})`,j_=(...t)=>`calc(${sv("-",...t)})`,Gj=(...t)=>`calc(${sv("*",...t)})`,b_=(...t)=>`calc(${sv("/",...t)})`,S_=t=>{const n=yR(t);return n!=null&&!Number.isNaN(parseFloat(n))?String(n).startsWith("-")?String(n).slice(1):`-${n}`:Gj(n,-1)},wl=Object.assign(t=>({add:(...n)=>wl(y_(t,...n)),subtract:(...n)=>wl(j_(t,...n)),multiply:(...n)=>wl(Gj(t,...n)),divide:(...n)=>wl(b_(t,...n)),negate:()=>wl(S_(t)),toString:()=>t.toString()}),{add:y_,subtract:j_,multiply:Gj,divide:b_,negate:S_});function x4(t,n="-"){return t.replace(/\s+/g,n)}function v4(t){const n=x4(t.toString());return j4(y4(n))}function y4(t){return t.includes("\\.")?t:!Number.isInteger(parseFloat(t.toString()))?t.replace(".","\\."):t}function j4(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function b4(t,n=""){return[n,t].filter(Boolean).join("-")}function S4(t,n){return`var(${t}${n?`, ${n}`:""})`}function w4(t,n=""){return v4(`--${b4(t,n)}`)}function Jt(t,n,r){const i=w4(t,r);return{variable:i,reference:S4(i,n)}}function C4(t,n){const r={};for(const i of n){if(Array.isArray(i)){const[l,u]=i;r[l]=Jt(`${t}-${l}`,u);continue}r[i]=Jt(`${t}-${i}`)}return r}const E4=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function _4(t){return iR(t,E4)}function T4(t){return t.semanticTokens}function A4(t){const{__cssMap:n,__cssVars:r,__breakpoints:i,...l}=t;return l}function R4(t){const n=_4(t),r=T4(t),i=u=>mR.includes(u)||u==="default",l={};return f_(n,(u,d)=>{u!=null&&(l[d.join(".")]={isSemantic:!1,value:u})}),f_(r,(u,d)=>{u!=null&&(l[d.join(".")]={isSemantic:!0,value:u})},{stop:u=>Object.keys(u).every(i)}),l}function w_(t,n){return Jt(String(t).replace(/\./g,"-"),void 0,n)}function k4(t){const n=R4(t),r=t.config?.cssVarPrefix;let i={};const l={};function u(d,p){const g=[String(d).split(".")[0],p].join(".");if(!n[g])return p;const{reference:y}=w_(g,r);return y}for(const[d,p]of Object.entries(n)){const{isSemantic:f,value:g}=p,{variable:x,reference:y}=w_(d,r);if(!f){if(d.startsWith("space")){const w=d.split("."),[C,..._]=w,A=`${C}.-${_.join(".")}`,D=wl.negate(g),P=wl.negate(y);l[A]={value:D,var:x,varRef:P}}i[x]=g,l[d]={value:g,var:x,varRef:y};continue}const b=gs(g)?g:{default:g};i=Ia(i,Object.entries(b).reduce((w,[C,_])=>{if(!_)return w;const A=u(d,`${_}`);if(C==="default")return w[x]=A,w;const D=rv?.[C]??C;return w[D]={[x]:A},w},{})),l[d]={value:y,var:x,varRef:y}}return{cssVars:i,cssMap:l}}function D4(t){const n=A4(t),{cssMap:r,cssVars:i}=k4(n);return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...i},__cssMap:r,__breakpoints:kL(n.breakpoints)}),n}function ir(t,n={}){let r=!1;function i(){if(!r){r=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function l(...x){i();for(const y of x)n[y]=f(y);return ir(t,n)}function u(...x){for(const y of x)y in n||(n[y]=f(y));return ir(t,n)}function d(){return Object.fromEntries(Object.entries(n).map(([y,b])=>[y,b.selector]))}function p(){return Object.fromEntries(Object.entries(n).map(([y,b])=>[y,b.className]))}function f(x){const w=`chakra-${(["container","root"].includes(x??"")?[t]:[t,x]).filter(Boolean).join("__")}`;return{className:w,selector:`.${w}`,toString:()=>x}}return{parts:l,toPart:f,extend:u,selectors:d,classnames:p,get keys(){return Object.keys(n)},__type:{}}}const P4=ir("accordion").parts("root","container","button","panel","icon"),M4=ir("alert").parts("title","description","container","icon","spinner"),z4=ir("avatar").parts("label","badge","container","excessLabel","group"),I4=ir("breadcrumb").parts("link","item","container","separator");ir("button").parts();const N4=ir("checkbox").parts("control","icon","container","label");ir("progress").parts("track","filledTrack","label");const L4=ir("drawer").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),O4=ir("editable").parts("preview","input","textarea"),B4=ir("form").parts("container","requiredIndicator","helperText"),$4=ir("formError").parts("text","icon"),F4=ir("input").parts("addon","field","element","group"),V4=ir("list").parts("container","item","icon"),U4=ir("menu").parts("button","list","item","groupTitle","icon","command","divider"),H4=ir("modal").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),W4=ir("numberinput").parts("root","field","stepperGroup","stepper");ir("pininput").parts("field");const q4=ir("popover").parts("content","header","body","footer","popper","arrow","closeButton"),G4=ir("progress").parts("label","filledTrack","track"),Y4=ir("radio").parts("container","control","label"),Z4=ir("select").parts("field","icon"),X4=ir("slider").parts("container","track","thumb","filledTrack","mark"),K4=ir("stat").parts("container","label","helpText","number","icon"),Q4=ir("switch").parts("container","track","thumb","label"),J4=ir("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),e3=ir("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),t3=ir("tag").parts("container","label","closeButton"),n3=ir("card").parts("container","header","body","footer");ir("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");const{definePartsStyle:r3,defineMultiStyleConfig:s3}=br(P4.keys),i3={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},a3={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},o3={pt:"2",px:"4",pb:"5"},l3={fontSize:"1.25em"},c3=r3({container:i3,button:a3,panel:o3,icon:l3}),u3=s3({baseStyle:c3});function Su(t,n,r){return Math.min(Math.max(t,r),n)}class d3 extends Error{constructor(n){super(`Failed to parse color: "${n}"`)}}var ep=d3;function gS(t){if(typeof t!="string")throw new ep(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let n=t.trim();n=y3.test(t)?p3(t):t;const r=m3.exec(n);if(r){const d=Array.from(r).slice(1);return[...d.slice(0,3).map(p=>parseInt(Pp(p,2),16)),parseInt(Pp(d[3]||"f",2),16)/255]}const i=g3.exec(n);if(i){const d=Array.from(i).slice(1);return[...d.slice(0,3).map(p=>parseInt(p,16)),parseInt(d[3]||"ff",16)/255]}const l=x3.exec(n);if(l){const d=Array.from(l).slice(1);return[...d.slice(0,3).map(p=>parseInt(p,10)),parseFloat(d[3]||"1")]}const u=v3.exec(n);if(u){const[d,p,f,g]=Array.from(u).slice(1).map(parseFloat);if(Su(0,100,p)!==p)throw new ep(t);if(Su(0,100,f)!==f)throw new ep(t);return[...j3(d,p,f),Number.isNaN(g)?1:g]}throw new ep(t)}function h3(t){let n=5381,r=t.length;for(;r;)n=n*33^t.charCodeAt(--r);return(n>>>0)%2341}const C_=t=>parseInt(t.replace(/_/g,""),36),f3="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,n)=>{const r=C_(n.substring(0,3)),i=C_(n.substring(3)).toString(16);let l="";for(let u=0;u<6-i.length;u++)l+="0";return t[r]=`${l}${i}`,t},{});function p3(t){const n=t.toLowerCase().trim(),r=f3[h3(n)];if(!r)throw new ep(t);return`#${r}`}const Pp=(t,n)=>Array.from(Array(n)).map(()=>t).join(""),m3=new RegExp(`^#${Pp("([a-f0-9])",3)}([a-f0-9])?$`,"i"),g3=new RegExp(`^#${Pp("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),x3=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Pp(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),v3=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,y3=/^[a-z]+$/i,E_=t=>Math.round(t*255),j3=(t,n,r)=>{let i=r/100;if(n===0)return[i,i,i].map(E_);const l=(t%360+360)%360/60,u=(1-Math.abs(2*i-1))*(n/100),d=u*(1-Math.abs(l%2-1));let p=0,f=0,g=0;l>=0&&l<1?(p=u,f=d):l>=1&&l<2?(p=d,f=u):l>=2&&l<3?(f=u,g=d):l>=3&&l<4?(f=d,g=u):l>=4&&l<5?(p=d,g=u):l>=5&&l<6&&(p=u,g=d);const x=i-u/2,y=p+x,b=f+x,w=g+x;return[y,b,w].map(E_)};function b3(t,n,r,i){return`rgba(${Su(0,255,t).toFixed()}, ${Su(0,255,n).toFixed()}, ${Su(0,255,r).toFixed()}, ${parseFloat(Su(0,1,i).toFixed(3))})`}function S3(t,n){const[r,i,l,u]=gS(t);return b3(r,i,l,u-n)}function w3(t){const[n,r,i,l]=gS(t);let u=d=>{const p=Su(0,255,d).toString(16);return p.length===1?`0${p}`:p};return`#${u(n)}${u(r)}${u(i)}${l<1?u(Math.round(l*255)):""}`}const C3=t=>Object.keys(t).length===0;function E3(t,n,r,i,l){for(n=n.split?n.split("."):n,i=0;i<n.length;i++)t=t?t[n[i]]:l;return t===l?r:t}const vi=(t,n,r)=>{const i=E3(t,`colors.${n}`,n);try{return w3(i),i}catch{return r??"#000000"}},_3=t=>{const[n,r,i]=gS(t);return(n*299+r*587+i*114)/1e3},T3=t=>n=>{const r=vi(n,t);return _3(r)<128?"dark":"light"},A3=t=>n=>T3(t)(n)==="dark",gh=(t,n)=>r=>{const i=vi(r,t);return S3(i,1-n)};function __(t="1rem",n="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${n} 25%,
    transparent 25%,
    transparent 50%,
    ${n} 50%,
    ${n} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${t} ${t}`}}const R3=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function k3(t){const n=R3();return!t||C3(t)?n:t.string&&t.colors?P3(t.string,t.colors):t.string&&!t.colors?D3(t.string):t.colors&&!t.string?M3(t.colors):n}function D3(t){let n=0;if(t.length===0)return n.toString();for(let i=0;i<t.length;i+=1)n=t.charCodeAt(i)+((n<<5)-n),n=n&n;let r="#";for(let i=0;i<3;i+=1){const l=n>>i*8&255;r+=`00${l.toString(16)}`.substr(-2)}return r}function P3(t,n){let r=0;if(t.length===0)return n[0];for(let i=0;i<t.length;i+=1)r=t.charCodeAt(i)+((r<<5)-r),r=r&r;return r=(r%n.length+n.length)%n.length,n[r]}function M3(t){return t[Math.floor(Math.random()*t.length)]}function Qt(t,n){return r=>r.colorMode==="dark"?n:t}function xS(t){const{orientation:n,vertical:r,horizontal:i}=t;return n?n==="vertical"?r:i:{}}function jR(t){return gs(t)&&t.reference?t.reference:String(t)}const iv=(t,...n)=>n.map(jR).join(` ${t} `).replace(/calc/g,""),T_=(...t)=>`calc(${iv("+",...t)})`,A_=(...t)=>`calc(${iv("-",...t)})`,Yj=(...t)=>`calc(${iv("*",...t)})`,R_=(...t)=>`calc(${iv("/",...t)})`,k_=t=>{const n=jR(t);return n!=null&&!Number.isNaN(parseFloat(n))?String(n).startsWith("-")?String(n).slice(1):`-${n}`:Yj(n,-1)},Cl=Object.assign(t=>({add:(...n)=>Cl(T_(t,...n)),subtract:(...n)=>Cl(A_(t,...n)),multiply:(...n)=>Cl(Yj(t,...n)),divide:(...n)=>Cl(R_(t,...n)),negate:()=>Cl(k_(t)),toString:()=>t.toString()}),{add:T_,subtract:A_,multiply:Yj,divide:R_,negate:k_});function z3(t){return!Number.isInteger(parseFloat(t.toString()))}function I3(t,n="-"){return t.replace(/\s+/g,n)}function bR(t){const n=I3(t.toString());return n.includes("\\.")?t:z3(t)?n.replace(".","\\."):t}function N3(t,n=""){return[n,bR(t)].filter(Boolean).join("-")}function L3(t,n){return`var(${bR(t)}${n?`, ${n}`:""})`}function O3(t,n=""){return`--${N3(t,n)}`}function xs(t,n){const r=O3(t,n?.prefix);return{variable:r,reference:L3(r,B3(n?.fallback))}}function B3(t){return t?.reference}const{definePartsStyle:am,defineMultiStyleConfig:$3}=br(M4.keys),da=Jt("alert-fg"),Ll=Jt("alert-bg"),F3=am({container:{bg:Ll.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:da.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:da.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function vS(t){const{theme:n,colorScheme:r}=t,i=gh(`${r}.200`,.16)(n);return{light:`colors.${r}.100`,dark:i}}const V3=am(t=>{const{colorScheme:n}=t,r=vS(t);return{container:{[da.variable]:`colors.${n}.600`,[Ll.variable]:r.light,_dark:{[da.variable]:`colors.${n}.200`,[Ll.variable]:r.dark}}}}),U3=am(t=>{const{colorScheme:n}=t,r=vS(t);return{container:{[da.variable]:`colors.${n}.600`,[Ll.variable]:r.light,_dark:{[da.variable]:`colors.${n}.200`,[Ll.variable]:r.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:da.reference}}}),H3=am(t=>{const{colorScheme:n}=t,r=vS(t);return{container:{[da.variable]:`colors.${n}.600`,[Ll.variable]:r.light,_dark:{[da.variable]:`colors.${n}.200`,[Ll.variable]:r.dark},pt:"2",borderTopWidth:"4px",borderTopColor:da.reference}}}),W3=am(t=>{const{colorScheme:n}=t;return{container:{[da.variable]:"colors.white",[Ll.variable]:`colors.${n}.600`,_dark:{[da.variable]:"colors.gray.900",[Ll.variable]:`colors.${n}.200`},color:da.reference}}}),q3={subtle:V3,"left-accent":U3,"top-accent":H3,solid:W3},G3=$3({baseStyle:F3,variants:q3,defaultProps:{variant:"subtle",colorScheme:"blue"}}),SR={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Y3={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},Z3={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},wR={...SR,...Y3,container:Z3},X3=t=>typeof t=="function";function yi(t,...n){return X3(t)?t(...n):t}const{definePartsStyle:CR,defineMultiStyleConfig:K3}=br(z4.keys),ih=Jt("avatar-border-color"),mp=Jt("avatar-bg"),Mp=Jt("avatar-font-size"),xh=Jt("avatar-size"),Q3={borderRadius:"full",border:"0.2em solid",borderColor:ih.reference,[ih.variable]:"white",_dark:{[ih.variable]:"colors.gray.800"}},J3={bg:mp.reference,fontSize:Mp.reference,width:xh.reference,height:xh.reference,lineHeight:"1",[mp.variable]:"colors.gray.200",_dark:{[mp.variable]:"colors.whiteAlpha.400"}},e5=t=>{const{name:n,theme:r}=t,i=n?k3({string:n}):"colors.gray.400",l=A3(i)(r);let u="white";return l||(u="gray.800"),{bg:mp.reference,fontSize:Mp.reference,color:u,borderColor:ih.reference,verticalAlign:"top",width:xh.reference,height:xh.reference,"&:not([data-loaded])":{[mp.variable]:i},[ih.variable]:"colors.white",_dark:{[ih.variable]:"colors.gray.800"}}},t5={fontSize:Mp.reference,lineHeight:"1"},n5=CR(t=>({badge:yi(Q3,t),excessLabel:yi(J3,t),container:yi(e5,t),label:t5}));function jc(t){const n=t!=="100%"?wR[t]:void 0;return CR({container:{[xh.variable]:n??t,[Mp.variable]:`calc(${n??t} / 2.5)`},excessLabel:{[xh.variable]:n??t,[Mp.variable]:`calc(${n??t} / 2.5)`}})}const r5={"2xs":jc(4),xs:jc(6),sm:jc(8),md:jc(12),lg:jc(16),xl:jc(24),"2xl":jc(32),full:jc("100%")},s5=K3({baseStyle:n5,sizes:r5,defaultProps:{size:"md"}}),Qr=C4("badge",["bg","color","shadow"]),i5={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Qr.bg.reference,color:Qr.color.reference,boxShadow:Qr.shadow.reference},a5=t=>{const{colorScheme:n,theme:r}=t,i=gh(`${n}.500`,.6)(r);return{[Qr.bg.variable]:`colors.${n}.500`,[Qr.color.variable]:"colors.white",_dark:{[Qr.bg.variable]:i,[Qr.color.variable]:"colors.whiteAlpha.800"}}},o5=t=>{const{colorScheme:n,theme:r}=t,i=gh(`${n}.200`,.16)(r);return{[Qr.bg.variable]:`colors.${n}.100`,[Qr.color.variable]:`colors.${n}.800`,_dark:{[Qr.bg.variable]:i,[Qr.color.variable]:`colors.${n}.200`}}},l5=t=>{const{colorScheme:n,theme:r}=t,i=gh(`${n}.200`,.8)(r);return{[Qr.color.variable]:`colors.${n}.500`,_dark:{[Qr.color.variable]:i},[Qr.shadow.variable]:`inset 0 0 0px 1px ${Qr.color.reference}`}},c5={solid:a5,subtle:o5,outline:l5},gp={baseStyle:i5,variants:c5,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:u5,definePartsStyle:d5}=br(I4.keys),_y=Jt("breadcrumb-link-decor"),h5={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:_y.reference,[_y.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[_y.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},f5=d5({link:h5}),p5=u5({baseStyle:f5}),m5={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},ER=t=>{const{colorScheme:n,theme:r}=t;if(n==="gray")return{color:Qt("gray.800","whiteAlpha.900")(t),_hover:{bg:Qt("gray.100","whiteAlpha.200")(t)},_active:{bg:Qt("gray.200","whiteAlpha.300")(t)}};const i=gh(`${n}.200`,.12)(r),l=gh(`${n}.200`,.24)(r);return{color:Qt(`${n}.600`,`${n}.200`)(t),bg:"transparent",_hover:{bg:Qt(`${n}.50`,i)(t)},_active:{bg:Qt(`${n}.100`,l)(t)}}},g5=t=>{const{colorScheme:n}=t,r=Qt("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:n==="gray"?r:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...yi(ER,t)}},x5={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},v5=t=>{const{colorScheme:n}=t;if(n==="gray"){const p=Qt("gray.100","whiteAlpha.200")(t);return{bg:p,color:Qt("gray.800","whiteAlpha.900")(t),_hover:{bg:Qt("gray.200","whiteAlpha.300")(t),_disabled:{bg:p}},_active:{bg:Qt("gray.300","whiteAlpha.400")(t)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:l=`${n}.600`,activeBg:u=`${n}.700`}=x5[n]??{},d=Qt(r,`${n}.200`)(t);return{bg:d,color:Qt(i,"gray.800")(t),_hover:{bg:Qt(l,`${n}.300`)(t),_disabled:{bg:d}},_active:{bg:Qt(u,`${n}.400`)(t)}}},y5=t=>{const{colorScheme:n}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Qt(`${n}.500`,`${n}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Qt(`${n}.700`,`${n}.500`)(t)}}},j5={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},b5={ghost:ER,outline:g5,solid:v5,link:y5,unstyled:j5},S5={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},w5={baseStyle:m5,variants:b5,sizes:S5,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Ru,defineMultiStyleConfig:C5}=br(n3.keys),Ax=Jt("card-bg"),Pl=Jt("card-padding"),_R=Jt("card-shadow"),ax=Jt("card-radius"),TR=Jt("card-border-width","0"),AR=Jt("card-border-color"),E5=Ru({container:{[Ax.variable]:"colors.chakra-body-bg",backgroundColor:Ax.reference,boxShadow:_R.reference,borderRadius:ax.reference,color:"chakra-body-text",borderWidth:TR.reference,borderColor:AR.reference},body:{padding:Pl.reference,flex:"1 1 0%"},header:{padding:Pl.reference},footer:{padding:Pl.reference}}),_5={sm:Ru({container:{[ax.variable]:"radii.base",[Pl.variable]:"space.3"}}),md:Ru({container:{[ax.variable]:"radii.md",[Pl.variable]:"space.5"}}),lg:Ru({container:{[ax.variable]:"radii.xl",[Pl.variable]:"space.7"}})},T5={elevated:Ru({container:{[_R.variable]:"shadows.base",_dark:{[Ax.variable]:"colors.gray.700"}}}),outline:Ru({container:{[TR.variable]:"1px",[AR.variable]:"colors.chakra-border-color"}}),filled:Ru({container:{[Ax.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Pl.variable]:0},header:{[Pl.variable]:0},footer:{[Pl.variable]:0}}},A5=C5({baseStyle:E5,variants:T5,sizes:_5,defaultProps:{variant:"elevated",size:"md"}}),{definePartsStyle:ox,defineMultiStyleConfig:R5}=br(N4.keys),xp=Jt("checkbox-size"),k5=t=>{const{colorScheme:n}=t;return{w:xp.reference,h:xp.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Qt(`${n}.500`,`${n}.200`)(t),borderColor:Qt(`${n}.500`,`${n}.200`)(t),color:Qt("white","gray.900")(t),_hover:{bg:Qt(`${n}.600`,`${n}.300`)(t),borderColor:Qt(`${n}.600`,`${n}.300`)(t)},_disabled:{borderColor:Qt("gray.200","transparent")(t),bg:Qt("gray.200","whiteAlpha.300")(t),color:Qt("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:Qt(`${n}.500`,`${n}.200`)(t),borderColor:Qt(`${n}.500`,`${n}.200`)(t),color:Qt("white","gray.900")(t)},_disabled:{bg:Qt("gray.100","whiteAlpha.100")(t),borderColor:Qt("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Qt("red.500","red.300")(t)}}},D5={_disabled:{cursor:"not-allowed"}},P5={userSelect:"none",_disabled:{opacity:.4}},M5={transitionProperty:"transform",transitionDuration:"normal"},z5=ox(t=>({icon:M5,container:D5,control:yi(k5,t),label:P5})),I5={sm:ox({control:{[xp.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:ox({control:{[xp.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:ox({control:{[xp.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},Rx=R5({baseStyle:z5,sizes:I5,defaultProps:{size:"md",colorScheme:"blue"}}),vp=xs("close-button-size"),Of=xs("close-button-bg"),N5={w:[vp.reference],h:[vp.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Of.variable]:"colors.blackAlpha.100",_dark:{[Of.variable]:"colors.whiteAlpha.100"}},_active:{[Of.variable]:"colors.blackAlpha.200",_dark:{[Of.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Of.reference},L5={lg:{[vp.variable]:"sizes.10",fontSize:"md"},md:{[vp.variable]:"sizes.8",fontSize:"xs"},sm:{[vp.variable]:"sizes.6",fontSize:"2xs"}},O5={baseStyle:N5,sizes:L5,defaultProps:{size:"md"}},{variants:B5,defaultProps:$5}=gp,F5={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Qr.bg.reference,color:Qr.color.reference,boxShadow:Qr.shadow.reference},V5={baseStyle:F5,variants:B5,defaultProps:$5},U5={w:"100%",mx:"auto",maxW:"prose",px:"4"},H5={baseStyle:U5},W5={opacity:.6,borderColor:"inherit"},q5={borderStyle:"solid"},G5={borderStyle:"dashed"},Y5={solid:q5,dashed:G5},Z5={baseStyle:W5,variants:Y5,defaultProps:{variant:"solid"}},{definePartsStyle:Zj,defineMultiStyleConfig:X5}=br(L4.keys),Ty=Jt("drawer-bg"),Ay=Jt("drawer-box-shadow");function Id(t){return Zj(t==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}const K5={bg:"blackAlpha.600",zIndex:"modal"},Q5={display:"flex",zIndex:"modal",justifyContent:"center"},J5=t=>{const{isFullHeight:n}=t;return{...n&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[Ty.variable]:"colors.white",[Ay.variable]:"shadows.lg",_dark:{[Ty.variable]:"colors.gray.700",[Ay.variable]:"shadows.dark-lg"},bg:Ty.reference,boxShadow:Ay.reference}},e6={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},t6={position:"absolute",top:"2",insetEnd:"3"},n6={px:"6",py:"2",flex:"1",overflow:"auto"},r6={px:"6",py:"4"},s6=Zj(t=>({overlay:K5,dialogContainer:Q5,dialog:yi(J5,t),header:e6,closeButton:t6,body:n6,footer:r6})),i6={xs:Id("xs"),sm:Id("md"),md:Id("lg"),lg:Id("2xl"),xl:Id("4xl"),full:Id("full")},a6=X5({baseStyle:s6,sizes:i6,defaultProps:{size:"xs"}}),{definePartsStyle:o6,defineMultiStyleConfig:l6}=br(O4.keys),c6={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},u6={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},d6={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},h6=o6({preview:c6,input:u6,textarea:d6}),f6=l6({baseStyle:h6}),{definePartsStyle:p6,defineMultiStyleConfig:m6}=br(B4.keys),ah=Jt("form-control-color"),g6={marginStart:"1",[ah.variable]:"colors.red.500",_dark:{[ah.variable]:"colors.red.300"},color:ah.reference},x6={mt:"2",[ah.variable]:"colors.gray.600",_dark:{[ah.variable]:"colors.whiteAlpha.600"},color:ah.reference,lineHeight:"normal",fontSize:"sm"},v6=p6({container:{width:"100%",position:"relative"},requiredIndicator:g6,helperText:x6}),y6=m6({baseStyle:v6}),{definePartsStyle:j6,defineMultiStyleConfig:b6}=br($4.keys),oh=Jt("form-error-color"),S6={[oh.variable]:"colors.red.500",_dark:{[oh.variable]:"colors.red.300"},color:oh.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},w6={marginEnd:"0.5em",[oh.variable]:"colors.red.500",_dark:{[oh.variable]:"colors.red.300"},color:oh.reference},C6=j6({text:S6,icon:w6}),E6=b6({baseStyle:C6}),_6={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},T6={baseStyle:_6},A6={fontFamily:"heading",fontWeight:"bold"},R6={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},k6={baseStyle:A6,sizes:R6,defaultProps:{size:"xl"}},{definePartsStyle:Al,defineMultiStyleConfig:D6}=br(F4.keys),Ud=Jt("input-height"),Hd=Jt("input-font-size"),Wd=Jt("input-padding"),qd=Jt("input-border-radius"),P6=Al({addon:{height:Ud.reference,fontSize:Hd.reference,px:Wd.reference,borderRadius:qd.reference},field:{width:"100%",height:Ud.reference,fontSize:Hd.reference,px:Wd.reference,borderRadius:qd.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),bc={lg:{[Hd.variable]:"fontSizes.lg",[Wd.variable]:"space.4",[qd.variable]:"radii.md",[Ud.variable]:"sizes.12"},md:{[Hd.variable]:"fontSizes.md",[Wd.variable]:"space.4",[qd.variable]:"radii.md",[Ud.variable]:"sizes.10"},sm:{[Hd.variable]:"fontSizes.sm",[Wd.variable]:"space.3",[qd.variable]:"radii.sm",[Ud.variable]:"sizes.8"},xs:{[Hd.variable]:"fontSizes.xs",[Wd.variable]:"space.2",[qd.variable]:"radii.sm",[Ud.variable]:"sizes.6"}},M6={lg:Al({field:bc.lg,group:bc.lg}),md:Al({field:bc.md,group:bc.md}),sm:Al({field:bc.sm,group:bc.sm}),xs:Al({field:bc.xs,group:bc.xs})};function yS(t){const{focusBorderColor:n,errorBorderColor:r}=t;return{focusBorderColor:n||Qt("blue.500","blue.300")(t),errorBorderColor:r||Qt("red.500","red.300")(t)}}const z6=Al(t=>{const{theme:n}=t,{focusBorderColor:r,errorBorderColor:i}=yS(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Qt("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:vi(n,i),boxShadow:`0 0 0 1px ${vi(n,i)}`},_focusVisible:{zIndex:1,borderColor:vi(n,r),boxShadow:`0 0 0 1px ${vi(n,r)}`}},addon:{border:"1px solid",borderColor:Qt("inherit","whiteAlpha.50")(t),bg:Qt("gray.100","whiteAlpha.300")(t)}}}),I6=Al(t=>{const{theme:n}=t,{focusBorderColor:r,errorBorderColor:i}=yS(t);return{field:{border:"2px solid",borderColor:"transparent",bg:Qt("gray.100","whiteAlpha.50")(t),_hover:{bg:Qt("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:vi(n,i)},_focusVisible:{bg:"transparent",borderColor:vi(n,r)}},addon:{border:"2px solid",borderColor:"transparent",bg:Qt("gray.100","whiteAlpha.50")(t)}}}),N6=Al(t=>{const{theme:n}=t,{focusBorderColor:r,errorBorderColor:i}=yS(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:vi(n,i),boxShadow:`0px 1px 0px 0px ${vi(n,i)}`},_focusVisible:{borderColor:vi(n,r),boxShadow:`0px 1px 0px 0px ${vi(n,r)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),L6=Al({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),O6={outline:z6,filled:I6,flushed:N6,unstyled:L6},rr=D6({baseStyle:P6,sizes:M6,variants:O6,defaultProps:{size:"md",variant:"outline"}}),Ry=Jt("kbd-bg"),B6={[Ry.variable]:"colors.gray.100",_dark:{[Ry.variable]:"colors.whiteAlpha.100"},bg:Ry.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},$6={baseStyle:B6},F6={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},V6={baseStyle:F6},{defineMultiStyleConfig:U6,definePartsStyle:H6}=br(V4.keys),W6={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},q6=H6({icon:W6}),G6=U6({baseStyle:q6}),{defineMultiStyleConfig:Y6,definePartsStyle:Z6}=br(U4.keys),zo=Jt("menu-bg"),ky=Jt("menu-shadow"),X6={[zo.variable]:"#fff",[ky.variable]:"shadows.sm",_dark:{[zo.variable]:"colors.gray.700",[ky.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:"dropdown",borderRadius:"md",borderWidth:"1px",bg:zo.reference,boxShadow:ky.reference},K6={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[zo.variable]:"colors.gray.100",_dark:{[zo.variable]:"colors.whiteAlpha.100"}},_active:{[zo.variable]:"colors.gray.200",_dark:{[zo.variable]:"colors.whiteAlpha.200"}},_expanded:{[zo.variable]:"colors.gray.100",_dark:{[zo.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:zo.reference},Q6={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},J6={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},eB={opacity:.6},tB={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},nB={transitionProperty:"common",transitionDuration:"normal"},rB=Z6({button:nB,list:X6,item:K6,groupTitle:Q6,icon:J6,command:eB,divider:tB}),sB=Y6({baseStyle:rB}),{defineMultiStyleConfig:iB,definePartsStyle:Xj}=br(H4.keys),Dy=Jt("modal-bg"),Py=Jt("modal-shadow"),aB={bg:"blackAlpha.600",zIndex:"modal"},oB=t=>{const{isCentered:n,scrollBehavior:r}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:n?"center":"flex-start",overflow:r==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},lB=t=>{const{isCentered:n,scrollBehavior:r}=t;return{borderRadius:"md",color:"inherit",my:n?"auto":"16",mx:n?"auto":void 0,zIndex:"modal",maxH:r==="inside"?"calc(100% - 7.5rem)":void 0,[Dy.variable]:"colors.white",[Py.variable]:"shadows.lg",_dark:{[Dy.variable]:"colors.gray.700",[Py.variable]:"shadows.dark-lg"},bg:Dy.reference,boxShadow:Py.reference}},cB={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},uB={position:"absolute",top:"2",insetEnd:"3"},dB=t=>{const{scrollBehavior:n}=t;return{px:"6",py:"2",flex:"1",overflow:n==="inside"?"auto":void 0}},hB={px:"6",py:"4"},fB=Xj(t=>({overlay:aB,dialogContainer:yi(oB,t),dialog:yi(lB,t),header:cB,closeButton:uB,body:yi(dB,t),footer:hB}));function io(t){return Xj(t==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}const pB={xs:io("xs"),sm:io("sm"),md:io("md"),lg:io("lg"),xl:io("xl"),"2xl":io("2xl"),"3xl":io("3xl"),"4xl":io("4xl"),"5xl":io("5xl"),"6xl":io("6xl"),full:io("full")},mB=iB({baseStyle:fB,sizes:pB,defaultProps:{size:"md"}}),RR={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{defineMultiStyleConfig:gB,definePartsStyle:kR}=br(W4.keys),jS=xs("number-input-stepper-width"),DR=xs("number-input-input-padding"),xB=Cl(jS).add("0.5rem").toString(),My=xs("number-input-bg"),zy=xs("number-input-color"),Iy=xs("number-input-border-color"),vB={[jS.variable]:"sizes.6",[DR.variable]:xB},yB=t=>yi(rr.baseStyle,t)?.field??{},jB={width:jS.reference},bB={borderStart:"1px solid",borderStartColor:Iy.reference,color:zy.reference,bg:My.reference,[zy.variable]:"colors.chakra-body-text",[Iy.variable]:"colors.chakra-border-color",_dark:{[zy.variable]:"colors.whiteAlpha.800",[Iy.variable]:"colors.whiteAlpha.300"},_active:{[My.variable]:"colors.gray.200",_dark:{[My.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},SB=kR(t=>({root:vB,field:yi(yB,t)??{},stepperGroup:jB,stepper:bB}));function Tg(t){const n=rr.sizes?.[t],r={lg:"md",md:"md",sm:"sm",xs:"sm"},i=n.field?.fontSize??"md",l=RR.fontSizes[i];return kR({field:{...n.field,paddingInlineEnd:DR.reference,verticalAlign:"top"},stepper:{fontSize:Cl(l).multiply(.75).toString(),_first:{borderTopEndRadius:r[t]},_last:{borderBottomEndRadius:r[t],mt:"-1px",borderTopWidth:1}}})}const wB={xs:Tg("xs"),sm:Tg("sm"),md:Tg("md"),lg:Tg("lg")},CB=gB({baseStyle:SB,sizes:wB,variants:rr.variants,defaultProps:rr.defaultProps}),EB={...rr.baseStyle?.field,textAlign:"center"},_B={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},TB={outline:t=>yi(rr.variants?.outline,t)?.field??{},flushed:t=>yi(rr.variants?.flushed,t)?.field??{},filled:t=>yi(rr.variants?.filled,t)?.field??{},unstyled:rr.variants?.unstyled.field??{}},AB={baseStyle:EB,sizes:_B,variants:TB,defaultProps:rr.defaultProps},{defineMultiStyleConfig:RB,definePartsStyle:kB}=br(q4.keys),Ag=xs("popper-bg"),DB=xs("popper-arrow-bg"),D_=xs("popper-arrow-shadow-color"),PB={zIndex:"popover"},MB={[Ag.variable]:"colors.white",bg:Ag.reference,[DB.variable]:Ag.reference,[D_.variable]:"colors.gray.200",_dark:{[Ag.variable]:"colors.gray.700",[D_.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},zB={px:3,py:2,borderBottomWidth:"1px"},IB={px:3,py:2},NB={px:3,py:2,borderTopWidth:"1px"},LB={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},OB=kB({popper:PB,content:MB,header:zB,body:IB,footer:NB,closeButton:LB}),BB=RB({baseStyle:OB}),{defineMultiStyleConfig:$B,definePartsStyle:tp}=br(G4.keys),FB=t=>{const{colorScheme:n,theme:r,isIndeterminate:i,hasStripe:l}=t,u=Qt(__(),__("1rem","rgba(0,0,0,0.1)"))(t),d=Qt(`${n}.500`,`${n}.200`)(t),p=`linear-gradient(
    to right,
    transparent 0%,
    ${vi(r,d)} 50%,
    transparent 100%
  )`;return{...!i&&l&&u,...i?{bgImage:p}:{bgColor:d}}},VB={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},UB=t=>({bg:Qt("gray.100","whiteAlpha.300")(t)}),HB=t=>({transitionProperty:"common",transitionDuration:"slow",...FB(t)}),WB=tp(t=>({label:VB,filledTrack:HB(t),track:UB(t)})),qB={xs:tp({track:{h:"1"}}),sm:tp({track:{h:"2"}}),md:tp({track:{h:"3"}}),lg:tp({track:{h:"4"}})},GB=$B({sizes:qB,baseStyle:WB,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:YB,definePartsStyle:lx}=br(Y4.keys),ZB=t=>{const n=yi(Rx.baseStyle,t)?.control;return{...n,borderRadius:"full",_checked:{...n?._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},XB=lx(t=>({label:Rx.baseStyle?.(t).label,container:Rx.baseStyle?.(t).container,control:ZB(t)})),KB={md:lx({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:lx({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:lx({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},QB=YB({baseStyle:XB,sizes:KB,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:JB,definePartsStyle:e$}=br(Z4.keys),Rg=Jt("select-bg"),t$={...rr.baseStyle?.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Rg.reference,[Rg.variable]:"colors.white",_dark:{[Rg.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Rg.reference}},n$={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},r$=e$({field:t$,icon:n$}),kg={paddingInlineEnd:"8"},s$={lg:{...rr.sizes?.lg,field:{...rr.sizes?.lg.field,...kg}},md:{...rr.sizes?.md,field:{...rr.sizes?.md.field,...kg}},sm:{...rr.sizes?.sm,field:{...rr.sizes?.sm.field,...kg}},xs:{...rr.sizes?.xs,field:{...rr.sizes?.xs.field,...kg},icon:{insetEnd:"1"}}},i$=JB({baseStyle:r$,sizes:s$,variants:rr.variants,defaultProps:rr.defaultProps}),Ny=Jt("skeleton-start-color"),Ly=Jt("skeleton-end-color"),a$={[Ny.variable]:"colors.gray.100",[Ly.variable]:"colors.gray.400",_dark:{[Ny.variable]:"colors.gray.800",[Ly.variable]:"colors.gray.600"},background:Ny.reference,borderColor:Ly.reference,opacity:.7,borderRadius:"sm"},o$={baseStyle:a$},Oy=Jt("skip-link-bg"),l$={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[Oy.variable]:"colors.white",_dark:{[Oy.variable]:"colors.gray.700"},bg:Oy.reference}},c$={baseStyle:l$},{defineMultiStyleConfig:u$,definePartsStyle:av}=br(X4.keys),Ou=Jt("slider-thumb-size"),zp=Jt("slider-track-size"),_c=Jt("slider-bg"),d$=t=>{const{orientation:n}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...xS({orientation:n,vertical:{h:"100%",px:wl(Ou.reference).divide(2).toString()},horizontal:{w:"100%",py:wl(Ou.reference).divide(2).toString()}})}},h$=t=>({...xS({orientation:t.orientation,horizontal:{h:zp.reference},vertical:{w:zp.reference}}),overflow:"hidden",borderRadius:"sm",[_c.variable]:"colors.gray.200",_dark:{[_c.variable]:"colors.whiteAlpha.200"},_disabled:{[_c.variable]:"colors.gray.300",_dark:{[_c.variable]:"colors.whiteAlpha.300"}},bg:_c.reference}),f$=t=>{const{orientation:n}=t;return{...xS({orientation:n,vertical:{left:"50%"},horizontal:{top:"50%"}}),w:Ou.reference,h:Ou.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_active:{"--slider-thumb-scale":"1.15"},_disabled:{bg:"gray.300"}}},p$=t=>{const{colorScheme:n}=t;return{width:"inherit",height:"inherit",[_c.variable]:`colors.${n}.500`,_dark:{[_c.variable]:`colors.${n}.200`},bg:_c.reference}},m$=av(t=>({container:d$(t),track:h$(t),thumb:f$(t),filledTrack:p$(t)})),g$=av({container:{[Ou.variable]:"sizes.4",[zp.variable]:"sizes.1"}}),x$=av({container:{[Ou.variable]:"sizes.3.5",[zp.variable]:"sizes.1"}}),v$=av({container:{[Ou.variable]:"sizes.2.5",[zp.variable]:"sizes.0.5"}}),y$={lg:g$,md:x$,sm:v$},j$=u$({baseStyle:m$,sizes:y$,defaultProps:{size:"md",colorScheme:"blue"}}),ju=xs("spinner-size"),b$={width:[ju.reference],height:[ju.reference]},S$={xs:{[ju.variable]:"sizes.3"},sm:{[ju.variable]:"sizes.4"},md:{[ju.variable]:"sizes.6"},lg:{[ju.variable]:"sizes.8"},xl:{[ju.variable]:"sizes.12"}},w$={baseStyle:b$,sizes:S$,defaultProps:{size:"md"}},{defineMultiStyleConfig:C$,definePartsStyle:PR}=br(K4.keys),E$={fontWeight:"medium"},_$={opacity:.8,marginBottom:"2"},T$={verticalAlign:"baseline",fontWeight:"semibold"},A$={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},R$=PR({container:{},label:E$,helpText:_$,number:T$,icon:A$}),k$={md:PR({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},D$=C$({baseStyle:R$,sizes:k$,defaultProps:{size:"md"}}),{defineMultiStyleConfig:P$,definePartsStyle:np}=br(["stepper","step","title","description","indicator","separator","icon","number"]),El=Jt("stepper-indicator-size"),Gd=Jt("stepper-icon-size"),Yd=Jt("stepper-title-font-size"),rp=Jt("stepper-description-font-size"),Bf=Jt("stepper-accent-color"),M$=np(({colorScheme:t})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Bf.variable]:`colors.${t}.500`,_dark:{[Bf.variable]:`colors.${t}.200`}},title:{fontSize:Yd.reference,fontWeight:"medium"},description:{fontSize:rp.reference,color:"chakra-subtle-text"},number:{fontSize:Yd.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Gd.reference,height:Gd.reference},indicator:{flexShrink:0,borderRadius:"full",width:El.reference,height:El.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Bf.reference},"&[data-status=complete]":{bg:Bf.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Bf.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${El.reference} - 8px)`,top:`calc(${El.reference} + 4px)`,insetStart:`calc(${El.reference} / 2 - 1px)`}}})),z$=P$({baseStyle:M$,sizes:{xs:np({stepper:{[El.variable]:"sizes.4",[Gd.variable]:"sizes.3",[Yd.variable]:"fontSizes.xs",[rp.variable]:"fontSizes.xs"}}),sm:np({stepper:{[El.variable]:"sizes.6",[Gd.variable]:"sizes.4",[Yd.variable]:"fontSizes.sm",[rp.variable]:"fontSizes.xs"}}),md:np({stepper:{[El.variable]:"sizes.8",[Gd.variable]:"sizes.5",[Yd.variable]:"fontSizes.md",[rp.variable]:"fontSizes.sm"}}),lg:np({stepper:{[El.variable]:"sizes.10",[Gd.variable]:"sizes.6",[Yd.variable]:"fontSizes.lg",[rp.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:I$,definePartsStyle:cx}=br(Q4.keys),yp=xs("switch-track-width"),ku=xs("switch-track-height"),By=xs("switch-track-diff"),N$=Cl.subtract(yp,ku),Kj=xs("switch-thumb-x"),$f=xs("switch-bg"),L$=t=>{const{colorScheme:n}=t;return{borderRadius:"full",p:"0.5",width:[yp.reference],height:[ku.reference],transitionProperty:"common",transitionDuration:"fast",[$f.variable]:"colors.gray.300",_dark:{[$f.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[$f.variable]:`colors.${n}.500`,_dark:{[$f.variable]:`colors.${n}.200`}},bg:$f.reference}},O$={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[ku.reference],height:[ku.reference],_checked:{transform:`translateX(${Kj.reference})`}},B$=cx(t=>({container:{[By.variable]:N$,[Kj.variable]:By.reference,_rtl:{[Kj.variable]:Cl(By).negate().toString()}},track:L$(t),thumb:O$})),$$={sm:cx({container:{[yp.variable]:"1.375rem",[ku.variable]:"sizes.3"}}),md:cx({container:{[yp.variable]:"1.875rem",[ku.variable]:"sizes.4"}}),lg:cx({container:{[yp.variable]:"2.875rem",[ku.variable]:"sizes.6"}})},F$=I$({baseStyle:B$,sizes:$$,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:V$,definePartsStyle:lh}=br(J4.keys),U$=lh({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),kx={"&[data-is-numeric=true]":{textAlign:"end"}},H$=lh(t=>{const{colorScheme:n}=t;return{th:{color:Qt("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Qt(`${n}.100`,`${n}.700`)(t),...kx},td:{borderBottom:"1px",borderColor:Qt(`${n}.100`,`${n}.700`)(t),...kx},caption:{color:Qt("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),W$=lh(t=>{const{colorScheme:n}=t;return{th:{color:Qt("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Qt(`${n}.100`,`${n}.700`)(t),...kx},td:{borderBottom:"1px",borderColor:Qt(`${n}.100`,`${n}.700`)(t),...kx},caption:{color:Qt("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Qt(`${n}.100`,`${n}.700`)(t)},td:{background:Qt(`${n}.100`,`${n}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),q$={simple:H$,striped:W$,unstyled:{}},G$={sm:lh({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:lh({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:lh({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},Y$=V$({baseStyle:U$,variants:q$,sizes:G$,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Pi=Jt("tabs-color"),oo=Jt("tabs-bg"),Dg=Jt("tabs-border-color"),{defineMultiStyleConfig:Z$,definePartsStyle:$o}=br(e3.keys),X$=t=>{const{orientation:n}=t;return{display:n==="vertical"?"flex":"block"}},K$=t=>{const{isFitted:n}=t;return{flex:n?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Q$=t=>{const{align:n="start",orientation:r}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[n],flexDirection:r==="vertical"?"column":"row"}},J$={p:4},eF=$o(t=>({root:X$(t),tab:K$(t),tablist:Q$(t),tabpanel:J$})),tF={sm:$o({tab:{py:1,px:4,fontSize:"sm"}}),md:$o({tab:{fontSize:"md",py:2,px:4}}),lg:$o({tab:{fontSize:"lg",py:3,px:4}})},nF=$o(t=>{const{colorScheme:n,orientation:r}=t,i=r==="vertical",l=i?"borderStart":"borderBottom",u=i?"marginStart":"marginBottom";return{tablist:{[l]:"2px solid",borderColor:"inherit"},tab:{[l]:"2px solid",borderColor:"transparent",[u]:"-2px",_selected:{[Pi.variable]:`colors.${n}.600`,_dark:{[Pi.variable]:`colors.${n}.300`},borderColor:"currentColor"},_active:{[oo.variable]:"colors.gray.200",_dark:{[oo.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Pi.reference,bg:oo.reference}}}),rF=$o(t=>{const{colorScheme:n}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Dg.variable]:"transparent",_selected:{[Pi.variable]:`colors.${n}.600`,[Dg.variable]:"colors.white",_dark:{[Pi.variable]:`colors.${n}.300`,[Dg.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Dg.reference},color:Pi.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),sF=$o(t=>{const{colorScheme:n}=t;return{tab:{border:"1px solid",borderColor:"inherit",[oo.variable]:"colors.gray.50",_dark:{[oo.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[oo.variable]:"colors.white",[Pi.variable]:`colors.${n}.600`,_dark:{[oo.variable]:"colors.gray.800",[Pi.variable]:`colors.${n}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Pi.reference,bg:oo.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),iF=$o(t=>{const{colorScheme:n,theme:r}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:vi(r,`${n}.700`),bg:vi(r,`${n}.100`)}}}}),aF=$o(t=>{const{colorScheme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[Pi.variable]:"colors.gray.600",_dark:{[Pi.variable]:"inherit"},_selected:{[Pi.variable]:"colors.white",[oo.variable]:`colors.${n}.600`,_dark:{[Pi.variable]:"colors.gray.800",[oo.variable]:`colors.${n}.300`}},color:Pi.reference,bg:oo.reference}}}),oF=$o({}),lF={line:nF,enclosed:rF,"enclosed-colored":sF,"soft-rounded":iF,"solid-rounded":aF,unstyled:oF},cF=Z$({baseStyle:eF,sizes:tF,variants:lF,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),{defineMultiStyleConfig:uF,definePartsStyle:Du}=br(t3.keys),P_=Jt("tag-bg"),M_=Jt("tag-color"),$y=Jt("tag-shadow"),ux=Jt("tag-min-height"),dx=Jt("tag-min-width"),hx=Jt("tag-font-size"),fx=Jt("tag-padding-inline"),dF={fontWeight:"medium",lineHeight:1.2,outline:0,[M_.variable]:Qr.color.reference,[P_.variable]:Qr.bg.reference,[$y.variable]:Qr.shadow.reference,color:M_.reference,bg:P_.reference,boxShadow:$y.reference,borderRadius:"md",minH:ux.reference,minW:dx.reference,fontSize:hx.reference,px:fx.reference,_focusVisible:{[$y.variable]:"shadows.outline"}},hF={lineHeight:1.2,overflow:"visible"},fF={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},pF=Du({container:dF,label:hF,closeButton:fF}),mF={sm:Du({container:{[ux.variable]:"sizes.5",[dx.variable]:"sizes.5",[hx.variable]:"fontSizes.xs",[fx.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Du({container:{[ux.variable]:"sizes.6",[dx.variable]:"sizes.6",[hx.variable]:"fontSizes.sm",[fx.variable]:"space.2"}}),lg:Du({container:{[ux.variable]:"sizes.8",[dx.variable]:"sizes.8",[hx.variable]:"fontSizes.md",[fx.variable]:"space.3"}})},gF={subtle:Du(t=>({container:gp.variants?.subtle(t)})),solid:Du(t=>({container:gp.variants?.solid(t)})),outline:Du(t=>({container:gp.variants?.outline(t)}))},xF=uF({variants:gF,baseStyle:pF,sizes:mF,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),vF={...rr.baseStyle?.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},yF={outline:t=>rr.variants?.outline(t).field??{},flushed:t=>rr.variants?.flushed(t).field??{},filled:t=>rr.variants?.filled(t).field??{},unstyled:rr.variants?.unstyled.field??{}},jF={xs:rr.sizes?.xs.field??{},sm:rr.sizes?.sm.field??{},md:rr.sizes?.md.field??{},lg:rr.sizes?.lg.field??{}},bF={baseStyle:vF,sizes:jF,variants:yF,defaultProps:{size:"md",variant:"outline"}},Pg=xs("tooltip-bg"),Fy=xs("tooltip-fg"),SF=xs("popper-arrow-bg"),wF={bg:Pg.reference,color:Fy.reference,[Pg.variable]:"colors.gray.700",[Fy.variable]:"colors.whiteAlpha.900",_dark:{[Pg.variable]:"colors.gray.300",[Fy.variable]:"colors.gray.900"},[SF.variable]:Pg.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},CF={baseStyle:wF},EF={Accordion:u3,Alert:G3,Avatar:s5,Badge:gp,Breadcrumb:p5,Button:w5,Checkbox:Rx,CloseButton:O5,Code:V5,Container:H5,Divider:Z5,Drawer:a6,Editable:f6,Form:y6,FormError:E6,FormLabel:T6,Heading:k6,Input:rr,Kbd:$6,Link:V6,List:G6,Menu:sB,Modal:mB,NumberInput:CB,PinInput:AB,Popover:BB,Progress:GB,Radio:QB,Select:i$,Skeleton:o$,SkipLink:c$,Slider:j$,Spinner:w$,Stat:D$,Switch:F$,Table:Y$,Tabs:cF,Tag:xF,Textarea:bF,Tooltip:CF,Card:A5,Stepper:z$},_F={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},TF={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},AF={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"}},RF={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},kF={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},DF={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},PF={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},MF={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},zF={property:DF,easing:PF,duration:MF},IF={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},NF={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},LF={breakpoints:TF,zIndices:IF,radii:RF,blur:NF,colors:AF,...RR,sizes:wR,shadows:kF,space:SR,borders:_F,transition:zF},OF={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},BF={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},$F=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function FF(t){return gs(t)?$F.every(n=>Object.prototype.hasOwnProperty.call(t,n)):!1}const VF="ltr",UF={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},MR={semanticTokens:OF,direction:VF,...LF,components:EF,styles:BF,config:UF};function HF(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function WF(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var qF=(function(){function t(r){var i=this;this._insertTag=function(l){var u;i.tags.length===0?i.insertionPoint?u=i.insertionPoint.nextSibling:i.prepend?u=i.container.firstChild:u=i.before:u=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(l,u),i.tags.push(l)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(i){i.forEach(this._insertTag)},n.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(WF(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var u=HF(l);try{u.insertRule(i,u.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(i));this.ctr++},n.flush=function(){this.tags.forEach(function(i){var l;return(l=i.parentNode)==null?void 0:l.removeChild(i)}),this.tags=[],this.ctr=0},t})(),Ys="-ms-",Dx="-moz-",tr="-webkit-",zR="comm",bS="rule",SS="decl",GF="@import",IR="@keyframes",YF="@layer",ZF=Math.abs,ov=String.fromCharCode,XF=Object.assign;function KF(t,n){return Ns(t,0)^45?(((n<<2^Ns(t,0))<<2^Ns(t,1))<<2^Ns(t,2))<<2^Ns(t,3):0}function NR(t){return t.trim()}function QF(t,n){return(t=n.exec(t))?t[0]:t}function nr(t,n,r){return t.replace(n,r)}function Qj(t,n){return t.indexOf(n)}function Ns(t,n){return t.charCodeAt(n)|0}function Ip(t,n,r){return t.slice(n,r)}function Io(t){return t.length}function wS(t){return t.length}function Mg(t,n){return n.push(t),t}function JF(t,n){return t.map(n).join("")}var lv=1,vh=1,LR=0,Ni=0,cs=0,Ih="";function cv(t,n,r,i,l,u,d){return{value:t,root:n,parent:r,type:i,props:l,children:u,line:lv,column:vh,length:d,return:""}}function Ff(t,n){return XF(cv("",null,null,"",null,null,0),t,{length:-t.length},n)}function e8(){return cs}function t8(){return cs=Ni>0?Ns(Ih,--Ni):0,vh--,cs===10&&(vh=1,lv--),cs}function ha(){return cs=Ni<LR?Ns(Ih,Ni++):0,vh++,cs===10&&(vh=1,lv++),cs}function Fo(){return Ns(Ih,Ni)}function px(){return Ni}function om(t,n){return Ip(Ih,t,n)}function Np(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function OR(t){return lv=vh=1,LR=Io(Ih=t),Ni=0,[]}function BR(t){return Ih="",t}function mx(t){return NR(om(Ni-1,Jj(t===91?t+2:t===40?t+1:t)))}function n8(t){for(;(cs=Fo())&&cs<33;)ha();return Np(t)>2||Np(cs)>3?"":" "}function r8(t,n){for(;--n&&ha()&&!(cs<48||cs>102||cs>57&&cs<65||cs>70&&cs<97););return om(t,px()+(n<6&&Fo()==32&&ha()==32))}function Jj(t){for(;ha();)switch(cs){case t:return Ni;case 34:case 39:t!==34&&t!==39&&Jj(cs);break;case 40:t===41&&Jj(t);break;case 92:ha();break}return Ni}function s8(t,n){for(;ha()&&t+cs!==57;)if(t+cs===84&&Fo()===47)break;return"/*"+om(n,Ni-1)+"*"+ov(t===47?t:ha())}function i8(t){for(;!Np(Fo());)ha();return om(t,Ni)}function a8(t){return BR(gx("",null,null,null,[""],t=OR(t),0,[0],t))}function gx(t,n,r,i,l,u,d,p,f){for(var g=0,x=0,y=d,b=0,w=0,C=0,_=1,A=1,D=1,P=0,M="",N=l,z=u,I=i,V=M;A;)switch(C=P,P=ha()){case 40:if(C!=108&&Ns(V,y-1)==58){Qj(V+=nr(mx(P),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:V+=mx(P);break;case 9:case 10:case 13:case 32:V+=n8(C);break;case 92:V+=r8(px()-1,7);continue;case 47:switch(Fo()){case 42:case 47:Mg(o8(s8(ha(),px()),n,r),f);break;default:V+="/"}break;case 123*_:p[g++]=Io(V)*D;case 125*_:case 59:case 0:switch(P){case 0:case 125:A=0;case 59+x:D==-1&&(V=nr(V,/\f/g,"")),w>0&&Io(V)-y&&Mg(w>32?I_(V+";",i,r,y-1):I_(nr(V," ","")+";",i,r,y-2),f);break;case 59:V+=";";default:if(Mg(I=z_(V,n,r,g,x,l,p,M,N=[],z=[],y),u),P===123)if(x===0)gx(V,n,I,I,N,u,y,p,z);else switch(b===99&&Ns(V,3)===110?100:b){case 100:case 108:case 109:case 115:gx(t,I,I,i&&Mg(z_(t,I,I,0,0,l,p,M,l,N=[],y),z),l,z,y,p,i?N:z);break;default:gx(V,I,I,I,[""],z,0,p,z)}}g=x=w=0,_=D=1,M=V="",y=d;break;case 58:y=1+Io(V),w=C;default:if(_<1){if(P==123)--_;else if(P==125&&_++==0&&t8()==125)continue}switch(V+=ov(P),P*_){case 38:D=x>0?1:(V+="\f",-1);break;case 44:p[g++]=(Io(V)-1)*D,D=1;break;case 64:Fo()===45&&(V+=mx(ha())),b=Fo(),x=y=Io(M=V+=i8(px())),P++;break;case 45:C===45&&Io(V)==2&&(_=0)}}return u}function z_(t,n,r,i,l,u,d,p,f,g,x){for(var y=l-1,b=l===0?u:[""],w=wS(b),C=0,_=0,A=0;C<i;++C)for(var D=0,P=Ip(t,y+1,y=ZF(_=d[C])),M=t;D<w;++D)(M=NR(_>0?b[D]+" "+P:nr(P,/&\f/g,b[D])))&&(f[A++]=M);return cv(t,n,r,l===0?bS:p,f,g,x)}function o8(t,n,r){return cv(t,n,r,zR,ov(e8()),Ip(t,2,-2),0)}function I_(t,n,r,i){return cv(t,n,r,SS,Ip(t,0,i),Ip(t,i+1,-1),i)}function ch(t,n){for(var r="",i=wS(t),l=0;l<i;l++)r+=n(t[l],l,t,n)||"";return r}function l8(t,n,r,i){switch(t.type){case YF:if(t.children.length)break;case GF:case SS:return t.return=t.return||t.value;case zR:return"";case IR:return t.return=t.value+"{"+ch(t.children,i)+"}";case bS:t.value=t.props.join(",")}return Io(r=ch(t.children,i))?t.return=t.value+"{"+r+"}":""}function c8(t){var n=wS(t);return function(r,i,l,u){for(var d="",p=0;p<n;p++)d+=t[p](r,i,l,u)||"";return d}}function u8(t){return function(n){n.root||(n=n.return)&&t(n)}}var N_=function(n){var r=new WeakMap;return function(i){if(r.has(i))return r.get(i);var l=n(i);return r.set(i,l),l}};function $R(t){var n=Object.create(null);return function(r){return n[r]===void 0&&(n[r]=t(r)),n[r]}}var d8=function(n,r,i){for(var l=0,u=0;l=u,u=Fo(),l===38&&u===12&&(r[i]=1),!Np(u);)ha();return om(n,Ni)},h8=function(n,r){var i=-1,l=44;do switch(Np(l)){case 0:l===38&&Fo()===12&&(r[i]=1),n[i]+=d8(Ni-1,r,i);break;case 2:n[i]+=mx(l);break;case 4:if(l===44){n[++i]=Fo()===58?"&\f":"",r[i]=n[i].length;break}default:n[i]+=ov(l)}while(l=ha());return n},f8=function(n,r){return BR(h8(OR(n),r))},L_=new WeakMap,p8=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var r=n.value,i=n.parent,l=n.column===i.column&&n.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(n.props.length===1&&r.charCodeAt(0)!==58&&!L_.get(i))&&!l){L_.set(n,!0);for(var u=[],d=f8(r,u),p=i.props,f=0,g=0;f<d.length;f++)for(var x=0;x<p.length;x++,g++)n.props[g]=u[f]?d[f].replace(/&\f/g,p[x]):p[x]+" "+d[f]}}},m8=function(n){if(n.type==="decl"){var r=n.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(n.return="",n.value="")}};function FR(t,n){switch(KF(t,n)){case 5103:return tr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return tr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return tr+t+Dx+t+Ys+t+t;case 6828:case 4268:return tr+t+Ys+t+t;case 6165:return tr+t+Ys+"flex-"+t+t;case 5187:return tr+t+nr(t,/(\w+).+(:[^]+)/,tr+"box-$1$2"+Ys+"flex-$1$2")+t;case 5443:return tr+t+Ys+"flex-item-"+nr(t,/flex-|-self/,"")+t;case 4675:return tr+t+Ys+"flex-line-pack"+nr(t,/align-content|flex-|-self/,"")+t;case 5548:return tr+t+Ys+nr(t,"shrink","negative")+t;case 5292:return tr+t+Ys+nr(t,"basis","preferred-size")+t;case 6060:return tr+"box-"+nr(t,"-grow","")+tr+t+Ys+nr(t,"grow","positive")+t;case 4554:return tr+nr(t,/([^-])(transform)/g,"$1"+tr+"$2")+t;case 6187:return nr(nr(nr(t,/(zoom-|grab)/,tr+"$1"),/(image-set)/,tr+"$1"),t,"")+t;case 5495:case 3959:return nr(t,/(image-set\([^]*)/,tr+"$1$`$1");case 4968:return nr(nr(t,/(.+:)(flex-)?(.*)/,tr+"box-pack:$3"+Ys+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+tr+t+t;case 4095:case 3583:case 4068:case 2532:return nr(t,/(.+)-inline(.+)/,tr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Io(t)-1-n>6)switch(Ns(t,n+1)){case 109:if(Ns(t,n+4)!==45)break;case 102:return nr(t,/(.+:)(.+)-([^]+)/,"$1"+tr+"$2-$3$1"+Dx+(Ns(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~Qj(t,"stretch")?FR(nr(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(Ns(t,n+1)!==115)break;case 6444:switch(Ns(t,Io(t)-3-(~Qj(t,"!important")&&10))){case 107:return nr(t,":",":"+tr)+t;case 101:return nr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+tr+(Ns(t,14)===45?"inline-":"")+"box$3$1"+tr+"$2$3$1"+Ys+"$2box$3")+t}break;case 5936:switch(Ns(t,n+11)){case 114:return tr+t+Ys+nr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return tr+t+Ys+nr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return tr+t+Ys+nr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return tr+t+Ys+t+t}return t}var g8=function(n,r,i,l){if(n.length>-1&&!n.return)switch(n.type){case SS:n.return=FR(n.value,n.length);break;case IR:return ch([Ff(n,{value:nr(n.value,"@","@"+tr)})],l);case bS:if(n.length)return JF(n.props,function(u){switch(QF(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ch([Ff(n,{props:[nr(u,/:(read-\w+)/,":"+Dx+"$1")]})],l);case"::placeholder":return ch([Ff(n,{props:[nr(u,/:(plac\w+)/,":"+tr+"input-$1")]}),Ff(n,{props:[nr(u,/:(plac\w+)/,":"+Dx+"$1")]}),Ff(n,{props:[nr(u,/:(plac\w+)/,Ys+"input-$1")]})],l)}return""})}},x8=[g8],v8=function(n){var r=n.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(_){var A=_.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var l=n.stylisPlugins||x8,u={},d,p=[];d=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(_){for(var A=_.getAttribute("data-emotion").split(" "),D=1;D<A.length;D++)u[A[D]]=!0;p.push(_)});var f,g=[p8,m8];{var x,y=[l8,u8(function(_){x.insert(_)})],b=c8(g.concat(l,y)),w=function(A){return ch(a8(A),b)};f=function(A,D,P,M){x=P,w(A?A+"{"+D.styles+"}":D.styles),M&&(C.inserted[D.name]=!0)}}var C={key:r,sheet:new qF({key:r,container:d,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:u,registered:{},insert:f};return C.sheet.hydrate(p),C};function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Bu.apply(null,arguments)}var Vy={exports:{}},lr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function y8(){if(O_)return lr;O_=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,l=t?Symbol.for("react.strict_mode"):60108,u=t?Symbol.for("react.profiler"):60114,d=t?Symbol.for("react.provider"):60109,p=t?Symbol.for("react.context"):60110,f=t?Symbol.for("react.async_mode"):60111,g=t?Symbol.for("react.concurrent_mode"):60111,x=t?Symbol.for("react.forward_ref"):60112,y=t?Symbol.for("react.suspense"):60113,b=t?Symbol.for("react.suspense_list"):60120,w=t?Symbol.for("react.memo"):60115,C=t?Symbol.for("react.lazy"):60116,_=t?Symbol.for("react.block"):60121,A=t?Symbol.for("react.fundamental"):60117,D=t?Symbol.for("react.responder"):60118,P=t?Symbol.for("react.scope"):60119;function M(z){if(typeof z=="object"&&z!==null){var I=z.$$typeof;switch(I){case n:switch(z=z.type,z){case f:case g:case i:case u:case l:case y:return z;default:switch(z=z&&z.$$typeof,z){case p:case x:case C:case w:case d:return z;default:return I}}case r:return I}}}function N(z){return M(z)===g}return lr.AsyncMode=f,lr.ConcurrentMode=g,lr.ContextConsumer=p,lr.ContextProvider=d,lr.Element=n,lr.ForwardRef=x,lr.Fragment=i,lr.Lazy=C,lr.Memo=w,lr.Portal=r,lr.Profiler=u,lr.StrictMode=l,lr.Suspense=y,lr.isAsyncMode=function(z){return N(z)||M(z)===f},lr.isConcurrentMode=N,lr.isContextConsumer=function(z){return M(z)===p},lr.isContextProvider=function(z){return M(z)===d},lr.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===n},lr.isForwardRef=function(z){return M(z)===x},lr.isFragment=function(z){return M(z)===i},lr.isLazy=function(z){return M(z)===C},lr.isMemo=function(z){return M(z)===w},lr.isPortal=function(z){return M(z)===r},lr.isProfiler=function(z){return M(z)===u},lr.isStrictMode=function(z){return M(z)===l},lr.isSuspense=function(z){return M(z)===y},lr.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===i||z===g||z===u||z===l||z===y||z===b||typeof z=="object"&&z!==null&&(z.$$typeof===C||z.$$typeof===w||z.$$typeof===d||z.$$typeof===p||z.$$typeof===x||z.$$typeof===A||z.$$typeof===D||z.$$typeof===P||z.$$typeof===_)},lr.typeOf=M,lr}var B_;function j8(){return B_||(B_=1,Vy.exports=y8()),Vy.exports}var Uy,$_;function b8(){if($_)return Uy;$_=1;var t=j8(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[t.ForwardRef]=i,u[t.Memo]=l;function d(C){return t.isMemo(C)?l:u[C.$$typeof]||n}var p=Object.defineProperty,f=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,b=Object.prototype;function w(C,_,A){if(typeof _!="string"){if(b){var D=y(_);D&&D!==b&&w(C,D,A)}var P=f(_);g&&(P=P.concat(g(_)));for(var M=d(C),N=d(_),z=0;z<P.length;++z){var I=P[z];if(!r[I]&&!(A&&A[I])&&!(N&&N[I])&&!(M&&M[I])){var V=x(_,I);try{p(C,I,V)}catch{}}}}return C}return Uy=w,Uy}b8();var S8=!0;function VR(t,n,r){var i="";return r.split(" ").forEach(function(l){t[l]!==void 0?n.push(t[l]+";"):l&&(i+=l+" ")}),i}var CS=function(n,r,i){var l=n.key+"-"+r.name;(i===!1||S8===!1)&&n.registered[l]===void 0&&(n.registered[l]=r.styles)},ES=function(n,r,i){CS(n,r,i);var l=n.key+"-"+r.name;if(n.inserted[r.name]===void 0){var u=r;do n.insert(r===u?"."+l:"",u,n.sheet,!0),u=u.next;while(u!==void 0)}};function w8(t){for(var n=0,r,i=0,l=t.length;l>=4;++i,l-=4)r=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,n=(r&65535)*1540483477+((r>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(l){case 3:n^=(t.charCodeAt(i+2)&255)<<16;case 2:n^=(t.charCodeAt(i+1)&255)<<8;case 1:n^=t.charCodeAt(i)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var C8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},E8=/[A-Z]|^ms/g,_8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,UR=function(n){return n.charCodeAt(1)===45},F_=function(n){return n!=null&&typeof n!="boolean"},Hy=$R(function(t){return UR(t)?t:t.replace(E8,"-$&").toLowerCase()}),V_=function(n,r){switch(n){case"animation":case"animationName":if(typeof r=="string")return r.replace(_8,function(i,l,u){return No={name:l,styles:u,next:No},l})}return C8[n]!==1&&!UR(n)&&typeof r=="number"&&r!==0?r+"px":r};function Lp(t,n,r){if(r==null)return"";var i=r;if(i.__emotion_styles!==void 0)return i;switch(typeof r){case"boolean":return"";case"object":{var l=r;if(l.anim===1)return No={name:l.name,styles:l.styles,next:No},l.name;var u=r;if(u.styles!==void 0){var d=u.next;if(d!==void 0)for(;d!==void 0;)No={name:d.name,styles:d.styles,next:No},d=d.next;var p=u.styles+";";return p}return T8(t,n,r)}case"function":{if(t!==void 0){var f=No,g=r(t);return No=f,Lp(t,n,g)}break}}var x=r;if(n==null)return x;var y=n[x];return y!==void 0?y:x}function T8(t,n,r){var i="";if(Array.isArray(r))for(var l=0;l<r.length;l++)i+=Lp(t,n,r[l])+";";else for(var u in r){var d=r[u];if(typeof d!="object"){var p=d;n!=null&&n[p]!==void 0?i+=u+"{"+n[p]+"}":F_(p)&&(i+=Hy(u)+":"+V_(u,p)+";")}else if(Array.isArray(d)&&typeof d[0]=="string"&&(n==null||n[d[0]]===void 0))for(var f=0;f<d.length;f++)F_(d[f])&&(i+=Hy(u)+":"+V_(u,d[f])+";");else{var g=Lp(t,n,d);switch(u){case"animation":case"animationName":{i+=Hy(u)+":"+g+";";break}default:i+=u+"{"+g+"}"}}}return i}var U_=/label:\s*([^\s;{]+)\s*(;|$)/g,No;function uv(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,l="";No=void 0;var u=t[0];if(u==null||u.raw===void 0)i=!1,l+=Lp(r,n,u);else{var d=u;l+=d[0]}for(var p=1;p<t.length;p++)if(l+=Lp(r,n,t[p]),i){var f=u;l+=f[p]}U_.lastIndex=0;for(var g="",x;(x=U_.exec(l))!==null;)g+="-"+x[1];var y=w8(l)+g;return{name:y,styles:l,next:No}}var A8=function(n){return n()},HR=KE.useInsertionEffect?KE.useInsertionEffect:!1,WR=HR||A8,H_=HR||v.useLayoutEffect,_S=v.createContext(typeof HTMLElement<"u"?v8({key:"css"}):null);_S.Provider;var R8=function(){return v.useContext(_S)},TS=function(n){return v.forwardRef(function(r,i){var l=v.useContext(_S);return n(r,l,i)})},yh=v.createContext({}),k8=function(n,r){if(typeof r=="function"){var i=r(n);return i}return Bu({},n,r)},D8=N_(function(t){return N_(function(n){return k8(t,n)})}),P8=function(n){var r=v.useContext(yh);return n.theme!==r&&(r=D8(r)(n.theme)),v.createElement(yh.Provider,{value:r},n.children)},AS={}.hasOwnProperty,eb="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",M8=function(n,r){var i={};for(var l in r)AS.call(r,l)&&(i[l]=r[l]);return i[eb]=n,i},z8=function(n){var r=n.cache,i=n.serialized,l=n.isStringTag;return CS(r,i,l),WR(function(){return ES(r,i,l)}),null},I8=TS(function(t,n,r){var i=t.css;typeof i=="string"&&n.registered[i]!==void 0&&(i=n.registered[i]);var l=t[eb],u=[i],d="";typeof t.className=="string"?d=VR(n.registered,u,t.className):t.className!=null&&(d=t.className+" ");var p=uv(u,void 0,v.useContext(yh));d+=n.key+"-"+p.name;var f={};for(var g in t)AS.call(t,g)&&g!=="css"&&g!==eb&&(f[g]=t[g]);return f.className=d,r&&(f.ref=r),v.createElement(v.Fragment,null,v.createElement(z8,{cache:n,serialized:p,isStringTag:typeof l=="string"}),v.createElement(l,f))}),N8=I8,W_=function(n,r){var i=arguments;if(r==null||!AS.call(r,"css"))return v.createElement.apply(void 0,i);var l=i.length,u=new Array(l);u[0]=N8,u[1]=M8(n,r);for(var d=2;d<l;d++)u[d]=i[d];return v.createElement.apply(null,u)};(function(t){var n;n||(n=t.JSX||(t.JSX={}))})(W_||(W_={}));var dv=TS(function(t,n){var r=t.styles,i=uv([r],void 0,v.useContext(yh)),l=v.useRef();return H_(function(){var u=n.key+"-global",d=new n.sheet.constructor({key:u,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),p=!1,f=document.querySelector('style[data-emotion="'+u+" "+i.name+'"]');return n.sheet.tags.length&&(d.before=n.sheet.tags[0]),f!==null&&(p=!0,f.setAttribute("data-emotion",u),d.hydrate([f])),l.current=[d,p],function(){d.flush()}},[n]),H_(function(){var u=l.current,d=u[0],p=u[1];if(p){u[1]=!1;return}if(i.next!==void 0&&ES(n,i.next,!0),d.tags.length){var f=d.tags[d.tags.length-1].nextElementSibling;d.before=f,d.flush()}n.insert("",i,d,!1)},[n,i.name]),null});function L8(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return uv(n)}function Oc(){var t=L8.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const RS=v.createContext({});RS.displayName="ColorModeContext";function hv(){const t=v.useContext(RS);if(t===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return t}function Tn(t,n){const{colorMode:r}=hv();return r==="dark"?n:t}const zg={light:"chakra-ui-light",dark:"chakra-ui-dark"};function O8(t={}){const{preventTransition:n=!0,nonce:r}=t,i={setDataset:l=>{const u=n?i.preventTransition():void 0;document.documentElement.dataset.theme=l,document.documentElement.style.colorScheme=l,u?.()},setClassName(l){document.body.classList.add(l?zg.dark:zg.light),document.body.classList.remove(l?zg.light:zg.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(l){return i.query().matches??l==="dark"?"dark":"light"},addListener(l){const u=i.query(),d=p=>{l(p.matches?"dark":"light")};return typeof u.addListener=="function"?u.addListener(d):u.addEventListener("change",d),()=>{typeof u.removeListener=="function"?u.removeListener(d):u.removeEventListener("change",d)}},preventTransition(){const l=document.createElement("style");return l.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),r!==void 0&&(l.nonce=r),document.head.appendChild(l),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(l)})})}}};return i}const B8="chakra-ui-color-mode";function $8(t){return{ssr:!1,type:"localStorage",get(n){if(!globalThis?.document)return n;let r;try{r=localStorage.getItem(t)||n}catch{}return r||n},set(n){try{localStorage.setItem(t,n)}catch{}}}}const F8=$8(B8),q_=()=>{},V8=pL()?v.useLayoutEffect:v.useEffect;function G_(t,n){return t.type==="cookie"&&t.ssr?t.get(n):n}const qR=function(n){const{value:r,children:i,options:{useSystemColorMode:l,initialColorMode:u,disableTransitionOnChange:d}={},colorModeManager:p=F8}=n,f=R8(),g=u==="dark"?"dark":"light",[x,y]=v.useState(()=>G_(p,g)),[b,w]=v.useState(()=>G_(p)),{getSystemTheme:C,setClassName:_,setDataset:A,addListener:D}=v.useMemo(()=>O8({preventTransition:d,nonce:f?.nonce}),[d,f?.nonce]),P=u==="system"&&!x?b:x,M=v.useCallback(I=>{const V=I==="system"?C():I;y(V),_(V==="dark"),A(V),p.set(V)},[p,C,_,A]);V8(()=>{u==="system"&&w(C())},[]),v.useEffect(()=>{const I=p.get();if(I){M(I);return}if(u==="system"){M("system");return}M(g)},[p,g,u,M]);const N=v.useCallback(()=>{M(P==="dark"?"light":"dark")},[P,M]);v.useEffect(()=>{if(l)return D(M)},[l,D,M]);const z=v.useMemo(()=>({colorMode:r??P,toggleColorMode:r?q_:N,setColorMode:r?q_:M,forced:r!==void 0}),[P,N,M,r]);return e.jsx(RS.Provider,{value:z,children:i})};qR.displayName="ColorModeProvider";const GR=String.raw,YR=GR`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,U8=()=>e.jsx(dv,{styles:YR}),H8=({scope:t=""})=>e.jsx(dv,{styles:GR`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${t} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${t} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${t} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${t} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${t} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${t} :where(b, strong) {
        font-weight: bold;
      }

      ${t} small {
        font-size: 80%;
      }

      ${t} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${t} sub {
        bottom: -0.25em;
      }

      ${t} sup {
        top: -0.5em;
      }

      ${t} img {
        border-style: none;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${t} :where(button, input) {
        overflow: visible;
      }

      ${t} :where(button, select) {
        text-transform: none;
      }

      ${t} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${t} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${t} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${t} progress {
        vertical-align: baseline;
      }

      ${t} textarea {
        overflow: auto;
      }

      ${t} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${t} input[type="number"]::-webkit-inner-spin-button,
      ${t} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${t} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${t} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${t} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${t} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${t} details {
        display: block;
      }

      ${t} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${t} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${t} button {
        background: transparent;
        padding: 0;
      }

      ${t} fieldset {
        margin: 0;
        padding: 0;
      }

      ${t} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${t} textarea {
        resize: vertical;
      }

      ${t} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${t} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${t} table {
        border-collapse: collapse;
      }

      ${t} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${t} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${t} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${t} select::-ms-expand {
        display: none;
      }

      ${YR}
    `});function W8(t){const{cssVarsRoot:n,theme:r,children:i}=t,l=v.useMemo(()=>D4(r),[r]);return e.jsxs(P8,{theme:l,children:[e.jsx(q8,{root:n}),i]})}function q8({root:t=":host, :root"}){const n=[t,"[data-theme]"].join(",");return e.jsx(dv,{styles:r=>({[n]:r.__cssVars})})}Vn({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function G8(t){return Vn({name:`${t}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${t} />" `})}function Y8(){const{colorMode:t}=hv();return e.jsx(dv,{styles:n=>{const r=rR(n,"styles.global"),i=ca(r,{theme:n,colorMode:t});return i?vR(i)(n):void 0}})}const[Z8,X8]=Vn({strict:!1,name:"PortalManagerContext"});function ZR(t){const{children:n,zIndex:r}=t;return e.jsx(Z8,{value:{zIndex:r},children:n})}ZR.displayName="PortalManager";const kS=v.createContext({getDocument(){return document},getWindow(){return window}});kS.displayName="EnvironmentContext";function K8({defer:t}={}){const[,n]=v.useReducer(r=>r+1,0);return Dl(()=>{t&&n()},[t]),v.useContext(kS)}function XR(t){const{children:n,environment:r,disabled:i}=t,l=v.useRef(null),u=v.useMemo(()=>r||{getDocument:()=>l.current?.ownerDocument??document,getWindow:()=>l.current?.ownerDocument.defaultView??window},[r]),d=!i||!r;return e.jsxs(kS.Provider,{value:u,children:[n,d&&e.jsx("span",{id:"__chakra_env",hidden:!0,ref:l})]})}XR.displayName="EnvironmentProvider";const Q8=t=>{const{children:n,colorModeManager:r,portalZIndex:i,resetScope:l,resetCSS:u=!0,theme:d={},environment:p,cssVarsRoot:f,disableEnvironment:g,disableGlobalStyle:x}=t,y=e.jsx(XR,{environment:p,disabled:g,children:n});return e.jsx(W8,{theme:d,cssVarsRoot:f,children:e.jsxs(qR,{colorModeManager:r,options:d.config,children:[u?e.jsx(H8,{scope:l}):e.jsx(U8,{}),!x&&e.jsx(Y8,{}),i?e.jsx(ZR,{zIndex:i,children:y}):y]})})},DS=v.createContext({});function PS(t){const n=v.useRef(null);return n.current===null&&(n.current=t()),n.current}const lm=v.createContext(null),MS=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class J8 extends v.Component{getSnapshotBeforeUpdate(n){const r=this.props.childRef.current;if(r&&n.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function eV({children:t,isPresent:n}){const r=v.useId(),i=v.useRef(null),l=v.useRef({width:0,height:0,top:0,left:0}),{nonce:u}=v.useContext(MS);return v.useInsertionEffect(()=>{const{width:d,height:p,top:f,left:g}=l.current;if(n||!i.current||!d||!p)return;i.current.dataset.motionPopId=r;const x=document.createElement("style");return u&&(x.nonce=u),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${p}px !important;
            top: ${f}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(x)}},[n]),e.jsx(J8,{isPresent:n,childRef:i,sizeRef:l,children:v.cloneElement(t,{ref:i})})}const tV=({children:t,initial:n,isPresent:r,onExitComplete:i,custom:l,presenceAffectsLayout:u,mode:d})=>{const p=PS(nV),f=v.useId(),g=v.useCallback(y=>{p.set(y,!0);for(const b of p.values())if(!b)return;i&&i()},[p,i]),x=v.useMemo(()=>({id:f,initial:n,isPresent:r,custom:l,onExitComplete:g,register:y=>(p.set(y,!1),()=>p.delete(y))}),u?[Math.random(),g]:[r,g]);return v.useMemo(()=>{p.forEach((y,b)=>p.set(b,!1))},[r]),v.useEffect(()=>{!r&&!p.size&&i&&i()},[r]),d==="popLayout"&&(t=e.jsx(eV,{isPresent:r,children:t})),e.jsx(lm.Provider,{value:x,children:t})};function nV(){return new Map}function zS(t=!0){const n=v.useContext(lm);if(n===null)return[!0,null];const{isPresent:r,onExitComplete:i,register:l}=n,u=v.useId();v.useEffect(()=>{t&&l(u)},[t]);const d=v.useCallback(()=>t&&i&&i(u),[u,i,t]);return!r&&i?[!1,d]:[!0]}function rV(){return sV(v.useContext(lm))}function sV(t){return t===null?!0:t.isPresent}const Ig=t=>t.key||"";function Y_(t){const n=[];return v.Children.forEach(t,r=>{v.isValidElement(r)&&n.push(r)}),n}const IS=typeof window<"u",KR=IS?v.useLayoutEffect:v.useEffect,Bc=({children:t,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:u="sync",propagate:d=!1})=>{const[p,f]=zS(d),g=v.useMemo(()=>Y_(t),[t]),x=d&&!p?[]:g.map(Ig),y=v.useRef(!0),b=v.useRef(g),w=PS(()=>new Map),[C,_]=v.useState(g),[A,D]=v.useState(g);KR(()=>{y.current=!1,b.current=g;for(let N=0;N<A.length;N++){const z=Ig(A[N]);x.includes(z)?w.delete(z):w.get(z)!==!0&&w.set(z,!1)}},[A,x.length,x.join("-")]);const P=[];if(g!==C){let N=[...g];for(let z=0;z<A.length;z++){const I=A[z],V=Ig(I);x.includes(V)||(N.splice(z,0,I),P.push(I))}u==="wait"&&P.length&&(N=P),D(Y_(N)),_(g);return}const{forceRender:M}=v.useContext(DS);return e.jsx(e.Fragment,{children:A.map(N=>{const z=Ig(N),I=d&&!p?!1:g===A||x.includes(z),V=()=>{if(w.has(z))w.set(z,!0);else return;let $=!0;w.forEach(ae=>{ae||($=!1)}),$&&(M?.(),D(b.current),d&&f?.(),i&&i())};return e.jsx(tV,{isPresent:I,initial:!y.current||r?void 0:!1,custom:I?void 0:n,presenceAffectsLayout:l,mode:u,onExitComplete:I?void 0:V,children:N},z)})})},fa=t=>t;let QR=fa;function NS(t){let n;return()=>(n===void 0&&(n=t()),n)}const jh=(t,n,r)=>{const i=n-t;return i===0?1:(r-t)/i},Ml=t=>t*1e3,zl=t=>t/1e3,iV={useManualTiming:!1};function aV(t){let n=new Set,r=new Set,i=!1,l=!1;const u=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function p(g){u.has(g)&&(f.schedule(g),t()),g(d)}const f={schedule:(g,x=!1,y=!1)=>{const w=y&&i?n:r;return x&&u.add(g),w.has(g)||w.add(g),g},cancel:g=>{r.delete(g),u.delete(g)},process:g=>{if(d=g,i){l=!0;return}i=!0,[n,r]=[r,n],n.forEach(p),n.clear(),i=!1,l&&(l=!1,f.process(g))}};return f}const Ng=["read","resolveKeyframes","update","preRender","render","postRender"],oV=40;function JR(t,n){let r=!1,i=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>r=!0,d=Ng.reduce((D,P)=>(D[P]=aV(u),D),{}),{read:p,resolveKeyframes:f,update:g,preRender:x,render:y,postRender:b}=d,w=()=>{const D=performance.now();r=!1,l.delta=i?1e3/60:Math.max(Math.min(D-l.timestamp,oV),1),l.timestamp=D,l.isProcessing=!0,p.process(l),f.process(l),g.process(l),x.process(l),y.process(l),b.process(l),l.isProcessing=!1,r&&n&&(i=!1,t(w))},C=()=>{r=!0,i=!0,l.isProcessing||t(w)};return{schedule:Ng.reduce((D,P)=>{const M=d[P];return D[P]=(N,z=!1,I=!1)=>(r||C(),M.schedule(N,z,I)),D},{}),cancel:D=>{for(let P=0;P<Ng.length;P++)d[Ng[P]].cancel(D)},state:l,steps:d}}const{schedule:Cr,cancel:Pc,state:Is,steps:Wy}=JR(typeof requestAnimationFrame<"u"?requestAnimationFrame:fa,!0),ek=v.createContext({strict:!1}),Z_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bh={};for(const t in Z_)bh[t]={isEnabled:n=>Z_[t].some(r=>!!n[r])};function lV(t){for(const n in t)bh[n]={...bh[n],...t[n]}}const cV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Px(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||cV.has(t)}let tk=t=>!Px(t);function uV(t){t&&(tk=n=>n.startsWith("on")?!Px(n):t(n))}try{uV(require("@emotion/is-prop-valid").default)}catch{}function dV(t,n,r){const i={};for(const l in t)l==="values"&&typeof t.values=="object"||(tk(l)||r===!0&&Px(l)||!n&&!Px(l)||t.draggable&&l.startsWith("onDrag"))&&(i[l]=t[l]);return i}function hV(t){if(typeof Proxy>"u")return t;const n=new Map,r=(...i)=>t(...i);return new Proxy(r,{get:(i,l)=>l==="create"?t:(n.has(l)||n.set(l,t(l)),n.get(l))})}const fv=v.createContext({});function Op(t){return typeof t=="string"||Array.isArray(t)}function pv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const LS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],OS=["initial",...LS];function mv(t){return pv(t.animate)||OS.some(n=>Op(t[n]))}function nk(t){return!!(mv(t)||t.variants)}function fV(t,n){if(mv(t)){const{initial:r,animate:i}=t;return{initial:r===!1||Op(r)?r:void 0,animate:Op(i)?i:void 0}}return t.inherit!==!1?n:{}}function pV(t){const{initial:n,animate:r}=fV(t,v.useContext(fv));return v.useMemo(()=>({initial:n,animate:r}),[X_(n),X_(r)])}function X_(t){return Array.isArray(t)?t.join(" "):t}const mV=Symbol.for("motionComponentSymbol");function Zd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function gV(t,n,r){return v.useCallback(i=>{i&&t.onMount&&t.onMount(i),n&&(i?n.mount(i):n.unmount()),r&&(typeof r=="function"?r(i):Zd(r)&&(r.current=i))},[n])}const BS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xV="framerAppearId",rk="data-"+BS(xV),{schedule:$S}=JR(queueMicrotask,!1),sk=v.createContext({});function vV(t,n,r,i,l){var u,d;const{visualElement:p}=v.useContext(fv),f=v.useContext(ek),g=v.useContext(lm),x=v.useContext(MS).reducedMotion,y=v.useRef(null);i=i||f.renderer,!y.current&&i&&(y.current=i(t,{visualState:n,parent:p,props:r,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:x}));const b=y.current,w=v.useContext(sk);b&&!b.projection&&l&&(b.type==="html"||b.type==="svg")&&yV(y.current,r,l,w);const C=v.useRef(!1);v.useInsertionEffect(()=>{b&&C.current&&b.update(r,g)});const _=r[rk],A=v.useRef(!!_&&!(!((u=window.MotionHandoffIsComplete)===null||u===void 0)&&u.call(window,_))&&((d=window.MotionHasOptimisedAnimation)===null||d===void 0?void 0:d.call(window,_)));return KR(()=>{b&&(C.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),$S.render(b.render),A.current&&b.animationState&&b.animationState.animateChanges())}),v.useEffect(()=>{b&&(!A.current&&b.animationState&&b.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)===null||D===void 0||D.call(window,_)}),A.current=!1))}),b}function yV(t,n,r,i){const{layoutId:l,layout:u,drag:d,dragConstraints:p,layoutScroll:f,layoutRoot:g}=n;t.projection=new r(t.latestValues,n["data-framer-portal-id"]?void 0:ik(t.parent)),t.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||p&&Zd(p),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:g})}function ik(t){if(t)return t.options.allowProjection!==!1?t.projection:ik(t.parent)}function jV({preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:i,Component:l}){var u,d;t&&lV(t);function p(g,x){let y;const b={...v.useContext(MS),...g,layoutId:bV(g)},{isStatic:w}=b,C=pV(g),_=i(g,w);if(!w&&IS){SV();const A=wV(b);y=A.MeasureLayout,C.visualElement=vV(l,_,b,n,A.ProjectionNode)}return e.jsxs(fv.Provider,{value:C,children:[y&&C.visualElement?e.jsx(y,{visualElement:C.visualElement,...b}):null,r(l,g,gV(_,C.visualElement,x),_,w,C.visualElement)]})}p.displayName=`motion.${typeof l=="string"?l:`create(${(d=(u=l.displayName)!==null&&u!==void 0?u:l.name)!==null&&d!==void 0?d:""})`}`;const f=v.forwardRef(p);return f[mV]=l,f}function bV({layoutId:t}){const n=v.useContext(DS).id;return n&&t!==void 0?n+"-"+t:t}function SV(t,n){v.useContext(ek).strict}function wV(t){const{drag:n,layout:r}=bh;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const CV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function FS(t){return typeof t!="string"||t.includes("-")?!1:!!(CV.indexOf(t)>-1||/[A-Z]/u.test(t))}function K_(t){const n=[{},{}];return t?.values.forEach((r,i)=>{n[0][i]=r.get(),n[1][i]=r.getVelocity()}),n}function VS(t,n,r,i){if(typeof n=="function"){const[l,u]=K_(i);n=n(r!==void 0?r:t.custom,l,u)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[l,u]=K_(i);n=n(r!==void 0?r:t.custom,l,u)}return n}const tb=t=>Array.isArray(t),EV=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),_V=t=>tb(t)?t[t.length-1]||0:t,Js=t=>!!(t&&t.getVelocity);function xx(t){const n=Js(t)?t.get():t;return EV(n)?n.toValue():n}function TV({scrapeMotionValuesFromProps:t,createRenderState:n,onUpdate:r},i,l,u){const d={latestValues:AV(i,l,u,t),renderState:n()};return r&&(d.onMount=p=>r({props:i,current:p,...d}),d.onUpdate=p=>r(p)),d}const ak=t=>(n,r)=>{const i=v.useContext(fv),l=v.useContext(lm),u=()=>TV(t,n,i,l);return r?u():PS(u)};function AV(t,n,r,i){const l={},u=i(t,{});for(const b in u)l[b]=xx(u[b]);let{initial:d,animate:p}=t;const f=mv(t),g=nk(t);n&&g&&!f&&t.inherit!==!1&&(d===void 0&&(d=n.initial),p===void 0&&(p=n.animate));let x=r?r.initial===!1:!1;x=x||d===!1;const y=x?p:d;if(y&&typeof y!="boolean"&&!pv(y)){const b=Array.isArray(y)?y:[y];for(let w=0;w<b.length;w++){const C=VS(t,b[w]);if(C){const{transitionEnd:_,transition:A,...D}=C;for(const P in D){let M=D[P];if(Array.isArray(M)){const N=x?M.length-1:0;M=M[N]}M!==null&&(l[P]=M)}for(const P in _)l[P]=_[P]}}}return l}const Nh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yu=new Set(Nh),ok=t=>n=>typeof n=="string"&&n.startsWith(t),lk=ok("--"),RV=ok("var(--"),US=t=>RV(t)?kV.test(t.split("/*")[0].trim()):!1,kV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ck=(t,n)=>n&&typeof t=="number"?n.transform(t):t,Ol=(t,n,r)=>r>n?n:r<t?t:r,Lh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bp={...Lh,transform:t=>Ol(0,1,t)},Lg={...Lh,default:1},cm=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),Ec=cm("deg"),Vo=cm("%"),rn=cm("px"),DV=cm("vh"),PV=cm("vw"),Q_={...Vo,parse:t=>Vo.parse(t)/100,transform:t=>Vo.transform(t*100)},MV={borderWidth:rn,borderTopWidth:rn,borderRightWidth:rn,borderBottomWidth:rn,borderLeftWidth:rn,borderRadius:rn,radius:rn,borderTopLeftRadius:rn,borderTopRightRadius:rn,borderBottomRightRadius:rn,borderBottomLeftRadius:rn,width:rn,maxWidth:rn,height:rn,maxHeight:rn,top:rn,right:rn,bottom:rn,left:rn,padding:rn,paddingTop:rn,paddingRight:rn,paddingBottom:rn,paddingLeft:rn,margin:rn,marginTop:rn,marginRight:rn,marginBottom:rn,marginLeft:rn,backgroundPositionX:rn,backgroundPositionY:rn},zV={rotate:Ec,rotateX:Ec,rotateY:Ec,rotateZ:Ec,scale:Lg,scaleX:Lg,scaleY:Lg,scaleZ:Lg,skew:Ec,skewX:Ec,skewY:Ec,distance:rn,translateX:rn,translateY:rn,translateZ:rn,x:rn,y:rn,z:rn,perspective:rn,transformPerspective:rn,opacity:Bp,originX:Q_,originY:Q_,originZ:rn},J_={...Lh,transform:Math.round},HS={...MV,...zV,zIndex:J_,size:rn,fillOpacity:Bp,strokeOpacity:Bp,numOctaves:J_},IV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NV=Nh.length;function LV(t,n,r){let i="",l=!0;for(let u=0;u<NV;u++){const d=Nh[u],p=t[d];if(p===void 0)continue;let f=!0;if(typeof p=="number"?f=p===(d.startsWith("scale")?1:0):f=parseFloat(p)===0,!f||r){const g=ck(p,HS[d]);if(!f){l=!1;const x=IV[d]||d;i+=`${x}(${g}) `}r&&(n[d]=g)}}return i=i.trim(),r?i=r(n,l?"":i):l&&(i="none"),i}function WS(t,n,r){const{style:i,vars:l,transformOrigin:u}=t;let d=!1,p=!1;for(const f in n){const g=n[f];if(Yu.has(f)){d=!0;continue}else if(lk(f)){l[f]=g;continue}else{const x=ck(g,HS[f]);f.startsWith("origin")?(p=!0,u[f]=x):i[f]=x}}if(n.transform||(d||r?i.transform=LV(n,t.transform,r):i.transform&&(i.transform="none")),p){const{originX:f="50%",originY:g="50%",originZ:x=0}=u;i.transformOrigin=`${f} ${g} ${x}`}}const OV={offset:"stroke-dashoffset",array:"stroke-dasharray"},BV={offset:"strokeDashoffset",array:"strokeDasharray"};function $V(t,n,r=1,i=0,l=!0){t.pathLength=1;const u=l?OV:BV;t[u.offset]=rn.transform(-i);const d=rn.transform(n),p=rn.transform(r);t[u.array]=`${d} ${p}`}function e2(t,n,r){return typeof t=="string"?t:rn.transform(n+r*t)}function FV(t,n,r){const i=e2(n,t.x,t.width),l=e2(r,t.y,t.height);return`${i} ${l}`}function qS(t,{attrX:n,attrY:r,attrScale:i,originX:l,originY:u,pathLength:d,pathSpacing:p=1,pathOffset:f=0,...g},x,y){if(WS(t,g,y),x){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:w,dimensions:C}=t;b.transform&&(C&&(w.transform=b.transform),delete b.transform),C&&(l!==void 0||u!==void 0||w.transform)&&(w.transformOrigin=FV(C,l!==void 0?l:.5,u!==void 0?u:.5)),n!==void 0&&(b.x=n),r!==void 0&&(b.y=r),i!==void 0&&(b.scale=i),d!==void 0&&$V(b,d,p,f,!1)}const GS=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),uk=()=>({...GS(),attrs:{}}),YS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dk(t,{style:n,vars:r},i,l){Object.assign(t.style,n,l&&l.getProjectionStyles(i));for(const u in r)t.style.setProperty(u,r[u])}const hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fk(t,n,r,i){dk(t,n,void 0,i);for(const l in n.attrs)t.setAttribute(hk.has(l)?l:BS(l),n.attrs[l])}const Mx={};function VV(t){Object.assign(Mx,t)}function pk(t,{layout:n,layoutId:r}){return Yu.has(t)||t.startsWith("origin")||(n||r!==void 0)&&(!!Mx[t]||t==="opacity")}function ZS(t,n,r){var i;const{style:l}=t,u={};for(const d in l)(Js(l[d])||n.style&&Js(n.style[d])||pk(d,t)||((i=r?.getValue(d))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(u[d]=l[d]);return u}function mk(t,n,r){const i=ZS(t,n,r);for(const l in t)if(Js(t[l])||Js(n[l])){const u=Nh.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;i[u]=t[l]}return i}function UV(t,n){try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}const t2=["x","y","width","height","cx","cy","r"],HV={useVisualState:ak({scrapeMotionValuesFromProps:mk,createRenderState:uk,onUpdate:({props:t,prevProps:n,current:r,renderState:i,latestValues:l})=>{if(!r)return;let u=!!t.drag;if(!u){for(const p in l)if(Yu.has(p)){u=!0;break}}if(!u)return;let d=!n;if(n)for(let p=0;p<t2.length;p++){const f=t2[p];t[f]!==n[f]&&(d=!0)}d&&Cr.read(()=>{UV(r,i),Cr.render(()=>{qS(i,l,YS(r.tagName),t.transformTemplate),fk(r,i)})})}})},WV={useVisualState:ak({scrapeMotionValuesFromProps:ZS,createRenderState:GS})};function gk(t,n,r){for(const i in n)!Js(n[i])&&!pk(i,r)&&(t[i]=n[i])}function qV({transformTemplate:t},n){return v.useMemo(()=>{const r=GS();return WS(r,n,t),Object.assign({},r.vars,r.style)},[n])}function GV(t,n){const r=t.style||{},i={};return gk(i,r,t),Object.assign(i,qV(t,n)),i}function YV(t,n){const r={},i=GV(t,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}function ZV(t,n,r,i){const l=v.useMemo(()=>{const u=uk();return qS(u,n,YS(i),t.transformTemplate),{...u.attrs,style:{...u.style}}},[n]);if(t.style){const u={};gk(u,t.style,t),l.style={...u,...l.style}}return l}function XV(t=!1){return(r,i,l,{latestValues:u},d)=>{const f=(FS(r)?ZV:YV)(i,u,d,r),g=dV(i,typeof r=="string",t),x=r!==v.Fragment?{...g,...f,ref:l}:{},{children:y}=i,b=v.useMemo(()=>Js(y)?y.get():y,[y]);return v.createElement(r,{...x,children:b})}}function KV(t,n){return function(i,{forwardMotionProps:l}={forwardMotionProps:!1}){const d={...FS(i)?HV:WV,preloadedFeatures:t,useRender:XV(l),createVisualElement:n,Component:i};return jV(d)}}function xk(t,n){if(!Array.isArray(n))return!1;const r=n.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(n[i]!==t[i])return!1;return!0}function gv(t,n,r){const i=t.getProps();return VS(i,n,r!==void 0?r:i.custom,t)}const QV=NS(()=>window.ScrollTimeline!==void 0);class JV{constructor(n){this.stop=()=>this.runAll("stop"),this.animations=n.filter(Boolean)}get finished(){return Promise.all(this.animations.map(n=>"finished"in n?n.finished:n))}getAll(n){return this.animations[0][n]}setAll(n,r){for(let i=0;i<this.animations.length;i++)this.animations[i][n]=r}attachTimeline(n,r){const i=this.animations.map(l=>{if(QV()&&l.attachTimeline)return l.attachTimeline(n);if(typeof r=="function")return r(l)});return()=>{i.forEach((l,u)=>{l&&l(),this.animations[u].stop()})}}get time(){return this.getAll("time")}set time(n){this.setAll("time",n)}get speed(){return this.getAll("speed")}set speed(n){this.setAll("speed",n)}get startTime(){return this.getAll("startTime")}get duration(){let n=0;for(let r=0;r<this.animations.length;r++)n=Math.max(n,this.animations[r].duration);return n}runAll(n){this.animations.forEach(r=>r[n]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class eU extends JV{then(n,r){return Promise.all(this.animations).then(n).catch(r)}}function XS(t,n){return t?t[n]||t.default||t:void 0}const nb=2e4;function vk(t){let n=0;const r=50;let i=t.next(n);for(;!i.done&&n<nb;)n+=r,i=t.next(n);return n>=nb?1/0:n}function KS(t){return typeof t=="function"}function n2(t,n){t.timeline=n,t.onfinish=null}const QS=t=>Array.isArray(t)&&typeof t[0]=="number",tU={linearEasing:void 0};function nU(t,n){const r=NS(t);return()=>{var i;return(i=tU[n])!==null&&i!==void 0?i:r()}}const zx=nU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yk=(t,n,r=10)=>{let i="";const l=Math.max(Math.round(n/r),2);for(let u=0;u<l;u++)i+=t(jh(0,l-1,u))+", ";return`linear(${i.substring(0,i.length-2)})`};function jk(t){return!!(typeof t=="function"&&zx()||!t||typeof t=="string"&&(t in rb||zx())||QS(t)||Array.isArray(t)&&t.every(jk))}const sp=([t,n,r,i])=>`cubic-bezier(${t}, ${n}, ${r}, ${i})`,rb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sp([0,.65,.55,1]),circOut:sp([.55,0,1,.45]),backIn:sp([.31,.01,.66,-.59]),backOut:sp([.33,1.53,.69,.99])};function bk(t,n){if(t)return typeof t=="function"&&zx()?yk(t,n):QS(t)?sp(t):Array.isArray(t)?t.map(r=>bk(r,n)||rb.easeOut):rb[t]}const ao={x:!1,y:!1};function Sk(){return ao.x||ao.y}function rU(t,n,r){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let l=document;const u=(i=void 0)!==null&&i!==void 0?i:l.querySelectorAll(t);return u?Array.from(u):[]}return Array.from(t)}function wk(t,n){const r=rU(t),i=new AbortController,l={passive:!0,...n,signal:i.signal};return[r,l,()=>i.abort()]}function r2(t){return n=>{n.pointerType==="touch"||Sk()||t(n)}}function sU(t,n,r={}){const[i,l,u]=wk(t,r),d=r2(p=>{const{target:f}=p,g=n(p);if(typeof g!="function"||!f)return;const x=r2(y=>{g(y),f.removeEventListener("pointerleave",x)});f.addEventListener("pointerleave",x,l)});return i.forEach(p=>{p.addEventListener("pointerenter",d,l)}),u}const Ck=(t,n)=>n?t===n?!0:Ck(t,n.parentElement):!1,JS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aU(t){return iU.has(t.tagName)||t.tabIndex!==-1}const ip=new WeakSet;function s2(t){return n=>{n.key==="Enter"&&t(n)}}function qy(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const oU=(t,n)=>{const r=t.currentTarget;if(!r)return;const i=s2(()=>{if(ip.has(r))return;qy(r,"down");const l=s2(()=>{qy(r,"up")}),u=()=>qy(r,"cancel");r.addEventListener("keyup",l,n),r.addEventListener("blur",u,n)});r.addEventListener("keydown",i,n),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),n)};function i2(t){return JS(t)&&!Sk()}function lU(t,n,r={}){const[i,l,u]=wk(t,r),d=p=>{const f=p.currentTarget;if(!i2(p)||ip.has(f))return;ip.add(f);const g=n(p),x=(w,C)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",b),!(!i2(w)||!ip.has(f))&&(ip.delete(f),typeof g=="function"&&g(w,{success:C}))},y=w=>{x(w,r.useGlobalTarget||Ck(f,w.target))},b=w=>{x(w,!1)};window.addEventListener("pointerup",y,l),window.addEventListener("pointercancel",b,l)};return i.forEach(p=>{!aU(p)&&p.getAttribute("tabindex")===null&&(p.tabIndex=0),(r.useGlobalTarget?window:p).addEventListener("pointerdown",d,l),p.addEventListener("focus",g=>oU(g,l),l)}),u}function cU(t){return t==="x"||t==="y"?ao[t]?null:(ao[t]=!0,()=>{ao[t]=!1}):ao.x||ao.y?null:(ao.x=ao.y=!0,()=>{ao.x=ao.y=!1})}const Ek=new Set(["width","height","top","left","right","bottom",...Nh]);let vx;function uU(){vx=void 0}const Uo={now:()=>(vx===void 0&&Uo.set(Is.isProcessing||iV.useManualTiming?Is.timestamp:performance.now()),vx),set:t=>{vx=t,queueMicrotask(uU)}};function e1(t,n){t.indexOf(n)===-1&&t.push(n)}function t1(t,n){const r=t.indexOf(n);r>-1&&t.splice(r,1)}class n1{constructor(){this.subscriptions=[]}add(n){return e1(this.subscriptions,n),()=>t1(this.subscriptions,n)}notify(n,r,i){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](n,r,i);else for(let u=0;u<l;u++){const d=this.subscriptions[u];d&&d(n,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function _k(t,n){return n?t*(1e3/n):0}const a2=30,dU=t=>!isNaN(parseFloat(t));class hU{constructor(n,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,l=!0)=>{const u=Uo.now();this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),l&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(n),this.owner=r.owner}setCurrent(n){this.current=n,this.updatedAt=Uo.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=dU(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,r){this.events[n]||(this.events[n]=new n1);const i=this.events[n].add(r);return n==="change"?()=>{i(),Cr.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,r){this.passiveEffect=n,this.stopPassiveEffect=r}set(n,r=!0){!r||!this.passiveEffect?this.updateAndNotify(n,r):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,r,i){this.set(r),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-i}jump(n,r=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Uo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>a2)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,a2);return _k(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(n){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=n(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $p(t,n){return new hU(t,n)}function fU(t,n,r){t.hasValue(n)?t.getValue(n).set(r):t.addValue(n,$p(r))}function pU(t,n){const r=gv(t,n);let{transitionEnd:i={},transition:l={},...u}=r||{};u={...u,...i};for(const d in u){const p=_V(u[d]);fU(t,d,p)}}function mU(t){return!!(Js(t)&&t.add)}function sb(t,n){const r=t.getValue("willChange");if(mU(r))return r.add(n)}function Tk(t){return t.props[rk]}const Ak=(t,n,r)=>(((1-3*r+3*n)*t+(3*r-6*n))*t+3*n)*t,gU=1e-7,xU=12;function vU(t,n,r,i,l){let u,d,p=0;do d=n+(r-n)/2,u=Ak(d,i,l)-t,u>0?r=d:n=d;while(Math.abs(u)>gU&&++p<xU);return d}function um(t,n,r,i){if(t===n&&r===i)return fa;const l=u=>vU(u,0,1,t,r);return u=>u===0||u===1?u:Ak(l(u),n,i)}const Rk=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,kk=t=>n=>1-t(1-n),Dk=um(.33,1.53,.69,.99),r1=kk(Dk),Pk=Rk(r1),Mk=t=>(t*=2)<1?.5*r1(t):.5*(2-Math.pow(2,-10*(t-1))),s1=t=>1-Math.sin(Math.acos(t)),zk=kk(s1),Ik=Rk(s1),Nk=t=>/^0[^.\s]+$/u.test(t);function yU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Nk(t):!0}const jp=t=>Math.round(t*1e5)/1e5,i1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jU(t){return t==null}const bU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a1=(t,n)=>r=>!!(typeof r=="string"&&bU.test(r)&&r.startsWith(t)||n&&!jU(r)&&Object.prototype.hasOwnProperty.call(r,n)),Lk=(t,n,r)=>i=>{if(typeof i!="string")return i;const[l,u,d,p]=i.match(i1);return{[t]:parseFloat(l),[n]:parseFloat(u),[r]:parseFloat(d),alpha:p!==void 0?parseFloat(p):1}},SU=t=>Ol(0,255,t),Gy={...Lh,transform:t=>Math.round(SU(t))},wu={test:a1("rgb","red"),parse:Lk("red","green","blue"),transform:({red:t,green:n,blue:r,alpha:i=1})=>"rgba("+Gy.transform(t)+", "+Gy.transform(n)+", "+Gy.transform(r)+", "+jp(Bp.transform(i))+")"};function wU(t){let n="",r="",i="",l="";return t.length>5?(n=t.substring(1,3),r=t.substring(3,5),i=t.substring(5,7),l=t.substring(7,9)):(n=t.substring(1,2),r=t.substring(2,3),i=t.substring(3,4),l=t.substring(4,5),n+=n,r+=r,i+=i,l+=l),{red:parseInt(n,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:l?parseInt(l,16)/255:1}}const ib={test:a1("#"),parse:wU,transform:wu.transform},Xd={test:a1("hsl","hue"),parse:Lk("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:r,alpha:i=1})=>"hsla("+Math.round(t)+", "+Vo.transform(jp(n))+", "+Vo.transform(jp(r))+", "+jp(Bp.transform(i))+")"},Qs={test:t=>wu.test(t)||ib.test(t)||Xd.test(t),parse:t=>wu.test(t)?wu.parse(t):Xd.test(t)?Xd.parse(t):ib.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wu.transform(t):Xd.transform(t)},CU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EU(t){var n,r;return isNaN(t)&&typeof t=="string"&&(((n=t.match(i1))===null||n===void 0?void 0:n.length)||0)+(((r=t.match(CU))===null||r===void 0?void 0:r.length)||0)>0}const Ok="number",Bk="color",_U="var",TU="var(",o2="${}",AU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fp(t){const n=t.toString(),r=[],i={color:[],number:[],var:[]},l=[];let u=0;const p=n.replace(AU,f=>(Qs.test(f)?(i.color.push(u),l.push(Bk),r.push(Qs.parse(f))):f.startsWith(TU)?(i.var.push(u),l.push(_U),r.push(f)):(i.number.push(u),l.push(Ok),r.push(parseFloat(f))),++u,o2)).split(o2);return{values:r,split:p,indexes:i,types:l}}function $k(t){return Fp(t).values}function Fk(t){const{split:n,types:r}=Fp(t),i=n.length;return l=>{let u="";for(let d=0;d<i;d++)if(u+=n[d],l[d]!==void 0){const p=r[d];p===Ok?u+=jp(l[d]):p===Bk?u+=Qs.transform(l[d]):u+=l[d]}return u}}const RU=t=>typeof t=="number"?0:t;function kU(t){const n=$k(t);return Fk(t)(n.map(RU))}const Mc={test:EU,parse:$k,createTransformer:Fk,getAnimatableNone:kU},DU=new Set(["brightness","contrast","saturate","opacity"]);function PU(t){const[n,r]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[i]=r.match(i1)||[];if(!i)return t;const l=r.replace(i,"");let u=DU.has(n)?1:0;return i!==r&&(u*=100),n+"("+u+l+")"}const MU=/\b([a-z-]*)\(.*?\)/gu,ab={...Mc,getAnimatableNone:t=>{const n=t.match(MU);return n?n.map(PU).join(" "):t}},zU={...HS,color:Qs,backgroundColor:Qs,outlineColor:Qs,fill:Qs,stroke:Qs,borderColor:Qs,borderTopColor:Qs,borderRightColor:Qs,borderBottomColor:Qs,borderLeftColor:Qs,filter:ab,WebkitFilter:ab},o1=t=>zU[t];function Vk(t,n){let r=o1(t);return r!==ab&&(r=Mc),r.getAnimatableNone?r.getAnimatableNone(n):void 0}const IU=new Set(["auto","none","0"]);function NU(t,n,r){let i=0,l;for(;i<t.length&&!l;){const u=t[i];typeof u=="string"&&!IU.has(u)&&Fp(u).values.length&&(l=t[i]),i++}if(l&&r)for(const u of n)t[u]=Vk(r,l)}const l2=t=>t===Lh||t===rn,c2=(t,n)=>parseFloat(t.split(", ")[n]),u2=(t,n)=>(r,{transform:i})=>{if(i==="none"||!i)return 0;const l=i.match(/^matrix3d\((.+)\)$/u);if(l)return c2(l[1],n);{const u=i.match(/^matrix\((.+)\)$/u);return u?c2(u[1],t):0}},LU=new Set(["x","y","z"]),OU=Nh.filter(t=>!LU.has(t));function BU(t){const n=[];return OU.forEach(r=>{const i=t.getValue(r);i!==void 0&&(n.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),n}const Sh={width:({x:t},{paddingLeft:n="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(n)-parseFloat(r),height:({y:t},{paddingTop:n="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(n)-parseFloat(r),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:u2(4,13),y:u2(5,14)};Sh.translateX=Sh.x;Sh.translateY=Sh.y;const Pu=new Set;let ob=!1,lb=!1;function Uk(){if(lb){const t=Array.from(Pu).filter(i=>i.needsMeasurement),n=new Set(t.map(i=>i.element)),r=new Map;n.forEach(i=>{const l=BU(i);l.length&&(r.set(i,l),i.render())}),t.forEach(i=>i.measureInitialState()),n.forEach(i=>{i.render();const l=r.get(i);l&&l.forEach(([u,d])=>{var p;(p=i.getValue(u))===null||p===void 0||p.set(d)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}lb=!1,ob=!1,Pu.forEach(t=>t.complete()),Pu.clear()}function Hk(){Pu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(lb=!0)})}function $U(){Hk(),Uk()}class l1{constructor(n,r,i,l,u,d=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...n],this.onComplete=r,this.name=i,this.motionValue=l,this.element=u,this.isAsync=d}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Pu.add(this),ob||(ob=!0,Cr.read(Hk),Cr.resolveKeyframes(Uk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:r,element:i,motionValue:l}=this;for(let u=0;u<n.length;u++)if(n[u]===null)if(u===0){const d=l?.get(),p=n[n.length-1];if(d!==void 0)n[0]=d;else if(i&&r){const f=i.readValue(r,p);f!=null&&(n[0]=f)}n[0]===void 0&&(n[0]=p),l&&d===void 0&&l.set(n[0])}else n[u]=n[u-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Pu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Pu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Wk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),FU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VU(t){const n=FU.exec(t);if(!n)return[,];const[,r,i,l]=n;return[`--${r??i}`,l]}function qk(t,n,r=1){const[i,l]=VU(t);if(!i)return;const u=window.getComputedStyle(n).getPropertyValue(i);if(u){const d=u.trim();return Wk(d)?parseFloat(d):d}return US(l)?qk(l,n,r+1):l}const Gk=t=>n=>n.test(t),UU={test:t=>t==="auto",parse:t=>t},Yk=[Lh,rn,Vo,Ec,PV,DV,UU],d2=t=>Yk.find(Gk(t));class Zk extends l1{constructor(n,r,i,l,u){super(n,r,i,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:r,name:i}=this;if(!r||!r.current)return;super.readKeyframes();for(let f=0;f<n.length;f++){let g=n[f];if(typeof g=="string"&&(g=g.trim(),US(g))){const x=qk(g,r.current);x!==void 0&&(n[f]=x),f===n.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!Ek.has(i)||n.length!==2)return;const[l,u]=n,d=d2(l),p=d2(u);if(d!==p)if(l2(d)&&l2(p))for(let f=0;f<n.length;f++){const g=n[f];typeof g=="string"&&(n[f]=parseFloat(g))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:r}=this,i=[];for(let l=0;l<n.length;l++)yU(n[l])&&i.push(l);i.length&&NU(n,i,r)}measureInitialState(){const{element:n,unresolvedKeyframes:r,name:i}=this;if(!n||!n.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sh[i](n.measureViewportBox(),window.getComputedStyle(n.current)),r[0]=this.measuredOrigin;const l=r[r.length-1];l!==void 0&&n.getValue(i,l).jump(l,!1)}measureEndState(){var n;const{element:r,name:i,unresolvedKeyframes:l}=this;if(!r||!r.current)return;const u=r.getValue(i);u&&u.jump(this.measuredOrigin,!1);const d=l.length-1,p=l[d];l[d]=Sh[i](r.measureViewportBox(),window.getComputedStyle(r.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),!((n=this.removedTransforms)===null||n===void 0)&&n.length&&this.removedTransforms.forEach(([f,g])=>{r.getValue(f).set(g)}),this.resolveNoneKeyframes()}}const h2=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Mc.test(t)||t==="0")&&!t.startsWith("url("));function HU(t){const n=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function WU(t,n,r,i){const l=t[0];if(l===null)return!1;if(n==="display"||n==="visibility")return!0;const u=t[t.length-1],d=h2(l,n),p=h2(u,n);return!d||!p?!1:HU(t)||(r==="spring"||KS(r))&&i}const qU=t=>t!==null;function xv(t,{repeat:n,repeatType:r="loop"},i){const l=t.filter(qU),u=n&&r!=="loop"&&n%2===1?0:l.length-1;return!u||i===void 0?l[u]:i}const GU=40;class Xk{constructor({autoplay:n=!0,delay:r=0,type:i="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:d="loop",...p}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Uo.now(),this.options={autoplay:n,delay:r,type:i,repeat:l,repeatDelay:u,repeatType:d,...p},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>GU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$U(),this._resolved}onKeyframesResolved(n,r){this.resolvedAt=Uo.now(),this.hasAttemptedResolve=!0;const{name:i,type:l,velocity:u,delay:d,onComplete:p,onUpdate:f,isGenerator:g}=this.options;if(!g&&!WU(n,i,l,u))if(d)this.options.duration=0;else{f&&f(xv(n,this.options,r)),p&&p(),this.resolveFinishedPromise();return}const x=this.initPlayback(n,r);x!==!1&&(this._resolved={keyframes:n,finalKeyframe:r,...x},this.onPostResolved())}onPostResolved(){}then(n,r){return this.currentFinishedPromise.then(n,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(n=>{this.resolveFinishedPromise=n})}}const Lr=(t,n,r)=>t+(n-t)*r;function Yy(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*(2/3-r)*6:t}function YU({hue:t,saturation:n,lightness:r,alpha:i}){t/=360,n/=100,r/=100;let l=0,u=0,d=0;if(!n)l=u=d=r;else{const p=r<.5?r*(1+n):r+n-r*n,f=2*r-p;l=Yy(f,p,t+1/3),u=Yy(f,p,t),d=Yy(f,p,t-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:i}}function Ix(t,n){return r=>r>0?n:t}const Zy=(t,n,r)=>{const i=t*t,l=r*(n*n-i)+i;return l<0?0:Math.sqrt(l)},ZU=[ib,wu,Xd],XU=t=>ZU.find(n=>n.test(t));function f2(t){const n=XU(t);if(!n)return!1;let r=n.parse(t);return n===Xd&&(r=YU(r)),r}const p2=(t,n)=>{const r=f2(t),i=f2(n);if(!r||!i)return Ix(t,n);const l={...r};return u=>(l.red=Zy(r.red,i.red,u),l.green=Zy(r.green,i.green,u),l.blue=Zy(r.blue,i.blue,u),l.alpha=Lr(r.alpha,i.alpha,u),wu.transform(l))},KU=(t,n)=>r=>n(t(r)),dm=(...t)=>t.reduce(KU),cb=new Set(["none","hidden"]);function QU(t,n){return cb.has(t)?r=>r<=0?t:n:r=>r>=1?n:t}function JU(t,n){return r=>Lr(t,n,r)}function c1(t){return typeof t=="number"?JU:typeof t=="string"?US(t)?Ix:Qs.test(t)?p2:n9:Array.isArray(t)?Kk:typeof t=="object"?Qs.test(t)?p2:e9:Ix}function Kk(t,n){const r=[...t],i=r.length,l=t.map((u,d)=>c1(u)(u,n[d]));return u=>{for(let d=0;d<i;d++)r[d]=l[d](u);return r}}function e9(t,n){const r={...t,...n},i={};for(const l in r)t[l]!==void 0&&n[l]!==void 0&&(i[l]=c1(t[l])(t[l],n[l]));return l=>{for(const u in i)r[u]=i[u](l);return r}}function t9(t,n){var r;const i=[],l={color:0,var:0,number:0};for(let u=0;u<n.values.length;u++){const d=n.types[u],p=t.indexes[d][l[d]],f=(r=t.values[p])!==null&&r!==void 0?r:0;i[u]=f,l[d]++}return i}const n9=(t,n)=>{const r=Mc.createTransformer(n),i=Fp(t),l=Fp(n);return i.indexes.var.length===l.indexes.var.length&&i.indexes.color.length===l.indexes.color.length&&i.indexes.number.length>=l.indexes.number.length?cb.has(t)&&!l.values.length||cb.has(n)&&!i.values.length?QU(t,n):dm(Kk(t9(i,l),l.values),r):Ix(t,n)};function Qk(t,n,r){return typeof t=="number"&&typeof n=="number"&&typeof r=="number"?Lr(t,n,r):c1(t)(t,n)}const r9=5;function Jk(t,n,r){const i=Math.max(n-r9,0);return _k(r-t(i),n-i)}const Gr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xy=.001;function s9({duration:t=Gr.duration,bounce:n=Gr.bounce,velocity:r=Gr.velocity,mass:i=Gr.mass}){let l,u,d=1-n;d=Ol(Gr.minDamping,Gr.maxDamping,d),t=Ol(Gr.minDuration,Gr.maxDuration,zl(t)),d<1?(l=g=>{const x=g*d,y=x*t,b=x-r,w=ub(g,d),C=Math.exp(-y);return Xy-b/w*C},u=g=>{const y=g*d*t,b=y*r+r,w=Math.pow(d,2)*Math.pow(g,2)*t,C=Math.exp(-y),_=ub(Math.pow(g,2),d);return(-l(g)+Xy>0?-1:1)*((b-w)*C)/_}):(l=g=>{const x=Math.exp(-g*t),y=(g-r)*t+1;return-Xy+x*y},u=g=>{const x=Math.exp(-g*t),y=(r-g)*(t*t);return x*y});const p=5/t,f=a9(l,u,p);if(t=Ml(t),isNaN(f))return{stiffness:Gr.stiffness,damping:Gr.damping,duration:t};{const g=Math.pow(f,2)*i;return{stiffness:g,damping:d*2*Math.sqrt(i*g),duration:t}}}const i9=12;function a9(t,n,r){let i=r;for(let l=1;l<i9;l++)i=i-t(i)/n(i);return i}function ub(t,n){return t*Math.sqrt(1-n*n)}const o9=["duration","bounce"],l9=["stiffness","damping","mass"];function m2(t,n){return n.some(r=>t[r]!==void 0)}function c9(t){let n={velocity:Gr.velocity,stiffness:Gr.stiffness,damping:Gr.damping,mass:Gr.mass,isResolvedFromDuration:!1,...t};if(!m2(t,l9)&&m2(t,o9))if(t.visualDuration){const r=t.visualDuration,i=2*Math.PI/(r*1.2),l=i*i,u=2*Ol(.05,1,1-(t.bounce||0))*Math.sqrt(l);n={...n,mass:Gr.mass,stiffness:l,damping:u}}else{const r=s9(t);n={...n,...r,mass:Gr.mass},n.isResolvedFromDuration=!0}return n}function eD(t=Gr.visualDuration,n=Gr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:i,restDelta:l}=r;const u=r.keyframes[0],d=r.keyframes[r.keyframes.length-1],p={done:!1,value:u},{stiffness:f,damping:g,mass:x,duration:y,velocity:b,isResolvedFromDuration:w}=c9({...r,velocity:-zl(r.velocity||0)}),C=b||0,_=g/(2*Math.sqrt(f*x)),A=d-u,D=zl(Math.sqrt(f/x)),P=Math.abs(A)<5;i||(i=P?Gr.restSpeed.granular:Gr.restSpeed.default),l||(l=P?Gr.restDelta.granular:Gr.restDelta.default);let M;if(_<1){const z=ub(D,_);M=I=>{const V=Math.exp(-_*D*I);return d-V*((C+_*D*A)/z*Math.sin(z*I)+A*Math.cos(z*I))}}else if(_===1)M=z=>d-Math.exp(-D*z)*(A+(C+D*A)*z);else{const z=D*Math.sqrt(_*_-1);M=I=>{const V=Math.exp(-_*D*I),$=Math.min(z*I,300);return d-V*((C+_*D*A)*Math.sinh($)+z*A*Math.cosh($))/z}}const N={calculatedDuration:w&&y||null,next:z=>{const I=M(z);if(w)p.done=z>=y;else{let V=0;_<1&&(V=z===0?Ml(C):Jk(M,z,I));const $=Math.abs(V)<=i,ae=Math.abs(d-I)<=l;p.done=$&&ae}return p.value=p.done?d:I,p},toString:()=>{const z=Math.min(vk(N),nb),I=yk(V=>N.next(z*V).value,z,30);return z+"ms "+I}};return N}function g2({keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:d,min:p,max:f,restDelta:g=.5,restSpeed:x}){const y=t[0],b={done:!1,value:y},w=$=>p!==void 0&&$<p||f!==void 0&&$>f,C=$=>p===void 0?f:f===void 0||Math.abs(p-$)<Math.abs(f-$)?p:f;let _=r*n;const A=y+_,D=d===void 0?A:d(A);D!==A&&(_=D-y);const P=$=>-_*Math.exp(-$/i),M=$=>D+P($),N=$=>{const ae=P($),he=M($);b.done=Math.abs(ae)<=g,b.value=b.done?D:he};let z,I;const V=$=>{w(b.value)&&(z=$,I=eD({keyframes:[b.value,C(b.value)],velocity:Jk(M,$,b.value),damping:l,stiffness:u,restDelta:g,restSpeed:x}))};return V(0),{calculatedDuration:null,next:$=>{let ae=!1;return!I&&z===void 0&&(ae=!0,N($),V($)),z!==void 0&&$>=z?I.next($-z):(!ae&&N($),b)}}}const u9=um(.42,0,1,1),d9=um(0,0,.58,1),tD=um(.42,0,.58,1),h9=t=>Array.isArray(t)&&typeof t[0]!="number",f9={linear:fa,easeIn:u9,easeInOut:tD,easeOut:d9,circIn:s1,circInOut:Ik,circOut:zk,backIn:r1,backInOut:Pk,backOut:Dk,anticipate:Mk},x2=t=>{if(QS(t)){QR(t.length===4);const[n,r,i,l]=t;return um(n,r,i,l)}else if(typeof t=="string")return f9[t];return t};function p9(t,n,r){const i=[],l=r||Qk,u=t.length-1;for(let d=0;d<u;d++){let p=l(t[d],t[d+1]);if(n){const f=Array.isArray(n)?n[d]||fa:n;p=dm(f,p)}i.push(p)}return i}function m9(t,n,{clamp:r=!0,ease:i,mixer:l}={}){const u=t.length;if(QR(u===n.length),u===1)return()=>n[0];if(u===2&&n[0]===n[1])return()=>n[1];const d=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),n=[...n].reverse());const p=p9(n,i,l),f=p.length,g=x=>{if(d&&x<t[0])return n[0];let y=0;if(f>1)for(;y<t.length-2&&!(x<t[y+1]);y++);const b=jh(t[y],t[y+1],x);return p[y](b)};return r?x=>g(Ol(t[0],t[u-1],x)):g}function g9(t,n){const r=t[t.length-1];for(let i=1;i<=n;i++){const l=jh(0,n,i);t.push(Lr(r,1,l))}}function x9(t){const n=[0];return g9(n,t.length-1),n}function v9(t,n){return t.map(r=>r*n)}function y9(t,n){return t.map(()=>n||tD).splice(0,t.length-1)}function Nx({duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}){const l=h9(i)?i.map(x2):x2(i),u={done:!1,value:n[0]},d=v9(r&&r.length===n.length?r:x9(n),t),p=m9(d,n,{ease:Array.isArray(l)?l:y9(n,l)});return{calculatedDuration:t,next:f=>(u.value=p(f),u.done=f>=t,u)}}const j9=t=>{const n=({timestamp:r})=>t(r);return{start:()=>Cr.update(n,!0),stop:()=>Pc(n),now:()=>Is.isProcessing?Is.timestamp:Uo.now()}},b9={decay:g2,inertia:g2,tween:Nx,keyframes:Nx,spring:eD},S9=t=>t/100;class u1 extends Xk{constructor(n){super(n),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:r,motionValue:i,element:l,keyframes:u}=this.options,d=l?.KeyframeResolver||l1,p=(f,g)=>this.onKeyframesResolved(f,g);this.resolver=new d(u,p,r,i,l),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(n){const{type:r="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:u,velocity:d=0}=this.options,p=KS(r)?r:b9[r]||Nx;let f,g;p!==Nx&&typeof n[0]!="number"&&(f=dm(S9,Qk(n[0],n[1])),n=[0,100]);const x=p({...this.options,keyframes:n});u==="mirror"&&(g=p({...this.options,keyframes:[...n].reverse(),velocity:-d})),x.calculatedDuration===null&&(x.calculatedDuration=vk(x));const{calculatedDuration:y}=x,b=y+l,w=b*(i+1)-l;return{generator:x,mirroredGenerator:g,mapPercentToKeyframes:f,calculatedDuration:y,resolvedDuration:b,totalDuration:w}}onPostResolved(){const{autoplay:n=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!n?this.pause():this.state=this.pendingPlayState}tick(n,r=!1){const{resolved:i}=this;if(!i){const{keyframes:$}=this.options;return{done:!0,value:$[$.length-1]}}const{finalKeyframe:l,generator:u,mirroredGenerator:d,mapPercentToKeyframes:p,keyframes:f,calculatedDuration:g,totalDuration:x,resolvedDuration:y}=i;if(this.startTime===null)return u.next(0);const{delay:b,repeat:w,repeatType:C,repeatDelay:_,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-x/this.speed,this.startTime)),r?this.currentTime=n:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(n-this.startTime)*this.speed;const D=this.currentTime-b*(this.speed>=0?1:-1),P=this.speed>=0?D<0:D>x;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=x);let M=this.currentTime,N=u;if(w){const $=Math.min(this.currentTime,x)/y;let ae=Math.floor($),he=$%1;!he&&$>=1&&(he=1),he===1&&ae--,ae=Math.min(ae,w+1),!!(ae%2)&&(C==="reverse"?(he=1-he,_&&(he-=_/y)):C==="mirror"&&(N=d)),M=Ol(0,1,he)*y}const z=P?{done:!1,value:f[0]}:N.next(M);p&&(z.value=p(z.value));let{done:I}=z;!P&&g!==null&&(I=this.speed>=0?this.currentTime>=x:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return V&&l!==void 0&&(z.value=xv(f,this.options,l)),A&&A(z.value),V&&this.finish(),z}get duration(){const{resolved:n}=this;return n?zl(n.calculatedDuration):0}get time(){return zl(this.currentTime)}set time(n){n=Ml(n),this.currentTime=n,this.holdTime!==null||this.speed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.speed)}get speed(){return this.playbackSpeed}set speed(n){const r=this.playbackSpeed!==n;this.playbackSpeed=n,r&&(this.time=zl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:n=j9,onPlay:r,startTime:i}=this.options;this.driver||(this.driver=n(u=>this.tick(u))),r&&r();const l=this.driver.now();this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=l):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var n;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(n=this.currentTime)!==null&&n!==void 0?n:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:n}=this.options;n&&n()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}}const w9=new Set(["opacity","clipPath","filter","transform"]);function C9(t,n,r,{delay:i=0,duration:l=300,repeat:u=0,repeatType:d="loop",ease:p="easeInOut",times:f}={}){const g={[n]:r};f&&(g.offset=f);const x=bk(p,l);return Array.isArray(x)&&(g.easing=x),t.animate(g,{delay:i,duration:l,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:u+1,direction:d==="reverse"?"alternate":"normal"})}const E9=NS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Lx=10,_9=2e4;function T9(t){return KS(t.type)||t.type==="spring"||!jk(t.ease)}function A9(t,n){const r=new u1({...n,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const l=[];let u=0;for(;!i.done&&u<_9;)i=r.sample(u),l.push(i.value),u+=Lx;return{times:void 0,keyframes:l,duration:u-Lx,ease:"linear"}}const nD={anticipate:Mk,backInOut:Pk,circInOut:Ik};function R9(t){return t in nD}class v2 extends Xk{constructor(n){super(n);const{name:r,motionValue:i,element:l,keyframes:u}=this.options;this.resolver=new Zk(u,(d,p)=>this.onKeyframesResolved(d,p),r,i,l),this.resolver.scheduleResolve()}initPlayback(n,r){let{duration:i=300,times:l,ease:u,type:d,motionValue:p,name:f,startTime:g}=this.options;if(!p.owner||!p.owner.current)return!1;if(typeof u=="string"&&zx()&&R9(u)&&(u=nD[u]),T9(this.options)){const{onComplete:y,onUpdate:b,motionValue:w,element:C,..._}=this.options,A=A9(n,_);n=A.keyframes,n.length===1&&(n[1]=n[0]),i=A.duration,l=A.times,u=A.ease,d="keyframes"}const x=C9(p.owner.current,f,n,{...this.options,duration:i,times:l,ease:u});return x.startTime=g??this.calcStartTime(),this.pendingTimeline?(n2(x,this.pendingTimeline),this.pendingTimeline=void 0):x.onfinish=()=>{const{onComplete:y}=this.options;p.set(xv(n,this.options,r)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:x,duration:i,times:l,type:d,ease:u,keyframes:n}}get duration(){const{resolved:n}=this;if(!n)return 0;const{duration:r}=n;return zl(r)}get time(){const{resolved:n}=this;if(!n)return 0;const{animation:r}=n;return zl(r.currentTime||0)}set time(n){const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.currentTime=Ml(n)}get speed(){const{resolved:n}=this;if(!n)return 1;const{animation:r}=n;return r.playbackRate}set speed(n){const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.playbackRate=n}get state(){const{resolved:n}=this;if(!n)return"idle";const{animation:r}=n;return r.playState}get startTime(){const{resolved:n}=this;if(!n)return null;const{animation:r}=n;return r.startTime}attachTimeline(n){if(!this._resolved)this.pendingTimeline=n;else{const{resolved:r}=this;if(!r)return fa;const{animation:i}=r;n2(i,n)}return fa}play(){if(this.isStopped)return;const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:n}=this;if(!n)return;const{animation:r,keyframes:i,duration:l,type:u,ease:d,times:p}=n;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:g,onUpdate:x,onComplete:y,element:b,...w}=this.options,C=new u1({...w,keyframes:i,duration:l,type:u,ease:d,times:p,isGenerator:!0}),_=Ml(this.time);g.setWithVelocity(C.sample(_-Lx).value,C.sample(_).value,Lx)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:n}=this;n&&n.animation.finish()}cancel(){const{resolved:n}=this;n&&n.animation.cancel()}static supports(n){const{motionValue:r,name:i,repeatDelay:l,repeatType:u,damping:d,type:p}=n;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:g}=r.owner.getProps();return E9()&&i&&w9.has(i)&&!f&&!g&&!l&&u!=="mirror"&&d!==0&&p!=="inertia"}}const k9={type:"spring",stiffness:500,damping:25,restSpeed:10},D9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),P9={type:"keyframes",duration:.8},M9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},z9=(t,{keyframes:n})=>n.length>2?P9:Yu.has(t)?t.startsWith("scale")?D9(n[1]):k9:M9;function I9({when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:l,repeat:u,repeatType:d,repeatDelay:p,from:f,elapsed:g,...x}){return!!Object.keys(x).length}const d1=(t,n,r,i={},l,u)=>d=>{const p=XS(i,t)||{},f=p.delay||i.delay||0;let{elapsed:g=0}=i;g=g-Ml(f);let x={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:n.getVelocity(),...p,delay:-g,onUpdate:b=>{n.set(b),p.onUpdate&&p.onUpdate(b)},onComplete:()=>{d(),p.onComplete&&p.onComplete()},name:t,motionValue:n,element:u?void 0:l};I9(p)||(x={...x,...z9(t,x)}),x.duration&&(x.duration=Ml(x.duration)),x.repeatDelay&&(x.repeatDelay=Ml(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let y=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(x.duration=0,x.delay===0&&(y=!0)),y&&!u&&n.get()!==void 0){const b=xv(x.keyframes,p);if(b!==void 0)return Cr.update(()=>{x.onUpdate(b),x.onComplete()}),new eU([])}return!u&&v2.supports(x)?new v2(x):new u1(x)};function N9({protectedKeys:t,needsAnimating:n},r){const i=t.hasOwnProperty(r)&&n[r]!==!0;return n[r]=!1,i}function rD(t,n,{delay:r=0,transitionOverride:i,type:l}={}){var u;let{transition:d=t.getDefaultTransition(),transitionEnd:p,...f}=n;i&&(d=i);const g=[],x=l&&t.animationState&&t.animationState.getState()[l];for(const y in f){const b=t.getValue(y,(u=t.latestValues[y])!==null&&u!==void 0?u:null),w=f[y];if(w===void 0||x&&N9(x,y))continue;const C={delay:r,...XS(d||{},y)};let _=!1;if(window.MotionHandoffAnimation){const D=Tk(t);if(D){const P=window.MotionHandoffAnimation(D,y,Cr);P!==null&&(C.startTime=P,_=!0)}}sb(t,y),b.start(d1(y,b,w,t.shouldReduceMotion&&Ek.has(y)?{type:!1}:C,t,_));const A=b.animation;A&&g.push(A)}return p&&Promise.all(g).then(()=>{Cr.update(()=>{p&&pU(t,p)})}),g}function db(t,n,r={}){var i;const l=gv(t,n,r.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:u=t.getDefaultTransition()||{}}=l||{};r.transitionOverride&&(u=r.transitionOverride);const d=l?()=>Promise.all(rD(t,l,r)):()=>Promise.resolve(),p=t.variantChildren&&t.variantChildren.size?(g=0)=>{const{delayChildren:x=0,staggerChildren:y,staggerDirection:b}=u;return L9(t,n,x+g,y,b,r)}:()=>Promise.resolve(),{when:f}=u;if(f){const[g,x]=f==="beforeChildren"?[d,p]:[p,d];return g().then(()=>x())}else return Promise.all([d(),p(r.delay)])}function L9(t,n,r=0,i=0,l=1,u){const d=[],p=(t.variantChildren.size-1)*i,f=l===1?(g=0)=>g*i:(g=0)=>p-g*i;return Array.from(t.variantChildren).sort(O9).forEach((g,x)=>{g.notify("AnimationStart",n),d.push(db(g,n,{...u,delay:r+f(x)}).then(()=>g.notify("AnimationComplete",n)))}),Promise.all(d)}function O9(t,n){return t.sortNodePosition(n)}function B9(t,n,r={}){t.notify("AnimationStart",n);let i;if(Array.isArray(n)){const l=n.map(u=>db(t,u,r));i=Promise.all(l)}else if(typeof n=="string")i=db(t,n,r);else{const l=typeof n=="function"?gv(t,n,r.custom):n;i=Promise.all(rD(t,l,r))}return i.then(()=>{t.notify("AnimationComplete",n)})}const $9=OS.length;function sD(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?sD(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const n={};for(let r=0;r<$9;r++){const i=OS[r],l=t.props[i];(Op(l)||l===!1)&&(n[i]=l)}return n}const F9=[...LS].reverse(),V9=LS.length;function U9(t){return n=>Promise.all(n.map(({animation:r,options:i})=>B9(t,r,i)))}function H9(t){let n=U9(t),r=y2(),i=!0;const l=f=>(g,x)=>{var y;const b=gv(t,x,f==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(b){const{transition:w,transitionEnd:C,..._}=b;g={...g,..._,...C}}return g};function u(f){n=f(t)}function d(f){const{props:g}=t,x=sD(t.parent)||{},y=[],b=new Set;let w={},C=1/0;for(let A=0;A<V9;A++){const D=F9[A],P=r[D],M=g[D]!==void 0?g[D]:x[D],N=Op(M),z=D===f?P.isActive:null;z===!1&&(C=A);let I=M===x[D]&&M!==g[D]&&N;if(I&&i&&t.manuallyAnimateOnMount&&(I=!1),P.protectedKeys={...w},!P.isActive&&z===null||!M&&!P.prevProp||pv(M)||typeof M=="boolean")continue;const V=W9(P.prevProp,M);let $=V||D===f&&P.isActive&&!I&&N||A>C&&N,ae=!1;const he=Array.isArray(M)?M:[M];let re=he.reduce(l(D),{});z===!1&&(re={});const{prevResolvedValues:ce={}}=P,Se={...ce,...re},je=U=>{$=!0,b.has(U)&&(ae=!0,b.delete(U)),P.needsAnimating[U]=!0;const W=t.getValue(U);W&&(W.liveStyle=!1)};for(const U in Se){const W=re[U],me=ce[U];if(w.hasOwnProperty(U))continue;let F=!1;tb(W)&&tb(me)?F=!xk(W,me):F=W!==me,F?W!=null?je(U):b.add(U):W!==void 0&&b.has(U)?je(U):P.protectedKeys[U]=!0}P.prevProp=M,P.prevResolvedValues=re,P.isActive&&(w={...w,...re}),i&&t.blockInitialAnimation&&($=!1),$&&(!(I&&V)||ae)&&y.push(...he.map(U=>({animation:U,options:{type:D}})))}if(b.size){const A={};b.forEach(D=>{const P=t.getBaseTarget(D),M=t.getValue(D);M&&(M.liveStyle=!0),A[D]=P??null}),y.push({animation:A})}let _=!!y.length;return i&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(_=!1),i=!1,_?n(y):Promise.resolve()}function p(f,g){var x;if(r[f].isActive===g)return Promise.resolve();(x=t.variantChildren)===null||x===void 0||x.forEach(b=>{var w;return(w=b.animationState)===null||w===void 0?void 0:w.setActive(f,g)}),r[f].isActive=g;const y=d(f);for(const b in r)r[b].protectedKeys={};return y}return{animateChanges:d,setActive:p,setAnimateFunction:u,getState:()=>r,reset:()=>{r=y2(),i=!0}}}function W9(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!xk(n,t):!1}function pu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function y2(){return{animate:pu(!0),whileInView:pu(),whileHover:pu(),whileTap:pu(),whileDrag:pu(),whileFocus:pu(),exit:pu()}}class $c{constructor(n){this.isMounted=!1,this.node=n}update(){}}class q9 extends $c{constructor(n){super(n),n.animationState||(n.animationState=H9(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();pv(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:r}=this.node.prevProps||{};n!==r&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)===null||n===void 0||n.call(this)}}let G9=0;class Y9 extends $c{constructor(){super(...arguments),this.id=G9++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===i)return;const l=this.node.animationState.setActive("exit",!n);r&&!n&&l.then(()=>r(this.id))}mount(){const{register:n}=this.node.presenceContext||{};n&&(this.unmount=n(this.id))}unmount(){}}const Z9={animation:{Feature:q9},exit:{Feature:Y9}};function Vp(t,n,r,i={passive:!0}){return t.addEventListener(n,r,i),()=>t.removeEventListener(n,r)}function hm(t){return{point:{x:t.pageX,y:t.pageY}}}const X9=t=>n=>JS(n)&&t(n,hm(n));function bp(t,n,r,i){return Vp(t,n,X9(r),i)}const j2=(t,n)=>Math.abs(t-n);function K9(t,n){const r=j2(t.x,n.x),i=j2(t.y,n.y);return Math.sqrt(r**2+i**2)}class iD{constructor(n,r,{transformPagePoint:i,contextWindow:l,dragSnapToOrigin:u=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Qy(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=K9(y.offset,{x:0,y:0})>=3;if(!b&&!w)return;const{point:C}=y,{timestamp:_}=Is;this.history.push({...C,timestamp:_});const{onStart:A,onMove:D}=this.handlers;b||(A&&A(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Ky(b,this.transformPagePoint),Cr.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:w,onSessionEnd:C,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Qy(y.type==="pointercancel"?this.lastMoveEventInfo:Ky(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,A),C&&C(y,A)},!JS(n))return;this.dragSnapToOrigin=u,this.handlers=r,this.transformPagePoint=i,this.contextWindow=l||window;const d=hm(n),p=Ky(d,this.transformPagePoint),{point:f}=p,{timestamp:g}=Is;this.history=[{...f,timestamp:g}];const{onSessionStart:x}=r;x&&x(n,Qy(p,this.history)),this.removeListeners=dm(bp(this.contextWindow,"pointermove",this.handlePointerMove),bp(this.contextWindow,"pointerup",this.handlePointerUp),bp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Pc(this.updatePoint)}}function Ky(t,n){return n?{point:n(t.point)}:t}function b2(t,n){return{x:t.x-n.x,y:t.y-n.y}}function Qy({point:t},n){return{point:t,delta:b2(t,aD(n)),offset:b2(t,Q9(n)),velocity:J9(n,.1)}}function Q9(t){return t[0]}function aD(t){return t[t.length-1]}function J9(t,n){if(t.length<2)return{x:0,y:0};let r=t.length-1,i=null;const l=aD(t);for(;r>=0&&(i=t[r],!(l.timestamp-i.timestamp>Ml(n)));)r--;if(!i)return{x:0,y:0};const u=zl(l.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const d={x:(l.x-i.x)/u,y:(l.y-i.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}const oD=1e-4,e7=1-oD,t7=1+oD,lD=.01,n7=0-lD,r7=0+lD;function pa(t){return t.max-t.min}function s7(t,n,r){return Math.abs(t-n)<=r}function S2(t,n,r,i=.5){t.origin=i,t.originPoint=Lr(n.min,n.max,t.origin),t.scale=pa(r)/pa(n),t.translate=Lr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=e7&&t.scale<=t7||isNaN(t.scale))&&(t.scale=1),(t.translate>=n7&&t.translate<=r7||isNaN(t.translate))&&(t.translate=0)}function Sp(t,n,r,i){S2(t.x,n.x,r.x,i?i.originX:void 0),S2(t.y,n.y,r.y,i?i.originY:void 0)}function w2(t,n,r){t.min=r.min+n.min,t.max=t.min+pa(n)}function i7(t,n,r){w2(t.x,n.x,r.x),w2(t.y,n.y,r.y)}function C2(t,n,r){t.min=n.min-r.min,t.max=t.min+pa(n)}function wp(t,n,r){C2(t.x,n.x,r.x),C2(t.y,n.y,r.y)}function a7(t,{min:n,max:r},i){return n!==void 0&&t<n?t=i?Lr(n,t,i.min):Math.max(t,n):r!==void 0&&t>r&&(t=i?Lr(r,t,i.max):Math.min(t,r)),t}function E2(t,n,r){return{min:n!==void 0?t.min+n:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function o7(t,{top:n,left:r,bottom:i,right:l}){return{x:E2(t.x,r,l),y:E2(t.y,n,i)}}function _2(t,n){let r=n.min-t.min,i=n.max-t.max;return n.max-n.min<t.max-t.min&&([r,i]=[i,r]),{min:r,max:i}}function l7(t,n){return{x:_2(t.x,n.x),y:_2(t.y,n.y)}}function c7(t,n){let r=.5;const i=pa(t),l=pa(n);return l>i?r=jh(n.min,n.max-i,t.min):i>l&&(r=jh(t.min,t.max-l,n.min)),Ol(0,1,r)}function u7(t,n){const r={};return n.min!==void 0&&(r.min=n.min-t.min),n.max!==void 0&&(r.max=n.max-t.min),r}const hb=.35;function d7(t=hb){return t===!1?t=0:t===!0&&(t=hb),{x:T2(t,"left","right"),y:T2(t,"top","bottom")}}function T2(t,n,r){return{min:A2(t,n),max:A2(t,r)}}function A2(t,n){return typeof t=="number"?t:t[n]||0}const R2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kd=()=>({x:R2(),y:R2()}),k2=()=>({min:0,max:0}),Kr=()=>({x:k2(),y:k2()});function Pa(t){return[t("x"),t("y")]}function cD({top:t,left:n,right:r,bottom:i}){return{x:{min:n,max:r},y:{min:t,max:i}}}function h7({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function f7(t,n){if(!n)return t;const r=n({x:t.left,y:t.top}),i=n({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}function Jy(t){return t===void 0||t===1}function fb({scale:t,scaleX:n,scaleY:r}){return!Jy(t)||!Jy(n)||!Jy(r)}function vu(t){return fb(t)||uD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function uD(t){return D2(t.x)||D2(t.y)}function D2(t){return t&&t!=="0%"}function Ox(t,n,r){const i=t-r,l=n*i;return r+l}function P2(t,n,r,i,l){return l!==void 0&&(t=Ox(t,l,i)),Ox(t,r,i)+n}function pb(t,n=0,r=1,i,l){t.min=P2(t.min,n,r,i,l),t.max=P2(t.max,n,r,i,l)}function dD(t,{x:n,y:r}){pb(t.x,n.translate,n.scale,n.originPoint),pb(t.y,r.translate,r.scale,r.originPoint)}const M2=.999999999999,z2=1.0000000000001;function p7(t,n,r,i=!1){const l=r.length;if(!l)return;n.x=n.y=1;let u,d;for(let p=0;p<l;p++){u=r[p],d=u.projectionDelta;const{visualElement:f}=u.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Jd(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),d&&(n.x*=d.x.scale,n.y*=d.y.scale,dD(t,d)),i&&vu(u.latestValues)&&Jd(t,u.latestValues))}n.x<z2&&n.x>M2&&(n.x=1),n.y<z2&&n.y>M2&&(n.y=1)}function Qd(t,n){t.min=t.min+n,t.max=t.max+n}function I2(t,n,r,i,l=.5){const u=Lr(t.min,t.max,l);pb(t,n,r,u,i)}function Jd(t,n){I2(t.x,n.x,n.scaleX,n.scale,n.originX),I2(t.y,n.y,n.scaleY,n.scale,n.originY)}function hD(t,n){return cD(f7(t.getBoundingClientRect(),n))}function m7(t,n,r){const i=hD(t,r),{scroll:l}=n;return l&&(Qd(i.x,l.offset.x),Qd(i.y,l.offset.y)),i}const fD=({current:t})=>t?t.ownerDocument.defaultView:null,g7=new WeakMap;class x7{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kr(),this.visualElement=n}start(n,{snapToCursor:r=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const l=x=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(hm(x).point)},u=(x,y)=>{const{drag:b,dragPropagation:w,onDragStart:C}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cU(b),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pa(A=>{let D=this.getAxisMotionValue(A).get()||0;if(Vo.test(D)){const{projection:P}=this.visualElement;if(P&&P.layout){const M=P.layout.layoutBox[A];M&&(D=pa(M)*(parseFloat(D)/100))}}this.originPoint[A]=D}),C&&Cr.postRender(()=>C(x,y)),sb(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},d=(x,y)=>{const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:C,onDrag:_}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:A}=y;if(w&&this.currentDirection===null){this.currentDirection=v7(A),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,A),this.updateAxis("y",y.point,A),this.visualElement.render(),_&&_(x,y)},p=(x,y)=>this.stop(x,y),f=()=>Pa(x=>{var y;return this.getAnimationState(x)==="paused"&&((y=this.getAxisMotionValue(x).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new iD(n,{onSessionStart:l,onStart:u,onMove:d,onSessionEnd:p,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:fD(this.visualElement)})}stop(n,r){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Cr.postRender(()=>u(n,r))}cancel(){this.isDragging=!1;const{projection:n,animationState:r}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(n,r,i){const{drag:l}=this.getProps();if(!i||!Og(n,l,this.currentDirection))return;const u=this.getAxisMotionValue(n);let d=this.originPoint[n]+i[n];this.constraints&&this.constraints[n]&&(d=a7(d,this.constraints[n],this.elastic[n])),u.set(d)}resolveConstraints(){var n;const{dragConstraints:r,dragElastic:i}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(n=this.visualElement.projection)===null||n===void 0?void 0:n.layout,u=this.constraints;r&&Zd(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&l?this.constraints=o7(l.layoutBox,r):this.constraints=!1,this.elastic=d7(i),u!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&Pa(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=u7(l.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:r}=this.getProps();if(!n||!Zd(n))return!1;const i=n.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=m7(i,l.root,this.visualElement.getTransformPagePoint());let d=l7(l.layout.layoutBox,u);if(r){const p=r(h7(d));this.hasMutatedConstraints=!!p,p&&(d=cD(p))}return d}startAnimation(n){const{drag:r,dragMomentum:i,dragElastic:l,dragTransition:u,dragSnapToOrigin:d,onDragTransitionEnd:p}=this.getProps(),f=this.constraints||{},g=Pa(x=>{if(!Og(x,r,this.currentDirection))return;let y=f&&f[x]||{};d&&(y={min:0,max:0});const b=l?200:1e6,w=l?40:1e7,C={type:"inertia",velocity:i?n[x]:0,bounceStiffness:b,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...u,...y};return this.startAxisValueAnimation(x,C)});return Promise.all(g).then(p)}startAxisValueAnimation(n,r){const i=this.getAxisMotionValue(n);return sb(this.visualElement,n),i.start(d1(n,i,0,r,this.visualElement,!1))}stopAnimation(){Pa(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Pa(n=>{var r;return(r=this.getAxisMotionValue(n).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(n){var r;return(r=this.getAxisMotionValue(n).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(n){const r=`_drag${n.toUpperCase()}`,i=this.visualElement.getProps(),l=i[r];return l||this.visualElement.getValue(n,(i.initial?i.initial[n]:void 0)||0)}snapToCursor(n){Pa(r=>{const{drag:i}=this.getProps();if(!Og(r,i,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(r);if(l&&l.layout){const{min:d,max:p}=l.layout.layoutBox[r];u.set(n[r]-Lr(d,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!Zd(r)||!i||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Pa(d=>{const p=this.getAxisMotionValue(d);if(p&&this.constraints!==!1){const f=p.get();l[d]=c7({min:f,max:f},this.constraints[d])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Pa(d=>{if(!Og(d,n,null))return;const p=this.getAxisMotionValue(d),{min:f,max:g}=this.constraints[d];p.set(Lr(f,g,l[d]))})}addListeners(){if(!this.visualElement.current)return;g7.set(this.visualElement,this);const n=this.visualElement.current,r=bp(n,"pointerdown",f=>{const{drag:g,dragListener:x=!0}=this.getProps();g&&x&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Zd(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",i);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),Cr.read(i);const d=Vp(window,"resize",()=>this.scalePositionWithinConstraints()),p=l.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:g})=>{this.isDragging&&g&&(Pa(x=>{const y=this.getAxisMotionValue(x);y&&(this.originPoint[x]+=f[x].translate,y.set(y.get()+f[x].translate))}),this.visualElement.render())}));return()=>{d(),r(),u(),p&&p()}}getProps(){const n=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:d=hb,dragMomentum:p=!0}=n;return{...n,drag:r,dragDirectionLock:i,dragPropagation:l,dragConstraints:u,dragElastic:d,dragMomentum:p}}}function Og(t,n,r){return(n===!0||n===t)&&(r===null||r===t)}function v7(t,n=10){let r=null;return Math.abs(t.y)>n?r="y":Math.abs(t.x)>n&&(r="x"),r}class y7 extends $c{constructor(n){super(n),this.removeGroupControls=fa,this.removeListeners=fa,this.controls=new x7(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fa}unmount(){this.removeGroupControls(),this.removeListeners()}}const N2=t=>(n,r)=>{t&&Cr.postRender(()=>t(n,r))};class j7 extends $c{constructor(){super(...arguments),this.removePointerDownListener=fa}onPointerDown(n){this.session=new iD(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fD(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:r,onPan:i,onPanEnd:l}=this.node.getProps();return{onSessionStart:N2(n),onStart:N2(r),onMove:i,onEnd:(u,d)=>{delete this.session,l&&Cr.postRender(()=>l(u,d))}}}mount(){this.removePointerDownListener=bp(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function L2(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const Vf={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(rn.test(t))t=parseFloat(t);else return t;const r=L2(t,n.target.x),i=L2(t,n.target.y);return`${r}% ${i}%`}},b7={correct:(t,{treeScale:n,projectionDelta:r})=>{const i=t,l=Mc.parse(t);if(l.length>5)return i;const u=Mc.createTransformer(t),d=typeof l[0]!="number"?1:0,p=r.x.scale*n.x,f=r.y.scale*n.y;l[0+d]/=p,l[1+d]/=f;const g=Lr(p,f,.5);return typeof l[2+d]=="number"&&(l[2+d]/=g),typeof l[3+d]=="number"&&(l[3+d]/=g),u(l)}};class S7 extends v.Component{componentDidMount(){const{visualElement:n,layoutGroup:r,switchLayoutGroup:i,layoutId:l}=this.props,{projection:u}=n;VV(w7),u&&(r.group&&r.group.add(u),i&&i.register&&l&&i.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),yx.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:r,visualElement:i,drag:l,isPresent:u}=this.props,d=i.projection;return d&&(d.isPresent=u,l||n.layoutDependency!==r||r===void 0?d.willUpdate():this.safeToRemove(),n.isPresent!==u&&(u?d.promote():d.relegate()||Cr.postRender(()=>{const p=d.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),$S.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:l}=n;l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),i&&i.deregister&&i.deregister(l))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function pD(t){const[n,r]=zS(),i=v.useContext(DS);return e.jsx(S7,{...t,layoutGroup:i,switchLayoutGroup:v.useContext(sk),isPresent:n,safeToRemove:r})}const w7={borderRadius:{...Vf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vf,borderTopRightRadius:Vf,borderBottomLeftRadius:Vf,borderBottomRightRadius:Vf,boxShadow:b7};function C7(t,n,r){const i=Js(t)?t:$p(t);return i.start(d1("",i,n,r)),i.animation}function E7(t){return t instanceof SVGElement&&t.tagName!=="svg"}const _7=(t,n)=>t.depth-n.depth;class T7{constructor(){this.children=[],this.isDirty=!1}add(n){e1(this.children,n),this.isDirty=!0}remove(n){t1(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(_7),this.isDirty=!1,this.children.forEach(n)}}function A7(t,n){const r=Uo.now(),i=({timestamp:l})=>{const u=l-r;u>=n&&(Pc(i),t(u-n))};return Cr.read(i,!0),()=>Pc(i)}const mD=["TopLeft","TopRight","BottomLeft","BottomRight"],R7=mD.length,O2=t=>typeof t=="string"?parseFloat(t):t,B2=t=>typeof t=="number"||rn.test(t);function k7(t,n,r,i,l,u){l?(t.opacity=Lr(0,r.opacity!==void 0?r.opacity:1,D7(i)),t.opacityExit=Lr(n.opacity!==void 0?n.opacity:1,0,P7(i))):u&&(t.opacity=Lr(n.opacity!==void 0?n.opacity:1,r.opacity!==void 0?r.opacity:1,i));for(let d=0;d<R7;d++){const p=`border${mD[d]}Radius`;let f=$2(n,p),g=$2(r,p);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||B2(f)===B2(g)?(t[p]=Math.max(Lr(O2(f),O2(g),i),0),(Vo.test(g)||Vo.test(f))&&(t[p]+="%")):t[p]=g}(n.rotate||r.rotate)&&(t.rotate=Lr(n.rotate||0,r.rotate||0,i))}function $2(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const D7=gD(0,.5,zk),P7=gD(.5,.95,fa);function gD(t,n,r){return i=>i<t?0:i>n?1:r(jh(t,n,i))}function F2(t,n){t.min=n.min,t.max=n.max}function Ra(t,n){F2(t.x,n.x),F2(t.y,n.y)}function V2(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function U2(t,n,r,i,l){return t-=n,t=Ox(t,1/r,i),l!==void 0&&(t=Ox(t,1/l,i)),t}function M7(t,n=0,r=1,i=.5,l,u=t,d=t){if(Vo.test(n)&&(n=parseFloat(n),n=Lr(d.min,d.max,n/100)-d.min),typeof n!="number")return;let p=Lr(u.min,u.max,i);t===u&&(p-=n),t.min=U2(t.min,n,r,p,l),t.max=U2(t.max,n,r,p,l)}function H2(t,n,[r,i,l],u,d){M7(t,n[r],n[i],n[l],n.scale,u,d)}const z7=["x","scaleX","originX"],I7=["y","scaleY","originY"];function W2(t,n,r,i){H2(t.x,n,z7,r?r.x:void 0,i?i.x:void 0),H2(t.y,n,I7,r?r.y:void 0,i?i.y:void 0)}function q2(t){return t.translate===0&&t.scale===1}function xD(t){return q2(t.x)&&q2(t.y)}function G2(t,n){return t.min===n.min&&t.max===n.max}function N7(t,n){return G2(t.x,n.x)&&G2(t.y,n.y)}function Y2(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function vD(t,n){return Y2(t.x,n.x)&&Y2(t.y,n.y)}function Z2(t){return pa(t.x)/pa(t.y)}function X2(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class L7{constructor(){this.members=[]}add(n){e1(this.members,n),n.scheduleRender()}remove(n){if(t1(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(n){const r=this.members.findIndex(l=>n===l);if(r===0)return!1;let i;for(let l=r;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(n,r){const i=this.lead;if(n!==i&&(this.prevLead=i,this.lead=n,n.show(),i)){i.instance&&i.scheduleRender(),n.scheduleRender(),n.resumeFrom=i,r&&(n.resumeFrom.preserveOpacity=!0),i.snapshot&&(n.snapshot=i.snapshot,n.snapshot.latestValues=i.animationValues||i.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:l}=n.options;l===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:r,resumingFrom:i}=n;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function O7(t,n,r){let i="";const l=t.x.translate/n.x,u=t.y.translate/n.y,d=r?.z||0;if((l||u||d)&&(i=`translate3d(${l}px, ${u}px, ${d}px) `),(n.x!==1||n.y!==1)&&(i+=`scale(${1/n.x}, ${1/n.y}) `),r){const{transformPerspective:g,rotate:x,rotateX:y,rotateY:b,skewX:w,skewY:C}=r;g&&(i=`perspective(${g}px) ${i}`),x&&(i+=`rotate(${x}deg) `),y&&(i+=`rotateX(${y}deg) `),b&&(i+=`rotateY(${b}deg) `),w&&(i+=`skewX(${w}deg) `),C&&(i+=`skewY(${C}deg) `)}const p=t.x.scale*n.x,f=t.y.scale*n.y;return(p!==1||f!==1)&&(i+=`scale(${p}, ${f})`),i||"none"}const yu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ap=typeof window<"u"&&window.MotionDebug!==void 0,ej=["","X","Y","Z"],B7={visibility:"hidden"},K2=1e3;let $7=0;function tj(t,n,r,i){const{latestValues:l}=n;l[t]&&(r[t]=l[t],n.setStaticValue(t,0),i&&(i[t]=0))}function yD(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const r=Tk(n);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:l,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Cr,!(l||u))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&yD(i)}function jD({attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:l}){return class{constructor(d={},p=n?.()){this.id=$7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ap&&(yu.totalNodes=yu.resolvedTargetDeltas=yu.recalculatedProjection=0),this.nodes.forEach(U7),this.nodes.forEach(Y7),this.nodes.forEach(Z7),this.nodes.forEach(H7),ap&&window.MotionDebug.record(yu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new T7)}addEventListener(d,p){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new n1),this.eventHandlers.get(d).add(p)}notifyListeners(d,...p){const f=this.eventHandlers.get(d);f&&f.notify(...p)}hasListeners(d){return this.eventHandlers.has(d)}mount(d,p=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=E7(d),this.instance=d;const{layoutId:f,layout:g,visualElement:x}=this.options;if(x&&!x.current&&x.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),p&&(g||f)&&(this.isLayoutDirty=!0),t){let y;const b=()=>this.root.updateBlockedByResize=!1;t(d,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=A7(b,250),yx.hasAnimatedSinceResize&&(yx.hasAnimatedSinceResize=!1,this.nodes.forEach(J2))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&x&&(f||g)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeTargetChanged:w,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||x.getDefaultTransition()||eH,{onLayoutAnimationStart:A,onLayoutAnimationComplete:D}=x.getProps(),P=!this.targetLayout||!vD(this.targetLayout,C)||w,M=!b&&w;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||b&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,M);const N={...XS(_,"layout"),onPlay:A,onComplete:D};(x.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else b||J2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(X7),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const y=this.path[x];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:p,layout:f}=this.options;if(p===void 0&&!f)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Q2);return}this.isUpdating||this.nodes.forEach(q7),this.isUpdating=!1,this.nodes.forEach(G7),this.nodes.forEach(F7),this.nodes.forEach(V7),this.clearAllSnapshots();const p=Uo.now();Is.delta=Ol(0,1e3/60,p-Is.timestamp),Is.timestamp=p,Is.isProcessing=!0,Wy.update.process(Is),Wy.preRender.process(Is),Wy.render.process(Is),Is.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$S.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(W7),this.sharedNodes.forEach(K7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Kr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(p=!1),p){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:f,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!l)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!xD(this.projectionDelta),f=this.getTransformTemplate(),g=f?f(this.latestValues,""):void 0,x=g!==this.prevTransformTemplateValue;d&&(p||vu(this.latestValues)||x)&&(l(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const p=this.measurePageBox();let f=this.removeElementScroll(p);return d&&(f=this.removeTransform(f)),tH(f),{animationId:this.root.animationId,measuredBox:p,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:p}=this.options;if(!p)return Kr();const f=p.measureViewportBox();if(!(((d=this.scroll)===null||d===void 0?void 0:d.wasRoot)||this.path.some(nH))){const{scroll:x}=this.root;x&&(Qd(f.x,x.offset.x),Qd(f.y,x.offset.y))}return f}removeElementScroll(d){var p;const f=Kr();if(Ra(f,d),!((p=this.scroll)===null||p===void 0)&&p.wasRoot)return f;for(let g=0;g<this.path.length;g++){const x=this.path[g],{scroll:y,options:b}=x;x!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&Ra(f,d),Qd(f.x,y.offset.x),Qd(f.y,y.offset.y))}return f}applyTransform(d,p=!1){const f=Kr();Ra(f,d);for(let g=0;g<this.path.length;g++){const x=this.path[g];!p&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Jd(f,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),vu(x.latestValues)&&Jd(f,x.latestValues)}return vu(this.latestValues)&&Jd(f,this.latestValues),f}removeTransform(d){const p=Kr();Ra(p,d);for(let f=0;f<this.path.length;f++){const g=this.path[f];if(!g.instance||!vu(g.latestValues))continue;fb(g.latestValues)&&g.updateSnapshot();const x=Kr(),y=g.measurePageBox();Ra(x,y),W2(p,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,x)}return vu(this.latestValues)&&W2(p,this.latestValues),p}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Is.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var p;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==f;if(!(d||g&&this.isSharedProjectionDirty||this.isProjectionDirty||!((p=this.parent)===null||p===void 0)&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!(!this.layout||!(y||b))){if(this.resolvedRelativeTargetAt=Is.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kr(),this.relativeTargetOrigin=Kr(),wp(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Kr(),this.targetWithTransforms=Kr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ra(this.target,this.layout.layoutBox),dD(this.target,this.targetDelta)):Ra(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kr(),this.relativeTargetOrigin=Kr(),wp(this.relativeTargetOrigin,this.target,w.target),Ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ap&&yu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fb(this.parent.latestValues)||uD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var d;const p=this.getLead(),f=!!this.resumingFrom||this!==p;let g=!0;if((this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty)&&(g=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Is.timestamp&&(g=!1),g)return;const{layout:x,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||y))return;Ra(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,w=this.treeScale.y;p7(this.layoutCorrected,this.treeScale,this.path,f),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=Kr());const{target:C}=p;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(V2(this.prevProjectionDelta.x,this.projectionDelta.x),V2(this.prevProjectionDelta.y,this.projectionDelta.y)),Sp(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==w||!X2(this.projectionDelta.x,this.prevProjectionDelta.x)||!X2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),ap&&yu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){var p;if((p=this.options.visualElement)===null||p===void 0||p.scheduleRender(),d){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Kd(),this.projectionDelta=Kd(),this.projectionDeltaWithTransform=Kd()}setAnimationOrigin(d,p=!1){const f=this.snapshot,g=f?f.latestValues:{},x={...this.latestValues},y=Kd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const b=Kr(),w=f?f.source:void 0,C=this.layout?this.layout.source:void 0,_=w!==C,A=this.getStack(),D=!A||A.members.length<=1,P=!!(_&&!D&&this.options.crossfade===!0&&!this.path.some(J7));this.animationProgress=0;let M;this.mixTargetDelta=N=>{const z=N/1e3;eT(y.x,d.x,z),eT(y.y,d.y,z),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wp(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Q7(this.relativeTarget,this.relativeTargetOrigin,b,z),M&&N7(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Kr()),Ra(M,this.relativeTarget)),_&&(this.animationValues=x,k7(x,g,this.latestValues,z,P,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cr.update(()=>{yx.hasAnimatedSinceResize=!0,this.currentAnimation=C7(0,K2,{...d,onUpdate:p=>{this.mixTargetDelta(p),d.onUpdate&&d.onUpdate(p)},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(K2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:p,target:f,layout:g,latestValues:x}=d;if(!(!p||!f||!g)){if(this!==d&&this.layout&&g&&bD(this.options.animationType,this.layout.layoutBox,g.layoutBox)){f=this.target||Kr();const y=pa(this.layout.layoutBox.x);f.x.min=d.target.x.min,f.x.max=f.x.min+y;const b=pa(this.layout.layoutBox.y);f.y.min=d.target.y.min,f.y.max=f.y.min+b}Ra(p,f),Jd(p,x),Sp(this.projectionDeltaWithTransform,this.layoutCorrected,p,x)}}registerSharedNode(d,p){this.sharedNodes.has(d)||this.sharedNodes.set(d,new L7),this.sharedNodes.get(d).add(p);const g=p.options.initialPromotionConfig;p.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(p):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var d;const{layoutId:p}=this.options;return p?((d=this.getStack())===null||d===void 0?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:p}=this.options;return p?(d=this.getStack())===null||d===void 0?void 0:d.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:p,preserveFollowOpacity:f}={}){const g=this.getStack();g&&g.promote(this,f),d&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let p=!1;const{latestValues:f}=d;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(p=!0),!p)return;const g={};f.z&&tj("z",d,g,this.animationValues);for(let x=0;x<ej.length;x++)tj(`rotate${ej[x]}`,d,g,this.animationValues),tj(`skew${ej[x]}`,d,g,this.animationValues);d.render();for(const x in g)d.setStaticValue(x,g[x]),this.animationValues&&(this.animationValues[x]=g[x]);d.scheduleRender()}getProjectionStyles(d){var p,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return B7;const g={visibility:""},x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=xx(d?.pointerEvents)||"",g.transform=x?x(this.latestValues,""):"none",g;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=xx(d?.pointerEvents)||""),this.hasProjected&&!vu(this.latestValues)&&(_.transform=x?x({},""):"none",this.hasProjected=!1),_}const b=y.animationValues||y.latestValues;this.applyTransformsToTarget(),g.transform=O7(this.projectionDeltaWithTransform,this.treeScale,b),x&&(g.transform=x(b,g.transform));const{x:w,y:C}=this.projectionDelta;g.transformOrigin=`${w.origin*100}% ${C.origin*100}% 0`,y.animationValues?g.opacity=y===this?(f=(p=b.opacity)!==null&&p!==void 0?p:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:g.opacity=y===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const _ in Mx){if(b[_]===void 0)continue;const{correct:A,applyTo:D}=Mx[_],P=g.transform==="none"?b[_]:A(b[_],y);if(D){const M=D.length;for(let N=0;N<M;N++)g[D[N]]=P}else g[_]=P}return this.options.layoutId&&(g.pointerEvents=y===this?xx(d?.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var p;return(p=d.currentAnimation)===null||p===void 0?void 0:p.stop()}),this.root.nodes.forEach(Q2),this.root.sharedNodes.clear()}}}function F7(t){t.updateLayout()}function V7(t){var n;const r=((n=t.resumeFrom)===null||n===void 0?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:l}=t.layout,{animationType:u}=t.options,d=r.source!==t.layout.source;u==="size"?Pa(y=>{const b=d?r.measuredBox[y]:r.layoutBox[y],w=pa(b);b.min=i[y].min,b.max=b.min+w}):bD(u,r.layoutBox,i)&&Pa(y=>{const b=d?r.measuredBox[y]:r.layoutBox[y],w=pa(i[y]);b.max=b.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+w)});const p=Kd();Sp(p,i,r.layoutBox);const f=Kd();d?Sp(f,t.applyTransform(l,!0),r.measuredBox):Sp(f,i,r.layoutBox);const g=!xD(p);let x=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:w}=y;if(b&&w){const C=Kr();wp(C,r.layoutBox,b.layoutBox);const _=Kr();wp(_,i,w.layoutBox),vD(C,_)||(x=!0),y.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=C,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:r,delta:f,layoutDelta:p,hasLayoutChanged:g,hasRelativeTargetChanged:x})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function U7(t){ap&&yu.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function H7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function W7(t){t.clearSnapshot()}function Q2(t){t.clearMeasurements()}function q7(t){t.isLayoutDirty=!1}function G7(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function J2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Y7(t){t.resolveTargetDelta()}function Z7(t){t.calcProjection()}function X7(t){t.resetSkewAndRotation()}function K7(t){t.removeLeadSnapshot()}function eT(t,n,r){t.translate=Lr(n.translate,0,r),t.scale=Lr(n.scale,1,r),t.origin=n.origin,t.originPoint=n.originPoint}function tT(t,n,r,i){t.min=Lr(n.min,r.min,i),t.max=Lr(n.max,r.max,i)}function Q7(t,n,r,i){tT(t.x,n.x,r.x,i),tT(t.y,n.y,r.y,i)}function J7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eH={duration:.45,ease:[.4,0,.1,1]},nT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rT=nT("applewebkit/")&&!nT("chrome/")?Math.round:fa;function sT(t){t.min=rT(t.min),t.max=rT(t.max)}function tH(t){sT(t.x),sT(t.y)}function bD(t,n,r){return t==="position"||t==="preserve-aspect"&&!s7(Z2(n),Z2(r),.2)}function nH(t){var n;return t!==t.root&&((n=t.scroll)===null||n===void 0?void 0:n.wasRoot)}const rH=jD({attachResizeListener:(t,n)=>Vp(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nj={current:void 0},SD=jD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nj.current){const t=new rH({});t.mount(window),t.setOptions({layoutScroll:!0}),nj.current=t}return nj.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sH={pan:{Feature:j7},drag:{Feature:y7,ProjectionNode:SD,MeasureLayout:pD}};function iT(t,n,r){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",r==="Start");const l="onHover"+r,u=i[l];u&&Cr.postRender(()=>u(n,hm(n)))}class iH extends $c{mount(){const{current:n}=this.node;n&&(this.unmount=sU(n,r=>(iT(this.node,r,"Start"),i=>iT(this.node,i,"End"))))}unmount(){}}class aH extends $c{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dm(Vp(this.node.current,"focus",()=>this.onFocus()),Vp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aT(t,n,r){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",r==="Start");const l="onTap"+(r==="End"?"":r),u=i[l];u&&Cr.postRender(()=>u(n,hm(n)))}class oH extends $c{mount(){const{current:n}=this.node;n&&(this.unmount=lU(n,r=>(aT(this.node,r,"Start"),(i,{success:l})=>aT(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mb=new WeakMap,rj=new WeakMap,lH=t=>{const n=mb.get(t.target);n&&n(t)},cH=t=>{t.forEach(lH)};function uH({root:t,...n}){const r=t||document;rj.has(r)||rj.set(r,{});const i=rj.get(r),l=JSON.stringify(n);return i[l]||(i[l]=new IntersectionObserver(cH,{root:t,...n})),i[l]}function dH(t,n,r){const i=uH(n);return mb.set(t,r),i.observe(t),()=>{mb.delete(t),i.unobserve(t)}}const hH={some:0,all:1};class fH extends $c{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:r,margin:i,amount:l="some",once:u}=n,d={root:r?r.current:void 0,rootMargin:i,threshold:typeof l=="number"?l:hH[l]},p=f=>{const{isIntersecting:g}=f;if(this.isInView===g||(this.isInView=g,u&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:x,onViewportLeave:y}=this.node.getProps(),b=g?x:y;b&&b(f)};return dH(this.node.current,d,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:r}=this.node;["amount","margin","root"].some(pH(n,r))&&this.startObserver()}unmount(){}}function pH({viewport:t={}},{viewport:n={}}={}){return r=>t[r]!==n[r]}const mH={inView:{Feature:fH},tap:{Feature:oH},focus:{Feature:aH},hover:{Feature:iH}},gH={layout:{ProjectionNode:SD,MeasureLayout:pD}},gb={current:null},wD={current:!1};function xH(){if(wD.current=!0,!!IS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>gb.current=t.matches;t.addListener(n),n()}else gb.current=!1}const vH=[...Yk,Qs,Mc],yH=t=>vH.find(Gk(t)),oT=new WeakMap;function jH(t,n,r){for(const i in n){const l=n[i],u=r[i];if(Js(l))t.addValue(i,l);else if(Js(u))t.addValue(i,$p(l,{owner:t}));else if(u!==l)if(t.hasValue(i)){const d=t.getValue(i);d.liveStyle===!0?d.jump(l):d.hasAnimated||d.set(l)}else{const d=t.getStaticValue(i);t.addValue(i,$p(d!==void 0?d:l,{owner:t}))}}for(const i in r)n[i]===void 0&&t.removeValue(i);return n}const lT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bH{scrapeMotionValuesFromProps(n,r,i){return{}}constructor({parent:n,props:r,presenceContext:i,reducedMotionConfig:l,blockInitialAnimation:u,visualState:d},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=l1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Uo.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Cr.render(this.render,!1,!0))};const{latestValues:f,renderState:g,onUpdate:x}=d;this.onUpdate=x,this.latestValues=f,this.baseTarget={...f},this.initialValues=r.initial?{...f}:{},this.renderState=g,this.parent=n,this.props=r,this.presenceContext=i,this.depth=n?n.depth+1:0,this.reducedMotionConfig=l,this.options=p,this.blockInitialAnimation=!!u,this.isControllingVariants=mv(r),this.isVariantNode=nk(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(r,{},this);for(const w in b){const C=b[w];f[w]!==void 0&&Js(C)&&C.set(f[w],!1)}}mount(n){this.current=n,oT.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),wD.current||xH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oT.delete(this.current),this.projection&&this.projection.unmount(),Pc(this.notifyUpdate),Pc(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(n,r){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const i=Yu.has(n),l=r.on("change",p=>{this.latestValues[n]=p,this.props.onUpdate&&Cr.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),u=r.on("renderRequest",this.scheduleRender);let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,n,r)),this.valueSubscriptions.set(n,()=>{l(),u(),d&&d(),r.owner&&r.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in bh){const r=bh[n];if(!r)continue;const{isEnabled:i,Feature:l}=r;if(!this.features[n]&&l&&i(this.props)&&(this.features[n]=new l(this)),this.features[n]){const u=this.features[n];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kr()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,r){this.latestValues[n]=r}update(n,r){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<lT.length;i++){const l=lT[i];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,d=n[u];d&&(this.propEventSubscriptions[l]=this.on(l,d))}this.prevMotionValues=jH(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(n),()=>r.variantChildren.delete(n)}addValue(n,r){const i=this.values.get(n);r!==i&&(i&&this.removeValue(n),this.bindToMotionValue(n,r),this.values.set(n,r),this.latestValues[n]=r.get())}removeValue(n){this.values.delete(n);const r=this.valueSubscriptions.get(n);r&&(r(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,r){if(this.props.values&&this.props.values[n])return this.props.values[n];let i=this.values.get(n);return i===void 0&&r!==void 0&&(i=$p(r===null?void 0:r,{owner:this}),this.addValue(n,i)),i}readValue(n,r){var i;let l=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:(i=this.getBaseTargetFromProps(this.props,n))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,n,this.options);return l!=null&&(typeof l=="string"&&(Wk(l)||Nk(l))?l=parseFloat(l):!yH(l)&&Mc.test(r)&&(l=Vk(n,r)),this.setBaseTarget(n,Js(l)?l.get():l)),Js(l)?l.get():l}setBaseTarget(n,r){this.baseTarget[n]=r}getBaseTarget(n){var r;const{initial:i}=this.props;let l;if(typeof i=="string"||typeof i=="object"){const d=VS(this.props,i,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);d&&(l=d[n])}if(i&&l!==void 0)return l;const u=this.getBaseTargetFromProps(this.props,n);return u!==void 0&&!Js(u)?u:this.initialValues[n]!==void 0&&l===void 0?void 0:this.baseTarget[n]}on(n,r){return this.events[n]||(this.events[n]=new n1),this.events[n].add(r)}notify(n,...r){this.events[n]&&this.events[n].notify(...r)}}class CD extends bH{constructor(){super(...arguments),this.KeyframeResolver=Zk}sortInstanceNodePosition(n,r){return n.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(n,r){return n.style?n.style[r]:void 0}removeValueFromRenderState(n,{vars:r,style:i}){delete r[n],delete i[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;Js(n)&&(this.childSubscription=n.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function SH(t){return window.getComputedStyle(t)}class wH extends CD{constructor(){super(...arguments),this.type="html",this.renderInstance=dk}readValueFromInstance(n,r){if(Yu.has(r)){const i=o1(r);return i&&i.default||0}else{const i=SH(n),l=(lk(r)?i.getPropertyValue(r):i[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(n,{transformPagePoint:r}){return hD(n,r)}build(n,r,i){WS(n,r,i.transformTemplate)}scrapeMotionValuesFromProps(n,r,i){return ZS(n,r,i)}}class CH extends CD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kr}getBaseTargetFromProps(n,r){return n[r]}readValueFromInstance(n,r){if(Yu.has(r)){const i=o1(r);return i&&i.default||0}return r=hk.has(r)?r:BS(r),n.getAttribute(r)}scrapeMotionValuesFromProps(n,r,i){return mk(n,r,i)}build(n,r,i){qS(n,r,this.isSVGTag,i.transformTemplate)}renderInstance(n,r,i,l){fk(n,r,i,l)}mount(n){this.isSVGTag=YS(n.tagName),super.mount(n)}}const EH=(t,n)=>FS(t)?new CH(n):new wH(n,{allowProjection:t!==v.Fragment}),_H=KV({...Z9,...mH,...sH,...gH},EH),Qo=hV(_H),TH=(t,n)=>t.find(r=>r.id===n);function cT(t,n){const r=ED(t,n),i=r?t[r].findIndex(l=>l.id===n):-1;return{position:r,index:i}}function ED(t,n){for(const[r,i]of Object.entries(t))if(TH(i,n))return r}function AH(t){const n=t.includes("right"),r=t.includes("left");let i="center";return n&&(i="flex-end"),r&&(i="flex-start"),{display:"flex",flexDirection:"column",alignItems:i}}function RH(t){const r=t==="top"||t==="bottom"?"0 auto":void 0,i=t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,l=t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,u=t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",d=t.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:r,top:i,bottom:l,right:u,left:d}}var kH=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,DH=$R(function(t){return kH.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),PH=DH,MH=function(n){return n!=="theme"},uT=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?PH:MH},dT=function(n,r,i){var l;if(r){var u=r.shouldForwardProp;l=n.__emotion_forwardProp&&u?function(d){return n.__emotion_forwardProp(d)&&u(d)}:u}return typeof l!="function"&&i&&(l=n.__emotion_forwardProp),l},zH=function(n){var r=n.cache,i=n.serialized,l=n.isStringTag;return CS(r,i,l),WR(function(){return ES(r,i,l)}),null},IH=function t(n,r){var i=n.__emotion_real===n,l=i&&n.__emotion_base||n,u,d;r!==void 0&&(u=r.label,d=r.target);var p=dT(n,r,i),f=p||uT(l),g=!f("as");return function(){var x=arguments,y=i&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(u!==void 0&&y.push("label:"+u+";"),x[0]==null||x[0].raw===void 0)y.push.apply(y,x);else{var b=x[0];y.push(b[0]);for(var w=x.length,C=1;C<w;C++)y.push(x[C],b[C])}var _=TS(function(A,D,P){var M=g&&A.as||l,N="",z=[],I=A;if(A.theme==null){I={};for(var V in A)I[V]=A[V];I.theme=v.useContext(yh)}typeof A.className=="string"?N=VR(D.registered,z,A.className):A.className!=null&&(N=A.className+" ");var $=uv(y.concat(z),D.registered,I);N+=D.key+"-"+$.name,d!==void 0&&(N+=" "+d);var ae=g&&p===void 0?uT(M):f,he={};for(var re in A)g&&re==="as"||ae(re)&&(he[re]=A[re]);return he.className=N,P&&(he.ref=P),v.createElement(v.Fragment,null,v.createElement(zH,{cache:D,serialized:$,isStringTag:typeof M=="string"}),v.createElement(M,he))});return _.displayName=u!==void 0?u:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",_.defaultProps=n.defaultProps,_.__emotion_real=_,_.__emotion_base=l,_.__emotion_styles=y,_.__emotion_forwardProp=p,Object.defineProperty(_,"toString",{value:function(){return"."+d}}),_.withComponent=function(A,D){var P=t(A,Bu({},r,D,{shouldForwardProp:dT(_,D,!0)}));return P.apply(void 0,y)},_}},NH=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],xb=IH.bind(null);NH.forEach(function(t){xb[t]=xb(t)});const LH=new Set([...r4,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),OH=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function BH(t){return(OH.has(t)||!LH.has(t))&&t[0]!=="_"}const $H=$L(xb),FH=({baseStyle:t})=>n=>{const{theme:r,css:i,__css:l,sx:u,...d}=n,[p]=YL(d,i4),f=ca(t,n),g=_L({},l,f,nm(p),u),x=vR(g)(n.theme);return i?[x,i]:x};function sj(t,n){const{baseStyle:r,...i}=n??{};i.shouldForwardProp||(i.shouldForwardProp=BH);const l=FH({baseStyle:r}),u=$H(t,i)(l);return v.forwardRef(function(f,g){const{children:x,...y}=f,{colorMode:b,forced:w}=hv(),C=w?b:void 0;return v.createElement(u,{ref:g,"data-theme":C,...y},x)})}function VH(){const t=new Map;return new Proxy(sj,{apply(n,r,i){return sj(...i)},get(n,r){return t.has(r)||t.set(r,sj(r)),t.get(r)}})}const He=VH(),UH={initial:t=>{const{position:n}=t,r=["top","bottom"].includes(n)?"y":"x";let i=["top-right","bottom-right"].includes(n)?1:-1;return n==="bottom"&&(i=1),{opacity:0,[r]:i*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},_D=v.memo(t=>{const{id:n,message:r,onCloseComplete:i,onRequestRemove:l,requestClose:u=!1,position:d="bottom",duration:p=5e3,containerStyle:f,motionVariants:g=UH,toastSpacing:x="0.5rem"}=t,[y,b]=v.useState(p),w=rV();Dc(()=>{w||i?.()},[w]),Dc(()=>{b(p)},[p]);const C=()=>b(null),_=()=>b(p),A=()=>{w&&l()};v.useEffect(()=>{w&&u&&l()},[w,u,l]),oO(A,y);const D=v.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:x,...f}),[f,x]),P=v.useMemo(()=>AH(d),[d]);return e.jsx(Qo.div,{layout:!0,className:"chakra-toast",variants:g,initial:"initial",animate:"animate",exit:"exit",onHoverStart:C,onHoverEnd:_,custom:{position:d},style:P,children:e.jsx(He.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:D,children:ca(r,{id:n,onClose:A})})})});_D.displayName="ToastComponent";function tt(t){return v.forwardRef(t)}var ij,hT;function HH(){if(hT)return ij;hT=1;var t=typeof Element<"u",n=typeof Map=="function",r=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function l(u,d){if(u===d)return!0;if(u&&d&&typeof u=="object"&&typeof d=="object"){if(u.constructor!==d.constructor)return!1;var p,f,g;if(Array.isArray(u)){if(p=u.length,p!=d.length)return!1;for(f=p;f--!==0;)if(!l(u[f],d[f]))return!1;return!0}var x;if(n&&u instanceof Map&&d instanceof Map){if(u.size!==d.size)return!1;for(x=u.entries();!(f=x.next()).done;)if(!d.has(f.value[0]))return!1;for(x=u.entries();!(f=x.next()).done;)if(!l(f.value[1],d.get(f.value[0])))return!1;return!0}if(r&&u instanceof Set&&d instanceof Set){if(u.size!==d.size)return!1;for(x=u.entries();!(f=x.next()).done;)if(!d.has(f.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(u)&&ArrayBuffer.isView(d)){if(p=u.length,p!=d.length)return!1;for(f=p;f--!==0;)if(u[f]!==d[f])return!1;return!0}if(u.constructor===RegExp)return u.source===d.source&&u.flags===d.flags;if(u.valueOf!==Object.prototype.valueOf&&typeof u.valueOf=="function"&&typeof d.valueOf=="function")return u.valueOf()===d.valueOf();if(u.toString!==Object.prototype.toString&&typeof u.toString=="function"&&typeof d.toString=="function")return u.toString()===d.toString();if(g=Object.keys(u),p=g.length,p!==Object.keys(d).length)return!1;for(f=p;f--!==0;)if(!Object.prototype.hasOwnProperty.call(d,g[f]))return!1;if(t&&u instanceof Element)return!1;for(f=p;f--!==0;)if(!((g[f]==="_owner"||g[f]==="__v"||g[f]==="__o")&&u.$$typeof)&&!l(u[g[f]],d[g[f]]))return!1;return!0}return u!==u&&d!==d}return ij=function(d,p){try{return l(d,p)}catch(f){if((f.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw f}},ij}var WH=HH();const qH=Jp(WH);function Fc(){const t=v.useContext(yh);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}function TD(){const t=hv(),n=Fc();return{...t,theme:n}}function GH(t,n,r){if(n==null)return n;const i=l=>t.__cssMap?.[l]?.value;return i(n)??i(r)??r}function YH(t,n,r){const i=Array.isArray(n)?n:[n],l=Array.isArray(r)?r:[r];return u=>{const d=l.filter(Boolean),p=i.map((f,g)=>{const x=`${t}.${f}`;return GH(u,x,d[g]??f)});return Array.isArray(n)?p:p[0]}}function ZH(t){return Object.fromEntries(Object.entries(t).filter(([n,r])=>r!==void 0&&n!=="children"&&!v.isValidElement(r)))}function AD(t,n={}){const{styleConfig:r,...i}=n,{theme:l,colorMode:u}=TD(),d=t?rR(l,`components.${t}`):void 0,p=r||d,f=Ia({theme:l,colorMode:u},p?.defaultProps??{},ZH(i),(x,y)=>x?void 0:y),g=v.useRef({});if(p){const y=g4(p)(f);qH(g.current,y)||(g.current=y)}return g.current}function ji(t,n={}){return AD(t,n)}function Jr(t,n={}){return AD(t,n)}const fT={path:e.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),e.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),e.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Cn=tt((t,n)=>{const{as:r,viewBox:i,color:l="currentColor",focusable:u=!1,children:d,className:p,__css:f,...g}=t,x=gt("chakra-icon",p),y=ji("Icon",t),b={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:l,...f,...y},w={ref:n,focusable:u,className:x,__css:b},C=i??fT.viewBox;if(r&&typeof r!="string")return e.jsx(He.svg,{as:r,...w,...g});const _=d??fT.path;return e.jsx(He.svg,{verticalAlign:"middle",viewBox:C,...w,...g,children:_})});Cn.displayName="Icon";function XH(t){return e.jsx(Cn,{viewBox:"0 0 24 24",...t,children:e.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function KH(t){return e.jsx(Cn,{viewBox:"0 0 24 24",...t,children:e.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function pT(t){return e.jsx(Cn,{viewBox:"0 0 24 24",...t,children:e.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}const QH=Oc({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),pn=tt((t,n)=>{const r=ji("Spinner",t),{label:i="Loading...",thickness:l="2px",speed:u="0.45s",emptyColor:d="transparent",className:p,...f}=Yn(t),g=gt("chakra-spinner",p),x={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:l,borderBottomColor:d,borderLeftColor:d,animation:`${QH} ${u} linear infinite`,...r};return e.jsx(He.div,{ref:n,__css:x,className:g,...f,children:i&&e.jsx(He.span,{srOnly:!0,children:i})})});pn.displayName="Spinner";const[JH,h1]=Vn({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[eW,f1]=Vn({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),RD={info:{icon:KH,colorScheme:"blue"},warning:{icon:pT,colorScheme:"orange"},success:{icon:XH,colorScheme:"green"},error:{icon:pT,colorScheme:"red"},loading:{icon:pn,colorScheme:"blue"}};function tW(t){return RD[t].colorScheme}function nW(t){return RD[t].icon}const Ut=tt(function(n,r){const{status:i="info",addRole:l=!0,...u}=Yn(n),d=n.colorScheme??tW(i),p=Jr("Alert",{...n,colorScheme:d}),f={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...p.container};return e.jsx(JH,{value:{status:i},children:e.jsx(eW,{value:p,children:e.jsx(He.div,{"data-status":i,role:l?"alert":void 0,ref:r,...u,className:gt("chakra-alert",n.className),__css:f})})})});Ut.displayName="Alert";function Ht(t){const{status:n}=h1(),r=nW(n),i=f1(),l=n==="loading"?i.spinner:i.icon;return e.jsx(He.span,{display:"inherit","data-status":n,...t,className:gt("chakra-alert__icon",t.className),__css:l,children:t.children||e.jsx(r,{h:"100%",w:"100%"})})}Ht.displayName="AlertIcon";const kD=tt(function(n,r){const i=f1(),{status:l}=h1();return e.jsx(He.div,{ref:r,"data-status":l,...n,className:gt("chakra-alert__title",n.className),__css:i.title})});kD.displayName="AlertTitle";const DD=tt(function(n,r){const{status:i}=h1(),l=f1(),u={display:"inline",...l.description};return e.jsx(He.div,{ref:r,"data-status":i,...n,className:gt("chakra-alert__desc",n.className),__css:u})});DD.displayName="AlertDescription";function rW(t){return e.jsx(Cn,{focusable:"false","aria-hidden":!0,...t,children:e.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}const p1=tt(function(n,r){const i=ji("CloseButton",n),{children:l,isDisabled:u,__css:d,...p}=Yn(n),f={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return e.jsx(He.button,{type:"button","aria-label":"Close",ref:r,disabled:u,__css:{...f,...i,...d},...p,children:l||e.jsx(rW,{width:"1em",height:"1em"})})});p1.displayName="CloseButton";const sW=t=>{const{status:n,variant:r="solid",id:i,title:l,isClosable:u,onClose:d,description:p,colorScheme:f,icon:g}=t,x=i?{root:`toast-${i}`,title:`toast-${i}-title`,description:`toast-${i}-description`}:void 0;return e.jsxs(Ut,{addRole:!1,status:n,variant:r,id:x?.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:f,children:[e.jsx(Ht,{children:g}),e.jsxs(He.div,{flex:"1",maxWidth:"100%",children:[l&&e.jsx(kD,{id:x?.title,children:l}),p&&e.jsx(DD,{id:x?.description,display:"block",children:p})]}),u&&e.jsx(p1,{size:"sm",onClick:d,position:"absolute",insetEnd:1,top:1})]})};function PD(t={}){const{render:n,toastComponent:r=sW}=t;return l=>typeof n=="function"?n({...l,...t}):e.jsx(r,{...l,...t})}const iW={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Lo=aW(iW);function aW(t){let n=t;const r=new Set,i=l=>{n=l(n),r.forEach(u=>u())};return{getState:()=>n,subscribe:l=>(r.add(l),()=>{i(()=>t),r.delete(l)}),removeToast:(l,u)=>{i(d=>({...d,[u]:d[u].filter(p=>p.id!=l)}))},notify:(l,u)=>{const d=oW(l,u),{position:p,id:f}=d;return i(g=>{const y=p.includes("top")?[d,...g[p]??[]]:[...g[p]??[],d];return{...g,[p]:y}}),f},update:(l,u)=>{l&&i(d=>{const p={...d},{position:f,index:g}=cT(p,l);return f&&g!==-1&&(p[f][g]={...p[f][g],...u,message:PD(u)}),p})},closeAll:({positions:l}={})=>{i(u=>(l??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((f,g)=>(f[g]=u[g].map(x=>({...x,requestClose:!0})),f),{...u}))},close:l=>{i(u=>{const d=ED(u,l);return d?{...u,[d]:u[d].map(p=>p.id==l?{...p,requestClose:!0}:p)}:u})},isActive:l=>!!cT(Lo.getState(),l).position}}let mT=0;function oW(t,n={}){mT+=1;const r=n.id??mT,i=n.position??"bottom";return{id:r,message:t,position:i,duration:n.duration,onCloseComplete:n.onCloseComplete,onRequestRemove:()=>Lo.removeToast(String(r),i),status:n.status,requestClose:!1,containerStyle:n.containerStyle}}const[MD,lW]=Vn({strict:!1,name:"PortalContext"}),m1="chakra-portal",cW=".chakra-portal",uW=t=>e.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),dW=t=>{const{appendToParentPortal:n,children:r}=t,[i,l]=v.useState(null),u=v.useRef(null),[,d]=v.useState({});v.useEffect(()=>d({}),[]);const p=lW(),f=X8();Dl(()=>{if(!i)return;const x=i.ownerDocument,y=n?p??x.body:x.body;if(!y)return;u.current=x.createElement("div"),u.current.className=m1,y.appendChild(u.current),d({});const b=u.current;return()=>{y.contains(b)&&y.removeChild(b)}},[i]);const g=f?.zIndex?e.jsx(uW,{zIndex:f?.zIndex,children:r}):r;return u.current?dS.createPortal(e.jsx(MD,{value:u.current,children:g}),u.current):e.jsx("span",{ref:x=>{x&&l(x)}})},hW=t=>{const{children:n,containerRef:r,appendToParentPortal:i}=t,l=r.current,u=l??(typeof window<"u"?document.body:void 0),d=v.useMemo(()=>{const f=l?.ownerDocument.createElement("div");return f&&(f.className=m1),f},[l]),[,p]=v.useState({});return Dl(()=>p({}),[]),Dl(()=>{if(!(!d||!u))return u.appendChild(d),()=>{u.removeChild(d)}},[d,u]),u&&d?dS.createPortal(e.jsx(MD,{value:i?d:null,children:n}),d):null};function Oh(t){const n={appendToParentPortal:!0,...t},{containerRef:r,...i}=n;return r?e.jsx(hW,{containerRef:r,...i}):e.jsx(dW,{...i})}Oh.className=m1;Oh.selector=cW;Oh.displayName="Portal";const[fW,pW]=Vn({name:"ToastOptionsContext",strict:!1}),mW=t=>{const n=v.useSyncExternalStore(Lo.subscribe,Lo.getState,Lo.getState),{motionVariants:r,component:i=_D,portalProps:l,animatePresenceProps:u}=t,p=Object.keys(n).map(f=>{const g=n[f];return e.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${f}`,id:`chakra-toast-manager-${f}`,style:RH(f),children:e.jsx(Bc,{...u,initial:!1,children:g.map(x=>e.jsx(i,{motionVariants:r,...x},x.id))})},f)});return e.jsx(Oh,{...l,children:p})},gW=t=>function({children:r,theme:i=t,toastOptions:l,...u}){return e.jsxs(Q8,{theme:i,...u,children:[e.jsx(fW,{value:l?.defaultOptions,children:r}),e.jsx(mW,{...l})]})},xW=gW(MR);function gT(t){return t.sort((n,r)=>{const i=n.compareDocumentPosition(r);if(i&Node.DOCUMENT_POSITION_FOLLOWING||i&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(i&Node.DOCUMENT_POSITION_PRECEDING||i&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(i&Node.DOCUMENT_POSITION_DISCONNECTED||i&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const vW=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function xT(t,n,r){let i=t+1;return r&&i>=n&&(i=0),i}function vT(t,n,r){let i=t-1;return r&&i<0&&(i=n),i}const aj=typeof window<"u"?v.useLayoutEffect:v.useEffect,yT=t=>t;var yW=Object.defineProperty,jW=(t,n,r)=>n in t?yW(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Ur=(t,n,r)=>(jW(t,typeof n!="symbol"?n+"":n,r),r);class bW{constructor(){Ur(this,"descendants",new Map),Ur(this,"register",n=>{if(n!=null)return vW(n)?this.registerNode(n):r=>{this.registerNode(r,n)}}),Ur(this,"unregister",n=>{this.descendants.delete(n);const r=gT(Array.from(this.descendants.keys()));this.assignIndex(r)}),Ur(this,"destroy",()=>{this.descendants.clear()}),Ur(this,"assignIndex",n=>{this.descendants.forEach(r=>{const i=n.indexOf(r.node);r.index=i,r.node.dataset.index=r.index.toString()})}),Ur(this,"count",()=>this.descendants.size),Ur(this,"enabledCount",()=>this.enabledValues().length),Ur(this,"values",()=>Array.from(this.descendants.values()).sort((r,i)=>r.index-i.index)),Ur(this,"enabledValues",()=>this.values().filter(n=>!n.disabled)),Ur(this,"item",n=>{if(this.count()!==0)return this.values()[n]}),Ur(this,"enabledItem",n=>{if(this.enabledCount()!==0)return this.enabledValues()[n]}),Ur(this,"first",()=>this.item(0)),Ur(this,"firstEnabled",()=>this.enabledItem(0)),Ur(this,"last",()=>this.item(this.descendants.size-1)),Ur(this,"lastEnabled",()=>{const n=this.enabledValues().length-1;return this.enabledItem(n)}),Ur(this,"indexOf",n=>n?this.descendants.get(n)?.index??-1:-1),Ur(this,"enabledIndexOf",n=>n==null?-1:this.enabledValues().findIndex(r=>r.node.isSameNode(n))),Ur(this,"next",(n,r=!0)=>{const i=xT(n,this.count(),r);return this.item(i)}),Ur(this,"nextEnabled",(n,r=!0)=>{const i=this.item(n);if(!i)return;const l=this.enabledIndexOf(i.node),u=xT(l,this.enabledCount(),r);return this.enabledItem(u)}),Ur(this,"prev",(n,r=!0)=>{const i=vT(n,this.count()-1,r);return this.item(i)}),Ur(this,"prevEnabled",(n,r=!0)=>{const i=this.item(n);if(!i)return;const l=this.enabledIndexOf(i.node),u=vT(l,this.enabledCount()-1,r);return this.enabledItem(u)}),Ur(this,"registerNode",(n,r)=>{if(!n||this.descendants.has(n))return;const i=Array.from(this.descendants.keys()).concat(n),l=gT(i);r?.disabled&&(r.disabled=!!r.disabled);const u={node:n,index:-1,...r};this.descendants.set(n,u),this.assignIndex(l)})}}function vv(){const[t,n]=Vn({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});return[t,n,()=>{const l=v.useRef(new bW);return aj(()=>()=>l.current.destroy()),l.current},l=>{const u=n(),[d,p]=v.useState(-1),f=v.useRef(null);aj(()=>()=>{f.current&&u.unregister(f.current)},[]),aj(()=>{if(!f.current)return;const x=Number(f.current.dataset.index);d!=x&&!Number.isNaN(x)&&p(x)});const g=yT(l?u.register(l):u.register);return{descendants:u,index:d,enabledIndex:u.enabledIndexOf(f.current),register:kr(g,f)}}]}const[SW,yv]=Vn({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[wW,g1]=Vn({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[CW,ene,EW,_W]=vv();function TW(t){const{onChange:n,defaultIndex:r,index:i,allowMultiple:l,allowToggle:u,...d}=t;kW(t),DW(t);const p=EW(),[f,g]=v.useState(-1);v.useEffect(()=>()=>{g(-1)},[]);const[x,y]=zh({value:i,defaultValue(){return l?r??[]:r??-1},onChange:n});return{index:x,setIndex:y,htmlProps:d,getAccordionItemProps:w=>{let C=!1;return w!==null&&(C=Array.isArray(x)?x.includes(w):x===w),{isOpen:C,onChange:A=>{if(w!==null)if(l&&Array.isArray(x)){const D=A?x.concat(w):x.filter(P=>P!==w);y(D)}else A?y(w):u&&y(-1)}}},focusedIndex:f,setFocusedIndex:g,descendants:p}}const[AW,x1]=Vn({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function RW(t){const{isDisabled:n,isFocusable:r,id:i,...l}=t,{getAccordionItemProps:u,setFocusedIndex:d}=x1(),p=v.useRef(null),f=v.useId(),g=i??f,x=`accordion-button-${g}`,y=`accordion-panel-${g}`;PW(t);const{register:b,index:w,descendants:C}=_W({disabled:n&&!r}),{isOpen:_,onChange:A}=u(w===-1?null:w);MW({isOpen:_,isDisabled:n});const D=()=>{A?.(!0)},P=()=>{A?.(!1)},M=v.useCallback(()=>{A?.(!_),d(w)},[w,d,_,A]),N=v.useCallback($=>{const he={ArrowDown:()=>{C.nextEnabled(w)?.node.focus()},ArrowUp:()=>{C.prevEnabled(w)?.node.focus()},Home:()=>{C.firstEnabled()?.node.focus()},End:()=>{C.lastEnabled()?.node.focus()}}[$.key];he&&($.preventDefault(),he($))},[C,w]),z=v.useCallback(()=>{d(w)},[d,w]),I=v.useCallback(function(ae={},he=null){return{...ae,type:"button",ref:kr(b,p,he),id:x,disabled:!!n,"aria-expanded":!!_,"aria-controls":y,onClick:sn(ae.onClick,M),onFocus:sn(ae.onFocus,z),onKeyDown:sn(ae.onKeyDown,N)}},[x,n,_,M,z,N,y,b]),V=v.useCallback(function(ae={},he=null){return{...ae,ref:he,role:"region",id:y,"aria-labelledby":x,hidden:!_}},[x,_,y]);return{isOpen:_,isDisabled:n,isFocusable:r,onOpen:D,onClose:P,getButtonProps:I,getPanelProps:V,htmlProps:l}}function kW(t){const n=t.index||t.defaultIndex,r=n!=null&&!Array.isArray(n)&&t.allowMultiple;sm({condition:!!r,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof n},`})}function DW(t){sm({condition:!!(t.allowMultiple&&t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function PW(t){sm({condition:!!(t.isFocusable&&!t.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function MW(t){sm({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}const zD=tt(function({children:n,reduceMotion:r,...i},l){const u=Jr("Accordion",i),d=Yn(i),{htmlProps:p,descendants:f,...g}=TW(d),x=v.useMemo(()=>({...g,reduceMotion:!!r}),[g,r]);return e.jsx(CW,{value:f,children:e.jsx(AW,{value:x,children:e.jsx(SW,{value:u,children:e.jsx(He.div,{ref:l,...p,className:gt("chakra-accordion",i.className),__css:u.root,children:n})})})})});zD.displayName="Accordion";const ID=tt(function(n,r){const{getButtonProps:i}=g1(),l=i(n,r),d={display:"flex",alignItems:"center",width:"100%",outline:0,...yv().button};return e.jsx(He.button,{...l,className:gt("chakra-accordion__button",n.className),__css:d})});ID.displayName="AccordionButton";function ND(t){const{isOpen:n,isDisabled:r}=g1(),{reduceMotion:i}=x1(),l=gt("chakra-accordion__icon",t.className),u=yv(),d={opacity:r?.4:1,transform:n?"rotate(-180deg)":void 0,transition:i?void 0:"transform 0.2s",transformOrigin:"center",...u.icon};return e.jsx(Cn,{viewBox:"0 0 24 24","aria-hidden":!0,className:l,__css:d,...t,children:e.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}ND.displayName="AccordionIcon";const LD=tt(function(n,r){const{children:i,className:l}=n,{htmlProps:u,...d}=RW(n),p=yv(),f={...p.container,overflowAnchor:"none"},g=v.useMemo(()=>d,[d]);return e.jsx(wW,{value:g,children:e.jsx(He.div,{ref:r,...u,className:gt("chakra-accordion__item",l),__css:f,children:typeof i=="function"?i({isExpanded:!!d.isOpen,isDisabled:!!d.isDisabled}):i})})});LD.displayName="AccordionItem";const Cu={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},Uf={slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function vb(t){switch(t?.direction??"right"){case"right":return Uf.slideRight;case"left":return Uf.slideLeft;case"bottom":return Uf.slideDown;case"top":return Uf.slideUp;default:return Uf.slideRight}}const Mu={enter:{duration:.2,ease:Cu.easeOut},exit:{duration:.1,ease:Cu.easeIn}},lo={enter:(t,n)=>({...t,delay:typeof n=="number"?n:n?.enter}),exit:(t,n)=>({...t,delay:typeof n=="number"?n:n?.exit})},zW=t=>t!=null&&parseInt(t.toString(),10)>0,jT={exit:{height:{duration:.2,ease:Cu.ease},opacity:{duration:.3,ease:Cu.ease}},enter:{height:{duration:.3,ease:Cu.ease},opacity:{duration:.4,ease:Cu.ease}}},IW={exit:({animateOpacity:t,startingHeight:n,transition:r,transitionEnd:i,delay:l})=>({...t&&{opacity:zW(n)?1:0},height:n,transitionEnd:i?.exit,transition:r?.exit??lo.exit(jT.exit,l)}),enter:({animateOpacity:t,endingHeight:n,transition:r,transitionEnd:i,delay:l})=>({...t&&{opacity:1},height:n,transitionEnd:i?.enter,transition:r?.enter??lo.enter(jT.enter,l)})},v1=v.forwardRef((t,n)=>{const{in:r,unmountOnExit:i,animateOpacity:l=!0,startingHeight:u=0,endingHeight:d="auto",style:p,className:f,transition:g,transitionEnd:x,animatePresenceProps:y,...b}=t,[w,C]=v.useState(!1);v.useEffect(()=>{const M=setTimeout(()=>{C(!0)});return()=>clearTimeout(M)},[]),sm({condition:Number(u)>0&&!!i,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const _=parseFloat(u.toString())>0,A={startingHeight:u,endingHeight:d,animateOpacity:l,transition:w?g:{enter:{duration:0}},transitionEnd:{enter:x?.enter,exit:i?x?.exit:{...x?.exit,display:_?"block":"none"}}},D=i?r:!0,P=r||i?"enter":"exit";return e.jsx(Bc,{...y,initial:!1,custom:A,children:D&&e.jsx(Qo.div,{ref:n,...b,className:gt("chakra-collapse",f),style:{overflow:"hidden",display:"block",...p},custom:A,variants:IW,initial:i?"exit":!1,animate:P,exit:"exit"})})});v1.displayName="Collapse";const OD=tt(function(n,r){const{className:i,motionProps:l,...u}=n,{reduceMotion:d}=x1(),{getPanelProps:p,isOpen:f}=g1(),g=p(u,r),x=gt("chakra-accordion__panel",i),y=yv();d||delete g.hidden;const b=e.jsx(He.div,{...g,__css:y.panel,className:x});return d?b:e.jsx(v1,{in:f,...l,children:b})});OD.displayName="AccordionPanel";const[NW,LW]=Vn({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});function OW(t){const n=t.trim().split(" "),r=n[0]??"",i=n.length>1?n[n.length-1]:"";return r&&i?`${r.charAt(0)}${i.charAt(0)}`:r.charAt(0)}function BD(t){const{name:n,getInitials:r,...i}=t,l=LW();return e.jsx(He.div,{role:"img","aria-label":n,...i,__css:l.label,children:n?r?.(n):null})}BD.displayName="AvatarName";const $D=t=>e.jsxs(He.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...t,children:[e.jsx("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),e.jsx("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]});function FD(t){const{loading:n,src:r,srcSet:i,onLoad:l,onError:u,crossOrigin:d,sizes:p,ignoreFallback:f}=t,[g,x]=v.useState("pending");v.useEffect(()=>{x(r?"loading":"pending")},[r]);const y=v.useRef(null),b=v.useCallback(()=>{if(!r)return;w();const C=new Image;C.src=r,d&&(C.crossOrigin=d),i&&(C.srcset=i),p&&(C.sizes=p),n&&(C.loading=n),C.onload=_=>{w(),x("loaded"),l?.(_)},C.onerror=_=>{w(),x("failed"),u?.(_)},y.current=C},[r,d,i,p,l,u,n]),w=()=>{y.current&&(y.current.onload=null,y.current.onerror=null,y.current=null)};return Dl(()=>{if(!f)return g==="loading"&&b(),()=>{w()}},[g,b,f]),f?"loaded":g}const BW=(t,n)=>t!=="loaded"&&n==="beforeLoadOrError"||t==="failed"&&n==="onError";function VD(t){const{src:n,srcSet:r,onError:i,onLoad:l,getInitials:u,name:d,borderRadius:p,loading:f,iconLabel:g,icon:x=e.jsx($D,{}),ignoreFallback:y,referrerPolicy:b,crossOrigin:w}=t,_=FD({src:n,onError:i,crossOrigin:w,ignoreFallback:y})==="loaded";return!n||!_?d?e.jsx(BD,{className:"chakra-avatar__initials",getInitials:u,name:d}):v.cloneElement(x,{role:"img","aria-label":g}):e.jsx(He.img,{src:n,srcSet:r,alt:d??g,onLoad:l,referrerPolicy:b,crossOrigin:w??void 0,className:"chakra-avatar__img",loading:f,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:p}})}VD.displayName="AvatarImage";const $W={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},UD=tt((t,n)=>{const r=Jr("Avatar",t),[i,l]=v.useState(!1),{src:u,srcSet:d,name:p,showBorder:f,borderRadius:g="full",onError:x,onLoad:y,getInitials:b=OW,icon:w=e.jsx($D,{}),iconLabel:C=" avatar",loading:_,children:A,borderColor:D,ignoreFallback:P,crossOrigin:M,referrerPolicy:N,...z}=Yn(t),I={borderRadius:g,borderWidth:f?"2px":void 0,...$W,...r.container};return D&&(I.borderColor=D),e.jsx(He.span,{ref:n,...z,className:gt("chakra-avatar",t.className),"data-loaded":gn(i),__css:I,children:e.jsxs(NW,{value:r,children:[e.jsx(VD,{src:u,srcSet:d,loading:_,onLoad:sn(y,()=>{l(!0)}),onError:x,getInitials:b,name:p,borderRadius:g,icon:w,iconLabel:C,ignoreFallback:P,crossOrigin:M,referrerPolicy:N}),A]})})});UD.displayName="Avatar";const Qe=tt(function(n,r){const i=ji("Badge",n),{className:l,...u}=Yn(n);return e.jsx(He.span,{ref:r,className:gt("chakra-badge",n.className),...u,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...i}})});Qe.displayName="Badge";const oe=He("div");oe.displayName="Box";const[FW,y1]=Vn({name:"BreadcrumbStylesContext",errorMessage:`useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Breadcrumb />" `}),yb=tt(function(n,r){const i=Jr("Breadcrumb",n),l=Yn(n),{children:u,spacing:d="0.5rem",separator:p="/",className:f,listProps:g,...x}=l,y=Lc(u),b=y.length,w=y.map((_,A)=>v.cloneElement(_,{separator:p,spacing:d,isLastChild:b===A+1})),C=gt("chakra-breadcrumb",f);return e.jsx(He.nav,{ref:r,"aria-label":"breadcrumb",className:C,__css:i.container,...x,children:e.jsx(FW,{value:i,children:e.jsx(He.ol,{className:"chakra-breadcrumb__list",...g,__css:{display:"flex",alignItems:"center",...i.list},children:w})})})});yb.displayName="Breadcrumb";const Bx=tt(function(n,r){const{isCurrentPage:i,as:l,className:u,href:d,...p}=n,f=y1(),g={ref:r,as:l,className:gt("chakra-breadcrumb__link",u),...p};return i?e.jsx(He.span,{"aria-current":"page",__css:f.link,...g}):e.jsx(He.a,{__css:f.link,href:d,...g})});Bx.displayName="BreadcrumbLink";const jb=tt(function(n,r){const{spacing:i,...l}=n,u=y1(),d={mx:i,...u.separator};return e.jsx(He.span,{ref:r,role:"presentation",...l,__css:d})});jb.displayName="BreadcrumbSeparator";const bb=tt(function(n,r){const{isCurrentPage:i,separator:l,isLastChild:u,spacing:d,children:p,className:f,...g}=n,y=Lc(p).map(_=>_.type===Bx?v.cloneElement(_,{isCurrentPage:i}):_.type===jb?v.cloneElement(_,{spacing:d,children:_.props.children||l}):_),b=y1(),w={display:"inline-flex",alignItems:"center",...b.item},C=gt("chakra-breadcrumb__list-item",f);return e.jsxs(He.li,{ref:r,className:C,...g,__css:w,children:[y,!u&&e.jsx(jb,{spacing:d,children:l})]})});bb.displayName="BreadcrumbItem";const[VW,UW]=Vn({strict:!1,name:"ButtonGroupContext"});function op(t){const{children:n,className:r,...i}=t,l=v.isValidElement(n)?v.cloneElement(n,{"aria-hidden":!0,focusable:!1}):n,u=gt("chakra-button__icon",r);return e.jsx(He.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:u,children:l})}op.displayName="ButtonIcon";function Sb(t){const{label:n,placement:r,spacing:i="0.5rem",children:l=e.jsx(pn,{color:"currentColor",width:"1em",height:"1em"}),className:u,__css:d,...p}=t,f=gt("chakra-button__spinner",u),g=r==="start"?"marginEnd":"marginStart",x=v.useMemo(()=>({display:"flex",alignItems:"center",position:n?"relative":"absolute",[g]:n?i:0,fontSize:"1em",lineHeight:"normal",...d}),[d,n,g,i]);return e.jsx(He.div,{className:f,...p,__css:x,children:l})}Sb.displayName="ButtonSpinner";function HW(t){const[n,r]=v.useState(!t);return{ref:v.useCallback(u=>{u&&r(u.tagName==="BUTTON")},[]),type:n?"button":void 0}}const Q=tt((t,n)=>{const r=UW(),i=ji("Button",{...r,...t}),{isDisabled:l=r?.isDisabled,isLoading:u,isActive:d,children:p,leftIcon:f,rightIcon:g,loadingText:x,iconSpacing:y="0.5rem",type:b,spinner:w,spinnerPlacement:C="start",className:_,as:A,shouldWrapChildren:D,...P}=Yn(t),M=v.useMemo(()=>{const V={...i?._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...i,...!!r&&{_focus:V}}},[i,r]),{ref:N,type:z}=HW(A),I={rightIcon:g,leftIcon:f,iconSpacing:y,children:p,shouldWrapChildren:D};return e.jsxs(He.button,{disabled:l||u,ref:iO(n,N),as:A,type:b??z,"data-active":gn(d),"data-loading":gn(u),__css:M,className:gt("chakra-button",_),...P,children:[u&&C==="start"&&e.jsx(Sb,{className:"chakra-button__spinner--start",label:x,placement:"start",spacing:y,children:w}),u?x||e.jsx(He.span,{opacity:0,children:e.jsx(bT,{...I})}):e.jsx(bT,{...I}),u&&C==="end"&&e.jsx(Sb,{className:"chakra-button__spinner--end",label:x,placement:"end",spacing:y,children:w})]})});Q.displayName="Button";function bT(t){const{leftIcon:n,rightIcon:r,children:i,iconSpacing:l,shouldWrapChildren:u}=t;return u?e.jsxs("span",{style:{display:"contents"},children:[n&&e.jsx(op,{marginEnd:l,children:n}),i,r&&e.jsx(op,{marginStart:l,children:r})]}):e.jsxs(e.Fragment,{children:[n&&e.jsx(op,{marginEnd:l,children:n}),i,r&&e.jsx(op,{marginStart:l,children:r})]})}const WW={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},qW={horizontal:t=>({"& > *:not(style) ~ *:not(style)":{marginStart:t}}),vertical:t=>({"& > *:not(style) ~ *:not(style)":{marginTop:t}})},wb=tt(function(n,r){const{size:i,colorScheme:l,variant:u,className:d,spacing:p="0.5rem",isAttached:f,isDisabled:g,orientation:x="horizontal",...y}=n,b=gt("chakra-button__group",d),w=v.useMemo(()=>({size:i,colorScheme:l,variant:u,isDisabled:g}),[i,l,u,g]);let C={display:"inline-flex",...f?WW[x]:qW[x](p)};const _=x==="vertical";return e.jsx(VW,{value:w,children:e.jsx(He.div,{ref:r,role:"group",__css:C,className:b,"data-attached":f?"":void 0,"data-orientation":x,flexDir:_?"column":void 0,...y})})});wb.displayName="ButtonGroup";const xt=tt((t,n)=>{const{icon:r,children:i,isRound:l,"aria-label":u,...d}=t,p=r||i,f=v.isValidElement(p)?v.cloneElement(p,{"aria-hidden":!0,focusable:!1}):null;return e.jsx(Q,{px:"0",py:"0",borderRadius:l?"full":void 0,ref:n,"aria-label":u,...d,children:f})});xt.displayName="IconButton";const[GW,HD]=G8("Card"),Pe=tt(function(n,r){const{className:i,children:l,direction:u="column",justify:d,align:p,...f}=Yn(n),g=Jr("Card",n);return e.jsx(He.div,{ref:r,className:gt("chakra-card",i),__css:{display:"flex",flexDirection:u,justifyContent:d,alignItems:p,position:"relative",minWidth:0,wordWrap:"break-word",...g.container},...f,children:e.jsx(GW,{value:g,children:l})})}),ke=tt(function(n,r){const{className:i,...l}=n,u=HD();return e.jsx(He.div,{ref:r,className:gt("chakra-card__body",i),__css:u.body,...l})}),zt=tt(function(n,r){const{className:i,...l}=n,u=HD();return e.jsx(He.div,{ref:r,className:gt("chakra-card__header",i),__css:u.header,...l})}),yn=He("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});yn.displayName="Center";const YW={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};tt(function(n,r){const{axis:i="both",...l}=n;return e.jsx(He.div,{ref:r,__css:YW[i],...l,position:"absolute"})});const[ZW,XW]=Vn({name:"CheckboxGroupContext",strict:!1});function KW(t){return e.jsx(He.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...t,children:e.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function QW(t){return e.jsx(He.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...t,children:e.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function JW(t){const{isIndeterminate:n,isChecked:r,...i}=t,l=n?QW:KW;return r||n?e.jsx(He.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:e.jsx(l,{...i})}):null}var eq=()=>typeof document<"u",ST=!1,fm=null,$u=!1,Cb=!1,Eb=new Set;function j1(t,n){Eb.forEach(r=>r(t,n))}var tq=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function nq(t){return!(t.metaKey||!tq&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function wT(t){$u=!0,nq(t)&&(fm="keyboard",j1("keyboard",t))}function Nd(t){if(fm="pointer",t.type==="mousedown"||t.type==="pointerdown"){$u=!0;const n=t.composedPath?t.composedPath()[0]:t.target;let r=!1;try{r=n.matches(":focus-visible")}catch{}if(r)return;j1("pointer",t)}}function rq(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function sq(t){rq(t)&&($u=!0,fm="virtual")}function iq(t){t.target===window||t.target===document||t.target instanceof Element&&t.target.hasAttribute("tabindex")||(!$u&&!Cb&&(fm="virtual",j1("virtual",t)),$u=!1,Cb=!1)}function aq(){$u=!1,Cb=!0}function CT(){return fm!=="pointer"}function oq(){if(!eq()||ST)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...r){$u=!0,t.apply(this,r)},document.addEventListener("keydown",wT,!0),document.addEventListener("keyup",wT,!0),document.addEventListener("click",sq,!0),window.addEventListener("focus",iq,!0),window.addEventListener("blur",aq,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",Nd,!0),document.addEventListener("pointermove",Nd,!0),document.addEventListener("pointerup",Nd,!0)):(document.addEventListener("mousedown",Nd,!0),document.addEventListener("mousemove",Nd,!0),document.addEventListener("mouseup",Nd,!0)),ST=!0}function lq(t){oq(),t(CT());const n=()=>t(CT());return Eb.add(n),()=>{Eb.delete(n)}}const[cq,WD]=Vn({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[uq,jv]=Vn({strict:!1,name:"FormControlContext"});function dq(t){const{id:n,isRequired:r,isInvalid:i,isDisabled:l,isReadOnly:u,...d}=t,p=v.useId(),f=n||`field-${p}`,g=`${f}-label`,x=`${f}-feedback`,y=`${f}-helptext`,[b,w]=v.useState(!1),[C,_]=v.useState(!1),[A,D]=v.useState(!1),P=v.useCallback((V={},$=null)=>({id:y,...V,ref:kr($,ae=>{ae&&_(!0)})}),[y]),M=v.useCallback((V={},$=null)=>({...V,ref:$,"data-focus":gn(A),"data-disabled":gn(l),"data-invalid":gn(i),"data-readonly":gn(u),id:V.id!==void 0?V.id:g,htmlFor:V.htmlFor!==void 0?V.htmlFor:f}),[f,l,A,i,u,g]),N=v.useCallback((V={},$=null)=>({id:x,...V,ref:kr($,ae=>{ae&&w(!0)}),"aria-live":"polite"}),[x]),z=v.useCallback((V={},$=null)=>({...V,...d,ref:$,role:"group","data-focus":gn(A),"data-disabled":gn(l),"data-invalid":gn(i),"data-readonly":gn(u)}),[d,l,A,i,u]),I=v.useCallback((V={},$=null)=>({...V,ref:$,role:"presentation","aria-hidden":!0,children:V.children||"*"}),[]);return{isRequired:!!r,isInvalid:!!i,isReadOnly:!!u,isDisabled:!!l,isFocused:!!A,onFocus:()=>D(!0),onBlur:()=>D(!1),hasFeedbackText:b,setHasFeedbackText:w,hasHelpText:C,setHasHelpText:_,id:f,labelId:g,feedbackId:x,helpTextId:y,htmlProps:d,getHelpTextProps:P,getErrorMessageProps:N,getRootProps:z,getLabelProps:M,getRequiredIndicatorProps:I}}const X=tt(function(n,r){const i=Jr("Form",n),l=Yn(n),{getRootProps:u,htmlProps:d,...p}=dq(l),f=gt("chakra-form-control",n.className);return e.jsx(uq,{value:p,children:e.jsx(cq,{value:i,children:e.jsx(He.div,{...u({},r),className:f,__css:i.container})})})});X.displayName="FormControl";const jx=tt(function(n,r){const i=jv(),l=WD(),u=gt("chakra-form__helper-text",n.className);return e.jsx(He.div,{...i?.getHelpTextProps(n,r),__css:l.helperText,className:u})});jx.displayName="FormHelperText";function b1(t){const{isDisabled:n,isInvalid:r,isReadOnly:i,isRequired:l,...u}=S1(t);return{...u,disabled:n,readOnly:i,required:l,"aria-invalid":Bo(r),"aria-required":Bo(l),"aria-readonly":Bo(i)}}function S1(t){const n=jv(),{id:r,disabled:i,readOnly:l,required:u,isRequired:d,isInvalid:p,isReadOnly:f,isDisabled:g,onFocus:x,onBlur:y,...b}=t,w=t["aria-describedby"]?[t["aria-describedby"]]:[];return n?.hasFeedbackText&&n?.isInvalid&&w.push(n.feedbackId),n?.hasHelpText&&w.push(n.helpTextId),{...b,"aria-describedby":w.join(" ")||void 0,id:r??n?.id,isDisabled:i??g??n?.isDisabled,isReadOnly:l??f??n?.isReadOnly,isRequired:u??d??n?.isRequired,isInvalid:p??n?.isInvalid,onFocus:sn(n?.onFocus,x),onBlur:sn(n?.onBlur,y)}}const w1={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function qD(t={}){const n=S1(t),{isDisabled:r,isReadOnly:i,isRequired:l,isInvalid:u,id:d,onBlur:p,onFocus:f,"aria-describedby":g}=n,{defaultChecked:x,isChecked:y,isFocusable:b,onChange:w,isIndeterminate:C,name:_,value:A,tabIndex:D=void 0,"aria-label":P,"aria-labelledby":M,"aria-invalid":N,...z}=t,I=rm(z,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),V=Yr(w),$=Yr(p),ae=Yr(f),[he,re]=v.useState(!1),[ce,Se]=v.useState(!1),[je,de]=v.useState(!1),G=v.useRef(!1);v.useEffect(()=>lq(Ue=>{G.current=Ue}),[]);const U=v.useRef(null),[W,me]=v.useState(!0),[F,fe]=v.useState(!!x),te=y!==void 0,R=te?y:F,Y=v.useCallback(Ue=>{if(i||r){Ue.preventDefault();return}te||fe(R?Ue.currentTarget.checked:C?!0:Ue.currentTarget.checked),V?.(Ue)},[i,r,R,te,C,V]);Dl(()=>{U.current&&(U.current.indeterminate=!!C)},[C]),Dc(()=>{r&&re(!1)},[r,re]),Dl(()=>{const Ue=U.current;if(!Ue?.form)return;const qt=()=>{fe(!!x)};return Ue.form.addEventListener("reset",qt),()=>Ue.form?.removeEventListener("reset",qt)},[]);const q=r&&!b,le=v.useCallback(Ue=>{Ue.key===" "&&de(!0)},[de]),We=v.useCallback(Ue=>{Ue.key===" "&&de(!1)},[de]);Dl(()=>{if(!U.current)return;U.current.checked!==R&&fe(U.current.checked)},[U.current]);const pe=v.useCallback((Ue={},qt=null)=>{const Je=Ge=>{he&&Ge.preventDefault(),de(!0)};return{...Ue,ref:qt,"data-active":gn(je),"data-hover":gn(ce),"data-checked":gn(R),"data-focus":gn(he),"data-focus-visible":gn(he&&G.current),"data-indeterminate":gn(C),"data-disabled":gn(r),"data-invalid":gn(u),"data-readonly":gn(i),"aria-hidden":!0,onMouseDown:sn(Ue.onMouseDown,Je),onMouseUp:sn(Ue.onMouseUp,()=>de(!1)),onMouseEnter:sn(Ue.onMouseEnter,()=>Se(!0)),onMouseLeave:sn(Ue.onMouseLeave,()=>Se(!1))}},[je,R,r,he,ce,C,u,i]),ye=v.useCallback((Ue={},qt=null)=>({...Ue,ref:qt,"data-active":gn(je),"data-hover":gn(ce),"data-checked":gn(R),"data-focus":gn(he),"data-focus-visible":gn(he&&G.current),"data-indeterminate":gn(C),"data-disabled":gn(r),"data-invalid":gn(u),"data-readonly":gn(i)}),[je,R,r,he,ce,C,u,i]),Ze=v.useCallback((Ue={},qt=null)=>({...I,...Ue,ref:kr(qt,Je=>{Je&&me(Je.tagName==="LABEL")}),onClick:sn(Ue.onClick,()=>{W||(U.current?.click(),requestAnimationFrame(()=>{U.current?.focus({preventScroll:!0})}))}),"data-disabled":gn(r),"data-checked":gn(R),"data-invalid":gn(u)}),[I,r,R,u,W]),ht=v.useCallback((Ue={},qt=null)=>({...Ue,ref:kr(U,qt),type:"checkbox",name:_,value:A,id:d,tabIndex:D,onChange:sn(Ue.onChange,Y),onBlur:sn(Ue.onBlur,$,()=>re(!1)),onFocus:sn(Ue.onFocus,ae,()=>re(!0)),onKeyDown:sn(Ue.onKeyDown,le),onKeyUp:sn(Ue.onKeyUp,We),required:l,checked:R,disabled:q,readOnly:i,"aria-label":P,"aria-labelledby":M,"aria-invalid":N?!!N:u,"aria-describedby":g,"aria-disabled":r,"aria-checked":C?"mixed":R,style:w1}),[_,A,d,D,Y,$,ae,le,We,l,R,q,i,P,M,N,u,g,r,C]),rt=v.useCallback((Ue={},qt=null)=>({...Ue,ref:qt,onMouseDown:sn(Ue.onMouseDown,hq),"data-disabled":gn(r),"data-checked":gn(R),"data-invalid":gn(u)}),[R,r,u]);return{state:{isInvalid:u,isFocused:he,isChecked:R,isActive:je,isHovered:ce,isIndeterminate:C,isDisabled:r,isReadOnly:i,isRequired:l},getRootProps:Ze,getCheckboxProps:pe,getIndicatorProps:ye,getInputProps:ht,getLabelProps:rt,htmlProps:I}}function hq(t){t.preventDefault(),t.stopPropagation()}function fq(t){const[n,r]=v.useState(t),[i,l]=v.useState(!1);return t!==n&&(l(!0),r(t)),i}const pq={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},mq={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},gq=Oc({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),xq=Oc({from:{opacity:0},to:{opacity:1}}),vq=Oc({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),Na=tt(function(n,r){const i=XW(),l={...i,...n},u=Jr("Checkbox",l),d=Yn(n),{spacing:p="0.5rem",className:f,children:g,iconColor:x,iconSize:y,icon:b=e.jsx(JW,{}),isChecked:w,isDisabled:C=i?.isDisabled,onChange:_,inputProps:A,...D}=d;let P=w;i?.value&&d.value&&(P=i.value.includes(d.value));let M=_;i?.onChange&&d.value&&(M=eR(i.onChange,_));const{state:N,getInputProps:z,getCheckboxProps:I,getLabelProps:V,getRootProps:$}=qD({...D,isDisabled:C,isChecked:P,onChange:M}),ae=fq(N.isChecked),he=v.useMemo(()=>({animation:ae?N.isIndeterminate?`${xq} 20ms linear, ${vq} 200ms linear`:`${gq} 200ms linear`:void 0,...u.icon,...nm({fontSize:y,color:x})}),[x,y,ae,N.isIndeterminate,u.icon]),re=v.cloneElement(b,{__css:he,isIndeterminate:N.isIndeterminate,isChecked:N.isChecked});return e.jsxs(He.label,{__css:{...mq,...u.container},className:gt("chakra-checkbox",f),...$(),children:[e.jsx("input",{className:"chakra-checkbox__input",...z(A,r)}),e.jsx(He.span,{__css:{...pq,...u.control},className:"chakra-checkbox__control",...I(),children:re}),g&&e.jsx(He.span,{className:"chakra-checkbox__label",...V(),__css:{marginStart:p,...u.label},children:g})]})});Na.displayName="Checkbox";function ET(t){return t&&gs(t)&&gs(t.target)}function yq(t={}){const{defaultValue:n,value:r,onChange:i,isDisabled:l,isNative:u}=t,d=Yr(i),[p,f]=zh({value:r,defaultValue:n||[],onChange:d}),g=v.useCallback(y=>{if(!p)return;const b=ET(y)?y.target.checked:!p.includes(y),w=ET(y)?y.target.value:y,C=b?[...p,w]:p.filter(_=>String(_)!==String(w));f(C)},[f,p]),x=v.useCallback((y={})=>({...y,[u?"checked":"isChecked"]:p.some(w=>String(y.value)===String(w)),onChange:g}),[g,u,p]);return{value:p,isDisabled:l,onChange:g,setValue:f,getCheckboxProps:x}}function GD(t){const{colorScheme:n,size:r,variant:i,children:l,isDisabled:u}=t,{value:d,onChange:p}=yq(t),f=v.useMemo(()=>({size:r,onChange:p,colorScheme:n,value:d,variant:i,isDisabled:u}),[r,p,n,d,i,u]);return e.jsx(ZW,{value:f,children:l})}GD.displayName="CheckboxGroup";const wh=tt(function(n,r){const i=ji("Code",n),{className:l,...u}=Yn(n);return e.jsx(He.code,{ref:r,className:gt("chakra-code",n.className),...u,__css:{display:"inline-block",...i}})});wh.displayName="Code";const ei=tt(function(n,r){const{className:i,centerContent:l,...u}=Yn(n),d=ji("Container",n);return e.jsx(He.div,{ref:r,className:gt("chakra-container",i),...u,__css:{...d,...l&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});ei.displayName="Container";const xn=tt(function(n,r){const{borderLeftWidth:i,borderBottomWidth:l,borderTopWidth:u,borderRightWidth:d,borderWidth:p,borderStyle:f,borderColor:g,...x}=ji("Divider",n),{className:y,orientation:b="horizontal",__css:w,...C}=Yn(n),_={vertical:{borderLeftWidth:i||d||p||"1px",height:"100%"},horizontal:{borderBottomWidth:l||u||p||"1px",width:"100%"}};return e.jsx(He.hr,{ref:r,"aria-orientation":b,...C,__css:{...x,border:"0",borderColor:g,borderStyle:f,..._[b],...w},className:gt("chakra-divider",y)})});xn.displayName="Divider";function lp(t){return typeof t=="function"}function jq(...t){return n=>t.reduce((r,i)=>i(r),n)}const bq=t=>function(...r){let i=[...r],l=r[r.length-1];return FF(l)&&i.length>1?i=i.slice(0,i.length-1):l=t,jq(...i.map(u=>d=>lp(u)?u(d):wq(d,u)))(l)},Sq=bq(MR);function wq(...t){return Ia({},...t,YD)}function YD(t,n,r,i){if((lp(t)||lp(n))&&Object.prototype.hasOwnProperty.call(i,r))return(...l)=>{const u=lp(t)?t(...l):t,d=lp(n)?n(...l):n;return Ia({},u,d,YD)};if(gs(t)&&Oj(n)||Oj(t)&&gs(n))return n}const sr=tt(function(n,r){const{direction:i,align:l,justify:u,wrap:d,basis:p,grow:f,shrink:g,...x}=n,y={display:"flex",flexDirection:i,alignItems:l,justifyContent:u,flexWrap:d,flexBasis:p,flexGrow:f,flexShrink:g};return e.jsx(He.div,{ref:r,__css:y,...x})});sr.displayName="Flex";function Cq(t,n){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(n.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var _b="data-focus-lock",ZD="data-focus-lock-disabled",Eq="data-no-focus-lock",_q="data-autofocus-inside",Tq="data-no-autofocus";function oj(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function Aq(t,n){var r=v.useState(function(){return{value:t,callback:n,facade:{get current(){return r.value},set current(i){var l=r.value;l!==i&&(r.value=i,r.callback(i,l))}}}})[0];return r.callback=n,r.facade}var Rq=typeof window<"u"?v.useLayoutEffect:v.useEffect,_T=new WeakMap;function XD(t,n){var r=Aq(null,function(i){return t.forEach(function(l){return oj(l,i)})});return Rq(function(){var i=_T.get(r);if(i){var l=new Set(i),u=new Set(t),d=r.current;l.forEach(function(p){u.has(p)||oj(p,null)}),u.forEach(function(p){l.has(p)||oj(p,d)})}_T.set(r,t)},[t]),r}var lj={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Oo=function(){return Oo=Object.assign||function(n){for(var r,i=1,l=arguments.length;i<l;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u])}return n},Oo.apply(this,arguments)};function KD(t,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(r[i[l]]=t[i[l]]);return r}function kq(t,n,r){if(r||arguments.length===2)for(var i=0,l=n.length,u;i<l;i++)(u||!(i in n))&&(u||(u=Array.prototype.slice.call(n,0,i)),u[i]=n[i]);return t.concat(u||Array.prototype.slice.call(n))}function QD(t){return t}function JD(t,n){n===void 0&&(n=QD);var r=[],i=!1,l={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(u){var d=n(u,i);return r.push(d),function(){r=r.filter(function(p){return p!==d})}},assignSyncMedium:function(u){for(i=!0;r.length;){var d=r;r=[],d.forEach(u)}r={push:function(p){return u(p)},filter:function(){return r}}},assignMedium:function(u){i=!0;var d=[];if(r.length){var p=r;r=[],p.forEach(u),d=r}var f=function(){var x=d;d=[],x.forEach(u)},g=function(){return Promise.resolve().then(f)};g(),r={push:function(x){d.push(x),g()},filter:function(x){return d=d.filter(x),r}}}};return l}function C1(t,n){return n===void 0&&(n=QD),JD(t,n)}function eP(t){t===void 0&&(t={});var n=JD(null);return n.options=Oo({async:!0,ssr:!1},t),n}var tP=function(t){var n=t.sideCar,r=KD(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return v.createElement(i,Oo({},r))};tP.isSideCarExport=!0;function Dq(t,n){return t.useMedium(n),tP}var nP=C1({},function(t){var n=t.target,r=t.currentTarget;return{target:n,currentTarget:r}}),rP=C1(),Pq=C1(),Mq=eP({async:!0,ssr:typeof document<"u"}),zq=v.createContext(void 0),Iq=[],E1=v.forwardRef(function(n,r){var i,l=v.useState(),u=l[0],d=l[1],p=v.useRef(),f=v.useRef(!1),g=v.useRef(null),x=v.useState({}),y=x[1],b=n.children,w=n.disabled,C=w===void 0?!1:w,_=n.noFocusGuards,A=_===void 0?!1:_,D=n.persistentFocus,P=D===void 0?!1:D,M=n.crossFrame,N=M===void 0?!0:M,z=n.autoFocus,I=z===void 0?!0:z;n.allowTextSelection;var V=n.group,$=n.className,ae=n.whiteList,he=n.hasPositiveIndices,re=n.shards,ce=re===void 0?Iq:re,Se=n.as,je=Se===void 0?"div":Se,de=n.lockProps,G=de===void 0?{}:de,U=n.sideCar,W=n.returnFocus,me=W===void 0?!1:W,F=n.focusOptions,fe=n.onActivation,te=n.onDeactivation,R=v.useState({}),Y=R[0],q=v.useCallback(function(Je){var Ge=Je.captureFocusRestore;if(!g.current){var Ve,se=(Ve=document)==null?void 0:Ve.activeElement;g.current=se,se!==document.body&&(g.current=Ge(se))}p.current&&fe&&fe(p.current),f.current=!0,y()},[fe]),le=v.useCallback(function(){f.current=!1,te&&te(p.current),y()},[te]),We=v.useCallback(function(Je){var Ge=g.current;if(Ge){var Ve=(typeof Ge=="function"?Ge():Ge)||document.body,se=typeof me=="function"?me(Ve):me;if(se){var be=typeof se=="object"?se:void 0;g.current=null,Je?Promise.resolve().then(function(){return Ve.focus(be)}):Ve.focus(be)}}},[me]),pe=v.useCallback(function(Je){f.current&&nP.useMedium(Je)},[]),ye=rP.useMedium,Ze=v.useCallback(function(Je){p.current!==Je&&(p.current=Je,d(Je))},[]),ht=Bu((i={},i[ZD]=C&&"disabled",i[_b]=V,i),G),rt=A!==!0,vt=rt&&A!=="tail",Ue=XD([r,Ze]),qt=v.useMemo(function(){return{observed:p,shards:ce,enabled:!C,active:f.current}},[C,f.current,ce,u]);return wn.createElement(v.Fragment,null,rt&&[wn.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:C?-1:0,style:lj}),he?wn.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:C?-1:1,style:lj}):null],!C&&wn.createElement(U,{id:Y,sideCar:Mq,observed:u,disabled:C,persistentFocus:P,crossFrame:N,autoFocus:I,whiteList:ae,shards:ce,onActivation:q,onDeactivation:le,returnFocus:We,focusOptions:F,noFocusGuards:A}),wn.createElement(je,Bu({ref:Ue},ht,{className:$,onBlur:ye,onFocus:pe}),wn.createElement(zq.Provider,{value:qt},b)),vt&&wn.createElement("div",{"data-focus-guard":!0,tabIndex:C?-1:0,style:lj}))});E1.propTypes={};function Tb(t,n){return Tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tb(t,n)}function Nq(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,Tb(t,n)}function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Up(t)}function Lq(t,n){if(Up(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,n);if(Up(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Oq(t){var n=Lq(t,"string");return Up(n)=="symbol"?n:n+""}function Bq(t,n,r){return(n=Oq(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function $q(t,n){function r(i){return i.displayName||i.name||"Component"}return function(l){var u=[],d;function p(){d=t(u.map(function(g){return g.props})),n(d)}var f=(function(g){Nq(x,g);function x(){return g.apply(this,arguments)||this}x.peek=function(){return d};var y=x.prototype;return y.componentDidMount=function(){u.push(this),p()},y.componentDidUpdate=function(){p()},y.componentWillUnmount=function(){var w=u.indexOf(this);u.splice(w,1),p()},y.render=function(){return wn.createElement(l,this.props)},x})(v.PureComponent);return Bq(f,"displayName","SideEffect("+r(l)+")"),f}}var Jo=function(t){for(var n=Array(t.length),r=0;r<t.length;++r)n[r]=t[r];return n},Fu=function(t){return Array.isArray(t)?t:[t]},sP=function(t){return Array.isArray(t)?t[0]:t},Fq=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var n=window.getComputedStyle(t,null);return!n||!n.getPropertyValue?!1:n.getPropertyValue("display")==="none"||n.getPropertyValue("visibility")==="hidden"},iP=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},aP=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},Vq=function(t){return t.hasAttribute("inert")},Uq=function(t,n){return!t||aP(t)||!Fq(t)&&!Vq(t)&&n(iP(t))},oP=function(t,n){var r=t.get(n);if(r!==void 0)return r;var i=Uq(n,oP.bind(void 0,t));return t.set(n,i),i},Hq=function(t,n){return t&&!aP(t)?Gq(t)?n(iP(t)):!1:!0},lP=function(t,n){var r=t.get(n);if(r!==void 0)return r;var i=Hq(n,lP.bind(void 0,t));return t.set(n,i),i},cP=function(t){return t.dataset},Wq=function(t){return t.tagName==="BUTTON"},uP=function(t){return t.tagName==="INPUT"},dP=function(t){return uP(t)&&t.type==="radio"},qq=function(t){return!((uP(t)||Wq(t))&&(t.type==="hidden"||t.disabled))},Gq=function(t){var n=t.getAttribute(Tq);return![!0,"true",""].includes(n)},_1=function(t){var n;return!!(t&&(!((n=cP(t))===null||n===void 0)&&n.focusGuard))},Ab=function(t){return!_1(t)},Yq=function(t){return!!t},Zq=function(t,n){var r=Math.max(0,t.tabIndex),i=Math.max(0,n.tabIndex),l=r-i,u=t.index-n.index;if(l){if(!r)return 1;if(!i)return-1}return l||u},Xq=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},T1=function(t,n,r){return Jo(t).map(function(i,l){var u=Xq(i);return{node:i,index:l,tabIndex:r&&u===-1?(i.dataset||{}).focusGuard?0:-1:u}}).filter(function(i){return!n||i.tabIndex>=0}).sort(Zq)},Kq=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],A1=Kq.join(","),Qq="".concat(A1,", [data-focus-guard]"),hP=function(t,n){return Jo((t.shadowRoot||t).children).reduce(function(r,i){return r.concat(i.matches(n?Qq:A1)?[i]:[],hP(i))},[])},Jq=function(t,n){var r;return t instanceof HTMLIFrameElement&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?Ch([t.contentDocument.body],n):[t]},Ch=function(t,n){return t.reduce(function(r,i){var l,u=hP(i,n),d=(l=[]).concat.apply(l,u.map(function(p){return Jq(p,n)}));return r.concat(d,i.parentNode?Jo(i.parentNode.querySelectorAll(A1)).filter(function(p){return p===i}):[])},[])},eG=function(t){var n=t.querySelectorAll("[".concat(_q,"]"));return Jo(n).map(function(r){return Ch([r])}).reduce(function(r,i){return r.concat(i)},[])},R1=function(t,n){return Jo(t).filter(function(r){return oP(n,r)}).filter(function(r){return qq(r)})},TT=function(t,n){return n===void 0&&(n=new Map),Jo(t).filter(function(r){return lP(n,r)})},k1=function(t,n,r){return T1(R1(Ch(t,r),n),!0,r)},Hp=function(t,n){return T1(R1(Ch(t),n),!1)},tG=function(t,n){return R1(eG(t),n)},zu=function(t,n){return t.shadowRoot?zu(t.shadowRoot,n):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,n)?!0:Jo(t.children).some(function(r){var i;if(r instanceof HTMLIFrameElement){var l=(i=r.contentDocument)===null||i===void 0?void 0:i.body;return l?zu(l,n):!1}return zu(r,n)})},nG=function(t){for(var n=new Set,r=t.length,i=0;i<r;i+=1)for(var l=i+1;l<r;l+=1){var u=t[i].compareDocumentPosition(t[l]);(u&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&n.add(l),(u&Node.DOCUMENT_POSITION_CONTAINS)>0&&n.add(i)}return t.filter(function(d,p){return!n.has(p)})},fP=function(t){return t.parentNode?fP(t.parentNode):t},D1=function(t){var n=Fu(t);return n.filter(Boolean).reduce(function(r,i){var l=i.getAttribute(_b);return r.push.apply(r,l?nG(Jo(fP(i).querySelectorAll("[".concat(_b,'="').concat(l,'"]:not([').concat(ZD,'="disabled"])')))):[i]),r},[])},rG=function(t){try{return t()}catch{return}},Wp=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var n=t.activeElement;return n.shadowRoot?Wp(n.shadowRoot):n instanceof HTMLIFrameElement&&rG(function(){return n.contentWindow.document})?Wp(n.contentWindow.document):n}},sG=function(t,n){return t===n},iG=function(t,n){return!!Jo(t.querySelectorAll("iframe")).some(function(r){return sG(r,n)})},pP=function(t,n){return n===void 0&&(n=Wp(sP(t).ownerDocument)),!n||n.dataset&&n.dataset.focusGuard?!1:D1(t).some(function(r){return zu(r,n)||iG(r,n)})},aG=function(t){t===void 0&&(t=document);var n=Wp(t);return n?Jo(t.querySelectorAll("[".concat(Eq,"]"))).some(function(r){return zu(r,n)}):!1},oG=function(t,n){return n.filter(dP).filter(function(r){return r.name===t.name}).filter(function(r){return r.checked})[0]||t},P1=function(t,n){return dP(t)&&t.name?oG(t,n):t},lG=function(t){var n=new Set;return t.forEach(function(r){return n.add(P1(r,t))}),t.filter(function(r){return n.has(r)})},AT=function(t){return t[0]&&t.length>1?P1(t[0],t):t[0]},RT=function(t,n){return t.indexOf(P1(n,t))},Rb="NEW_FOCUS",cG=function(t,n,r,i,l){var u=t.length,d=t[0],p=t[u-1],f=_1(i);if(!(i&&t.indexOf(i)>=0)){var g=i!==void 0?r.indexOf(i):-1,x=l?r.indexOf(l):g,y=l?t.indexOf(l):-1;if(g===-1)return y!==-1?y:Rb;if(y===-1)return Rb;var b=g-x,w=r.indexOf(d),C=r.indexOf(p),_=lG(r),A=i!==void 0?_.indexOf(i):-1,D=l?_.indexOf(l):A,P=_.filter(function($){return $.tabIndex>=0}),M=i!==void 0?P.indexOf(i):-1,N=l?P.indexOf(l):M,z=M>=0&&N>=0?N-M:D-A;if(!b&&y>=0||n.length===0)return y;var I=RT(t,n[0]),V=RT(t,n[n.length-1]);if(g<=w&&f&&Math.abs(b)>1)return V;if(g>=C&&f&&Math.abs(b)>1)return I;if(b&&Math.abs(z)>1)return y;if(g<=w)return V;if(g>C)return I;if(b)return Math.abs(b)>1?y:(u+y+b)%u}},uG=function(t){return function(n){var r,i=(r=cP(n))===null||r===void 0?void 0:r.autofocus;return n.autofocus||i!==void 0&&i!=="false"||t.indexOf(n)>=0}},kT=function(t,n,r){var i=t.map(function(u){var d=u.node;return d}),l=TT(i.filter(uG(r)));return l&&l.length?AT(l):AT(TT(n))},kb=function(t,n){return n===void 0&&(n=[]),n.push(t),t.parentNode&&kb(t.parentNode.host||t.parentNode,n),n},cj=function(t,n){for(var r=kb(t),i=kb(n),l=0;l<r.length;l+=1){var u=r[l];if(i.indexOf(u)>=0)return u}return!1},mP=function(t,n,r){var i=Fu(t),l=Fu(n),u=i[0],d=!1;return l.filter(Boolean).forEach(function(p){d=cj(d||p,p)||d,r.filter(Boolean).forEach(function(f){var g=cj(u,f);g&&(!d||zu(g,d)?d=g:d=cj(g,d))})}),d},DT=function(t,n){return t.reduce(function(r,i){return r.concat(tG(i,n))},[])},dG=function(t,n){var r=new Map;return n.forEach(function(i){return r.set(i.node,i)}),t.map(function(i){return r.get(i)}).filter(Yq)},hG=function(t,n){var r=Wp(Fu(t).length>0?document:sP(t).ownerDocument),i=D1(t).filter(Ab),l=mP(r||t,t,i),u=new Map,d=Hp(i,u),p=d.filter(function(C){var _=C.node;return Ab(_)});if(p[0]){var f=Hp([l],u).map(function(C){var _=C.node;return _}),g=dG(f,p),x=g.map(function(C){var _=C.node;return _}),y=g.filter(function(C){var _=C.tabIndex;return _>=0}).map(function(C){var _=C.node;return _}),b=cG(x,y,f,r,n);if(b===Rb){var w=kT(d,y,DT(i,u))||kT(d,x,DT(i,u));if(w)return{node:w};console.warn("focus-lock: cannot find any node to move focus into");return}return b===void 0?b:g[b]}},fG=function(t){var n=D1(t).filter(Ab),r=mP(t,t,n),i=T1(Ch([r],!0),!0,!0),l=Ch(n,!1);return i.map(function(u){var d=u.node,p=u.index;return{node:d,index:p,lockItem:l.indexOf(d)>=0,guard:_1(d)}})},M1=function(t,n){t&&("focus"in t&&t.focus(n),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},uj=0,dj=!1,gP=function(t,n,r){r===void 0&&(r={});var i=hG(t,n);if(!dj&&i){if(uj>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),dj=!0,setTimeout(function(){dj=!1},1);return}uj++,M1(i.node,r.focusOptions),uj--}};function Hf(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var n=t?new WeakRef(t):null;return function(){return n?.deref()||null}}var pG=function(t){if(!t)return null;for(var n=[],r=t;r&&r!==document.body;)n.push({current:Hf(r),parent:Hf(r.parentElement),left:Hf(r.previousElementSibling),right:Hf(r.nextElementSibling)}),r=r.parentElement;return{element:Hf(t),stack:n,ownerDocument:t.ownerDocument}},mG=function(t){var n,r,i,l,u;if(t)for(var d=t.stack,p=t.ownerDocument,f=new Map,g=0,x=d;g<x.length;g++){var y=x[g],b=(n=y.parent)===null||n===void 0?void 0:n.call(y);if(b&&p.contains(b)){for(var w=(r=y.left)===null||r===void 0?void 0:r.call(y),C=y.current(),_=b.contains(C)?C:void 0,A=(i=y.right)===null||i===void 0?void 0:i.call(y),D=k1([b],f),P=(u=(l=_??w?.nextElementSibling)!==null&&l!==void 0?l:A)!==null&&u!==void 0?u:w;P;){for(var M=0,N=D;M<N.length;M++){var z=N[M];if(P?.contains(z.node))return z.node}P=P.nextElementSibling}if(D.length)return D[0].node}}},xP=function(t){var n=pG(t);return function(){return mG(n)}},gG=function(t,n,r){if(!t||!n)return console.error("no element or scope given"),{};var i=Fu(n);if(i.every(function(d){return!zu(d,t)}))return console.error("Active element is not contained in the scope"),{};var l=r?k1(i,new Map):Hp(i,new Map),u=l.findIndex(function(d){var p=d.node;return p===t});if(u!==-1)return{prev:l[u-1],next:l[u+1],first:l[0],last:l[l.length-1]}},xG=function(t,n){var r=n?k1(Fu(t),new Map):Hp(Fu(t),new Map);return{first:r[0],last:r[r.length-1]}},vG=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},vP=function(t,n,r){n===void 0&&(n={});var i=vG(n),l=gG(t,i.scope,i.onlyTabbable);if(l){var u=r(l,i.cycle);u&&M1(u.node,i.focusOptions)}},yG=function(t,n){n===void 0&&(n={}),vP(t,n,function(r,i){var l=r.next,u=r.first;return l||i&&u})},jG=function(t,n){n===void 0&&(n={}),vP(t,n,function(r,i){var l=r.prev,u=r.last;return l||i&&u})},yP=function(t,n,r){var i,l=xG(t,(i=n.onlyTabbable)!==null&&i!==void 0?i:!0),u=l[r];u&&M1(u.node,n.focusOptions)},bG=function(t,n){n===void 0&&(n={}),yP(t,n,"first")},SG=function(t,n){n===void 0&&(n={}),yP(t,n,"last")};function z1(t){setTimeout(t,1)}var wG=function(n){return n&&"current"in n?n.current:n},jP=function(){return document&&document.activeElement===document.body},CG=function(){return jP()||aG()},uh=null,Di=null,PT=function(){return null},dh=null,qp=!1,I1=!1,EG=function(){return!0},_G=function(n){return(uh.whiteList||EG)(n)},TG=function(n,r){dh={observerNode:n,portaledElement:r}},AG=function(n){return dh&&dh.portaledElement===n};function MT(t,n,r,i){var l=null,u=t;do{var d=i[u];if(d.guard)d.node.dataset.focusAutoGuard&&(l=d);else if(d.lockItem){if(u!==t)return;l=null}else break}while((u+=r)!==n);l&&(l.node.tabIndex=0)}var RG=function(n){return n?!!qp:qp==="meanwhile"},kG=function t(n,r,i){return r&&(r.host===n&&(!r.activeElement||i.contains(r.activeElement))||r.parentNode&&t(n,r.parentNode,i))},DG=function(n,r){return r.some(function(i){return kG(n,i,i)})},bP=function(n){return Hp(n,new Map)},PG=function(n){return!bP([n.parentNode]).some(function(r){return r.node===n})},$x=function(){var n=!1;if(uh){var r=uh,i=r.observed,l=r.persistentFocus,u=r.autoFocus,d=r.shards,p=r.crossFrame,f=r.focusOptions,g=r.noFocusGuards,x=i||dh&&dh.portaledElement;if(jP()&&Di&&Di!==document.body&&(!document.body.contains(Di)||PG(Di))){var y=PT();y&&y.focus()}var b=document&&document.activeElement;if(x){var w=[x].concat(d.map(wG).filter(Boolean)),C=function(){if(!RG(p)||!g||!Di||I1)return!1;var M=bP(w),N=M.findIndex(function(z){var I=z.node;return I===Di});return N===0||N===M.length-1};if((!b||_G(b))&&(l||C()||!CG()||!Di&&u)&&(x&&!(pP(w)||b&&DG(b,w)||AG(b))&&(document&&!Di&&b&&!u?(b.blur&&b.blur(),document.body.focus()):(n=gP(w,Di,{focusOptions:f}),dh={})),Di=document&&document.activeElement,Di!==document.body&&(PT=xP(Di)),qp=!1),document&&b!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var _=document&&document.activeElement,A=fG(w),D=A.map(function(P){var M=P.node;return M}).indexOf(_);D>-1&&(A.filter(function(P){var M=P.guard,N=P.node;return M&&N.dataset.focusAutoGuard}).forEach(function(P){var M=P.node;return M.removeAttribute("tabIndex")}),MT(D,A.length,1,A),MT(D,-1,-1,A))}}}return n},SP=function(n){$x()&&n&&(n.stopPropagation(),n.preventDefault())},N1=function(){return z1($x)},MG=function(n){var r=n.target,i=n.currentTarget;i.contains(r)||TG(i,r)},zG=function(){return null},wP=function(){I1=!0},CP=function(){I1=!1,qp="just",z1(function(){qp="meanwhile"})},IG=function(){document.addEventListener("focusin",SP),document.addEventListener("focusout",N1),window.addEventListener("focus",wP),window.addEventListener("blur",CP)},NG=function(){document.removeEventListener("focusin",SP),document.removeEventListener("focusout",N1),window.removeEventListener("focus",wP),window.removeEventListener("blur",CP)};function LG(t){return t.filter(function(n){var r=n.disabled;return!r})}var EP={moveFocusInside:gP,focusInside:pP,focusNextElement:yG,focusPrevElement:jG,focusFirstElement:bG,focusLastElement:SG,captureFocusRestore:xP};function OG(t){var n=t.slice(-1)[0];n&&!uh&&IG();var r=uh,i=r&&n&&n.id===r.id;uh=n,r&&!i&&(r.onDeactivation(),t.filter(function(l){var u=l.id;return u===r.id}).length||r.returnFocus(!n)),n?(Di=null,(!i||r.observed!==n.observed)&&n.onActivation(EP),$x(),z1($x)):(NG(),Di=null)}nP.assignSyncMedium(MG);rP.assignMedium(N1);Pq.assignMedium(function(t){return t(EP)});const BG=$q(LG,OG)(zG);var Db=v.forwardRef(function(n,r){return wn.createElement(E1,Bu({sideCar:BG,ref:r},n))}),_P=E1.propTypes||{};_P.sideCar;Cq(_P,["sideCar"]);Db.propTypes={};const $G=Db.default??Db,TP=t=>{const{initialFocusRef:n,finalFocusRef:r,contentRef:i,restoreFocus:l,children:u,isDisabled:d,autoFocus:p,persistentFocus:f,lockFocusAcrossFrames:g}=t,x=v.useCallback(()=>{n?.current?n.current.focus():i?.current&&LL(i.current).length===0&&requestAnimationFrame(()=>{i.current?.focus()})},[n,i]),y=v.useCallback(()=>{r?.current?.focus()},[r]),b=l&&!r;return e.jsx($G,{crossFrame:g,persistentFocus:f,autoFocus:p,disabled:d,onActivation:x,onDeactivation:y,returnFocus:b,children:u})};TP.displayName="FocusLock";const Z=tt(function(n,r){const i=ji("FormLabel",n),l=Yn(n),{className:u,children:d,requiredIndicator:p=e.jsx(AP,{}),optionalIndicator:f=null,...g}=l,x=jv(),y=x?.getLabelProps(g,r)??{ref:r,...g};return e.jsxs(He.label,{...y,className:gt("chakra-form__label",l.className),__css:{display:"block",textAlign:"start",...i},children:[d,x?.isRequired?p:f]})});Z.displayName="FormLabel";const AP=tt(function(n,r){const i=jv(),l=WD();if(!i?.isRequired)return null;const u=gt("chakra-form__required-indicator",n.className);return e.jsx(He.span,{...i?.getRequiredIndicatorProps(n,r),__css:l.requiredIndicator,className:u})});AP.displayName="RequiredIndicator";const ni=tt(function(n,r){const{templateAreas:i,gap:l,rowGap:u,columnGap:d,column:p,row:f,autoFlow:g,autoRows:x,templateRows:y,autoColumns:b,templateColumns:w,...C}=n,_={display:"grid",gridTemplateAreas:i,gridGap:l,gridRowGap:u,gridColumnGap:d,gridAutoColumns:b,gridColumn:p,gridRow:f,gridAutoFlow:g,gridAutoRows:x,gridTemplateRows:y,gridTemplateColumns:w};return e.jsx(He.div,{ref:r,__css:_,...C})});ni.displayName="Grid";function zT(t){return tv(t,n=>n==="auto"?"auto":`span ${n}/span ${n}`)}const Vu=tt(function(n,r){const{area:i,colSpan:l,colStart:u,colEnd:d,rowEnd:p,rowSpan:f,rowStart:g,...x}=n,y=nm({gridArea:i,gridColumn:zT(l),gridRow:zT(f),gridColumnStart:u,gridColumnEnd:d,gridRowStart:g,gridRowEnd:p});return e.jsx(He.div,{ref:r,__css:y,...x})});Vu.displayName="GridItem";const mt=tt(function(n,r){const{columns:i,spacingX:l,spacingY:u,spacing:d,minChildWidth:p,...f}=n,g=Fc(),x=p?VG(p,g):UG(i);return e.jsx(ni,{ref:r,gap:d,columnGap:l,rowGap:u,templateColumns:x,...f})});mt.displayName="SimpleGrid";function FG(t){return typeof t=="number"?`${t}px`:t}function VG(t,n){return tv(t,r=>{const i=YH("sizes",r,FG(r))(n);return r===null?null:`repeat(auto-fit, minmax(${i}, 1fr))`})}function UG(t){return tv(t,n=>n===null?null:`repeat(${n}, minmax(0, 1fr))`)}function Zu(t){const{viewBox:n="0 0 24 24",d:r,displayName:i,defaultProps:l={}}=t,u=v.Children.toArray(t.path),d=tt((p,f)=>e.jsx(Cn,{ref:f,viewBox:n,...l,...p,children:u.length?u:e.jsx("path",{fill:"currentColor",d:r})}));return d.displayName=i,d}const Pb=tt(function(n,r){const{htmlWidth:i,htmlHeight:l,alt:u,...d}=n;return e.jsx("img",{width:i,height:l,ref:r,alt:u,...d})});Pb.displayName="NativeImage";const Li=tt(function(n,r){const{fallbackSrc:i,fallback:l,src:u,srcSet:d,align:p,fit:f,loading:g,ignoreFallback:x,crossOrigin:y,fallbackStrategy:b="beforeLoadOrError",referrerPolicy:w,...C}=n,_=i!==void 0||l!==void 0,A=g!=null||x||!_,D=FD({...n,crossOrigin:y,ignoreFallback:A}),P=BW(D,b),M={ref:r,objectFit:f,objectPosition:p,...A?C:rm(C,["onError","onLoad"])};return P?l||e.jsx(He.img,{as:Pb,className:"chakra-image__placeholder",src:i,...M}):e.jsx(He.img,{as:Pb,src:u,srcSet:d,crossOrigin:y,loading:g,referrerPolicy:w,className:"chakra-image",...M})});Li.displayName="Image";const ge=tt(function(n,r){const{htmlSize:i,...l}=n,u=Jr("Input",l),d=Yn(l),p=b1(d),f=gt("chakra-input",n.className);return e.jsx(He.input,{size:i,...p,__css:u.field,ref:r,className:f})});ge.displayName="Input";ge.id="Input";const[HG,WG]=Vn({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),zc=tt(function(n,r){const i=Jr("Input",n),{children:l,className:u,...d}=Yn(n),p=gt("chakra-input__group",u),f={},g=Lc(l),x=i.field;g.forEach(b=>{i&&(x&&b.type.id==="InputLeftElement"&&(f.paddingStart=x.height??x.h),x&&b.type.id==="InputRightElement"&&(f.paddingEnd=x.height??x.h),b.type.id==="InputRightAddon"&&(f.borderEndRadius=0),b.type.id==="InputLeftAddon"&&(f.borderStartRadius=0))});const y=g.map(b=>{const w=nm({size:b.props?.size||n.size,variant:b.props?.variant||n.variant});return b.type.id!=="Input"?v.cloneElement(b,w):v.cloneElement(b,Object.assign(w,f,b.props))});return e.jsx(He.div,{className:p,ref:r,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...i.group},"data-group":!0,...d,children:e.jsx(HG,{value:i,children:y})})});zc.displayName="InputGroup";const qG=He("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),bv=tt(function(n,r){const{placement:i="left",...l}=n,u=WG(),d=u.field,f={[i==="left"?"insetStart":"insetEnd"]:"0",width:d?.height??d?.h,height:d?.height??d?.h,fontSize:d?.fontSize,...u.element};return e.jsx(qG,{ref:r,__css:f,...l})});bv.id="InputElement";bv.displayName="InputElement";const Ic=tt(function(n,r){const{className:i,...l}=n,u=gt("chakra-input__left-element",i);return e.jsx(bv,{ref:r,placement:"left",className:u,...l})});Ic.id="InputLeftElement";Ic.displayName="InputLeftElement";const L1=tt(function(n,r){const{className:i,...l}=n,u=gt("chakra-input__right-element",i);return e.jsx(bv,{ref:r,placement:"right",className:u,...l})});L1.id="InputRightElement";L1.displayName="InputRightElement";const O1=tt(function(n,r){const i=ji("Link",n),{className:l,isExternal:u,...d}=Yn(n);return e.jsx(He.a,{target:u?"_blank":void 0,rel:u?"noopener":void 0,ref:r,className:gt("chakra-link",l),...d,__css:i})});O1.displayName="Link";const[GG,RP]=Vn({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),Sv=tt(function(n,r){const i=Jr("List",n),{children:l,styleType:u="none",stylePosition:d,spacing:p,...f}=Yn(n),g=Lc(l),y=p?{"& > *:not(style) ~ *:not(style)":{mt:p}}:{};return e.jsx(GG,{value:i,children:e.jsx(He.ul,{ref:r,listStyleType:u,listStylePosition:d,role:"list",__css:{...i.container,...y},...f,children:g})})});Sv.displayName="List";const YG=tt((t,n)=>{const{as:r,...i}=t;return e.jsx(Sv,{ref:n,as:"ol",styleType:"decimal",marginStart:"1em",...i})});YG.displayName="OrderedList";const ZG=tt(function(n,r){const{as:i,...l}=n;return e.jsx(Sv,{ref:r,as:"ul",styleType:"initial",marginStart:"1em",...l})});ZG.displayName="UnorderedList";const kP=tt(function(n,r){const i=RP();return e.jsx(He.li,{ref:r,...n,__css:i.item})});kP.displayName="ListItem";const XG=tt(function(n,r){const i=RP();return e.jsx(Cn,{ref:r,role:"presentation",...n,__css:i.icon})});XG.displayName="ListIcon";function DP(t,n={}){const{ssr:r=!0,fallback:i}=n,{getWindow:l}=K8(),u=Array.isArray(t)?t:[t];let d=Array.isArray(i)?i:[i];d=d.filter(g=>g!=null);const[p,f]=v.useState(()=>u.map((g,x)=>({media:g,matches:r?!!d[x]:l().matchMedia(g).matches})));return v.useEffect(()=>{const g=l();f(u.map(b=>({media:b,matches:g.matchMedia(b).matches})));const x=u.map(b=>g.matchMedia(b)),y=b=>{f(w=>w.slice().map(C=>C.media===b.media?{...C,matches:b.matches}:C))};return x.forEach(b=>{typeof b.addListener=="function"?b.addListener(y):b.addEventListener("change",y)}),()=>{x.forEach(b=>{typeof b.removeListener=="function"?b.removeListener(y):b.removeEventListener("change",y)})}},[l]),p.map(g=>g.matches)}function KG(t){const n=gs(t)?t:{fallback:t??"base"},i=Fc().__breakpoints.details.map(({minMaxQuery:p,breakpoint:f})=>({breakpoint:f,query:p.replace("@media screen and ","")})),l=i.map(p=>p.breakpoint===n.fallback),d=DP(i.map(p=>p.query),{fallback:l,ssr:n.ssr}).findIndex(p=>p==!0);return i[d]?.breakpoint??n.fallback}function QG(t,n,r=aR){let i=Object.keys(t).indexOf(n);if(i!==-1)return t[n];let l=r.indexOf(n);for(;l>=0;){const u=r[l];if(t.hasOwnProperty(u)){i=l;break}l-=1}if(i!==-1){const u=r[i];return t[u]}}function PP(t,n){const r=gs(n)?n:{fallback:"base"},i=KG(r),l=Fc();if(!i)return;const u=Array.from(l.__breakpoints?.keys||[]),d=Array.isArray(t)?Object.fromEntries(Object.entries(UL(t,u)).map(([p,f])=>[p,f])):t;return QG(d,i,u)}function JG(t,n,r,i){if(n==null)return i;if(!i)return t.find(d=>r(d).toLowerCase().startsWith(n.toLowerCase()));const l=t.filter(u=>r(u).toLowerCase().startsWith(n.toLowerCase()));if(l.length>0){let u;return l.includes(i)?(u=l.indexOf(i)+1,u===l.length&&(u=0),l[u]):(u=t.indexOf(l[0]),t[u])}return i}function eY(t){const{key:n}=t;return n.length===1||n.length>1&&/[^a-zA-Z0-9]/.test(n)}function tY(t={}){const{timeout:n=300,preventDefault:r=()=>!0}=t,[i,l]=v.useState([]),u=v.useRef(void 0),d=()=>{u.current&&(clearTimeout(u.current),u.current=null)},p=()=>{d(),u.current=setTimeout(()=>{l([]),u.current=null},n)};v.useEffect(()=>d,[]);function f(g){return x=>{if(x.key==="Backspace"){const y=[...i];y.pop(),l(y);return}if(eY(x)){const y=i.concat(x.key);r(x)&&(x.preventDefault(),x.stopPropagation()),l(y),g(y.join("")),p()}}}return f}var zi="top",Ba="bottom",$a="right",Ii="left",B1="auto",pm=[zi,Ba,$a,Ii],Eh="start",Gp="end",nY="clippingParents",MP="viewport",Wf="popper",rY="reference",IT=pm.reduce(function(t,n){return t.concat([n+"-"+Eh,n+"-"+Gp])},[]),zP=[].concat(pm,[B1]).reduce(function(t,n){return t.concat([n,n+"-"+Eh,n+"-"+Gp])},[]),sY="beforeRead",iY="read",aY="afterRead",oY="beforeMain",lY="main",cY="afterMain",uY="beforeWrite",dY="write",hY="afterWrite",fY=[sY,iY,aY,oY,lY,cY,uY,dY,hY];function Xo(t){return t?(t.nodeName||"").toLowerCase():null}function ma(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function Uu(t){var n=ma(t).Element;return t instanceof n||t instanceof Element}function La(t){var n=ma(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function $1(t){if(typeof ShadowRoot>"u")return!1;var n=ma(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function pY(t){var n=t.state;Object.keys(n.elements).forEach(function(r){var i=n.styles[r]||{},l=n.attributes[r]||{},u=n.elements[r];!La(u)||!Xo(u)||(Object.assign(u.style,i),Object.keys(l).forEach(function(d){var p=l[d];p===!1?u.removeAttribute(d):u.setAttribute(d,p===!0?"":p)}))})}function mY(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(i){var l=n.elements[i],u=n.attributes[i]||{},d=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:r[i]),p=d.reduce(function(f,g){return f[g]="",f},{});!La(l)||!Xo(l)||(Object.assign(l.style,p),Object.keys(u).forEach(function(f){l.removeAttribute(f)}))})}}const gY={name:"applyStyles",enabled:!0,phase:"write",fn:pY,effect:mY,requires:["computeStyles"]};function Ho(t){return t.split("-")[0]}var Iu=Math.max,Fx=Math.min,_h=Math.round;function Mb(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function IP(){return!/^((?!chrome|android).)*safari/i.test(Mb())}function Th(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.getBoundingClientRect(),l=1,u=1;n&&La(t)&&(l=t.offsetWidth>0&&_h(i.width)/t.offsetWidth||1,u=t.offsetHeight>0&&_h(i.height)/t.offsetHeight||1);var d=Uu(t)?ma(t):window,p=d.visualViewport,f=!IP()&&r,g=(i.left+(f&&p?p.offsetLeft:0))/l,x=(i.top+(f&&p?p.offsetTop:0))/u,y=i.width/l,b=i.height/u;return{width:y,height:b,top:x,right:g+y,bottom:x+b,left:g,x:g,y:x}}function F1(t){var n=Th(t),r=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:i}}function NP(t,n){var r=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(r&&$1(r)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Bl(t){return ma(t).getComputedStyle(t)}function xY(t){return["table","td","th"].indexOf(Xo(t))>=0}function Vc(t){return((Uu(t)?t.ownerDocument:t.document)||window.document).documentElement}function wv(t){return Xo(t)==="html"?t:t.assignedSlot||t.parentNode||($1(t)?t.host:null)||Vc(t)}function NT(t){return!La(t)||Bl(t).position==="fixed"?null:t.offsetParent}function vY(t){var n=/firefox/i.test(Mb()),r=/Trident/i.test(Mb());if(r&&La(t)){var i=Bl(t);if(i.position==="fixed")return null}var l=wv(t);for($1(l)&&(l=l.host);La(l)&&["html","body"].indexOf(Xo(l))<0;){var u=Bl(l);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||n&&u.willChange==="filter"||n&&u.filter&&u.filter!=="none")return l;l=l.parentNode}return null}function mm(t){for(var n=ma(t),r=NT(t);r&&xY(r)&&Bl(r).position==="static";)r=NT(r);return r&&(Xo(r)==="html"||Xo(r)==="body"&&Bl(r).position==="static")?n:r||vY(t)||n}function V1(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Cp(t,n,r){return Iu(t,Fx(n,r))}function yY(t,n,r){var i=Cp(t,n,r);return i>r?r:i}function LP(){return{top:0,right:0,bottom:0,left:0}}function OP(t){return Object.assign({},LP(),t)}function BP(t,n){return n.reduce(function(r,i){return r[i]=t,r},{})}var jY=function(n,r){return n=typeof n=="function"?n(Object.assign({},r.rects,{placement:r.placement})):n,OP(typeof n!="number"?n:BP(n,pm))};function bY(t){var n,r=t.state,i=t.name,l=t.options,u=r.elements.arrow,d=r.modifiersData.popperOffsets,p=Ho(r.placement),f=V1(p),g=[Ii,$a].indexOf(p)>=0,x=g?"height":"width";if(!(!u||!d)){var y=jY(l.padding,r),b=F1(u),w=f==="y"?zi:Ii,C=f==="y"?Ba:$a,_=r.rects.reference[x]+r.rects.reference[f]-d[f]-r.rects.popper[x],A=d[f]-r.rects.reference[f],D=mm(u),P=D?f==="y"?D.clientHeight||0:D.clientWidth||0:0,M=_/2-A/2,N=y[w],z=P-b[x]-y[C],I=P/2-b[x]/2+M,V=Cp(N,I,z),$=f;r.modifiersData[i]=(n={},n[$]=V,n.centerOffset=V-I,n)}}function SY(t){var n=t.state,r=t.options,i=r.element,l=i===void 0?"[data-popper-arrow]":i;l!=null&&(typeof l=="string"&&(l=n.elements.popper.querySelector(l),!l)||NP(n.elements.popper,l)&&(n.elements.arrow=l))}const wY={name:"arrow",enabled:!0,phase:"main",fn:bY,effect:SY,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ah(t){return t.split("-")[1]}var CY={top:"auto",right:"auto",bottom:"auto",left:"auto"};function EY(t,n){var r=t.x,i=t.y,l=n.devicePixelRatio||1;return{x:_h(r*l)/l||0,y:_h(i*l)/l||0}}function LT(t){var n,r=t.popper,i=t.popperRect,l=t.placement,u=t.variation,d=t.offsets,p=t.position,f=t.gpuAcceleration,g=t.adaptive,x=t.roundOffsets,y=t.isFixed,b=d.x,w=b===void 0?0:b,C=d.y,_=C===void 0?0:C,A=typeof x=="function"?x({x:w,y:_}):{x:w,y:_};w=A.x,_=A.y;var D=d.hasOwnProperty("x"),P=d.hasOwnProperty("y"),M=Ii,N=zi,z=window;if(g){var I=mm(r),V="clientHeight",$="clientWidth";if(I===ma(r)&&(I=Vc(r),Bl(I).position!=="static"&&p==="absolute"&&(V="scrollHeight",$="scrollWidth")),I=I,l===zi||(l===Ii||l===$a)&&u===Gp){N=Ba;var ae=y&&I===z&&z.visualViewport?z.visualViewport.height:I[V];_-=ae-i.height,_*=f?1:-1}if(l===Ii||(l===zi||l===Ba)&&u===Gp){M=$a;var he=y&&I===z&&z.visualViewport?z.visualViewport.width:I[$];w-=he-i.width,w*=f?1:-1}}var re=Object.assign({position:p},g&&CY),ce=x===!0?EY({x:w,y:_},ma(r)):{x:w,y:_};if(w=ce.x,_=ce.y,f){var Se;return Object.assign({},re,(Se={},Se[N]=P?"0":"",Se[M]=D?"0":"",Se.transform=(z.devicePixelRatio||1)<=1?"translate("+w+"px, "+_+"px)":"translate3d("+w+"px, "+_+"px, 0)",Se))}return Object.assign({},re,(n={},n[N]=P?_+"px":"",n[M]=D?w+"px":"",n.transform="",n))}function _Y(t){var n=t.state,r=t.options,i=r.gpuAcceleration,l=i===void 0?!0:i,u=r.adaptive,d=u===void 0?!0:u,p=r.roundOffsets,f=p===void 0?!0:p,g={placement:Ho(n.placement),variation:Ah(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:l,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,LT(Object.assign({},g,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:d,roundOffsets:f})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,LT(Object.assign({},g,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const TY={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:_Y,data:{}};var Bg={passive:!0};function AY(t){var n=t.state,r=t.instance,i=t.options,l=i.scroll,u=l===void 0?!0:l,d=i.resize,p=d===void 0?!0:d,f=ma(n.elements.popper),g=[].concat(n.scrollParents.reference,n.scrollParents.popper);return u&&g.forEach(function(x){x.addEventListener("scroll",r.update,Bg)}),p&&f.addEventListener("resize",r.update,Bg),function(){u&&g.forEach(function(x){x.removeEventListener("scroll",r.update,Bg)}),p&&f.removeEventListener("resize",r.update,Bg)}}const RY={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:AY,data:{}};var kY={left:"right",right:"left",bottom:"top",top:"bottom"};function bx(t){return t.replace(/left|right|bottom|top/g,function(n){return kY[n]})}var DY={start:"end",end:"start"};function OT(t){return t.replace(/start|end/g,function(n){return DY[n]})}function U1(t){var n=ma(t),r=n.pageXOffset,i=n.pageYOffset;return{scrollLeft:r,scrollTop:i}}function H1(t){return Th(Vc(t)).left+U1(t).scrollLeft}function PY(t,n){var r=ma(t),i=Vc(t),l=r.visualViewport,u=i.clientWidth,d=i.clientHeight,p=0,f=0;if(l){u=l.width,d=l.height;var g=IP();(g||!g&&n==="fixed")&&(p=l.offsetLeft,f=l.offsetTop)}return{width:u,height:d,x:p+H1(t),y:f}}function MY(t){var n,r=Vc(t),i=U1(t),l=(n=t.ownerDocument)==null?void 0:n.body,u=Iu(r.scrollWidth,r.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),d=Iu(r.scrollHeight,r.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),p=-i.scrollLeft+H1(t),f=-i.scrollTop;return Bl(l||r).direction==="rtl"&&(p+=Iu(r.clientWidth,l?l.clientWidth:0)-u),{width:u,height:d,x:p,y:f}}function W1(t){var n=Bl(t),r=n.overflow,i=n.overflowX,l=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+l+i)}function $P(t){return["html","body","#document"].indexOf(Xo(t))>=0?t.ownerDocument.body:La(t)&&W1(t)?t:$P(wv(t))}function Ep(t,n){var r;n===void 0&&(n=[]);var i=$P(t),l=i===((r=t.ownerDocument)==null?void 0:r.body),u=ma(i),d=l?[u].concat(u.visualViewport||[],W1(i)?i:[]):i,p=n.concat(d);return l?p:p.concat(Ep(wv(d)))}function zb(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function zY(t,n){var r=Th(t,!1,n==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function BT(t,n,r){return n===MP?zb(PY(t,r)):Uu(n)?zY(n,r):zb(MY(Vc(t)))}function IY(t){var n=Ep(wv(t)),r=["absolute","fixed"].indexOf(Bl(t).position)>=0,i=r&&La(t)?mm(t):t;return Uu(i)?n.filter(function(l){return Uu(l)&&NP(l,i)&&Xo(l)!=="body"}):[]}function NY(t,n,r,i){var l=n==="clippingParents"?IY(t):[].concat(n),u=[].concat(l,[r]),d=u[0],p=u.reduce(function(f,g){var x=BT(t,g,i);return f.top=Iu(x.top,f.top),f.right=Fx(x.right,f.right),f.bottom=Fx(x.bottom,f.bottom),f.left=Iu(x.left,f.left),f},BT(t,d,i));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function FP(t){var n=t.reference,r=t.element,i=t.placement,l=i?Ho(i):null,u=i?Ah(i):null,d=n.x+n.width/2-r.width/2,p=n.y+n.height/2-r.height/2,f;switch(l){case zi:f={x:d,y:n.y-r.height};break;case Ba:f={x:d,y:n.y+n.height};break;case $a:f={x:n.x+n.width,y:p};break;case Ii:f={x:n.x-r.width,y:p};break;default:f={x:n.x,y:n.y}}var g=l?V1(l):null;if(g!=null){var x=g==="y"?"height":"width";switch(u){case Eh:f[g]=f[g]-(n[x]/2-r[x]/2);break;case Gp:f[g]=f[g]+(n[x]/2-r[x]/2);break}}return f}function Yp(t,n){n===void 0&&(n={});var r=n,i=r.placement,l=i===void 0?t.placement:i,u=r.strategy,d=u===void 0?t.strategy:u,p=r.boundary,f=p===void 0?nY:p,g=r.rootBoundary,x=g===void 0?MP:g,y=r.elementContext,b=y===void 0?Wf:y,w=r.altBoundary,C=w===void 0?!1:w,_=r.padding,A=_===void 0?0:_,D=OP(typeof A!="number"?A:BP(A,pm)),P=b===Wf?rY:Wf,M=t.rects.popper,N=t.elements[C?P:b],z=NY(Uu(N)?N:N.contextElement||Vc(t.elements.popper),f,x,d),I=Th(t.elements.reference),V=FP({reference:I,element:M,placement:l}),$=zb(Object.assign({},M,V)),ae=b===Wf?$:I,he={top:z.top-ae.top+D.top,bottom:ae.bottom-z.bottom+D.bottom,left:z.left-ae.left+D.left,right:ae.right-z.right+D.right},re=t.modifiersData.offset;if(b===Wf&&re){var ce=re[l];Object.keys(he).forEach(function(Se){var je=[$a,Ba].indexOf(Se)>=0?1:-1,de=[zi,Ba].indexOf(Se)>=0?"y":"x";he[Se]+=ce[de]*je})}return he}function LY(t,n){n===void 0&&(n={});var r=n,i=r.placement,l=r.boundary,u=r.rootBoundary,d=r.padding,p=r.flipVariations,f=r.allowedAutoPlacements,g=f===void 0?zP:f,x=Ah(i),y=x?p?IT:IT.filter(function(C){return Ah(C)===x}):pm,b=y.filter(function(C){return g.indexOf(C)>=0});b.length===0&&(b=y);var w=b.reduce(function(C,_){return C[_]=Yp(t,{placement:_,boundary:l,rootBoundary:u,padding:d})[Ho(_)],C},{});return Object.keys(w).sort(function(C,_){return w[C]-w[_]})}function OY(t){if(Ho(t)===B1)return[];var n=bx(t);return[OT(t),n,OT(n)]}function BY(t){var n=t.state,r=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var l=r.mainAxis,u=l===void 0?!0:l,d=r.altAxis,p=d===void 0?!0:d,f=r.fallbackPlacements,g=r.padding,x=r.boundary,y=r.rootBoundary,b=r.altBoundary,w=r.flipVariations,C=w===void 0?!0:w,_=r.allowedAutoPlacements,A=n.options.placement,D=Ho(A),P=D===A,M=f||(P||!C?[bx(A)]:OY(A)),N=[A].concat(M).reduce(function(Y,q){return Y.concat(Ho(q)===B1?LY(n,{placement:q,boundary:x,rootBoundary:y,padding:g,flipVariations:C,allowedAutoPlacements:_}):q)},[]),z=n.rects.reference,I=n.rects.popper,V=new Map,$=!0,ae=N[0],he=0;he<N.length;he++){var re=N[he],ce=Ho(re),Se=Ah(re)===Eh,je=[zi,Ba].indexOf(ce)>=0,de=je?"width":"height",G=Yp(n,{placement:re,boundary:x,rootBoundary:y,altBoundary:b,padding:g}),U=je?Se?$a:Ii:Se?Ba:zi;z[de]>I[de]&&(U=bx(U));var W=bx(U),me=[];if(u&&me.push(G[ce]<=0),p&&me.push(G[U]<=0,G[W]<=0),me.every(function(Y){return Y})){ae=re,$=!1;break}V.set(re,me)}if($)for(var F=C?3:1,fe=function(q){var le=N.find(function(We){var pe=V.get(We);if(pe)return pe.slice(0,q).every(function(ye){return ye})});if(le)return ae=le,"break"},te=F;te>0;te--){var R=fe(te);if(R==="break")break}n.placement!==ae&&(n.modifiersData[i]._skip=!0,n.placement=ae,n.reset=!0)}}const $Y={name:"flip",enabled:!0,phase:"main",fn:BY,requiresIfExists:["offset"],data:{_skip:!1}};function $T(t,n,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-n.height-r.y,right:t.right-n.width+r.x,bottom:t.bottom-n.height+r.y,left:t.left-n.width-r.x}}function FT(t){return[zi,$a,Ba,Ii].some(function(n){return t[n]>=0})}function FY(t){var n=t.state,r=t.name,i=n.rects.reference,l=n.rects.popper,u=n.modifiersData.preventOverflow,d=Yp(n,{elementContext:"reference"}),p=Yp(n,{altBoundary:!0}),f=$T(d,i),g=$T(p,l,u),x=FT(f),y=FT(g);n.modifiersData[r]={referenceClippingOffsets:f,popperEscapeOffsets:g,isReferenceHidden:x,hasPopperEscaped:y},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":x,"data-popper-escaped":y})}const VY={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:FY};function UY(t,n,r){var i=Ho(t),l=[Ii,zi].indexOf(i)>=0?-1:1,u=typeof r=="function"?r(Object.assign({},n,{placement:t})):r,d=u[0],p=u[1];return d=d||0,p=(p||0)*l,[Ii,$a].indexOf(i)>=0?{x:p,y:d}:{x:d,y:p}}function HY(t){var n=t.state,r=t.options,i=t.name,l=r.offset,u=l===void 0?[0,0]:l,d=zP.reduce(function(x,y){return x[y]=UY(y,n.rects,u),x},{}),p=d[n.placement],f=p.x,g=p.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=f,n.modifiersData.popperOffsets.y+=g),n.modifiersData[i]=d}const WY={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:HY};function qY(t){var n=t.state,r=t.name;n.modifiersData[r]=FP({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const GY={name:"popperOffsets",enabled:!0,phase:"read",fn:qY,data:{}};function YY(t){return t==="x"?"y":"x"}function ZY(t){var n=t.state,r=t.options,i=t.name,l=r.mainAxis,u=l===void 0?!0:l,d=r.altAxis,p=d===void 0?!1:d,f=r.boundary,g=r.rootBoundary,x=r.altBoundary,y=r.padding,b=r.tether,w=b===void 0?!0:b,C=r.tetherOffset,_=C===void 0?0:C,A=Yp(n,{boundary:f,rootBoundary:g,padding:y,altBoundary:x}),D=Ho(n.placement),P=Ah(n.placement),M=!P,N=V1(D),z=YY(N),I=n.modifiersData.popperOffsets,V=n.rects.reference,$=n.rects.popper,ae=typeof _=="function"?_(Object.assign({},n.rects,{placement:n.placement})):_,he=typeof ae=="number"?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),re=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,ce={x:0,y:0};if(I){if(u){var Se,je=N==="y"?zi:Ii,de=N==="y"?Ba:$a,G=N==="y"?"height":"width",U=I[N],W=U+A[je],me=U-A[de],F=w?-$[G]/2:0,fe=P===Eh?V[G]:$[G],te=P===Eh?-$[G]:-V[G],R=n.elements.arrow,Y=w&&R?F1(R):{width:0,height:0},q=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:LP(),le=q[je],We=q[de],pe=Cp(0,V[G],Y[G]),ye=M?V[G]/2-F-pe-le-he.mainAxis:fe-pe-le-he.mainAxis,Ze=M?-V[G]/2+F+pe+We+he.mainAxis:te+pe+We+he.mainAxis,ht=n.elements.arrow&&mm(n.elements.arrow),rt=ht?N==="y"?ht.clientTop||0:ht.clientLeft||0:0,vt=(Se=re?.[N])!=null?Se:0,Ue=U+ye-vt-rt,qt=U+Ze-vt,Je=Cp(w?Fx(W,Ue):W,U,w?Iu(me,qt):me);I[N]=Je,ce[N]=Je-U}if(p){var Ge,Ve=N==="x"?zi:Ii,se=N==="x"?Ba:$a,be=I[z],at=z==="y"?"height":"width",St=be+A[Ve],An=be-A[se],qe=[zi,Ii].indexOf(D)!==-1,Me=(Ge=re?.[z])!=null?Ge:0,nt=qe?St:be-V[at]-$[at]-Me+he.altAxis,wt=qe?be+V[at]+$[at]-Me-he.altAxis:An,Xe=w&&qe?yY(nt,be,wt):Cp(w?nt:St,be,w?wt:An);I[z]=Xe,ce[z]=Xe-be}n.modifiersData[i]=ce}}const XY={name:"preventOverflow",enabled:!0,phase:"main",fn:ZY,requiresIfExists:["offset"]};function KY(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function QY(t){return t===ma(t)||!La(t)?U1(t):KY(t)}function JY(t){var n=t.getBoundingClientRect(),r=_h(n.width)/t.offsetWidth||1,i=_h(n.height)/t.offsetHeight||1;return r!==1||i!==1}function eZ(t,n,r){r===void 0&&(r=!1);var i=La(n),l=La(n)&&JY(n),u=Vc(n),d=Th(t,l,r),p={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(i||!i&&!r)&&((Xo(n)!=="body"||W1(u))&&(p=QY(n)),La(n)?(f=Th(n,!0),f.x+=n.clientLeft,f.y+=n.clientTop):u&&(f.x=H1(u))),{x:d.left+p.scrollLeft-f.x,y:d.top+p.scrollTop-f.y,width:d.width,height:d.height}}function tZ(t){var n=new Map,r=new Set,i=[];t.forEach(function(u){n.set(u.name,u)});function l(u){r.add(u.name);var d=[].concat(u.requires||[],u.requiresIfExists||[]);d.forEach(function(p){if(!r.has(p)){var f=n.get(p);f&&l(f)}}),i.push(u)}return t.forEach(function(u){r.has(u.name)||l(u)}),i}function nZ(t){var n=tZ(t);return fY.reduce(function(r,i){return r.concat(n.filter(function(l){return l.phase===i}))},[])}function rZ(t){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(t())})})),n}}function sZ(t){var n=t.reduce(function(r,i){var l=r[i.name];return r[i.name]=l?Object.assign({},l,i,{options:Object.assign({},l.options,i.options),data:Object.assign({},l.data,i.data)}):i,r},{});return Object.keys(n).map(function(r){return n[r]})}var VT={placement:"bottom",modifiers:[],strategy:"absolute"};function UT(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return!n.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function iZ(t){t===void 0&&(t={});var n=t,r=n.defaultModifiers,i=r===void 0?[]:r,l=n.defaultOptions,u=l===void 0?VT:l;return function(p,f,g){g===void 0&&(g=u);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},VT,u),modifiersData:{},elements:{reference:p,popper:f},attributes:{},styles:{}},y=[],b=!1,w={state:x,setOptions:function(D){var P=typeof D=="function"?D(x.options):D;_(),x.options=Object.assign({},u,x.options,P),x.scrollParents={reference:Uu(p)?Ep(p):p.contextElement?Ep(p.contextElement):[],popper:Ep(f)};var M=nZ(sZ([].concat(i,x.options.modifiers)));return x.orderedModifiers=M.filter(function(N){return N.enabled}),C(),w.update()},forceUpdate:function(){if(!b){var D=x.elements,P=D.reference,M=D.popper;if(UT(P,M)){x.rects={reference:eZ(P,mm(M),x.options.strategy==="fixed"),popper:F1(M)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(he){return x.modifiersData[he.name]=Object.assign({},he.data)});for(var N=0;N<x.orderedModifiers.length;N++){if(x.reset===!0){x.reset=!1,N=-1;continue}var z=x.orderedModifiers[N],I=z.fn,V=z.options,$=V===void 0?{}:V,ae=z.name;typeof I=="function"&&(x=I({state:x,options:$,name:ae,instance:w})||x)}}}},update:rZ(function(){return new Promise(function(A){w.forceUpdate(),A(x)})}),destroy:function(){_(),b=!0}};if(!UT(p,f))return w;w.setOptions(g).then(function(A){!b&&g.onFirstUpdate&&g.onFirstUpdate(A)});function C(){x.orderedModifiers.forEach(function(A){var D=A.name,P=A.options,M=P===void 0?{}:P,N=A.effect;if(typeof N=="function"){var z=N({state:x,name:D,instance:w,options:M}),I=function(){};y.push(z||I)}})}function _(){y.forEach(function(A){return A()}),y=[]}return w}}var aZ=[RY,GY,TY,gY,WY,$Y,XY,wY,VY],oZ=iZ({defaultModifiers:aZ});const Ld=(t,n)=>({var:t,varRef:n?`var(${t}, ${n})`:`var(${t})`}),Ls={arrowShadowColor:Ld("--popper-arrow-shadow-color"),arrowSize:Ld("--popper-arrow-size","8px"),arrowSizeHalf:Ld("--popper-arrow-size-half"),arrowBg:Ld("--popper-arrow-bg"),transformOrigin:Ld("--popper-transform-origin"),arrowOffset:Ld("--popper-arrow-offset")};function lZ(t){if(t.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}const cZ={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},uZ=t=>cZ[t],HT={scroll:!0,resize:!0};function dZ(t){let n;return typeof t=="object"?n={enabled:!0,options:{...HT,...t}}:n={enabled:t,options:HT},n}const hZ={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:t})=>{t.styles.popper.width=`${t.rects.reference.width}px`},effect:({state:t})=>()=>{const n=t.elements.reference;t.elements.popper.style.width=`${n.offsetWidth}px`}},fZ={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:t})=>{WT(t)},effect:({state:t})=>()=>{WT(t)}},WT=t=>{t.elements.popper.style.setProperty(Ls.transformOrigin.var,uZ(t.placement))},pZ={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:t})=>{mZ(t)}},mZ=t=>{if(!t.placement)return;const n=gZ(t.placement);if(t.elements?.arrow&&n){Object.assign(t.elements.arrow.style,{[n.property]:n.value,width:Ls.arrowSize.varRef,height:Ls.arrowSize.varRef,zIndex:-1});const r={[Ls.arrowSizeHalf.var]:`calc(${Ls.arrowSize.varRef} / 2 - 1px)`,[Ls.arrowOffset.var]:`calc(${Ls.arrowSizeHalf.varRef} * -1)`};for(const i in r)t.elements.arrow.style.setProperty(i,r[i])}},gZ=t=>{if(t.startsWith("top"))return{property:"bottom",value:Ls.arrowOffset.varRef};if(t.startsWith("bottom"))return{property:"top",value:Ls.arrowOffset.varRef};if(t.startsWith("left"))return{property:"right",value:Ls.arrowOffset.varRef};if(t.startsWith("right"))return{property:"left",value:Ls.arrowOffset.varRef}},xZ={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:t})=>{qT(t)},effect:({state:t})=>()=>{qT(t)}},qT=t=>{if(!t.elements.arrow)return;const n=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!n)return;const r=lZ(t.placement);r&&n.style.setProperty("--popper-arrow-default-shadow",r),Object.assign(n.style,{transform:"rotate(45deg)",background:Ls.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},vZ={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},yZ={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function jZ(t,n="ltr"){const r=vZ[t]?.[n]||t;return n==="ltr"?r:yZ[t]??r}function VP(t={}){const{enabled:n=!0,modifiers:r,placement:i="bottom",strategy:l="absolute",arrowPadding:u=8,eventListeners:d=!0,offset:p,gutter:f=8,flip:g=!0,boundary:x="clippingParents",preventOverflow:y=!0,matchWidth:b,direction:w="ltr"}=t,C=v.useRef(null),_=v.useRef(null),A=v.useRef(null),D=jZ(i,w),P=v.useRef(()=>{}),M=v.useCallback(()=>{!n||!C.current||!_.current||(P.current?.(),A.current=oZ(C.current,_.current,{placement:D,modifiers:[xZ,pZ,fZ,{...hZ,enabled:!!b},{name:"eventListeners",...dZ(d)},{name:"arrow",options:{padding:u}},{name:"offset",options:{offset:p??[0,f]}},{name:"flip",enabled:!!g,options:{padding:8}},{name:"preventOverflow",enabled:!!y,options:{boundary:x}},...r??[]],strategy:l}),A.current.forceUpdate(),P.current=A.current.destroy)},[D,n,r,b,d,u,p,f,g,y,x,l]);v.useEffect(()=>()=>{!C.current&&!_.current&&(A.current?.destroy(),A.current=null)},[]);const N=v.useCallback(he=>{C.current=he,M()},[M]),z=v.useCallback((he={},re=null)=>({...he,ref:kr(N,re)}),[N]),I=v.useCallback(he=>{_.current=he,M()},[M]),V=v.useCallback((he={},re=null)=>({...he,ref:kr(I,re),style:{...he.style,position:l,minWidth:b?void 0:"max-content",inset:"0 auto auto 0"}}),[l,I,b]),$=v.useCallback((he={},re=null)=>{const{size:ce,shadowColor:Se,bg:je,style:de,...G}=he;return{...G,ref:re,"data-popper-arrow":"",style:bZ(he)}},[]),ae=v.useCallback((he={},re=null)=>({...he,ref:re,"data-popper-arrow-inner":""}),[]);return{update(){A.current?.update()},forceUpdate(){A.current?.forceUpdate()},transformOrigin:Ls.transformOrigin.varRef,referenceRef:N,popperRef:I,getPopperProps:V,getArrowProps:$,getArrowInnerProps:ae,getReferenceProps:z}}function bZ(t){const{size:n,shadowColor:r,bg:i,style:l}=t,u={...l,position:"absolute"};return n&&(u["--popper-arrow-size"]=n),r&&(u["--popper-arrow-shadow-color"]=r),i&&(u["--popper-arrow-bg"]=i),u}function SZ(){const t=v.useRef(new Map),n=t.current,r=v.useCallback((l,u,d,p)=>{t.current.set(d,{type:u,el:l,options:p}),l.addEventListener(u,d,p)},[]),i=v.useCallback((l,u,d,p)=>{l.removeEventListener(u,d,p),t.current.delete(d)},[]);return v.useEffect(()=>()=>{n.forEach((l,u)=>{i(l.el,l.type,u,l.options)})},[i,n]),{add:r,remove:i}}function hj(t){const n=t.composedPath?.()?.[0]??t.target,{tagName:r,isContentEditable:i}=n;return r!=="INPUT"&&r!=="TEXTAREA"&&i!==!0}function UP(t={}){const{ref:n,isDisabled:r,isFocusable:i,clickOnEnter:l=!0,clickOnSpace:u=!0,onMouseDown:d,onMouseUp:p,onClick:f,onKeyDown:g,onKeyUp:x,tabIndex:y,onMouseOver:b,onMouseLeave:w,...C}=t,[_,A]=v.useState(!0),[D,P]=v.useState(!1),M=SZ(),N=U=>{U&&U.tagName!=="BUTTON"&&A(!1)},z=_?y:y||0,I=r&&!i,V=v.useCallback(U=>{if(r){U.stopPropagation(),U.preventDefault();return}U.currentTarget.focus(),f?.(U)},[r,f]),$=v.useCallback(U=>{D&&hj(U)&&(U.preventDefault(),U.stopPropagation(),P(!1),M.remove(document,"keyup",$,!1))},[D,M]),ae=v.useCallback(U=>{if(g?.(U),r||U.defaultPrevented||U.metaKey||!hj(U.nativeEvent)||_)return;const W=l&&U.key==="Enter";u&&U.key===" "&&(U.preventDefault(),P(!0)),W&&(U.preventDefault(),U.currentTarget.click()),M.add(document,"keyup",$,!1)},[r,_,g,l,u,M,$]),he=v.useCallback(U=>{if(x?.(U),r||U.defaultPrevented||U.metaKey||!hj(U.nativeEvent)||_)return;u&&U.key===" "&&(U.preventDefault(),P(!1),U.currentTarget.click())},[u,_,r,x]),re=v.useCallback(U=>{U.button===0&&(P(!1),M.remove(document,"mouseup",re,!1))},[M]),ce=v.useCallback(U=>{if(U.button!==0)return;if(r){U.stopPropagation(),U.preventDefault();return}_||P(!0),U.currentTarget.focus({preventScroll:!0}),M.add(document,"mouseup",re,!1),d?.(U)},[r,_,d,M,re]),Se=v.useCallback(U=>{U.button===0&&(_||P(!1),p?.(U))},[p,_]),je=v.useCallback(U=>{if(r){U.preventDefault();return}b?.(U)},[r,b]),de=v.useCallback(U=>{D&&(U.preventDefault(),P(!1)),w?.(U)},[D,w]),G=kr(n,N);return _?{...C,ref:G,type:"button","aria-disabled":I?void 0:r,disabled:I,onClick:V,onMouseDown:d,onMouseUp:p,onKeyUp:x,onKeyDown:g,onMouseOver:b,onMouseLeave:w}:{...C,ref:G,role:"button","data-active":gn(D),"aria-disabled":r?"true":void 0,tabIndex:I?void 0:z,onClick:V,onMouseDown:ce,onMouseUp:Se,onKeyUp:he,onKeyDown:ae,onMouseOver:je,onMouseLeave:de}}const[wZ,CZ,EZ,_Z]=vv(),[TZ,gm]=Vn({strict:!1,name:"MenuContext"});function HP(t){return t?.ownerDocument??document}function AZ(t){return HP(t).activeElement===t}function RZ(t={}){const{id:n,closeOnSelect:r=!0,closeOnBlur:i=!0,initialFocusRef:l,autoSelect:u=!0,isLazy:d,isOpen:p,defaultIsOpen:f,onClose:g,onOpen:x,placement:y="bottom-start",lazyBehavior:b="unmount",direction:w,computePositionOnMount:C=!1,..._}=t,A=v.useRef(null),D=v.useRef(null),P=v.useRef(!0),M=EZ(),N=v.useCallback(()=>{requestAnimationFrame(()=>{A.current?.focus({preventScroll:!1})})},[]),z=v.useCallback(()=>{const R=setTimeout(()=>{if(l)l.current?.focus();else if(!M.count())A.current?.focus({preventScroll:!1});else{const Y=M.firstEnabled();Y&&je(Y.index)}});me.current.add(R)},[M,l]),I=v.useCallback(()=>{const R=setTimeout(()=>{if(!M.count())A.current?.focus({preventScroll:!1});else{const Y=M.lastEnabled();Y&&je(Y.index)}});me.current.add(R)},[M]),V=v.useCallback(()=>{x?.(),u?z():N()},[u,z,N,x]),{isOpen:$,onOpen:ae,onClose:he,onToggle:re}=It({isOpen:p,defaultIsOpen:f,onClose:g,onOpen:V});aO({enabled:$&&i,ref:A,handler:R=>{const Y=R.composedPath?.()?.[0]??R.target;D.current?.contains(Y)||he()}});const ce=VP({..._,enabled:$||C,placement:y,direction:w}),[Se,je]=v.useState(-1);eO(A,{focusRef:D,visible:$});const de=KL({isOpen:$,ref:A}),[G,U]=nO(n,"menu-button","menu-list"),W=v.useCallback(()=>{ae(),N()},[ae,N]),me=v.useRef(new Set([]));v.useEffect(()=>{const R=me.current;return()=>{R.forEach(Y=>clearTimeout(Y)),R.clear()}},[]),Dc(()=>{$||(je(-1),A.current?.scrollTo(0,0))},[$]),Dc(()=>{$&&Se===-1&&N()},[Se,$]),v.useEffect(()=>{if(!$)return;M.item(Se)?.node?.focus({preventScroll:!P.current})},[M,Se,$]);const F=v.useCallback(()=>{ae(),z()},[z,ae]),fe=v.useCallback(()=>{P.current=!0,ae(),I()},[ae,I]),te=v.useCallback(()=>{const R=HP(A.current),Y=A.current?.contains(R.activeElement);if(!($&&!Y))return;M.item(Se)?.node?.focus({preventScroll:!P.current})},[$,Se,M]);return{openAndFocusMenu:W,openAndFocusFirstItem:F,openAndFocusLastItem:fe,onTransitionEnd:te,unstable__animationState:de,descendants:M,popper:ce,buttonId:G,menuId:U,forceUpdate:ce.forceUpdate,orientation:"vertical",isOpen:$,onToggle:re,onOpen:ae,onClose:he,menuRef:A,buttonRef:D,focusedIndex:Se,closeOnSelect:r,closeOnBlur:i,autoSelect:u,setFocusedIndex:je,isLazy:d,lazyBehavior:b,initialFocusRef:l,scrollIntoViewRef:P}}function kZ(t={},n=null){const r=gm(),{onToggle:i,popper:l,openAndFocusFirstItem:u,openAndFocusLastItem:d,scrollIntoViewRef:p}=r,f=v.useCallback(g=>{const x=g.key,b={Enter:u,ArrowDown:u,ArrowUp:d}[x];b&&(p.current=!0,g.preventDefault(),g.stopPropagation(),b(g))},[u,d,p]);return{...t,ref:kr(r.buttonRef,n,l.referenceRef),id:r.buttonId,"data-active":gn(r.isOpen),"aria-expanded":r.isOpen,"aria-haspopup":"menu","aria-controls":r.menuId,onClick:sn(t.onClick,i),onKeyDown:sn(t.onKeyDown,f)}}function Ib(t){return IZ(t)&&!!t?.getAttribute("role")?.startsWith("menuitem")}function DZ(t={},n=null){const r=gm();if(!r)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:i,setFocusedIndex:l,menuRef:u,isOpen:d,onClose:p,menuId:f,isLazy:g,lazyBehavior:x,scrollIntoViewRef:y,unstable__animationState:b}=r,w=CZ(),C=tY({preventDefault:P=>P.key!==" "&&Ib(P.target)}),_=v.useCallback(P=>{if(!P.currentTarget.contains(P.target))return;const M=P.key,z={Tab:V=>V.preventDefault(),Escape:V=>{V.stopPropagation(),p()},ArrowDown:()=>{y.current=!0;const V=w.nextEnabled(i)??w.firstEnabled();V&&l(V.index)},ArrowUp:()=>{y.current=!0;const V=w.prevEnabled(i)??w.firstEnabled();V&&l(V.index)}}[M];if(z){P.preventDefault(),z(P);return}const I=C(V=>{const $=JG(w.values(),V,ae=>ae?.node?.textContent??"",w.item(i));if($){const ae=w.indexOf($.node);l(ae)}});Ib(P.target)&&I(P)},[w,i,C,p,l,y]),A=v.useRef(!1);d&&(A.current=!0);const D=sR({wasSelected:A.current,enabled:g,mode:x,isSelected:b.present});return{...t,ref:kr(u,n),children:D?t.children:null,tabIndex:-1,role:"menu",id:f,style:{...t.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:sn(t.onKeyDown,_)}}function PZ(t={}){const{popper:n,isOpen:r}=gm();return n.getPopperProps({...t,style:{visibility:r?"visible":"hidden",...t.style}})}function WP(t={},n=null){const{onMouseEnter:r,onMouseMove:i,onMouseLeave:l,onClick:u,onFocus:d,isDisabled:p,isFocusable:f,closeOnSelect:g,type:x,...y}=t,b=gm(),{setFocusedIndex:w,focusedIndex:C,closeOnSelect:_,onClose:A,menuId:D,scrollIntoViewRef:P}=b,M=v.useRef(null),N=`${D}-menuitem-${v.useId()}`,{index:z,register:I}=_Z({disabled:p&&!f}),V=v.useCallback(je=>{r?.(je),!p&&(P.current=!1,w(z))},[w,z,p,r,P]),$=v.useCallback(je=>{i?.(je),M.current&&!AZ(M.current)&&V(je)},[V,i]),ae=v.useCallback(je=>{l?.(je),!p&&w(-1)},[w,p,l]),he=v.useCallback(je=>{u?.(je),Ib(je.currentTarget)&&(g??_)&&A()},[A,u,_,g]),re=v.useCallback(je=>{d?.(je),w(z)},[w,d,z]),ce=z===C,Se=UP({onClick:he,onFocus:re,onMouseEnter:V,onMouseMove:$,onMouseLeave:ae,ref:kr(I,M,n),isDisabled:p,isFocusable:f});return{...y,...Se,type:x??Se.type,id:N,role:"menuitem",tabIndex:ce?0:-1}}function MZ(t={},n=null){const{type:r="radio",isChecked:i,...l}=t;return{...WP(l,n),role:`menuitem${r}`,"aria-checked":i}}function zZ(t={}){const{children:n,type:r="radio",value:i,defaultValue:l,onChange:u,...d}=t,f=r==="radio"?"":[],[g,x]=zh({defaultValue:l??f,value:i,onChange:u}),y=v.useCallback(C=>{if(r==="radio"&&typeof g=="string"&&x(C),r==="checkbox"&&Array.isArray(g)){const _=g.includes(C)?g.filter(A=>A!==C):g.concat(C);x(_)}},[g,x,r]),w=Lc(n).map(C=>{if(C.type.id!=="MenuItemOption")return C;const _=D=>{y(C.props.value),C.props.onClick?.(D)},A=r==="radio"?C.props.value===g:g.includes(C.props.value);return v.cloneElement(C,{type:r,onClick:_,isChecked:A})});return{...d,children:w}}function IZ(t){if(!NZ(t))return!1;const n=t.ownerDocument.defaultView??window;return t instanceof n.HTMLElement}function NZ(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}const[LZ,Xu]=Vn({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Wo=t=>{const{children:n}=t,r=Jr("Menu",t),i=Yn(t),{direction:l}=Fc(),{descendants:u,...d}=RZ({...i,direction:l}),p=v.useMemo(()=>d,[d]),{isOpen:f,onClose:g,forceUpdate:x}=p;return e.jsx(wZ,{value:u,children:e.jsx(TZ,{value:p,children:e.jsx(LZ,{value:r,children:ca(n,{isOpen:f,onClose:g,forceUpdate:x})})})})};Wo.displayName="Menu";const OZ=tt((t,n)=>{const r=Xu();return e.jsx(He.button,{ref:n,...t,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...r.button}})}),qo=tt((t,n)=>{const{children:r,as:i,...l}=t,u=kZ(l,n),d=i||OZ;return e.jsx(d,{...u,className:gt("chakra-menu__menu-button",t.className),children:e.jsx(He.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:t.children})})});qo.displayName="MenuButton";const qP=tt((t,n)=>{const r=Xu();return e.jsx(He.span,{ref:n,...t,__css:r.command,className:"chakra-menu__command"})});qP.displayName="MenuCommand";const Vx=t=>{const{className:n,...r}=t,i=Xu();return e.jsx(He.hr,{"aria-orientation":"horizontal",className:gt("chakra-menu__divider",n),...r,__css:i.divider})};Vx.displayName="MenuDivider";const GP=tt((t,n)=>{const{title:r,children:i,className:l,...u}=t,d=gt("chakra-menu__group__title",l),p=Xu();return e.jsxs("div",{ref:n,className:"chakra-menu__group",role:"group",children:[r&&e.jsx(He.p,{className:d,...u,__css:p.groupTitle,children:r}),i]})});GP.displayName="MenuGroup";const Ux=t=>{const{className:n,children:r,...i}=t,l=Xu(),u=v.Children.only(r),d=v.isValidElement(u)?v.cloneElement(u,{focusable:"false","aria-hidden":!0,className:gt("chakra-menu__icon",u.props.className)}):null,p=gt("chakra-menu__icon-wrapper",n);return e.jsx(He.span,{className:p,...i,__css:l.icon,children:d})};Ux.displayName="MenuIcon";const YP=tt((t,n)=>{const{type:r,...i}=t,l=Xu(),u=i.as||r?r??void 0:"button",d=v.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...l.item}),[l.item]);return e.jsx(He.button,{ref:n,type:u,...i,__css:d})}),Dn=tt((t,n)=>{const{icon:r,iconSpacing:i="0.75rem",command:l,commandSpacing:u="0.75rem",children:d,...p}=t,f=WP(p,n),x=r||l?e.jsx("span",{style:{pointerEvents:"none",flex:1},children:d}):d;return e.jsxs(YP,{...f,className:gt("chakra-menu__menuitem",f.className),children:[r&&e.jsx(Ux,{fontSize:"0.8em",marginEnd:i,children:r}),x,l&&e.jsx(qP,{marginStart:u,children:l})]})});Dn.displayName="MenuItem";const GT=t=>e.jsx("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...t,children:e.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),la=tt((t,n)=>{const{icon:r,iconSpacing:i="0.75rem",iconPlacement:l="start",...u}=t,d=MZ(u,n);return e.jsxs(YP,{...d,className:gt("chakra-menu__menuitem-option",u.className),children:[r!==null&&l==="start"&&e.jsx(Ux,{fontSize:"0.8em",marginEnd:i,opacity:t.isChecked?1:0,children:r||e.jsx(GT,{})}),e.jsx("span",{style:{flex:1},children:d.children}),r!==null&&l==="end"&&e.jsx(Ux,{fontSize:"0.8em",marginStart:i,opacity:t.isChecked?1:0,children:r||e.jsx(GT,{})})]})});la.id="MenuItemOption";la.displayName="MenuItemOption";const BZ={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},$Z=He(Qo.div),Go=tt(function(n,r){const{rootProps:i,motionProps:l,...u}=n,{isOpen:d,onTransitionEnd:p,unstable__animationState:f}=gm(),g=DZ(u,r),x=PZ(i),y=Xu();return e.jsx(He.div,{...x,__css:{zIndex:n.zIndex??y.list?.zIndex},children:e.jsx($Z,{variants:BZ,initial:!1,animate:d?"enter":"exit",__css:{outline:0,...y.list},...l,...g,className:gt("chakra-menu__menu-list",g.className),onUpdate:p,onAnimationComplete:eR(f.onComplete,g.onAnimationComplete)})})});Go.displayName="MenuList";const ZP=t=>{const{className:n,title:r,...i}=t,l=zZ(i);return e.jsx(GP,{title:r,className:gt("chakra-menu__option-group",n),...l})};ZP.displayName="MenuOptionGroup";var FZ=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},Od=new WeakMap,$g=new WeakMap,Fg={},fj=0,XP=function(t){return t&&(t.host||XP(t.parentNode))},VZ=function(t,n){return n.map(function(r){if(t.contains(r))return r;var i=XP(r);return i&&t.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},UZ=function(t,n,r,i){var l=VZ(n,Array.isArray(t)?t:[t]);Fg[r]||(Fg[r]=new WeakMap);var u=Fg[r],d=[],p=new Set,f=new Set(l),g=function(y){!y||p.has(y)||(p.add(y),g(y.parentNode))};l.forEach(g);var x=function(y){!y||f.has(y)||Array.prototype.forEach.call(y.children,function(b){if(p.has(b))x(b);else try{var w=b.getAttribute(i),C=w!==null&&w!=="false",_=(Od.get(b)||0)+1,A=(u.get(b)||0)+1;Od.set(b,_),u.set(b,A),d.push(b),_===1&&C&&$g.set(b,!0),A===1&&b.setAttribute(r,"true"),C||b.setAttribute(i,"true")}catch(D){console.error("aria-hidden: cannot operate on ",b,D)}})};return x(n),p.clear(),fj++,function(){d.forEach(function(y){var b=Od.get(y)-1,w=u.get(y)-1;Od.set(y,b),u.set(y,w),b||($g.has(y)||y.removeAttribute(i),$g.delete(y)),w||y.removeAttribute(r)}),fj--,fj||(Od=new WeakMap,Od=new WeakMap,$g=new WeakMap,Fg={})}},HZ=function(t,n,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),l=FZ(t);return l?(i.push.apply(i,Array.from(l.querySelectorAll("[aria-live], script"))),UZ(i,l,r,"aria-hidden")):function(){return null}},WZ=Object.defineProperty,qZ=(t,n,r)=>n in t?WZ(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,GZ=(t,n,r)=>(qZ(t,n+"",r),r);class YZ{constructor(){GZ(this,"modals"),this.modals=new Set}add(n){return this.modals.add(n),this.modals.size}remove(n){this.modals.delete(n)}isTopModal(n){if(!n)return!1;const r=Array.from(this.modals)[this.modals.size-1];return n===r}}const Nb=new YZ;function KP(t,n){const[r,i]=v.useState(0);return v.useEffect(()=>{const l=t.current;if(l){if(n){const u=Nb.add(l);i(u)}return()=>{Nb.remove(l),i(0)}}},[n,t]),r}function ZZ(t){const{isOpen:n,onClose:r,id:i,closeOnOverlayClick:l=!0,closeOnEsc:u=!0,useInert:d=!0,onOverlayClick:p,onEsc:f}=t,g=v.useRef(null),x=v.useRef(null),[y,b,w]=KZ(i,"chakra-modal","chakra-modal--header","chakra-modal--body");XZ(g,n&&d);const C=KP(g,n),_=v.useRef(null),A=v.useCallback(ae=>{_.current=ae.target},[]),D=v.useCallback(ae=>{ae.key==="Escape"&&(ae.stopPropagation(),u&&r?.(),f?.())},[u,r,f]),[P,M]=v.useState(!1),[N,z]=v.useState(!1),I=v.useCallback((ae={},he=null)=>({role:"dialog",...ae,ref:kr(he,g),id:y,tabIndex:-1,"aria-modal":!0,"aria-labelledby":P?b:void 0,"aria-describedby":N?w:void 0,onClick:sn(ae.onClick,re=>re.stopPropagation())}),[w,N,y,b,P]),V=v.useCallback(ae=>{ae.stopPropagation(),_.current===ae.target&&Nb.isTopModal(g.current)&&(l&&r?.(),p?.())},[r,l,p]),$=v.useCallback((ae={},he=null)=>({...ae,ref:kr(he,x),onClick:sn(ae.onClick,V),onKeyDown:sn(ae.onKeyDown,D),onMouseDown:sn(ae.onMouseDown,A)}),[D,A,V]);return{isOpen:n,onClose:r,headerId:b,bodyId:w,setBodyMounted:z,setHeaderMounted:M,dialogRef:g,overlayRef:x,getDialogProps:I,getDialogContainerProps:$,index:C}}function XZ(t,n){const r=t.current;v.useEffect(()=>{if(!(!t.current||!n))return HZ(t.current)},[n,t,r])}function KZ(t,...n){const r=v.useId(),i=t||r;return v.useMemo(()=>n.map(l=>`${l}-${i}`),[i,n])}const[QZ,Ku]=Vn({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[JZ,Nc]=Vn({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),Et=t=>{const n={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,preserveScrollBarGap:!0,motionPreset:"scale",...t,lockFocusAcrossFrames:t.lockFocusAcrossFrames??!0},{portalProps:r,children:i,autoFocus:l,trapFocus:u,initialFocusRef:d,finalFocusRef:p,returnFocusOnClose:f,blockScrollOnMount:g,allowPinchZoom:x,preserveScrollBarGap:y,motionPreset:b,lockFocusAcrossFrames:w,animatePresenceProps:C,onCloseComplete:_}=n,A=Jr("Modal",n),P={...ZZ(n),autoFocus:l,trapFocus:u,initialFocusRef:d,finalFocusRef:p,returnFocusOnClose:f,blockScrollOnMount:g,allowPinchZoom:x,preserveScrollBarGap:y,motionPreset:b,lockFocusAcrossFrames:w};return e.jsx(JZ,{value:P,children:e.jsx(QZ,{value:A,children:e.jsx(Bc,{...C,onExitComplete:_,children:P.isOpen&&e.jsx(Oh,{...r,children:i})})})})};Et.displayName="Modal";var Sx="right-scroll-bar-position",wx="width-before-scroll-bar",eX="with-scroll-bars-hidden",tX="--removed-body-scroll-bar-size",QP=eP(),pj=function(){},Cv=v.forwardRef(function(t,n){var r=v.useRef(null),i=v.useState({onScrollCapture:pj,onWheelCapture:pj,onTouchMoveCapture:pj}),l=i[0],u=i[1],d=t.forwardProps,p=t.children,f=t.className,g=t.removeScrollBar,x=t.enabled,y=t.shards,b=t.sideCar,w=t.noRelative,C=t.noIsolation,_=t.inert,A=t.allowPinchZoom,D=t.as,P=D===void 0?"div":D,M=t.gapMode,N=KD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=b,I=XD([r,n]),V=Oo(Oo({},N),l);return v.createElement(v.Fragment,null,x&&v.createElement(z,{sideCar:QP,removeScrollBar:g,shards:y,noRelative:w,noIsolation:C,inert:_,setCallbacks:u,allowPinchZoom:!!A,lockRef:r,gapMode:M}),d?v.cloneElement(v.Children.only(p),Oo(Oo({},V),{ref:I})):v.createElement(P,Oo({},V,{className:f,ref:I}),p))});Cv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cv.classNames={fullWidth:wx,zeroRight:Sx};var nX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=nX();return n&&t.setAttribute("nonce",n),t}function sX(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function iX(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var aX=function(){var t=0,n=null;return{add:function(r){t==0&&(n=rX())&&(sX(n,r),iX(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},oX=function(){var t=aX();return function(n,r){v.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&r])}},JP=function(){var t=oX(),n=function(r){var i=r.styles,l=r.dynamic;return t(i,l),null};return n},lX={left:0,top:0,right:0,gap:0},mj=function(t){return parseInt(t||"",10)||0},cX=function(t){var n=window.getComputedStyle(document.body),r=n[t==="padding"?"paddingLeft":"marginLeft"],i=n[t==="padding"?"paddingTop":"marginTop"],l=n[t==="padding"?"paddingRight":"marginRight"];return[mj(r),mj(i),mj(l)]},uX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return lX;var n=cX(t),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,i-r+n[2]-n[0])}},dX=JP(),hh="data-scroll-locked",hX=function(t,n,r,i){var l=t.left,u=t.top,d=t.right,p=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(eX,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(p,"px ").concat(i,`;
  }
  body[`).concat(hh,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(p,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(p,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sx,` {
    right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(wx,` {
    margin-right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(Sx," .").concat(Sx,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(wx," .").concat(wx,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(hh,`] {
    `).concat(tX,": ").concat(p,`px;
  }
`)},YT=function(){var t=parseInt(document.body.getAttribute(hh)||"0",10);return isFinite(t)?t:0},fX=function(){v.useEffect(function(){return document.body.setAttribute(hh,(YT()+1).toString()),function(){var t=YT()-1;t<=0?document.body.removeAttribute(hh):document.body.setAttribute(hh,t.toString())}},[])},pX=function(t){var n=t.noRelative,r=t.noImportant,i=t.gapMode,l=i===void 0?"margin":i;fX();var u=v.useMemo(function(){return uX(l)},[l]);return v.createElement(dX,{styles:hX(u,!n,l,r?"":"!important")})},Lb=!1;if(typeof window<"u")try{var Vg=Object.defineProperty({},"passive",{get:function(){return Lb=!0,!0}});window.addEventListener("test",Vg,Vg),window.removeEventListener("test",Vg,Vg)}catch{Lb=!1}var Bd=Lb?{passive:!1}:!1,mX=function(t){return t.tagName==="TEXTAREA"},eM=function(t,n){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[n]!=="hidden"&&!(r.overflowY===r.overflowX&&!mX(t)&&r[n]==="visible")},gX=function(t){return eM(t,"overflowY")},xX=function(t){return eM(t,"overflowX")},ZT=function(t,n){var r=n.ownerDocument,i=n;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var l=tM(t,i);if(l){var u=nM(t,i),d=u[1],p=u[2];if(d>p)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},vX=function(t){var n=t.scrollTop,r=t.scrollHeight,i=t.clientHeight;return[n,r,i]},yX=function(t){var n=t.scrollLeft,r=t.scrollWidth,i=t.clientWidth;return[n,r,i]},tM=function(t,n){return t==="v"?gX(n):xX(n)},nM=function(t,n){return t==="v"?vX(n):yX(n)},jX=function(t,n){return t==="h"&&n==="rtl"?-1:1},bX=function(t,n,r,i,l){var u=jX(t,window.getComputedStyle(n).direction),d=u*i,p=r.target,f=n.contains(p),g=!1,x=d>0,y=0,b=0;do{if(!p)break;var w=nM(t,p),C=w[0],_=w[1],A=w[2],D=_-A-u*C;(C||D)&&tM(t,p)&&(y+=D,b+=C);var P=p.parentNode;p=P&&P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?P.host:P}while(!f&&p!==document.body||f&&(n.contains(p)||n===p));return(x&&Math.abs(y)<1||!x&&Math.abs(b)<1)&&(g=!0),g},Ug=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},XT=function(t){return[t.deltaX,t.deltaY]},KT=function(t){return t&&"current"in t?t.current:t},SX=function(t,n){return t[0]===n[0]&&t[1]===n[1]},wX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},CX=0,$d=[];function EX(t){var n=v.useRef([]),r=v.useRef([0,0]),i=v.useRef(),l=v.useState(CX++)[0],u=v.useState(JP)[0],d=v.useRef(t);v.useEffect(function(){d.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(l));var _=kq([t.lockRef.current],(t.shards||[]).map(KT),!0).filter(Boolean);return _.forEach(function(A){return A.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),_.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(l))})}}},[t.inert,t.lockRef.current,t.shards]);var p=v.useCallback(function(_,A){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!d.current.allowPinchZoom;var D=Ug(_),P=r.current,M="deltaX"in _?_.deltaX:P[0]-D[0],N="deltaY"in _?_.deltaY:P[1]-D[1],z,I=_.target,V=Math.abs(M)>Math.abs(N)?"h":"v";if("touches"in _&&V==="h"&&I.type==="range")return!1;var $=ZT(V,I);if(!$)return!0;if($?z=V:(z=V==="v"?"h":"v",$=ZT(V,I)),!$)return!1;if(!i.current&&"changedTouches"in _&&(M||N)&&(i.current=z),!z)return!0;var ae=i.current||z;return bX(ae,A,_,ae==="h"?M:N)},[]),f=v.useCallback(function(_){var A=_;if(!(!$d.length||$d[$d.length-1]!==u)){var D="deltaY"in A?XT(A):Ug(A),P=n.current.filter(function(z){return z.name===A.type&&(z.target===A.target||A.target===z.shadowParent)&&SX(z.delta,D)})[0];if(P&&P.should){A.cancelable&&A.preventDefault();return}if(!P){var M=(d.current.shards||[]).map(KT).filter(Boolean).filter(function(z){return z.contains(A.target)}),N=M.length>0?p(A,M[0]):!d.current.noIsolation;N&&A.cancelable&&A.preventDefault()}}},[]),g=v.useCallback(function(_,A,D,P){var M={name:_,delta:A,target:D,should:P,shadowParent:_X(D)};n.current.push(M),setTimeout(function(){n.current=n.current.filter(function(N){return N!==M})},1)},[]),x=v.useCallback(function(_){r.current=Ug(_),i.current=void 0},[]),y=v.useCallback(function(_){g(_.type,XT(_),_.target,p(_,t.lockRef.current))},[]),b=v.useCallback(function(_){g(_.type,Ug(_),_.target,p(_,t.lockRef.current))},[]);v.useEffect(function(){return $d.push(u),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:b}),document.addEventListener("wheel",f,Bd),document.addEventListener("touchmove",f,Bd),document.addEventListener("touchstart",x,Bd),function(){$d=$d.filter(function(_){return _!==u}),document.removeEventListener("wheel",f,Bd),document.removeEventListener("touchmove",f,Bd),document.removeEventListener("touchstart",x,Bd)}},[]);var w=t.removeScrollBar,C=t.inert;return v.createElement(v.Fragment,null,C?v.createElement(u,{styles:wX(l)}):null,w?v.createElement(pX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function _X(t){for(var n=null;t!==null;)t instanceof ShadowRoot&&(n=t.host,t=t.host),t=t.parentNode;return n}const TX=Dq(QP,EX);var rM=v.forwardRef(function(t,n){return v.createElement(Cv,Oo({},t,{ref:n,sideCar:TX}))});rM.classNames=Cv.classNames;function sM(t){const{autoFocus:n,trapFocus:r,dialogRef:i,initialFocusRef:l,blockScrollOnMount:u,allowPinchZoom:d,finalFocusRef:p,returnFocusOnClose:f,preserveScrollBarGap:g,lockFocusAcrossFrames:x,isOpen:y}=Nc(),[b,w]=zS();v.useEffect(()=>{!b&&w&&setTimeout(w)},[b,w]);const C=KP(i,y);return e.jsx(TP,{autoFocus:n,isDisabled:!r,initialFocusRef:l,finalFocusRef:p,restoreFocus:f,contentRef:i,lockFocusAcrossFrames:x,children:e.jsx(rM,{removeScrollBar:!g,allowPinchZoom:d,enabled:C===1&&u,forwardProps:!0,children:t.children})})}const AX={initial:({offsetX:t,offsetY:n,transition:r,transitionEnd:i,delay:l})=>({opacity:0,x:t,y:n,transition:r?.exit??lo.exit(Mu.exit,l),transitionEnd:i?.exit}),enter:({transition:t,transitionEnd:n,delay:r})=>({opacity:1,x:0,y:0,transition:t?.enter??lo.enter(Mu.enter,r),transitionEnd:n?.enter}),exit:({offsetY:t,offsetX:n,transition:r,transitionEnd:i,reverse:l,delay:u})=>{const d={x:n,y:t};return{opacity:0,transition:r?.exit??lo.exit(Mu.exit,u),...l?{...d,transitionEnd:i?.exit}:{transitionEnd:{...d,...i?.exit}}}}},cp={initial:"initial",animate:"enter",exit:"exit",variants:AX},RX=v.forwardRef(function(n,r){const{unmountOnExit:i,in:l,reverse:u=!0,className:d,offsetX:p=0,offsetY:f=8,transition:g,transitionEnd:x,delay:y,animatePresenceProps:b,...w}=n,C=i?l&&i:!0,_=l||i?"enter":"exit",A={offsetX:p,offsetY:f,reverse:u,transition:g,transitionEnd:x,delay:y};return e.jsx(Bc,{...b,custom:A,children:C&&e.jsx(Qo.div,{ref:r,className:gt("chakra-offset-slide",d),custom:A,...cp,animate:_,...w})})});RX.displayName="SlideFade";const kX={exit:({reverse:t,initialScale:n,transition:r,transitionEnd:i,delay:l})=>({opacity:0,...t?{scale:n,transitionEnd:i?.exit}:{transitionEnd:{scale:n,...i?.exit}},transition:r?.exit??lo.exit(Mu.exit,l)}),enter:({transitionEnd:t,transition:n,delay:r})=>({opacity:1,scale:1,transition:n?.enter??lo.enter(Mu.enter,r),transitionEnd:t?.enter})},iM={initial:"exit",animate:"enter",exit:"exit",variants:kX},DX=v.forwardRef(function(n,r){const{unmountOnExit:i,in:l,reverse:u=!0,initialScale:d=.95,className:p,transition:f,transitionEnd:g,delay:x,animatePresenceProps:y,...b}=n,w=i?l&&i:!0,C=l||i?"enter":"exit",_={initialScale:d,reverse:u,transition:f,transitionEnd:g,delay:x};return e.jsx(Bc,{...y,custom:_,children:w&&e.jsx(Qo.div,{ref:r,className:gt("chakra-offset-slide",p),...iM,animate:C,custom:_,...b})})});DX.displayName="ScaleFade";const PX={slideInBottom:{...cp,custom:{offsetY:16,reverse:!0}},slideInRight:{...cp,custom:{offsetX:16,reverse:!0}},slideInTop:{...cp,custom:{offsetY:-16,reverse:!0}},slideInLeft:{...cp,custom:{offsetX:-16,reverse:!0}},scale:{...iM,custom:{initialScale:.95,reverse:!0}},none:{}},MX=He(Qo.section),zX=t=>PX[t||"none"],aM=v.forwardRef((t,n)=>{const{preset:r,motionProps:i=zX(r),...l}=t;return e.jsx(MX,{ref:n,...i,...l})});aM.displayName="ModalTransition";const Pt=tt((t,n)=>{const{className:r,children:i,containerProps:l,motionProps:u,...d}=t,{getDialogProps:p,getDialogContainerProps:f}=Nc(),g=p(d,n),x=f(l),y=gt("chakra-modal__content",r),b=Ku(),w={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...b.dialog},C={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...b.dialogContainer},{motionPreset:_}=Nc();return e.jsx(sM,{children:e.jsx(He.div,{...x,className:"chakra-modal__content-container",tabIndex:-1,__css:C,children:e.jsx(aM,{preset:_,motionProps:u,className:y,...g,__css:w,children:i})})})});Pt.displayName="ModalContent";const _t=tt((t,n)=>{const{className:r,...i}=t,{bodyId:l,setBodyMounted:u}=Nc();v.useEffect(()=>(u(!0),()=>u(!1)),[u]);const d=gt("chakra-modal__body",r),p=Ku();return e.jsx(He.div,{ref:n,className:d,id:l,...i,__css:p.body})});_t.displayName="ModalBody";const $t=tt((t,n)=>{const{onClick:r,className:i,...l}=t,{onClose:u}=Nc(),d=gt("chakra-modal__close-btn",i),p=Ku();return e.jsx(p1,{ref:n,__css:p.closeButton,className:d,onClick:sn(r,f=>{f.stopPropagation(),u()}),...l})});$t.displayName="ModalCloseButton";const Vt=tt((t,n)=>{const{className:r,...i}=t,l=gt("chakra-modal__footer",r),u=Ku(),d={display:"flex",alignItems:"center",justifyContent:"flex-end",...u.footer};return e.jsx(He.footer,{ref:n,...i,__css:d,className:l})});Vt.displayName="ModalFooter";const Tt=tt((t,n)=>{const{className:r,...i}=t,{headerId:l,setHeaderMounted:u}=Nc();v.useEffect(()=>(u(!0),()=>u(!1)),[u]);const d=gt("chakra-modal__header",r),p=Ku(),f={flex:0,...p.header};return e.jsx(He.header,{ref:n,className:d,id:l,...i,__css:f})});Tt.displayName="ModalHeader";const IX={enter:({transition:t,transitionEnd:n,delay:r}={})=>({opacity:1,transition:t?.enter??lo.enter(Mu.enter,r),transitionEnd:n?.enter}),exit:({transition:t,transitionEnd:n,delay:r}={})=>({opacity:0,transition:t?.exit??lo.exit(Mu.exit,r),transitionEnd:n?.exit})},oM={initial:"exit",animate:"enter",exit:"exit",variants:IX},NX=v.forwardRef(function(n,r){const{unmountOnExit:i,in:l,className:u,transition:d,transitionEnd:p,delay:f,animatePresenceProps:g,...x}=n,y=l||i?"enter":"exit",b=i?l&&i:!0,w={transition:d,transitionEnd:p,delay:f};return e.jsx(Bc,{...g,custom:w,children:b&&e.jsx(Qo.div,{ref:r,className:gt("chakra-fade",u),custom:w,...oM,animate:y,...x})})});NX.displayName="Fade";const LX=He(Qo.div),At=tt((t,n)=>{const{className:r,transition:i,motionProps:l,...u}=t,d=gt("chakra-modal__overlay",r),f={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...Ku().overlay},{motionPreset:g}=Nc(),y=l||(g==="none"?{}:oM);return e.jsx(LX,{...y,__css:f,ref:n,className:d,...u})});At.displayName="ModalOverlay";function OX(t){const{leastDestructiveRef:n,...r}=t;return e.jsx(Et,{...r,initialFocusRef:n})}const BX=tt((t,n)=>e.jsx(Pt,{ref:n,role:"alertdialog",...t})),[$X,FX]=Vn(),VX={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function UX(t,n){if(t)return VX[t]?.[n]??t}function HX(t){const{isOpen:n,onClose:r,placement:i="right",children:l,...u}=t,d=Fc(),p=d.components?.Drawer,f=UX(i,d.direction);return e.jsx($X,{value:{placement:f},children:e.jsx(Et,{isOpen:n,onClose:r,styleConfig:p,...u,children:l})})}const QT={exit:{duration:.15,ease:Cu.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},WX={exit:({direction:t,transition:n,transitionEnd:r,delay:i})=>{const{exit:l}=vb({direction:t});return{...l,transition:n?.exit??lo.exit(QT.exit,i),transitionEnd:r?.exit}},enter:({direction:t,transitionEnd:n,transition:r,delay:i})=>{const{enter:l}=vb({direction:t});return{...l,transition:r?.enter??lo.enter(QT.enter,i),transitionEnd:n?.enter}}},lM=v.forwardRef(function(n,r){const{direction:i="right",style:l,unmountOnExit:u,in:d,className:p,transition:f,transitionEnd:g,delay:x,motionProps:y,animatePresenceProps:b,...w}=n,C=vb({direction:i}),_=Object.assign({position:"fixed"},C.position,l),A=u?d&&u:!0,D=d||u?"enter":"exit",P={transitionEnd:g,transition:f,direction:i,delay:x};return e.jsx(Bc,{...b,custom:P,children:A&&e.jsx(Qo.div,{...w,ref:r,initial:"exit",className:gt("chakra-slide",p),animate:D,exit:"exit",custom:P,variants:WX,style:_,...y})})});lM.displayName="Slide";const qX=He(lM),cM=tt((t,n)=>{const{className:r,children:i,motionProps:l,containerProps:u,...d}=t,{getDialogProps:p,getDialogContainerProps:f,isOpen:g}=Nc(),x=p(d,n),y=f(u),b=gt("chakra-modal__content",r),w=Ku(),C={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...w.dialog},_={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...w.dialogContainer},{placement:A}=FX();return e.jsx(sM,{children:e.jsx(He.div,{...y,className:"chakra-modal__content-container",__css:_,children:e.jsx(qX,{motionProps:l,direction:A,in:g,className:b,...x,__css:C,children:i})})})});cM.displayName="DrawerContent";const GX=t=>e.jsx(Cn,{viewBox:"0 0 24 24",...t,children:e.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),YX=t=>e.jsx(Cn,{viewBox:"0 0 24 24",...t,children:e.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function JT(t,n,r,i){v.useEffect(()=>{if(!t.current||!i)return;const l=t.current.ownerDocument.defaultView??window,u=Array.isArray(n)?n:[n],d=new l.MutationObserver(p=>{for(const f of p)f.type==="attributes"&&f.attributeName&&u.includes(f.attributeName)&&r(f)});return d.observe(t.current,{attributes:!0,attributeFilter:u}),()=>d.disconnect()})}const ZX=50,eA=300;function XX(t,n){const[r,i]=v.useState(!1),[l,u]=v.useState(null),[d,p]=v.useState(!0),f=v.useRef(null),g=()=>clearTimeout(f.current);rO(()=>{l==="increment"&&t(),l==="decrement"&&n()},r?ZX:null);const x=v.useCallback(()=>{d&&t(),f.current=setTimeout(()=>{p(!1),i(!0),u("increment")},eA)},[t,d]),y=v.useCallback(()=>{d&&n(),f.current=setTimeout(()=>{p(!1),i(!0),u("decrement")},eA)},[n,d]),b=v.useCallback(()=>{p(!0),i(!1),g()},[]);return v.useEffect(()=>()=>g(),[]),{up:x,down:y,stop:b,isSpinning:r}}const KX=/^[Ee0-9+\-.]$/;function QX(t){return KX.test(t)}function JX(t,n){if(t.key==null)return!0;const r=t.ctrlKey||t.altKey||t.metaKey;return!(t.key.length===1)||r?!0:n(t.key)}function eK(t={}){const{focusInputOnChange:n=!0,clampValueOnBlur:r=!0,keepWithinRange:i=!0,min:l=Number.MIN_SAFE_INTEGER,max:u=Number.MAX_SAFE_INTEGER,step:d=1,isReadOnly:p,isDisabled:f,isRequired:g,isInvalid:x,pattern:y="[0-9]*(.[0-9]+)?",inputMode:b="decimal",allowMouseWheel:w,id:C,onChange:_,precision:A,name:D,"aria-describedby":P,"aria-label":M,"aria-labelledby":N,onFocus:z,onBlur:I,onInvalid:V,getAriaValueText:$,isValidCharacter:ae,format:he,parse:re,...ce}=t,Se=Yr(z),je=Yr(I),de=Yr(V),G=Yr(ae??QX),U=Yr($),W=QL(t),{update:me,increment:F,decrement:fe}=W,[te,R]=v.useState(!1),Y=!(p||f),q=v.useRef(null),le=v.useRef(null),We=v.useRef(null),pe=v.useRef(null),ye=v.useCallback(Xe=>Xe.split("").filter(G).join(""),[G]),Ze=v.useCallback(Xe=>re?.(Xe)??Xe,[re]),ht=v.useCallback(Xe=>(he?.(Xe)??Xe).toString(),[he]);Dc(()=>{(W.valueAsNumber>u||W.valueAsNumber<l)&&de?.("rangeOverflow",ht(W.value),W.valueAsNumber)},[W.valueAsNumber,W.value,ht,de]),Dl(()=>{if(!q.current)return;if(q.current.value!=W.value){const pt=Ze(q.current.value);W.setValue(ye(pt))}},[Ze,ye]);const rt=v.useCallback((Xe=d)=>{Y&&F(Xe)},[F,Y,d]),vt=v.useCallback((Xe=d)=>{Y&&fe(Xe)},[fe,Y,d]),Ue=XX(rt,vt);JT(We,"disabled",Ue.stop,Ue.isSpinning),JT(pe,"disabled",Ue.stop,Ue.isSpinning);const qt=v.useCallback(Xe=>{if(Xe.nativeEvent.isComposing)return;const ot=Ze(Xe.currentTarget.value);me(ye(ot)),le.current={start:Xe.currentTarget.selectionStart,end:Xe.currentTarget.selectionEnd}},[me,ye,Ze]),Je=v.useCallback(Xe=>{Se?.(Xe),le.current&&(Xe.currentTarget.selectionStart=le.current.start??Xe.currentTarget.value?.length,Xe.currentTarget.selectionEnd=le.current.end??Xe.currentTarget.selectionStart)},[Se]),Ge=v.useCallback(Xe=>{if(Xe.nativeEvent.isComposing)return;JX(Xe,G)||Xe.preventDefault();const pt=Ve(Xe)*d,ot=Xe.key,Mt={ArrowUp:()=>rt(pt),ArrowDown:()=>vt(pt),Home:()=>me(l),End:()=>me(u)}[ot];Mt&&(Xe.preventDefault(),Mt(Xe))},[G,d,rt,vt,me,l,u]),Ve=Xe=>{let pt=1;return(Xe.metaKey||Xe.ctrlKey)&&(pt=.1),Xe.shiftKey&&(pt=10),pt},se=v.useMemo(()=>{const Xe=U?.(W.value);if(Xe!=null)return Xe;const pt=W.value.toString();return pt||void 0},[W.value,U]),be=v.useCallback(()=>{let Xe=W.value;if(W.value==="")return;/^[eE]/.test(W.value.toString())?W.setValue(""):(W.valueAsNumber<l&&(Xe=l),W.valueAsNumber>u&&(Xe=u),W.cast(Xe))},[W,u,l]),at=v.useCallback(()=>{R(!1),r&&be()},[r,R,be]),St=v.useCallback(()=>{n&&requestAnimationFrame(()=>{q.current?.focus()})},[n]),An=v.useCallback(Xe=>{Xe.preventDefault(),Ue.up(),St()},[St,Ue]),qe=v.useCallback(Xe=>{Xe.preventDefault(),Ue.down(),St()},[St,Ue]);fp(()=>q.current,"wheel",Xe=>{const ot=(q.current?.ownerDocument??document).activeElement===q.current;if(!w||!ot)return;Xe.preventDefault();const Ne=Ve(Xe)*d,Mt=Math.sign(Xe.deltaY);Mt===-1?rt(Ne):Mt===1&&vt(Ne)},{passive:!1});const Me=v.useCallback((Xe={},pt=null)=>{const ot=f||i&&W.isAtMax;return{...Xe,ref:kr(pt,We),role:"button",tabIndex:-1,onPointerDown:sn(Xe.onPointerDown,Ne=>{Ne.button!==0||ot||An(Ne)}),onPointerLeave:sn(Xe.onPointerLeave,Ue.stop),onPointerUp:sn(Xe.onPointerUp,Ue.stop),disabled:ot,"aria-disabled":Bo(ot)}},[W.isAtMax,i,An,Ue.stop,f]),nt=v.useCallback((Xe={},pt=null)=>{const ot=f||i&&W.isAtMin;return{...Xe,ref:kr(pt,pe),role:"button",tabIndex:-1,onPointerDown:sn(Xe.onPointerDown,Ne=>{Ne.button!==0||ot||qe(Ne)}),onPointerLeave:sn(Xe.onPointerLeave,Ue.stop),onPointerUp:sn(Xe.onPointerUp,Ue.stop),disabled:ot,"aria-disabled":Bo(ot)}},[W.isAtMin,i,qe,Ue.stop,f]),wt=v.useCallback((Xe={},pt=null)=>({name:D,inputMode:b,type:"text",pattern:y,"aria-labelledby":N,"aria-label":M,"aria-describedby":P,id:C,disabled:f,role:"spinbutton",...Xe,readOnly:Xe.readOnly??p,"aria-readonly":Xe.readOnly??p,"aria-required":Xe.required??g,required:Xe.required??g,ref:kr(q,pt),value:ht(W.value),"aria-valuemin":l,"aria-valuemax":u,"aria-valuenow":Number.isNaN(W.valueAsNumber)?void 0:W.valueAsNumber,"aria-invalid":Bo(x??W.isOutOfRange),"aria-valuetext":se,autoComplete:"off",autoCorrect:"off",onChange:sn(Xe.onChange,qt),onKeyDown:sn(Xe.onKeyDown,Ge),onFocus:sn(Xe.onFocus,Je,()=>R(!0)),onBlur:sn(Xe.onBlur,je,at)}),[D,b,y,N,M,ht,P,C,f,g,p,x,W.value,W.valueAsNumber,W.isOutOfRange,l,u,se,qt,Ge,Je,je,at]);return{value:ht(W.value),valueAsNumber:W.valueAsNumber,isFocused:te,isDisabled:f,isReadOnly:p,getIncrementButtonProps:Me,getDecrementButtonProps:nt,getInputProps:wt,htmlProps:ce}}const[tK,Ev]=Vn({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[nK,q1]=Vn({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),Ln=tt(function(n,r){const i=Jr("NumberInput",n),l=Yn(n),u=S1(l),{htmlProps:d,...p}=eK(u),f=v.useMemo(()=>p,[p]);return e.jsx(nK,{value:f,children:e.jsx(tK,{value:i,children:e.jsx(He.div,{...d,ref:r,className:gt("chakra-numberinput",n.className),__css:{position:"relative",zIndex:0,...i.root}})})})});Ln.displayName="NumberInput";const Zs=tt(function(n,r){const i=Ev();return e.jsx(He.div,{"aria-hidden":!0,ref:r,...n,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...i.stepperGroup}})});Zs.displayName="NumberInputStepper";const On=tt(function(n,r){const{getInputProps:i}=q1(),l=i(n,r),u=Ev();return e.jsx(He.input,{...l,className:gt("chakra-numberinput__field",n.className),__css:{width:"100%",...u.field}})});On.displayName="NumberInputField";const uM=He("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),Xs=tt(function(n,r){const i=Ev(),{getDecrementButtonProps:l}=q1(),u=l(n,r);return e.jsx(uM,{...u,__css:i.stepper,children:n.children??e.jsx(GX,{})})});Xs.displayName="NumberDecrementStepper";const Ks=tt(function(n,r){const{getIncrementButtonProps:i}=q1(),l=i(n,r),u=Ev();return e.jsx(uM,{...l,__css:u.stepper,children:n.children??e.jsx(YX,{})})});Ks.displayName="NumberIncrementStepper";const[rK,tne,sK,iK]=vv(),[aK,oK]=Vn({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to place all pin input fields within `<PinInput />`"}),tA=t=>t?.split("");function nA(t,n){return(n==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(t)}function lK(t={}){const{autoFocus:n,value:r,defaultValue:i,onChange:l,onComplete:u,placeholder:d="",manageFocus:p=!0,otp:f=!1,id:g,isDisabled:x,isInvalid:y,type:b="number",mask:w}=t,C=v.useId(),_=g??`pin-input-${C}`,A=sK(),[D,P]=v.useState(!0),[M,N]=v.useState(-1),[z,I]=zh({defaultValue:tA(i)||[],value:tA(r),onChange:ce=>l?.(ce.join(""))});v.useEffect(()=>{if(n){const ce=A.first();ce&&requestAnimationFrame(()=>{ce.node.focus()})}},[A]);const V=v.useCallback(ce=>{if(!D||!p)return;const Se=A.next(ce,!1);Se&&requestAnimationFrame(()=>{Se.node.focus()})},[A,D,p]),$=v.useCallback((ce,Se,je=!0)=>{const de=[...z];de[Se]=ce,I(de),ce!==""&&de.length===A.count()&&de.every(U=>U!=null&&U!=="")?u?.(de.join("")):je&&V(Se)},[z,I,V,u,A]),ae=v.useCallback(()=>{const ce=Array(A.count()).fill("");I(ce),A.first()?.node?.focus()},[A,I]),he=v.useCallback((ce,Se)=>{let je=Se;return ce?.length>0&&(ce[0]===Se.charAt(0)?je=Se.charAt(1):ce[0]===Se.charAt(1)&&(je=Se.charAt(0))),je},[]);return{getInputProps:v.useCallback(ce=>{const{index:Se,...je}=ce,de=fe=>{const te=fe.currentTarget.value,R=z[Se],Y=he(R,te);if(Y===""){$("",Se);return}if(te.length>2){if(nA(te,b)){const q=te.split("").filter((le,We)=>We<A.count());I(q),q.length===A.count()&&u?.(q.join(""))}}else nA(Y,b)&&$(Y,Se),P(!0)},G=fe=>{if(fe.key==="Backspace"&&p)if(fe.currentTarget.value===""){const te=A.prev(Se,!1);te&&($("",Se-1,!1),te.node?.focus(),P(!0))}else P(!1)},U=()=>{N(Se)},W=()=>{N(-1)},me=M===Se;return{"aria-label":"Please enter your pin code",inputMode:b==="number"?"numeric":"text",type:w?"password":b==="number"?"tel":"text",...je,id:`${_}-${Se}`,disabled:x,"aria-invalid":Bo(y),onChange:sn(je.onChange,de),onKeyDown:sn(je.onKeyDown,G),onFocus:sn(je.onFocus,U),onBlur:sn(je.onBlur,W),value:z[Se]||"",autoComplete:f?"one-time-code":"off",placeholder:me?"":d}},[A,M,he,_,x,w,y,p,u,f,d,$,I,b,z]),id:_,descendants:A,values:z,setValue:$,setValues:I,clear:ae}}function cK(t={},n=null){const{getInputProps:r}=oK(),{index:i,register:l}=iK();return r({...t,ref:kr(l,n),index:t.index??i})}function Ob(t){const n=ji("PinInput",t),{children:r,...i}=Yn(t),{descendants:l,...u}=lK(i),d=Lc(r).map(p=>v.cloneElement(p,{__css:n}));return e.jsx(rK,{value:l,children:e.jsx(aK,{value:u,children:d})})}Ob.displayName="PinInput";const bl=tt(function(n,r){const i=cK(n,r);return e.jsx(He.input,{...i,className:gt("chakra-pin-input",n.className)})});bl.displayName="PinInputField";function uK(t){const n=v.version;return typeof n!="string"||n.startsWith("18.")?t?.ref:t?.props?.ref}const Bb=t=>e.jsx(He.circle,{cx:50,cy:50,r:42,fill:"transparent",...t});Bb.displayName="Circle";function dK(t,n,r){return(t-n)*100/(r-n)}const hK=Oc({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}}),fK=Oc({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),pK=Oc({"0%":{left:"-40%"},"100%":{left:"100%"}}),mK=Oc({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function dM(t){const{value:n=0,min:r,max:i,valueText:l,getValueText:u,isIndeterminate:d,role:p="progressbar"}=t,f=dK(n,r,i);return{bind:{"data-indeterminate":d?"":void 0,"aria-valuemax":i,"aria-valuemin":r,"aria-valuenow":d?void 0:n,"aria-valuetext":(()=>{if(n!=null)return typeof u=="function"?u(n,f):l})(),role:p},percent:f,value:n}}const hM=t=>{const{size:n,isIndeterminate:r,...i}=t;return e.jsx(He.svg,{viewBox:"0 0 100 100",__css:{width:n,height:n,animation:r?`${fK} 2s linear infinite`:void 0},...i})};hM.displayName="Shape";const fM=tt((t,n)=>{const{size:r="48px",max:i=100,min:l=0,valueText:u,getValueText:d,value:p,capIsRound:f,children:g,thickness:x="10px",color:y="#0078d4",trackColor:b="#edebe9",isIndeterminate:w,...C}=t,_=dM({min:l,max:i,value:p,valueText:u,getValueText:d,isIndeterminate:w}),A=w?void 0:(_.percent??0)*2.64,D=A==null?void 0:`${A} ${264-A}`,P=w?{css:{animation:`${hK} 1.5s linear infinite`}}:{strokeDashoffset:66,strokeDasharray:D,transitionProperty:"stroke-dasharray, stroke",transitionDuration:"0.6s",transitionTimingFunction:"ease"},M={display:"inline-block",position:"relative",verticalAlign:"middle",fontSize:r};return e.jsxs(He.div,{ref:n,className:"chakra-progress",..._.bind,...C,__css:M,children:[e.jsxs(hM,{size:r,isIndeterminate:w,children:[e.jsx(Bb,{stroke:b,strokeWidth:x,className:"chakra-progress__track"}),e.jsx(Bb,{stroke:y,strokeWidth:x,className:"chakra-progress__indicator",strokeLinecap:f?"round":void 0,opacity:_.value===0&&!w?0:void 0,...P})]}),g]})});fM.displayName="CircularProgress";const[gK,xK]=Vn({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),vK=tt((t,n)=>{const{min:r,max:i,value:l,isIndeterminate:u,role:d,...p}=t,f=dM({value:l,min:r,max:i,isIndeterminate:u,role:d}),x={height:"100%",...xK().filledTrack};return e.jsx(He.div,{ref:n,style:{width:`${f.percent}%`,...p.style},...f.bind,...p,__css:x})}),Rc=tt((t,n)=>{const{value:r,min:i=0,max:l=100,hasStripe:u,isAnimated:d,children:p,borderRadius:f,isIndeterminate:g,"aria-label":x,"aria-labelledby":y,"aria-valuetext":b,title:w,role:C,..._}=Yn(t),A=Jr("Progress",t),D=f??A.track?.borderRadius,P={animation:`${mK} 1s linear infinite`},z={...!g&&u&&d&&P,...g&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${pK} 1s ease infinite normal none running`}},I={overflow:"hidden",position:"relative",...A.track};return e.jsx(He.div,{ref:n,borderRadius:D,__css:I,..._,children:e.jsxs(gK,{value:A,children:[e.jsx(vK,{"aria-label":x,"aria-labelledby":y,"aria-valuetext":b,min:i,max:l,value:r,isIndeterminate:g,css:z,borderRadius:D,title:w,role:C}),p]})})});Rc.displayName="Progress";const pM=tt(function(n,r){const{children:i,placeholder:l,className:u,...d}=n;return e.jsxs(He.select,{...d,ref:r,className:gt("chakra-select",u),children:[l&&e.jsx("option",{value:"",children:l}),i]})});pM.displayName="SelectField";const ut=tt((t,n)=>{const r=Jr("Select",t),{rootProps:i,placeholder:l,icon:u,color:d,height:p,h:f,minH:g,minHeight:x,iconColor:y,iconSize:b,...w}=Yn(t),[C,_]=GL(w,n4),A=b1(_),D={width:"100%",height:"fit-content",position:"relative",color:d},P={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...r.field?._focus}};return e.jsxs(He.div,{className:"chakra-select__wrapper",__css:D,...C,...i,children:[e.jsx(pM,{ref:n,height:f??p,minH:g??x,placeholder:l,...A,__css:P,children:t.children}),e.jsx(mM,{"data-disabled":gn(A.disabled),...(y||d)&&{color:y||d},__css:r.icon,...b&&{fontSize:b},children:u})]})});ut.displayName="Select";const yK=t=>e.jsx("svg",{viewBox:"0 0 24 24",...t,children:e.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),jK=He("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),mM=t=>{const{children:n=e.jsx(yK,{}),...r}=t,i=v.cloneElement(n,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return e.jsx(jK,{...r,className:"chakra-select__icon-wrapper",children:v.isValidElement(n)?i:null})};mM.displayName="SelectIcon";function gj(t){const{orientation:n,vertical:r,horizontal:i}=t;return n==="vertical"?r:i}function bK(t){const{orientation:n,thumbPercents:r,isReversed:i}=t,l=w=>({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...gj({orientation:n,vertical:{bottom:`${r[w]}%`,transform:"translate(-50%, 50%) scale(var(--slider-thumb-scale, 1))"},horizontal:{left:`${r[w]}%`,transform:"translate(-50%, -50%) scale(var(--slider-thumb-scale, 1))"}})}),u={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0},d={position:"absolute",...gj({orientation:n,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},p=r.length===1,f=[0,i?100-r[0]:r[0]],g=p?f:r;let x=g[0];!p&&i&&(x=100-x);const y=Math.abs(g[g.length-1]-g[0]),b={...d,...gj({orientation:n,vertical:i?{height:`${y}%`,top:`${x}%`}:{height:`${y}%`,bottom:`${x}%`},horizontal:i?{width:`${y}%`,right:`${x}%`}:{width:`${y}%`,left:`${x}%`}})};return{trackStyle:d,innerTrackStyle:b,rootStyle:u,getThumbStyle:l}}function SK(t){const{isReversed:n,direction:r,orientation:i}=t;return r==="ltr"||i==="vertical"?n:!n}function wK(t){const{min:n=0,max:r=100,onChange:i,value:l,defaultValue:u,isReversed:d,direction:p="ltr",orientation:f="horizontal",id:g,isDisabled:x,isReadOnly:y,onChangeStart:b,onChangeEnd:w,step:C=1,getAriaValueText:_,"aria-valuetext":A,"aria-label":D,"aria-labelledby":P,name:M,focusThumbOnChange:N=!0,...z}=t,I=Yr(b),V=Yr(w),$=Yr(_),ae=SK({isReversed:d,direction:p,orientation:f}),[he,re]=zh({value:l,defaultValue:u??EK(n,r),onChange:i}),[ce,Se]=v.useState(!1),[je,de]=v.useState(!1),G=!(x||y),U=(r-n)/10,W=C||(r-n)/100,me=sx(he,n,r),F=r-me+n,te=d_(ae?F:me,n,r),R=f==="vertical",Y=cR({min:n,max:r,step:C,isDisabled:x,value:me,isInteractive:G,isReversed:ae,isVertical:R,eventSource:null,focusThumbOnChange:N,orientation:f}),q=v.useRef(null),le=v.useRef(null),We=v.useRef(null),pe=v.useId(),ye=g??pe,[Ze,ht]=[`slider-thumb-${ye}`,`slider-track-${ye}`],rt=v.useCallback(ot=>{if(!q.current)return;const Ne=Y.current;Ne.eventSource="pointer";const Mt=q.current.getBoundingClientRect(),{clientX:Kt,clientY:ln}=ot.touches?.[0]??ot,Zt=R?Mt.bottom-ln:Kt-Mt.left,Pn=R?Mt.height:Mt.width;let lt=Zt/Pn;ae&&(lt=1-lt);let vn=VL(lt,Ne.min,Ne.max);return Ne.step&&(vn=parseFloat(h_(vn,Ne.min,Ne.step))),vn=sx(vn,Ne.min,Ne.max),vn},[R,ae,Y]),vt=v.useCallback(ot=>{const Ne=Y.current;Ne.isInteractive&&(ot=parseFloat(h_(ot,Ne.min,W)),ot=sx(ot,Ne.min,Ne.max),re(ot))},[W,re,Y]),Ue=v.useMemo(()=>({stepUp(ot=W){const Ne=ae?me-ot:me+ot;vt(Ne)},stepDown(ot=W){const Ne=ae?me+ot:me-ot;vt(Ne)},reset(){vt(u||0)},stepTo(ot){vt(ot)}}),[vt,ae,me,W,u]),qt=v.useCallback(ot=>{const Ne=Y.current,Kt={ArrowRight:()=>Ue.stepUp(),ArrowUp:()=>Ue.stepUp(),ArrowLeft:()=>Ue.stepDown(),ArrowDown:()=>Ue.stepDown(),PageUp:()=>Ue.stepUp(U),PageDown:()=>Ue.stepDown(U),Home:()=>vt(Ne.min),End:()=>vt(Ne.max)}[ot.key];Kt&&(ot.preventDefault(),ot.stopPropagation(),Kt(ot),Ne.eventSource="keyboard")},[Ue,vt,U,Y]),Je=$?.(me)??A,{getThumbStyle:Ge,rootStyle:Ve,trackStyle:se,innerTrackStyle:be}=v.useMemo(()=>{const ot=Y.current;return bK({isReversed:ae,orientation:ot.orientation,thumbPercents:[te]})},[ae,te,Y]),at=v.useCallback(()=>{Y.current.focusThumbOnChange&&setTimeout(()=>le.current?.focus())},[Y]);Dc(()=>{const ot=Y.current;at(),ot.eventSource==="keyboard"&&V?.(ot.value)},[me,V]);function St(ot){const Ne=rt(ot);Ne!=null&&Ne!==Y.current.value&&re(Ne)}SO(We,{onPanSessionStart(ot){const Ne=Y.current;Ne.isInteractive&&(Se(!0),at(),St(ot),I?.(Ne.value))},onPanSessionEnd(){const ot=Y.current;ot.isInteractive&&(Se(!1),V?.(ot.value))},onPan(ot){Y.current.isInteractive&&St(ot)}});const An=v.useCallback((ot={},Ne=null)=>({...ot,...z,ref:kr(Ne,We),tabIndex:-1,"aria-disabled":Bo(x),"data-focused":gn(je),style:{...ot.style,...Ve}}),[z,x,je,Ve]),qe=v.useCallback((ot={},Ne=null)=>({...ot,ref:kr(Ne,q),id:ht,"data-disabled":gn(x),style:{...ot.style,...se}}),[x,ht,se]),Me=v.useCallback((ot={},Ne=null)=>({...ot,ref:Ne,style:{...ot.style,...be}}),[be]),nt=v.useCallback((ot={},Ne=null)=>({...ot,ref:kr(Ne,le),role:"slider",tabIndex:G?0:void 0,id:Ze,"data-active":gn(ce),"aria-valuetext":Je,"aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":me,"aria-orientation":f,"aria-disabled":Bo(x),"aria-readonly":Bo(y),"aria-label":D,"aria-labelledby":D?void 0:P,style:{...ot.style,...Ge(0)},onKeyDown:sn(ot.onKeyDown,qt),onFocus:sn(ot.onFocus,()=>de(!0)),onBlur:sn(ot.onBlur,()=>de(!1))}),[G,Ze,ce,Je,n,r,me,f,x,y,D,P,Ge,qt]),wt=v.useCallback((ot,Ne=null)=>{const Mt=!(ot.value<n||ot.value>r),Kt=me>=ot.value,ln=d_(ot.value,n,r),Zt={position:"absolute",pointerEvents:"none",...CK({orientation:f,vertical:{bottom:ae?`${100-ln}%`:`${ln}%`},horizontal:{left:ae?`${100-ln}%`:`${ln}%`}})};return{...ot,ref:Ne,role:"presentation","aria-hidden":!0,"data-disabled":gn(x),"data-invalid":gn(!Mt),"data-highlighted":gn(Kt),style:{...ot.style,...Zt}}},[x,ae,r,n,f,me]),Xe=v.useCallback((ot={},Ne=null)=>({...ot,ref:Ne,type:"hidden",value:me,name:M}),[M,me]);return{state:{value:me,isFocused:je,isDragging:ce},actions:Ue,getRootProps:An,getTrackProps:qe,getInnerTrackProps:Me,getThumbProps:nt,getMarkerProps:wt,getInputProps:Xe}}function CK(t){const{orientation:n,vertical:r,horizontal:i}=t;return n==="vertical"?r:i}function EK(t,n){return n<t?t:t+(n-t)/2}const[_K,_v]=Vn({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[TK,Tv]=Vn({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),gM=tt((t,n)=>{const r={...t,orientation:t?.orientation??"horizontal"},i=Jr("Slider",r),l=Yn(r),{direction:u}=Fc();l.direction=u;const{getInputProps:d,getRootProps:p,...f}=wK(l),g=p(),x=d({},n);return e.jsx(_K,{value:f,children:e.jsx(TK,{value:i,children:e.jsxs(He.div,{...g,className:gt("chakra-slider",r.className),__css:i.container,children:[r.children,e.jsx("input",{...x})]})})})});gM.displayName="Slider";const xM=tt((t,n)=>{const{getThumbProps:r}=_v(),i=Tv(),l=r(t,n);return e.jsx(He.div,{...l,className:gt("chakra-slider__thumb",t.className),__css:i.thumb})});xM.displayName="SliderThumb";const vM=tt((t,n)=>{const{getTrackProps:r}=_v(),i=Tv(),l=r(t,n);return e.jsx(He.div,{...l,className:gt("chakra-slider__track",t.className),__css:i.track})});vM.displayName="SliderTrack";const yM=tt((t,n)=>{const{getInnerTrackProps:r}=_v(),i=Tv(),l=r(t,n);return e.jsx(He.div,{...l,className:gt("chakra-slider__filled-track",t.className),__css:i.filledTrack})});yM.displayName="SliderFilledTrack";const AK=tt((t,n)=>{const{getMarkerProps:r}=_v(),i=Tv(),l=r(t,n);return e.jsx(He.div,{...l,className:gt("chakra-slider__marker",t.className),__css:i.mark})});AK.displayName="SliderMark";const G1=He("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});G1.displayName="Spacer";const jM=t=>e.jsx(He.div,{className:"chakra-stack__item",...t,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...t.__css}});jM.displayName="StackItem";function RK(t){const{spacing:n,direction:r}=t,i={column:{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":tv(r,l=>i[l])}}const fo=tt((t,n)=>{const{isInline:r,direction:i,align:l,justify:u,spacing:d="0.5rem",wrap:p,children:f,divider:g,className:x,shouldWrapChildren:y,...b}=t,w=r?"row":i??"column",C=v.useMemo(()=>RK({spacing:d,direction:w}),[d,w]),_=!!g,A=!y&&!_,D=v.useMemo(()=>{const M=Lc(f);return A?M:M.map((N,z)=>{const I=typeof N.key<"u"?N.key:z,V=z+1===M.length,ae=y?e.jsx(jM,{children:N},I):N;if(!_)return ae;const he=v.cloneElement(g,{__css:C}),re=V?null:he;return e.jsxs(v.Fragment,{children:[ae,re]},I)})},[g,C,_,A,y,f]),P=gt("chakra-stack",x);return e.jsx(He.div,{ref:n,display:"flex",alignItems:l,justifyContent:u,flexDirection:w,flexWrap:p,gap:_?void 0:d,className:P,...b,children:D})});fo.displayName="Stack";const ee=tt((t,n)=>e.jsx(fo,{align:"center",...t,direction:"row",ref:n}));ee.displayName="HStack";const J=tt((t,n)=>e.jsx(fo,{align:"center",...t,direction:"column",ref:n}));J.displayName="VStack";const[kK,Av]=Vn({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),Rt=tt(function(n,r){const i=Jr("Stat",n),l={position:"relative",flex:"1 1 0%",...i.container},{className:u,children:d,...p}=Yn(n);return e.jsx(kK,{value:i,children:e.jsx(He.div,{ref:r,...p,className:gt("chakra-stat",u),__css:l,children:e.jsx("dl",{children:d})})})});Rt.displayName="Stat";const bM=t=>e.jsx(Cn,{color:"red.400",...t,children:e.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})});bM.displayName="StatDownArrow";function SM(t){return e.jsx(Cn,{color:"green.400",...t,children:e.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})})}SM.displayName="StatUpArrow";function eh(t){const{type:n,"aria-label":r,...i}=t,l=Av(),u=n==="increase"?SM:bM,p=r||(n==="increase"?"increased by":"decreased by");return e.jsxs(e.Fragment,{children:[e.jsx(He.span,{srOnly:!0,children:p}),e.jsx(u,{"aria-hidden":!0,...i,__css:l.icon})]})}eh.displayName="StatArrow";const Y1=tt(function(n,r){return e.jsx(He.div,{...n,ref:r,role:"group",className:gt("chakra-stat__group",n.className),__css:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start"}})});Y1.displayName="StatGroup";const Mi=tt(function(n,r){const i=Av();return e.jsx(He.dd,{ref:r,...n,className:gt("chakra-stat__help-text",n.className),__css:i.helpText})});Mi.displayName="StatHelpText";const kt=tt(function(n,r){const i=Av();return e.jsx(He.dt,{ref:r,...n,className:gt("chakra-stat__label",n.className),__css:i.label})});kt.displayName="StatLabel";const Dt=tt(function(n,r){const i=Av();return e.jsx(He.dd,{ref:r,...n,className:gt("chakra-stat__number",n.className),__css:{...i.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});Dt.displayName="StatNumber";const Jn=tt(function(n,r){const i=Jr("Switch",n),{spacing:l="0.5rem",children:u,...d}=Yn(n),{getIndicatorProps:p,getInputProps:f,getCheckboxProps:g,getRootProps:x,getLabelProps:y}=qD(d),b=v.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...i.container}),[i.container]),w=v.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...i.track}),[i.track]),C=v.useMemo(()=>({userSelect:"none",marginStart:l,...i.label}),[l,i.label]);return e.jsxs(He.label,{...x(),className:gt("chakra-switch",n.className),__css:b,children:[e.jsx("input",{className:"chakra-switch__input",...f({},r)}),e.jsx(He.span,{...g(),className:"chakra-switch__track",__css:w,children:e.jsx(He.span,{__css:i.thumb,className:"chakra-switch__thumb",...p()})}),u&&e.jsx(He.span,{className:"chakra-switch__label",...y(),__css:C,children:u})]})});Jn.displayName="Switch";const[DK,xm]=Vn({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),Fn=tt((t,n)=>{const r=Jr("Table",t),{className:i,layout:l,...u}=Yn(t);return e.jsx(DK,{value:r,children:e.jsx(He.table,{ref:n,__css:{tableLayout:l,...r.table},className:gt("chakra-table",i),...u})})});Fn.displayName="Table";const Wn=tt((t,n)=>{const r=xm();return e.jsx(He.tbody,{...t,ref:n,__css:r.tbody})}),Ee=tt(({isNumeric:t,...n},r)=>{const i=xm();return e.jsx(He.td,{...n,ref:r,__css:i.td,"data-is-numeric":t})}),_e=tt(({isNumeric:t,...n},r)=>{const i=xm();return e.jsx(He.th,{...n,ref:r,__css:i.th,"data-is-numeric":t})}),qn=tt((t,n)=>{const r=xm();return e.jsx(He.thead,{...t,ref:n,__css:r.thead})}),bt=tt((t,n)=>{const r=xm();return e.jsx(He.tr,{...t,ref:n,__css:r.tr})}),[PK,MK,zK,IK]=vv();function NK(t){const{defaultIndex:n,onChange:r,index:i,isManual:l,isLazy:u,lazyBehavior:d="unmount",orientation:p="horizontal",direction:f="ltr",...g}=t,[x,y]=v.useState(n??0),[b,w]=zh({defaultValue:n??0,value:i,onChange:r});v.useEffect(()=>{i!=null&&y(i)},[i]);const C=zK(),_=v.useId();return{id:`tabs-${t.id??_}`,selectedIndex:b,focusedIndex:x,setSelectedIndex:w,setFocusedIndex:y,isManual:l,isLazy:u,lazyBehavior:d,orientation:p,descendants:C,direction:f,htmlProps:g}}const[LK,Rv]=Vn({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function OK(t){const{focusedIndex:n,orientation:r,direction:i}=Rv(),l=MK(),u=v.useCallback(d=>{const p=()=>{const P=l.nextEnabled(n);P&&P.node?.focus()},f=()=>{const P=l.prevEnabled(n);P&&P.node?.focus()},g=()=>{const P=l.firstEnabled();P&&P.node?.focus()},x=()=>{const P=l.lastEnabled();P&&P.node?.focus()},y=r==="horizontal",b=r==="vertical",w=d.key,C=i==="ltr"?"ArrowLeft":"ArrowRight",_=i==="ltr"?"ArrowRight":"ArrowLeft",D={[C]:()=>y&&f(),[_]:()=>y&&p(),ArrowDown:()=>b&&p(),ArrowUp:()=>b&&f(),Home:g,End:x}[w];D&&(d.preventDefault(),D(d))},[l,n,r,i]);return{...t,role:"tablist","aria-orientation":r,onKeyDown:sn(t.onKeyDown,u)}}function BK(t){const{isDisabled:n=!1,isFocusable:r=!1,...i}=t,{setSelectedIndex:l,isManual:u,id:d,setFocusedIndex:p,selectedIndex:f}=Rv(),{index:g,register:x}=IK({disabled:n&&!r}),y=g===f,b=()=>{l(g)},w=()=>{p(g),!u&&!(n&&r)&&l(g)};return{...UP({...i,ref:kr(x,t.ref),isDisabled:n,isFocusable:r,onClick:sn(t.onClick,b)}),id:wM(d,g),role:"tab",tabIndex:y?0:-1,type:"button","aria-selected":y,"aria-controls":CM(d,g),onFocus:n?void 0:sn(t.onFocus,w)}}const[$K,FK]=Vn({});function VK(t){const n=Rv(),{id:r,selectedIndex:i}=n,u=Lc(t.children).map((d,p)=>v.createElement($K,{key:d.key??p,value:{isSelected:p===i,id:CM(r,p),tabId:wM(r,p),selectedIndex:i}},d));return{...t,children:u}}function UK(t){const{children:n,...r}=t,{isLazy:i,lazyBehavior:l}=Rv(),{isSelected:u,id:d,tabId:p}=FK(),f=v.useRef(!1);u&&(f.current=!0);const g=sR({wasSelected:f.current,isSelected:u,enabled:i,mode:l});return{tabIndex:0,...r,children:g?n:null,role:"tabpanel","aria-labelledby":p,hidden:!u,id:d}}function wM(t,n){return`${t}--tab-${n}`}function CM(t,n){return`${t}--tabpanel-${n}`}const[HK,kv]=Vn({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),ga=tt(function(n,r){const i=Jr("Tabs",n),{children:l,className:u,...d}=Yn(n),{htmlProps:p,descendants:f,...g}=NK(d),x=v.useMemo(()=>g,[g]),{isFitted:y,...b}=p,w={position:"relative",...i.root};return e.jsx(PK,{value:f,children:e.jsx(LK,{value:x,children:e.jsx(HK,{value:i,children:e.jsx(He.div,{className:gt("chakra-tabs",u),ref:r,...b,__css:w,children:l})})})})});ga.displayName="Tabs";const hn=tt(function(n,r){const i=kv(),l=BK({...n,ref:r}),u={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...i.tab};return e.jsx(He.button,{...l,className:gt("chakra-tabs__tab",n.className),__css:u})});hn.displayName="Tab";const xa=tt(function(n,r){const i=OK({...n,ref:r}),l=kv(),u={display:"flex",...l.tablist};return e.jsx(He.div,{...i,className:gt("chakra-tabs__tablist",n.className),__css:u})});xa.displayName="TabList";const fn=tt(function(n,r){const i=UK({...n,ref:r}),l=kv();return e.jsx(He.div,{outline:"0",...i,className:gt("chakra-tabs__tab-panel",n.className),__css:l.tabpanel})});fn.displayName="TabPanel";const va=tt(function(n,r){const i=VK(n),l=kv();return e.jsx(He.div,{...i,width:"100%",ref:r,className:gt("chakra-tabs__tab-panels",n.className),__css:l.tabpanels})});va.displayName="TabPanels";const[WK,EM]=Vn({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),Yo=tt((t,n)=>{const r=Jr("Tag",t),i=Yn(t),l={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...r.container};return e.jsx(WK,{value:r,children:e.jsx(He.span,{ref:n,...i,__css:l})})});Yo.displayName="Tag";const Zo=tt((t,n)=>{const r=EM();return e.jsx(He.span,{ref:n,noOfLines:1,...t,__css:r.label})});Zo.displayName="TagLabel";const $b=tt((t,n)=>e.jsx(Cn,{ref:n,verticalAlign:"top",marginEnd:"0.5rem",...t}));$b.displayName="TagLeftIcon";const qK=tt((t,n)=>e.jsx(Cn,{ref:n,verticalAlign:"top",marginStart:"0.5rem",...t}));qK.displayName="TagRightIcon";const _M=t=>e.jsx(Cn,{verticalAlign:"inherit",viewBox:"0 0 512 512",...t,children:e.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});_M.displayName="TagCloseIcon";const Z1=tt((t,n)=>{const{isDisabled:r,children:i,...l}=t,d={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...EM().closeButton};return e.jsx(He.button,{ref:n,"aria-label":"close",...l,type:"button",disabled:r,__css:d,children:i||e.jsx(_M,{})})});Z1.displayName="TagCloseButton";const GK=["h","minH","height","minHeight"],Xt=tt((t,n)=>{const r=ji("Textarea",t),{className:i,rows:l,...u}=Yn(t),d=b1(u),p=l?rm(r,GK):r;return e.jsx(He.textarea,{ref:n,rows:l,...d,className:gt("chakra-textarea",i),__css:p})});Xt.displayName="Textarea";function YK(t,n){const r=t??"bottom";return{"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r]?.[n]??r}function ZK(t,n){const r=l=>({...n,...l,position:YK(l?.position??n?.position,t)}),i=l=>{const u=r(l),d=PD(u);return Lo.notify(d,u)};return i.update=(l,u)=>{Lo.update(l,r(u))},i.promise=(l,u)=>{const d=i({...u.loading,status:"loading",duration:null});l.then(p=>i.update(d,{status:"success",duration:5e3,...ca(u.success,p)})).catch(p=>i.update(d,{status:"error",duration:5e3,...ca(u.error,p)}))},i.closeAll=Lo.closeAll,i.close=Lo.close,i.isActive=Lo.isActive,i}function on(t){const{theme:n}=TD(),r=pW();return v.useMemo(()=>ZK(n.direction,{...r,...t}),[t,n.direction,r])}const XK={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},Fb=t=>t.current?.ownerDocument||document,Cx=t=>t.current?.ownerDocument?.defaultView||window;function KK(t={}){const{openDelay:n=0,closeDelay:r=0,closeOnClick:i=!0,closeOnMouseDown:l,closeOnScroll:u,closeOnPointerDown:d=l,closeOnEsc:p=!0,onOpen:f,onClose:g,placement:x,id:y,isOpen:b,defaultIsOpen:w,arrowSize:C=10,arrowShadowColor:_,arrowPadding:A,modifiers:D,isDisabled:P,gutter:M,offset:N,direction:z,...I}=t,{isOpen:V,onOpen:$,onClose:ae}=It({isOpen:b,defaultIsOpen:w,onOpen:f,onClose:g}),{referenceRef:he,getPopperProps:re,getArrowInnerProps:ce,getArrowProps:Se}=VP({enabled:V,placement:x,arrowPadding:A,modifiers:D,gutter:M,offset:N,direction:z}),je=v.useId(),G=`tooltip-${y??je}`,U=v.useRef(null),W=v.useRef(void 0),me=v.useCallback(()=>{W.current&&(clearTimeout(W.current),W.current=void 0)},[]),F=v.useRef(void 0),fe=v.useCallback(()=>{F.current&&(clearTimeout(F.current),F.current=void 0)},[]),te=v.useCallback(()=>{fe(),ae()},[ae,fe]),R=QK(U,te),Y=v.useCallback(()=>{if(!P&&!W.current){V&&R();const rt=Cx(U);W.current=rt.setTimeout($,n)}},[R,P,V,$,n]),q=v.useCallback(()=>{me();const rt=Cx(U);F.current=rt.setTimeout(te,r)},[r,te,me]),le=v.useCallback(()=>{V&&i&&q()},[i,q,V]),We=v.useCallback(()=>{V&&d&&q()},[d,q,V]),pe=v.useCallback(rt=>{V&&rt.key==="Escape"&&q()},[V,q]);fp(()=>Fb(U),"keydown",p?pe:void 0),fp(()=>{if(!u)return null;const rt=U.current;if(!rt)return null;const vt=oR(rt);return vt.localName==="body"?Cx(U):vt},"scroll",()=>{V&&u&&te()},{passive:!0,capture:!0}),v.useEffect(()=>{P&&(me(),V&&ae())},[P,V,ae,me]),v.useEffect(()=>()=>{me(),fe()},[me,fe]),fp(()=>U.current,"pointerleave",q);const ye=v.useCallback((rt={},vt=null)=>({...rt,ref:kr(U,vt,he),onPointerEnter:sn(rt.onPointerEnter,qt=>{qt.pointerType!=="touch"&&Y()}),onClick:sn(rt.onClick,le),onPointerDown:sn(rt.onPointerDown,We),onFocus:sn(rt.onFocus,Y),onBlur:sn(rt.onBlur,q),"aria-describedby":V?G:void 0}),[Y,q,We,V,G,le,he]),Ze=v.useCallback((rt={},vt=null)=>re({...rt,style:{...rt.style,[Ls.arrowSize.var]:C?`${C}px`:void 0,[Ls.arrowShadowColor.var]:_}},vt),[re,C,_]),ht=v.useCallback((rt={},vt=null)=>{const Ue={...rt.style,position:"relative",transformOrigin:Ls.transformOrigin.varRef};return{ref:vt,...I,...rt,id:G,role:"tooltip",style:Ue}},[I,G]);return{isOpen:V,show:Y,hide:q,getTriggerProps:ye,getTooltipProps:ht,getTooltipPositionerProps:Ze,getArrowProps:Se,getArrowInnerProps:ce}}const xj="chakra-ui:close-tooltip";function QK(t,n){return v.useEffect(()=>{const r=Fb(t);return r.addEventListener(xj,n),()=>r.removeEventListener(xj,n)},[n,t]),()=>{const r=Fb(t),i=Cx(t);r.dispatchEvent(new i.CustomEvent(xj))}}const JK=He(Qo.div),ti=tt((t,n)=>{const r=ji("Tooltip",t),i=Yn(t),l=Fc(),{children:u,label:d,shouldWrapChildren:p,"aria-label":f,hasArrow:g,bg:x,portalProps:y,background:b,backgroundColor:w,bgColor:C,motionProps:_,animatePresenceProps:A,...D}=i,P=b??w??x??C;if(P){r.bg=P;const he=h4(l,"colors",P);r[Ls.arrowBg.var]=he}const M=KK({...D,direction:l.direction}),N=!v.isValidElement(u)||p;let z;if(N)z=e.jsx(He.span,{display:"inline-block",tabIndex:0,...M.getTriggerProps(),children:u});else{const he=v.Children.only(u);z=v.cloneElement(he,M.getTriggerProps(he.props,uK(he)))}const I=!!f,V=M.getTooltipProps({},n),$=I?rm(V,["role","id"]):V,ae=iR(V,["role","id"]);return d?e.jsxs(e.Fragment,{children:[z,e.jsx(Bc,{...A,children:M.isOpen&&e.jsx(Oh,{...y,children:e.jsx(He.div,{...M.getTooltipPositionerProps(),__css:{zIndex:r.zIndex,pointerEvents:"none"},children:e.jsxs(JK,{variants:XK,initial:"exit",animate:"enter",exit:"exit",..._,...$,__css:r,children:[d,I&&e.jsx(He.span,{srOnly:!0,...ae,children:f}),g&&e.jsx(He.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:e.jsx(He.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:r.bg}})})]})})})})]}):e.jsx(e.Fragment,{children:u})});ti.displayName="Tooltip";const Te=tt(function(n,r){const i=ji("Heading",n),{className:l,...u}=Yn(n);return e.jsx(He.h2,{ref:r,className:gt("chakra-heading",n.className),...u,__css:i})});Te.displayName="Heading";const k=tt(function(n,r){const i=ji("Text",n),{className:l,align:u,decoration:d,casing:p,...f}=Yn(n),g=nm({textAlign:n.align,textDecoration:n.decoration,textTransform:n.casing});return e.jsx(He.p,{ref:r,className:gt("chakra-text",n.className),...g,...f,__css:i})});k.displayName="Text";const TM=He("span",{baseStyle:w1});TM.displayName="VisuallyHidden";const eQ=He("input",{baseStyle:w1});eQ.displayName="VisuallyHiddenInput";const AM=tt(function(n,r){const{spacing:i="0.5rem",spacingX:l,spacingY:u,children:d,justify:p,direction:f,align:g,className:x,shouldWrapChildren:y,...b}=n,w=v.useMemo(()=>y?v.Children.map(d,(C,_)=>e.jsx(RM,{children:C},_)):d,[d,y]);return e.jsx(He.div,{ref:r,className:gt("chakra-wrap",x),...b,children:e.jsx(He.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:p,alignItems:g,flexDirection:f,listStyleType:"none",gap:i,columnGap:l,rowGap:u,padding:"0"},children:w})})});AM.displayName="Wrap";const RM=tt(function(n,r){const{className:i,...l}=n;return e.jsx(He.li,{ref:r,__css:{display:"flex",alignItems:"flex-start"},className:gt("chakra-wrap__listitem",i),...l})});RM.displayName="WrapItem";const tQ=Sq({fonts:{heading:"Montserrat, system-ui, sans-serif",body:"Montserrat, system-ui, sans-serif"},styles:{global:{body:{fontFamily:"Montserrat, system-ui, sans-serif",bg:"gray.50",color:"gray.800"},"*":{borderColor:"gray.200"}}},colors:{rbe:{50:"#fef2f4",100:"#fde2e7",200:"#facbd4",300:"#f5a3b2",400:"#ed7189",500:"#e14964",600:"#be003c",700:"#9f1d3d",800:"#881b38",900:"#751a35"},brand:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"},success:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d"},warning:{50:"#fffbeb",100:"#fef3c7",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12"},gray:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"}},semanticTokens:{colors:{primary:{default:"rbe.600",_dark:"rbe.400"},accent:{default:"rbe.500",_dark:"rbe.300"},background:{default:"gray.50",_dark:"gray.900"},surface:{default:"white",_dark:"gray.800"},muted:{default:"gray.100",_dark:"gray.700"}}},components:{Card:{baseStyle:{container:{fontFamily:"Montserrat, system-ui, sans-serif",borderRadius:"xl",boxShadow:"sm",border:"1px solid",borderColor:"gray.200",transition:"all 0.2s ease-out",_hover:{boxShadow:"md",transform:"translateY(-2px)"}}},variants:{modern:{container:{bg:"white",borderRadius:"2xl",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"none",_hover:{boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",transform:"translateY(-4px)"}}},gradient:{container:{bgGradient:"linear(to-br, rbe.500, rbe.700)",color:"white",border:"none",_hover:{bgGradient:"linear(to-br, rbe.400, rbe.600)"}}}}},Heading:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"700",letterSpacing:"-0.025em",lineHeight:"shorter"},variants:{page:{fontSize:{base:"2xl",md:"4xl"},fontWeight:"800",bgGradient:"linear(to-r, rbe.600, rbe.800)",bgClip:"text",textAlign:"center",mb:2},section:{fontSize:{base:"xl",md:"2xl"},fontWeight:"700",color:"gray.800",mb:4},card:{fontSize:{base:"lg",md:"xl"},fontWeight:"600",color:"gray.700"}}},Text:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",lineHeight:"relaxed"},variants:{subtitle:{fontSize:{base:"md",md:"lg"},color:"gray.600",textAlign:"center",maxW:"2xl",mx:"auto"},description:{fontSize:"sm",color:"gray.600",lineHeight:"relaxed"}}},Button:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"600",borderRadius:"lg",transition:"all 0.2s ease-out",_focus:{boxShadow:"0 0 0 3px rgba(190, 0, 60, 0.1)"}},variants:{primary:{bg:"rbe.600",color:"white",_hover:{bg:"rbe.700",transform:"translateY(-1px)",boxShadow:"lg"},_active:{bg:"rbe.800"}},secondary:{bg:"white",color:"rbe.600",borderWidth:"2px",borderColor:"rbe.600",_hover:{bg:"rbe.50",transform:"translateY(-1px)"}},modern:{bg:"white",color:"gray.700",borderWidth:"1px",borderColor:"gray.300",boxShadow:"sm",_hover:{bg:"gray.50",borderColor:"gray.400",transform:"translateY(-1px)",boxShadow:"md"}}},sizes:{modern:{h:"12",px:"6",fontSize:"sm",fontWeight:"600"}}},Container:{baseStyle:{maxW:"container.xl",px:{base:4,md:8}}},Badge:{baseStyle:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"600",fontSize:"xs",textTransform:"none",borderRadius:"md",px:2,py:1}},Modal:{baseStyle:{dialog:{borderRadius:"2xl",boxShadow:"2xl"},header:{fontFamily:"Montserrat, system-ui, sans-serif",fontWeight:"700",fontSize:"xl",color:"gray.800"}}}},breakpoints:{base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},shadows:{modern:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)","modern-lg":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",rbe:"0 4px 14px 0 rgba(190, 0, 60, 0.15)"},radii:{modern:"12px","modern-lg":"16px","modern-xl":"20px"}}),nQ=[{code:"ADMIN",label:"Administrateur"},{code:"VOLUNTEER",label:"Bnvole"},{code:"DRIVER",label:"Conducteur"},{code:"MEMBER",label:"Membre"},{code:"PRESIDENT",label:"Prsident (hritage)"},{code:"VICE_PRESIDENT",label:"Vice-prsident (hritage)"},{code:"TRESORIER",label:"Trsorier (hritage)"},{code:"SECRETAIRE_GENERAL",label:"Secrtaire gnral (hritage)"}];function rQ(t){if(!t)return"MEMBER";let n=String(t).trim().toUpperCase().replace(/[-\s]+/g,"_");const r={ADMINISTRATEUR:"ADMIN",ADMINISTRATEURS:"ADMIN",BENEVOLE:"VOLUNTEER",BNVOLE:"VOLUNTEER",BENEVOLES:"VOLUNTEER",BNVOLES:"VOLUNTEER",CONDUCTEUR:"DRIVER",CONDUCTEURS:"DRIVER",MEMBRE:"MEMBER",MEMBRES:"MEMBER"};return r[n]&&(n=r[n]),new Set(nQ.map(l=>l.code)).has(n)?n:"MEMBER"}const kM=Zu({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),Zp=Zu({displayName:"ViewIcon",path:e.jsxs("g",{fill:"currentColor",children:[e.jsx("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),sQ=Zu({displayName:"ViewOffIcon",path:e.jsxs("g",{fill:"currentColor",children:[e.jsx("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),e.jsx("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"})]})}),Xp=Zu({displayName:"DeleteIcon",path:e.jsx("g",{fill:"currentColor",children:e.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),Hx=Zu({displayName:"EditIcon",path:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),iQ=Zu({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"}),aQ=Zu({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"});function oQ({isOpen:t,onPasswordChanged:n}){const[r,i]=v.useState(""),[l,u]=v.useState(""),[d,p]=v.useState(!1),[f,g]=v.useState(!1),[x,y]=v.useState(""),w=(_=>{let A=0;return _.length>=8&&(A+=25),/[A-Z]/.test(_)&&(A+=25),/[a-z]/.test(_)&&(A+=25),/[0-9]/.test(_)&&(A+=25),A})(r),C=async _=>{if(_.preventDefault(),y(""),r.length<6){y("Le mot de passe doit contenir au moins 6 caractres");return}if(r!==l){y("Les mots de passe ne correspondent pas");return}g(!0);try{const A=await fetch("https://attractive-kindness-rbe-serveurs.up.railway.app/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({newPassword:r})}),D=await A.json();if(!A.ok)throw new Error(D.error||"Erreur de changement de mot de passe");n()}catch(A){y(A.message)}finally{g(!1)}};return e.jsxs(Et,{isOpen:t,closeOnOverlayClick:!1,closeOnEsc:!1,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Changement de mot de passe obligatoire"}),e.jsxs(_t,{pb:6,children:[e.jsxs(Ut,{status:"info",mb:4,children:[e.jsx(Ht,{}),"Vous devez changer votre mot de passe temporaire avant de continuer."]}),e.jsx("form",{onSubmit:C,children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nouveau mot de passe"}),e.jsxs(zc,{children:[e.jsx(ge,{type:d?"text":"password",value:r,onChange:_=>i(_.target.value),placeholder:"Au moins 6 caractres"}),e.jsx(L1,{children:e.jsx(xt,{variant:"ghost",size:"sm",icon:d?e.jsx(sQ,{}):e.jsx(Zp,{}),onClick:()=>p(!d)})})]}),r&&e.jsxs(J,{align:"start",spacing:1,mt:2,children:[e.jsx(k,{fontSize:"xs",color:"gray.600",children:"Force du mot de passe:"}),e.jsx(Rc,{value:w,colorScheme:w<50?"red":w<75?"yellow":"green",size:"sm",width:"100%"})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Confirmer le mot de passe"}),e.jsx(ge,{type:d?"text":"password",value:l,onChange:_=>u(_.target.value),placeholder:"Retapez le nouveau mot de passe"})]}),x&&e.jsx(k,{color:"red.500",fontSize:"sm",children:x}),e.jsx(Q,{type:"submit",colorScheme:"blue",width:"100%",isLoading:f,isDisabled:!r||!l,children:"Changer le mot de passe"})]})})]})]})]})}const DM={"w.belaidi":{password:"Waiyl9134#",prenom:"Waiyl",nom:"BELAIDI",roles:["ADMIN"]},"m.ravichandran":{password:"RBE2025",prenom:"Mthusan",nom:"RAVICHANDRAN",roles:["MEMBER"]},"g.champenois":{password:"RBE2026",prenom:"Galle",nom:"CHAMPENOIS",roles:["MEMBER"]},"n.tetillon":{password:"RBE185C",prenom:"Nathan",nom:"TETILLON",roles:["MEMBER"]}};async function lQ(t,n){const i=`${"https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,"")}/auth/login`;try{const d=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});if(d.ok)return await d.json()}catch{}const l=String(t||"").toLowerCase(),u=DM[l];if(!u||u.password!==n)throw new Error("chec de connexion");return{token:`local-dev-token-${l}`,user:{username:l,prenom:u.prenom,nom:u.nom,firstName:u.prenom,lastName:u.nom,roles:u.roles}}}async function cQ(t,n){const i=`${"https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,"")}/auth/member-login`;try{const d=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:t,password:n})});if(d.ok)return await d.json()}catch{}const l=String(t||"").toLowerCase(),u=DM[l];if(!u||u.password!==n)throw new Error("chec de connexion");return{token:`local-dev-token-${l}`,user:{username:l,prenom:u.prenom,nom:u.nom,firstName:u.prenom,lastName:u.nom,roles:u.roles}}}const Nu={API_BASE:"https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),LOCAL_DEV_TOKEN_PREFIX:"local-dev-token-",TOKEN_KEY:"token",USER_KEY:"user",CACHE_EXPIRY:300*1e3};class uQ{constructor(){this.token=null,this.listeners=[]}getToken(){return this.token}setToken(n){this.token=n||null,n?localStorage.setItem(Nu.TOKEN_KEY,n):localStorage.removeItem(Nu.TOKEN_KEY),this.notifyListeners()}hydrate(){const n=localStorage.getItem(Nu.TOKEN_KEY);this.token=n||null,this.notifyListeners()}subscribe(n){return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(r=>r!==n)}}notifyListeners(){this.listeners.forEach(n=>n(this.token))}}const Tc=new uQ;async function dQ(t){if(!t)return!1;if(String(t).startsWith(Nu.LOCAL_DEV_TOKEN_PREFIX)||!Nu.API_BASE)return!0;try{const n=await fetch(`${Nu.API_BASE}/api/me`,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json();return!(r.disabled||r.active===!1||r.status==="DISABLED")}catch(n){return console.warn(" Session validation failed:",n.message),!1}}function hQ(t){return t?{Authorization:`Bearer ${t}`}:{}}function PM(t={},n){return n?{...t,...hQ(n)}:t}const fQ={makeKey(t,n){return`${t}_${n}`},getIfFresh(t,n=Nu.CACHE_EXPIRY){try{const r=localStorage.getItem(t),i=localStorage.getItem(`${t}:ts`);return!r||!i?null:Date.now()-parseInt(i)>n?(this.remove(t),null):JSON.parse(r)}catch(r){return console.warn(` getIfFresh(${t}) error:`,r.message),null}},set(t,n){try{localStorage.setItem(t,JSON.stringify(n)),localStorage.setItem(`${t}:ts`,Date.now().toString())}catch(r){console.warn(` StorageManager.set(${t}) error:`,r.message)}},remove(t){try{localStorage.removeItem(t),localStorage.removeItem(`${t}:ts`)}catch(n){console.warn(` StorageManager.remove(${t}) error:`,n.message)}},clearAppCache(){const t=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);!["token","user"].includes(r)&&!r.includes("pointage")&&t.push(r)}t.forEach(n=>localStorage.removeItem(n))}},MM=v.createContext(null);function pQ({children:t}){const[n,r]=v.useState(()=>(Tc.hydrate(),Tc.getToken()||"")),[i,l]=v.useState(()=>{const R=localStorage.getItem("user");return R?JSON.parse(R):null}),[u,d]=v.useState(!1),[p,f]=v.useState(!1),g=!!n,[x,y]=v.useState(null),[b,w]=v.useState(!1),[C,_]=v.useState(null),[A,D]=v.useState(null),P=v.useRef(0),[M,N]=v.useState(null),[z,I]=v.useState(!1);v.useEffect(()=>Tc.subscribe(Y=>{r(Y||"")}),[]),v.useEffect(()=>{i?localStorage.setItem("user",JSON.stringify(i)):localStorage.removeItem("user")},[i]);const V=R=>{Tc.setToken(R),r(R||"")},$=()=>{Tc.setToken(null),r(""),l(null),y(null),_(null),D(null),localStorage.removeItem("user"),fQ.clearAppCache()},ae=async()=>{if(!n)return l(null),f(!0),!1;const R=await dQ(n);return f(!0),R?!0:($(),!1)},he=()=>{const R="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),Y=[];return R&&Y.push(R),Y.push(""),Y},re=async(R=!1)=>{if(!n)return y(null),_("no-token"),null;const Y=Date.now();if(!R&&Y-P.current<500)return x;P.current=Y,w(!0),_(null);try{const q=he();let le=!1,We=null,pe=null;for(const ye of q)try{const Ze=await fetch(`${ye}/api/members/me`,{headers:{Authorization:`Bearer ${n}`}});if(We=Ze.status,Ze.ok){pe=await Ze.json(),y(pe),D(ye||null),le=!0;break}}catch{We="network";continue}return le?pe:(y(null),_(We),null)}finally{w(!1)}},ce=async()=>{if(!i?.id||!n)return N(null),null;I(!0);try{const R=he();for(const Y of R)try{const q=await fetch(`${Y}/api/admin/users/${i.id}/permissions`,{headers:{Authorization:`Bearer ${n}`}});if(q.ok){const le=await q.json(),We=le.permissions&&Array.isArray(le.permissions)&&le.permissions.length>0?le.permissions:null;return N(We),We}}catch{continue}return N(null),null}finally{I(!1)}};v.useEffect(()=>{ae()},[]),v.useEffect(()=>{n?ae().then(R=>{R&&(re(),ce())}):f(!0)},[n]),v.useEffect(()=>{const R=()=>ae();window.addEventListener("focus",R);const Y=setInterval(()=>ae(),300*1e3);return()=>{window.removeEventListener("focus",R),clearInterval(Y)}},[n]);const Se=i?.username||"",je=i?.prenom||"",de=i?.nom||"",G=(i?.roles||[]).map(R=>rQ(R)),U=G.includes("ADMIN")||G.includes("PRESIDENT")||G.includes("VICE_PRESIDENT")||G.includes("TRESORIER")||G.includes("SECRETAIRE_GENERAL"),W=G.includes("VOLUNTEER"),me=G.includes("DRIVER"),F=G.includes("MEMBER"),fe=i?.username||"",te=v.useMemo(()=>({token:n,setToken:V,user:i,setUser:l,isAuthenticated:g,username:Se,prenom:je,nom:de,roles:G,isAdmin:U,isVolunteer:W,isDriver:me,isMember:F,matricule:fe,logout:$,sessionChecked:p,ensureSession:ae,member:x,memberLoading:b,memberError:C,memberApiBase:A,refreshMember:re,customPermissions:M,permissionsLoading:z,refreshPermissions:ce}),[n,i,g,Se,je,de,G,U,W,me,F,fe,p,x,b,C,A,M,z]);return e.jsxs(MM.Provider,{value:te,children:[t,e.jsx(oQ,{isOpen:u,onPasswordChanged:()=>{d(!1),n&&ae()}})]})}function es(){return v.useContext(MM)}const ka="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),qf=(t={})=>({"Content-Type":"application/json",...t.headers}),Gf=(t,n={})=>({"Content-Type":"application/json",Authorization:`Bearer ${t}`,...n.headers}),Do=async t=>{const n=t.headers.get("content-type");if(n&&n.includes("application/json"))try{return await t.json()}catch(r){throw console.error(" Erreur parsing JSON:",r),new Error("Rponse JSON invalide du serveur")}else{const r=await t.text();throw console.error(" Rponse non-JSON reue:",r.substring(0,200)+"..."),r.includes("<!DOCTYPE")?new Error("Le serveur a renvoy une page HTML au lieu de JSON. Vrifiez l'URL de l'API."):new Error(`Rponse inattendue du serveur (${t.status}): ${r.substring(0,100)}`)}},yt={baseURL:ka,get:async(t,n={})=>{const r=localStorage.getItem("token"),i=r?Gf(r,n):qf(n);console.log(` GET ${ka}${t}`);try{const l=await fetch(`${ka}${t}`,{method:"GET",headers:i,...n});if(console.log(` Response status: ${l.status}`),!l.ok){if(l.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const u=await Do(l),d=u?.error||u?.message||`HTTP ${l.status}`;throw new Error(d)}return await Do(l)}catch(l){throw console.error(` Erreur GET ${t}:`,l.message),l}},post:async(t,n,r={})=>{const i=localStorage.getItem("token"),l=i?Gf(i,r):qf(r);console.log(` POST ${ka}${t}`,n);try{const u=await fetch(`${ka}${t}`,{method:"POST",headers:l,body:JSON.stringify(n),...r});if(console.log(` Response status: ${u.status}`),!u.ok){if(u.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const d=await Do(u),p=d?.error||d?.message||`HTTP ${u.status}`;throw new Error(p)}return await Do(u)}catch(u){throw console.error(` Erreur POST ${t}:`,u.message),u}},put:async(t,n,r={})=>{const i=localStorage.getItem("token"),l=i?Gf(i,r):qf(r);console.log(` PUT ${ka}${t}`,n);try{const u=await fetch(`${ka}${t}`,{method:"PUT",headers:l,body:JSON.stringify(n),...r});if(console.log(` Response status: ${u.status}`),!u.ok){if(u.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const d=await Do(u),p=d?.error||d?.message||`HTTP ${u.status}`;throw new Error(p)}return await Do(u)}catch(u){throw console.error(` Erreur PUT ${t}:`,u.message),u}},patch:async(t,n,r={})=>{const i=localStorage.getItem("token"),l=i?Gf(i,r):qf(r);console.log(` PATCH ${ka}${t}`,n);try{const u=await fetch(`${ka}${t}`,{method:"PATCH",headers:l,body:JSON.stringify(n),...r});if(console.log(` Response status: ${u.status}`),!u.ok){if(u.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const d=await Do(u),p=d?.error||d?.message||`HTTP ${u.status}`;throw new Error(p)}return await Do(u)}catch(u){throw console.error(` Erreur PATCH ${t}:`,u.message),u}},delete:async(t,n={})=>{const r=localStorage.getItem("token"),i=r?Gf(r,n):qf(n);console.log(` DELETE ${ka}${t}`);try{const l=await fetch(`${ka}${t}`,{method:"DELETE",headers:i,...n});if(console.log(` Response status: ${l.status}`),!l.ok){if(l.status===401){console.warn(" Token expir, redirection vers login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}const d=await Do(l),p=d?.error||d?.message||`HTTP ${l.status}`;throw new Error(p)}return l.headers.get("content-length")==="0"||l.status===204?{success:!0}:await Do(l)}catch(l){throw console.error(` Erreur DELETE ${t}:`,l.message),l}}},Dv={getActive:async()=>{console.log(" API: getActive flashs...");const t=await yt.get("/flashes");return console.log(" API: getActive result:",t),t},getAll:async()=>{console.log(" API: getAll flashs...");const t=await yt.get("/flashes/all");return console.log(" API: getAll result:",t),t},create:async t=>{console.log(" API: create flash:",t);const n=await yt.post("/flashes",t);return console.log(" API: create result:",n),n},update:async(t,n)=>{console.log(" API: update flash:",t,n);const r=await yt.put(`/flashes/${t}`,n);return console.log(" API: update result:",r),r},delete:async t=>{console.log(" API: delete flash:",t);const n=await yt.delete(`/flashes/${t}`);return console.log(" API: delete result:",n),n}};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,i)=>i?i.toUpperCase():r.toLowerCase()),rA=t=>{const n=gQ(t);return n.charAt(0).toUpperCase()+n.slice(1)},zM=(...t)=>t.filter((n,r,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===r).join(" ").trim(),xQ=t=>{for(const n in t)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=v.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:d,...p},f)=>v.createElement("svg",{ref:f,...vQ,width:n,height:n,stroke:t,strokeWidth:i?Number(r)*24/Number(n):r,className:zM("lucide",l),...!u&&!xQ(p)&&{"aria-hidden":"true"},...p},[...d.map(([g,x])=>v.createElement(g,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=(t,n)=>{const r=v.forwardRef(({className:i,...l},u)=>v.createElement(yQ,{ref:u,iconNode:n,className:zM(`lucide-${mQ(rA(t))}`,`lucide-${t}`,i),...l}));return r.displayName=rA(t),r};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sA=vm("bell",jQ);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],SQ=vm("check",bQ);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],CQ=vm("settings",wQ);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_Q=vm("trash-2",EQ);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],AQ=vm("x",TQ);function RQ(){const[t,n]=v.useState([]),[r,i]=v.useState(0),[l,u]=v.useState(!1),[d,p]=v.useState(!1),[f,g]=v.useState(!1),[x,y]=v.useState({}),b=v.useCallback(async()=>{try{const P=localStorage.getItem("token");if(!P)return;const M=await fetch("/api/notifications/inbox?limit=20",{headers:{Authorization:`Bearer ${P}`}});if(!M.ok)throw new Error("Failed to fetch");const N=await M.json();N.success&&(n(N.messages||[]),i(N.unread||0))}catch(P){console.error(" Fetch notifications error:",P)}},[]),w=v.useCallback(async()=>{try{const P=localStorage.getItem("token");if(!P)return;const M=await fetch("/api/notifications/preferences",{headers:{Authorization:`Bearer ${P}`}});if(M.ok){const N=await M.json();y(N.preferences||{})}}catch(P){console.error(" Fetch preferences error:",P)}},[]),C=async P=>{try{const M=localStorage.getItem("token");(await fetch(`/api/notifications/mark-read/${P}`,{method:"PATCH",headers:{Authorization:`Bearer ${M}`}})).ok&&b()}catch(M){console.error(" Mark read error:",M)}},_=async P=>{try{const M=localStorage.getItem("token");(await fetch(`/api/notifications/message/${P}`,{method:"DELETE",headers:{Authorization:`Bearer ${M}`}})).ok&&b()}catch(M){console.error(" Delete error:",M)}},A=async()=>{try{const P=localStorage.getItem("token");(await fetch("/api/notifications/mark-all-read",{method:"PATCH",headers:{Authorization:`Bearer ${P}`}})).ok&&b()}catch(P){console.error(" Mark all read error:",P)}},D=async(P,M)=>{try{const N=localStorage.getItem("token");(await fetch("/api/notifications/preferences",{method:"PUT",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify({[P]:M})})).ok&&w()}catch(N){console.error(" Update preferences error:",N)}};return v.useEffect(()=>{b(),w();const P=setInterval(b,3e4);return()=>clearInterval(P)},[b,w]),e.jsxs("div",{className:"notification-center",children:[e.jsxs("button",{className:"bell-button",onClick:()=>{u(!l),g(!1)},title:"Notifications",children:[e.jsx(sA,{size:20}),r>0&&e.jsx("span",{className:"badge",children:r>9?"9+":r})]}),l&&e.jsxs("div",{className:"notification-popup",children:[e.jsxs("div",{className:"popup-header",children:[e.jsxs("h3",{children:["Notifications ",t.length>0&&`(${t.length})`]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"icon-button",onClick:()=>g(!f),title:"Paramtres",children:e.jsx(CQ,{size:16})}),e.jsx("button",{className:"close-button",onClick:()=>u(!1),children:e.jsx(AQ,{size:16})})]})]}),e.jsx("div",{className:"popup-content",children:f?e.jsxs("div",{className:"preferences-panel",children:[e.jsx("h4",{children:"Prfrences de notification"}),e.jsxs("label",{className:"pref-item",children:[e.jsx("input",{type:"checkbox",checked:x.ticketNotifications!==!1,onChange:P=>D("ticketNotifications",P.target.checked)}),e.jsx("span",{children:" Notifications de tickets"})]}),e.jsxs("label",{className:"pref-item",children:[e.jsx("input",{type:"checkbox",checked:x.eventNotifications!==!1,onChange:P=>D("eventNotifications",P.target.checked)}),e.jsx("span",{children:" Notifications d'vnements"})]}),e.jsxs("label",{className:"pref-item",children:[e.jsx("input",{type:"checkbox",checked:x.reportNotifications!==!1,onChange:P=>D("reportNotifications",P.target.checked)}),e.jsx("span",{children:" Notifications de rapports"})]}),e.jsxs("label",{className:"pref-item",children:[e.jsx("input",{type:"checkbox",checked:x.maintenanceNotifications!==!1,onChange:P=>D("maintenanceNotifications",P.target.checked)}),e.jsx("span",{children:" Alertes de maintenance"})]}),e.jsxs("label",{className:"pref-item",children:[e.jsx("input",{type:"checkbox",checked:x.systemNotifications!==!1,onChange:P=>D("systemNotifications",P.target.checked)}),e.jsx("span",{children:" Messages systme"})]})]}):e.jsx(e.Fragment,{children:t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(sA,{size:48}),e.jsx("p",{children:"Aucune notification"})]}):e.jsxs("div",{className:"messages-list",children:[r>0&&e.jsx("div",{className:"mark-all-read",children:e.jsx("button",{onClick:A,children:" Marquer tout comme lu"})}),t.map(P=>e.jsxs("div",{className:`message-item ${P.readAt?"read":"unread"}`,children:[e.jsxs("div",{className:"message-header",children:[e.jsx("strong",{children:P.title}),e.jsx("small",{children:kQ(new Date(P.createdAt))})]}),e.jsx("div",{className:"message-content",dangerouslySetInnerHTML:{__html:P.content}}),e.jsxs("div",{className:"message-footer",children:[e.jsx("small",{className:"type-badge",children:P.type}),e.jsxs("div",{className:"message-actions",children:[!P.readAt&&e.jsx("button",{className:"action-button",onClick:()=>C(P.id),title:"Marquer comme lu",children:e.jsx(SQ,{size:14})}),e.jsx("button",{className:"action-button delete",onClick:()=>_(P.id),title:"Supprimer",children:e.jsx(_Q,{size:14})})]})]})]},P.id))]})})})]})]})}function kQ(t){const r=new Date-t,i=Math.floor(r/6e4),l=Math.floor(r/36e5),u=Math.floor(r/864e5);return i<1?" l'instant":i<60?`${i}m`:l<24?`${l}h`:u<7?`${u}j`:t.toLocaleDateString("fr-FR")}const DQ="/assets/retro_intranet_essonne-BfWPiuYY.svg",PQ="/assets/flash-info-rvZ9UMs-.png",MQ="/assets/flash-notif-HViqZ6l6.png",zQ="/assets/flash-pos-1o7mOrZv.png",Ae={SITE_MANAGEMENT:"site:management",SITE_USERS:"site:users",SITE_CONFIG:"site:config",SITE_CONTENT:"site:content",VEHICLES:"vehicles:list",VEHICLE_VIEW:"vehicles:view",VEHICLE_CREATE:"vehicles:create",VEHICLE_EDIT:"vehicles:edit",VEHICLE_DELETE:"vehicles:delete",EVENTS:"events:list",EVENT_VIEW:"events:view",EVENT_CREATE:"events:create",EVENT_EDIT:"events:edit",EVENT_DELETE:"events:delete",FINANCE:"finance:access",FINANCE_VIEW:"finance:view",FINANCE_EDIT:"finance:edit",MEMBERS:"members:list",MEMBER_VIEW:"members:view",MEMBER_EDIT:"members:edit",MEMBER_DELETE:"members:delete",STOCK:"stock:access",STOCK_VIEW:"stock:view",STOCK_EDIT:"stock:edit",NEWSLETTER:"newsletter:access",RETROMAIL:"retromail:access",RETROPLANNING:"retroplanning:access",RETROPLANNING_VIEW:"retroplanning:view",RETROPLANNING_CREATE:"retroplanning:create",RETROPLANNING_RESPOND:"retroplanning:respond",RETROSUPPORT:"retrosupport:access",RETROSUPPORT_VIEW:"retrosupport:view",RETROSUPPORT_CREATE:"retrosupport:create",RETRODEMANDES:"retrodemandes:access",RETRODEMANDES_VIEW:"retrodemandes:view",RETRODEMANDES_CREATE:"retrodemandes:create",RETRODEMANDES_EDIT:"retrodemandes:edit",PERMISSIONS_MANAGEMENT:"permissions:management",PERMISSIONS_VIEW:"permissions:view",PERMISSIONS_EDIT:"permissions:edit",MYRBE:"myrbe:access",MYRBE_VIEW:"myrbe:view",MYRBE_ACCESS:"myrbe:card-access",ADMIN_PANEL:"admin:panel",ADMIN_LOGS:"admin:logs",ADMIN_SETTINGS:"admin:settings"},Ex={VIEW:"view",EDIT:"edit"},_p={ADMIN:{label:"Administrateur",color:"red",permissions:{[Ae.SITE_MANAGEMENT]:["access","view","edit"],[Ae.SITE_USERS]:["access","view","edit"],[Ae.SITE_CONFIG]:["access","view","edit"],[Ae.SITE_CONTENT]:["access","view","edit"],[Ae.VEHICLES]:["access","view","edit"],[Ae.VEHICLE_VIEW]:["access","view","edit"],[Ae.VEHICLE_CREATE]:["access","view","edit"],[Ae.VEHICLE_EDIT]:["access","view","edit"],[Ae.VEHICLE_DELETE]:["access","view","edit"],[Ae.EVENTS]:["access","view","edit"],[Ae.EVENT_VIEW]:["access","view","edit"],[Ae.EVENT_CREATE]:["access","view","edit"],[Ae.EVENT_EDIT]:["access","view","edit"],[Ae.EVENT_DELETE]:["access","view","edit"],[Ae.FINANCE]:["access","view","edit"],[Ae.FINANCE_VIEW]:["access","view","edit"],[Ae.FINANCE_EDIT]:["access","view","edit"],[Ae.MEMBERS]:["access","view","edit"],[Ae.MEMBER_VIEW]:["access","view","edit"],[Ae.MEMBER_EDIT]:["access","view","edit"],[Ae.MEMBER_DELETE]:["access","view","edit"],[Ae.STOCK]:["access","view","edit"],[Ae.STOCK_VIEW]:["access","view","edit"],[Ae.STOCK_EDIT]:["access","view","edit"],[Ae.NEWSLETTER]:["access","view","edit"],[Ae.RETROMAIL]:["access","view","edit"],[Ae.RETROPLANNING]:["access","view","edit"],[Ae.RETROPLANNING_VIEW]:["access","view","edit"],[Ae.RETROPLANNING_CREATE]:["access","view","edit"],[Ae.RETROPLANNING_RESPOND]:["access","view","edit"],[Ae.RETROSUPPORT]:["access","view","edit"],[Ae.RETROSUPPORT_VIEW]:["access","view","edit"],[Ae.RETROSUPPORT_CREATE]:["access","view","edit"],[Ae.RETRODEMANDES]:["access","view","edit"],[Ae.RETRODEMANDES_VIEW]:["access","view","edit"],[Ae.RETRODEMANDES_CREATE]:["access","view","edit"],[Ae.RETRODEMANDES_EDIT]:["access","view","edit"],[Ae.PERMISSIONS_MANAGEMENT]:["access","view","edit"],[Ae.PERMISSIONS_VIEW]:["access","view","edit"],[Ae.PERMISSIONS_EDIT]:["access","view","edit"],[Ae.MYRBE]:["access","view","edit"],[Ae.MYRBE_VIEW]:["access","view","edit"],[Ae.MYRBE_ACCESS]:["access","view","edit"],[Ae.ADMIN_PANEL]:["access","view","edit"],[Ae.ADMIN_LOGS]:["access","view","edit"],[Ae.ADMIN_SETTINGS]:["access","view","edit"]}},PRESIDENT:{label:"Prsident",color:"red",permissions:{[Ae.SITE_MANAGEMENT]:["access","view","edit"],[Ae.SITE_USERS]:["access","view","edit"],[Ae.SITE_CONFIG]:["access","view","edit"],[Ae.SITE_CONTENT]:["access","view","edit"],[Ae.VEHICLES]:["access","view","edit"],[Ae.VEHICLE_VIEW]:["access","view","edit"],[Ae.VEHICLE_CREATE]:["access","view","edit"],[Ae.VEHICLE_EDIT]:["access","view","edit"],[Ae.VEHICLE_DELETE]:["access","view"],[Ae.EVENTS]:["access","view","edit"],[Ae.EVENT_VIEW]:["access","view","edit"],[Ae.EVENT_CREATE]:["access","view","edit"],[Ae.EVENT_EDIT]:["access","view","edit"],[Ae.EVENT_DELETE]:["access","view"],[Ae.FINANCE]:["access","view"],[Ae.FINANCE_VIEW]:["access","view"],[Ae.MEMBERS]:["access","view","edit"],[Ae.MEMBER_VIEW]:["access","view","edit"],[Ae.MEMBER_EDIT]:["access","view","edit"],[Ae.STOCK]:["access","view","edit"],[Ae.STOCK_VIEW]:["access","view","edit"],[Ae.STOCK_EDIT]:["access","view","edit"],[Ae.NEWSLETTER]:["access","view","edit"],[Ae.RETROMAIL]:["access","view"],[Ae.RETROPLANNING]:["access","view","edit"],[Ae.RETROPLANNING_VIEW]:["access","view","edit"],[Ae.RETROPLANNING_CREATE]:["access","view","edit"],[Ae.RETROPLANNING_RESPOND]:["access","view","edit"],[Ae.RETROSUPPORT]:["access","view","edit"],[Ae.RETROSUPPORT_VIEW]:["access","view","edit"],[Ae.RETROSUPPORT_CREATE]:["access","view","edit"],[Ae.RETRODEMANDES]:["access","view","edit"],[Ae.RETRODEMANDES_VIEW]:["access","view","edit"],[Ae.RETRODEMANDES_CREATE]:["access","view","edit"],[Ae.RETRODEMANDES_EDIT]:["access","view","edit"],[Ae.PERMISSIONS_MANAGEMENT]:["access","view","edit"],[Ae.PERMISSIONS_VIEW]:["access","view","edit"],[Ae.PERMISSIONS_EDIT]:["access","view","edit"],[Ae.MYRBE]:["access","view","edit"],[Ae.MYRBE_VIEW]:["access","view","edit"],[Ae.MYRBE_ACCESS]:["access","view","edit"],[Ae.ADMIN_LOGS]:["access","view"]}},VICE_PRESIDENT:{label:"Vice-Prsident",color:"pink",permissions:{[Ae.SITE_MANAGEMENT]:["access","view"],[Ae.SITE_USERS]:["access","view"],[Ae.SITE_CONFIG]:["access","view"],[Ae.SITE_CONTENT]:["access","view","edit"],[Ae.VEHICLES]:["access","view","edit"],[Ae.VEHICLE_VIEW]:["access","view","edit"],[Ae.VEHICLE_CREATE]:["access","view","edit"],[Ae.VEHICLE_EDIT]:["access","view","edit"],[Ae.EVENTS]:["access","view","edit"],[Ae.EVENT_VIEW]:["access","view","edit"],[Ae.EVENT_CREATE]:["access","view","edit"],[Ae.EVENT_EDIT]:["access","view","edit"],[Ae.MEMBERS]:["access","view"],[Ae.MEMBER_VIEW]:["access","view"],[Ae.STOCK]:["access","view"],[Ae.STOCK_VIEW]:["access","view"],[Ae.NEWSLETTER]:["access","view","edit"],[Ae.RETROMAIL]:["access","view"]}},TRESORIER:{label:"Trsorier",color:"green",permissions:{[Ae.SITE_MANAGEMENT]:["access","view"],[Ae.SITE_USERS]:["access","view"],[Ae.SITE_CONFIG]:["access","view"],[Ae.VEHICLES]:["access","view"],[Ae.VEHICLE_VIEW]:["access","view"],[Ae.EVENTS]:["access","view"],[Ae.EVENT_VIEW]:["access","view"],[Ae.FINANCE]:["access","view","edit"],[Ae.FINANCE_VIEW]:["access","view","edit"],[Ae.FINANCE_EDIT]:["access","view","edit"],[Ae.MEMBERS]:["access","view"],[Ae.MEMBER_VIEW]:["access","view"],[Ae.STOCK]:["access","view"],[Ae.STOCK_VIEW]:["access","view"]}},SECRETAIRE_GENERAL:{label:"Secrtaire Gnral",color:"purple",permissions:{[Ae.SITE_MANAGEMENT]:["access","view"],[Ae.SITE_CONTENT]:["access","view","edit"],[Ae.VEHICLES]:["access","view"],[Ae.VEHICLE_VIEW]:["access","view"],[Ae.EVENTS]:["access","view","edit"],[Ae.EVENT_VIEW]:["access","view","edit"],[Ae.EVENT_CREATE]:["access","view","edit"],[Ae.EVENT_EDIT]:["access","view","edit"],[Ae.MEMBERS]:["access","view"],[Ae.MEMBER_VIEW]:["access","view"],[Ae.NEWSLETTER]:["access","view","edit"],[Ae.RETROMAIL]:["access","view","edit"]}},VOLUNTEER:{label:"Bnvole",color:"orange",permissions:{[Ae.VEHICLES]:["access","view"],[Ae.VEHICLE_VIEW]:["access","view"],[Ae.VEHICLE_CREATE]:["access","view","edit"],[Ae.VEHICLE_EDIT]:["access","view","edit"],[Ae.EVENTS]:["access","view"],[Ae.EVENT_VIEW]:["access","view"],[Ae.EVENT_CREATE]:["access","view"],[Ae.MEMBERS]:["access","view"],[Ae.MEMBER_VIEW]:["access","view"],[Ae.STOCK]:["access","view"],[Ae.STOCK_VIEW]:["access","view"],[Ae.NEWSLETTER]:["access","view"]}},DRIVER:{label:"Conducteur",color:"cyan",permissions:{[Ae.VEHICLES]:["access","view"],[Ae.VEHICLE_VIEW]:["access","view"],[Ae.EVENTS]:["access","view"],[Ae.EVENT_VIEW]:["access","view"]}},PRESTATAIRE:{label:"Prestataire",color:"yellow",permissions:{[Ae.RETROPLANNING]:["access","view","edit"],[Ae.RETROPLANNING_VIEW]:["access","view"],[Ae.RETROPLANNING_CREATE]:["access","view","edit"],[Ae.RETROPLANNING_RESPOND]:["access","view","edit"],[Ae.RETROSUPPORT]:["access","view","edit"],[Ae.RETROSUPPORT_VIEW]:["access","view"],[Ae.RETROSUPPORT_CREATE]:["access","view","edit"]}},PARTENAIRE:{label:"Partenaire",color:"teal",permissions:{[Ae.MYRBE_ACCESS]:["access","view"]}},MEMBER:{label:"Membre",color:"blue",permissions:{[Ae.VEHICLES]:["access","view"],[Ae.VEHICLE_VIEW]:["access","view"],[Ae.EVENTS]:["access","view"],[Ae.EVENT_VIEW]:["access","view"],[Ae.NEWSLETTER]:["access","view"]}}};function IQ(t,n,r="access",i=null){if(i&&Array.isArray(i)){const l=i.find(u=>u.resource===n||u.resource===n?.toUpperCase());if(l&&(!l.expiresAt||new Date(l.expiresAt)>new Date)){const d={access:"READ",view:"READ",read:"READ",edit:"UPDATE",update:"UPDATE",delete:"DELETE",create:"CREATE"}[r]||"READ";if(l.actions&&l.actions.includes(d))return!0}}return t==="PRESTATAIRE"?n?.startsWith("retroplanning")||n?.startsWith("retrosupport"):!0}function Sl(t,n,r=null){return IQ(t,n,"access",r)}function mu({to:t,exact:n=!1,children:r}){const{pathname:i}=ho(),l=n?i===t:i===t||i.startsWith(t+"/");return e.jsx(O1,{as:mr,to:t,color:l?"var(--rbe-red)":"gray.600",fontWeight:l?"bold":"normal",textDecoration:"none",position:"relative",_hover:{color:"var(--rbe-red)",textDecoration:"none"},_after:l?{content:'""',position:"absolute",bottom:"-8px",left:0,right:0,height:"2px",bg:"var(--rbe-red)",borderRadius:"1px"}:{},"aria-current":l?"page":void 0,children:r})}function NQ(){const{user:t,customPermissions:n}=es(),r=t?.role||"MEMBER",i=Sl(r,Ae.SITE_MANAGEMENT,n),l=Sl(r,Ae.VEHICLES,n),u=Sl(r,Ae.EVENTS,n),d=Sl(r,Ae.MYRBE,n),p=Sl(r,Ae.NEWSLETTER,n),f=Sl(r,Ae.RETROPLANNING,n),g=Sl(r,Ae.RETROSUPPORT,n);return r==="PRESTATAIRE"?e.jsxs(sr,{bg:"white",gap:{base:4,md:8},justify:"center",align:"center",py:3,children:[f&&e.jsx(mu,{to:"/dashboard/retroplanning",children:" RtroPlanning"}),g&&e.jsx(mu,{to:"/dashboard/support",children:" RtroSupport"})]}):e.jsxs(sr,{bg:"white",gap:{base:4,md:8},justify:"center",align:"center",py:3,children:[i&&e.jsx(mu,{to:"/dashboard",children:" Accueil"}),l&&e.jsx(mu,{to:"/dashboard/vehicules",children:" Vhicules"}),u&&e.jsx(mu,{to:"/dashboard/evenements",children:" vnements"}),d&&e.jsx(mu,{to:"/dashboard/myrbe",children:" MyRBE"}),p&&e.jsx(mu,{to:"/dashboard/retromerch",children:" RtroMerch"})]})}const Hg={red:"#2e538d",yellow:"#2e538d",green:"#bb1f11",blue:"#bb1f11"},bu={INFO:{key:"INFO",label:"Flash Infos",color:{bg:"red.50",border:"red.300",text:"red.800",accent:"#bb1f11"}},NOTIF:{key:"NOTIF",label:"Flash Notifications",color:{bg:"orange.50",border:"orange.300",text:"orange.800",accent:"#d97706"}},POS:{key:"POS",label:"Flash Positif",color:{bg:"green.50",border:"green.300",text:"green.900",accent:"#16a34a"}}},LQ="56px",OQ="80px",BQ="52px",$Q="110px",IM="rbe:announcements:dismissed:";function FQ(){return`flash-${Date.now()}-${Math.floor(Math.random()*1e3)}`}async function VQ(){try{const t=await Dv.getAll();return Array.isArray(t)?t:[]}catch{return[]}}async function UQ(t){try{return await Dv.create(t)}catch(n){throw n}}async function iA(t,n){try{return await Dv.update(t,n)}catch(r){throw r}}async function HQ(t){try{return await Dv.delete(t),!0}catch(n){throw n}}function aA(t){if(!t)return{};try{const n=localStorage.getItem(IM+t);return n?JSON.parse(n):{}}catch{return{}}}function WQ(t,n){try{localStorage.setItem(IM+t,JSON.stringify(n||{}))}catch{}}const oA={INFO:PQ,NOTIF:MQ,POS:zQ};function vj({catKey:t}){const n=Object.values(bu).find(i=>i.key===t)||bu.INFO,r=oA[t]||oA.INFO;return e.jsx(ti,{label:n.label,children:e.jsxs(oe,{as:"span",display:"inline-flex",alignItems:"center",gap:2,children:[e.jsx(Li,{src:r,alt:"",boxSize:"18px",draggable:!1}),e.jsx(TM,{children:n.label})]})})}function qQ(t){return e.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor","aria-hidden":"true",...t,children:e.jsx("path",{d:"M3 10v4a2 2 0 0 0 2 2h1v2a1 1 0 0 0 1.555.832L12 16h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1h-6L7.555 3.168A1 1 0 0 0 6 4v2H5a2 2 0 0 0-2 2z"})})}function GQ(){const{logout:t,prenom:n,nom:r,isAuthenticated:i,isAdmin:l,matricule:u}=es(),d=Ua(),p=on(),f=It(),g=It(),x=It(),y=PP({base:!0,md:!1}),[b,w]=v.useState([]),[C,_]=v.useState(!0),[A,D]=v.useState(null),[P,M]=v.useState({message:"",category:"INFO",active:!0,expiresAt:""}),N=()=>{t(),d("/login"),p({title:"Dconnexion russie",description:"Vous avez t dconnect avec succs",status:"info",duration:3e3,isClosable:!0})};v.useEffect(()=>{if(!i)return;let U;const W=600*1e3,me=()=>{clearTimeout(U),U=setTimeout(()=>{t(),d("/login"),p({title:"Session expire",description:"Vous avez t dconnect pour inactivit (10 minutes)",status:"warning",duration:5e3,isClosable:!0})},W)},F=["mousedown","mousemove","keypress","scroll","touchstart","click"];return me(),F.forEach(fe=>{document.addEventListener(fe,me,!0)}),()=>{clearTimeout(U),F.forEach(fe=>{document.removeEventListener(fe,me,!0)})}},[i,t,d,p]),v.useEffect(()=>{async function U(){try{_(!0);const W=await VQ();w(W)}finally{_(!1)}}U()},[p]);const z=Date.now(),I=v.useMemo(()=>b.filter(U=>U&&U.active&&(!U.expiresAt||new Date(U.expiresAt).getTime()>z)),[b,z]),V=v.useMemo(()=>I.filter(U=>U.category==="INFO"),[I]),[$,ae]=v.useState(0);v.useEffect(()=>{const U=aA(u||"anon"),W=I.reduce((me,F)=>{const fe=U[F.id]||0,te=F.updatedAt?new Date(F.updatedAt).getTime():F.createdAt?new Date(F.createdAt).getTime():0;return me+(fe>=te?0:1)},0);ae(W)},[b,u,I.length]);const he=()=>{D(null),M({message:"",category:"INFO",active:!0,expiresAt:""}),f.onOpen()},re=U=>{D(U),M({message:U.message||"",category:U.category||"INFO",active:!!U.active,expiresAt:U.expiresAt||""}),f.onOpen()},ce=async()=>{const U=(P.message||"").trim();if(!U)return p({status:"warning",title:"Le message est requis"});["INFO","NOTIF","POS"].includes(P.category)||(P.category="INFO");try{if(A){const W=await iA(A.id,{message:U,category:P.category,active:!!P.active,expiresAt:P.expiresAt||null});w(me=>me.map(F=>F.id===A.id?W:F)),p({status:"success",title:"Flash modifi"})}else{const W={id:FQ(),message:U,category:P.category,active:!!P.active,expiresAt:P.expiresAt||null},me=await UQ(W);w(F=>[me,...F]),p({status:"success",title:"Flash ajout"})}D(null),f.onClose()}catch(W){p({status:"error",title:"Erreur",description:`Impossible de sauvegarder le flash: ${W.message}`})}},Se=async U=>{if(confirm("Supprimer ce flash ?"))try{await HQ(U),w(W=>W.filter(me=>me.id!==U)),p({status:"info",title:"Flash supprim"})}catch{p({status:"error",title:"Erreur",description:"Impossible de supprimer le flash"})}},je=async U=>{try{const W=b.find(F=>F.id===U);if(!W)return;const me=await iA(U,{active:!W.active});w(F=>F.map(fe=>fe.id===U?me:fe))}catch{p({status:"error",title:"Erreur",description:"Impossible de modifier le flash"})}},de=U=>{const W=u||"anon",me=aA(W),F=Date.now();me[U]=F,WQ(W,me),ae(fe=>Math.max(0,fe-1)),p({status:"info",title:"Prise de connaissance enregistre"})},G=U=>{const W=Object.values(bu).find(me=>me.key===U)||bu.INFO;return{bg:W.color.bg,borderColor:W.color.border,color:W.color.text,accent:W.color.accent}};return e.jsxs(oe,{as:"header",w:"100%",bg:"white",position:"sticky",top:"0",zIndex:"1000",borderBottom:"1px solid #3a3a3aff",children:[e.jsxs(oe,{position:"relative",h:{base:LQ,md:OQ},overflow:"visible",children:[e.jsx(oe,{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",zIndex:0,pointerEvents:"none",style:{background:`linear-gradient(90deg,
              ${Hg.red} 0%,
              ${Hg.yellow} 22%,
              ${Hg.green} 70%,
              ${Hg.blue} 100%
            )`}}),e.jsx(Li,{src:DQ,alt:"RtroBus Essonne Intranet",height:{base:BQ,md:$Q},objectFit:"contain",position:"absolute",left:{base:3,md:5},top:"50%",transform:"translateY(-50%)",zIndex:2,draggable:!1}),e.jsx(oe,{position:"absolute",right:{base:2,md:6},top:"50%",transform:"translateY(-50%)",zIndex:2,children:y?e.jsx(xt,{"aria-label":"Menu",icon:e.jsx(oe,{as:"span",display:"inline-block",w:"18px",h:"2px",bg:"white",position:"relative",_before:{content:'""',position:"absolute",w:"18px",h:"2px",bg:"white",top:"-6px",left:0},_after:{content:'""',position:"absolute",w:"18px",h:"2px",bg:"white",top:"6px",left:0}}),size:"sm",variant:"ghost",color:"white",onClick:x.onOpen,title:"Ouvrir le menu"}):e.jsxs(ee,{spacing:2,children:[e.jsx(ti,{label:l?"Grer les flashs":"Vous n'tes pas autoris",children:e.jsx("span",{children:e.jsx(xt,{"aria-label":"Annonces (gestion)",icon:e.jsx(qQ,{}),size:"sm",variant:"ghost",color:"white",onClick:()=>{l&&f.onOpen()},title:"Annonces",isDisabled:!l})})}),e.jsx(RQ,{}),e.jsxs(Wo,{children:[e.jsxs(qo,{as:Q,colorScheme:"red",children:["Bonjour, ",n||"Utilisateur"]}),e.jsxs(Go,{children:[e.jsx(Dn,{as:mr,to:"/adhesion",children:"Mon Adhsion"}),e.jsx(Dn,{as:mr,to:"/retromail",children:"RtroMail"}),e.jsx(Dn,{onClick:N,color:"red.500",children:"Dconnexion"})]})]})]})})]}),e.jsx(oe,{display:{base:"none",md:"block"},children:e.jsx(NQ,{})}),e.jsxs(HX,{isOpen:x.isOpen,onClose:x.onClose,placement:"right",children:[e.jsx(At,{}),e.jsxs(cM,{children:[e.jsx($t,{}),e.jsxs(Tt,{bg:"var(--rbe-red)",color:"white",children:[e.jsxs(k,{fontWeight:"bold",children:[" Bonjour ",n||"Utilisateur"]}),$>0&&e.jsxs(k,{fontSize:"sm",color:"whiteAlpha.800",children:[$," flash(s) non lu(s)"]})]}),e.jsx(_t,{p:0,children:e.jsxs(J,{align:"stretch",spacing:0,children:[e.jsx(Q,{as:mr,to:"/dashboard",variant:"ghost",justifyContent:"flex-start",onClick:x.onClose,py:4,px:5,children:"Accueil"}),e.jsx(Q,{as:mr,to:"/dashboard/vehicules",variant:"ghost",justifyContent:"flex-start",onClick:x.onClose,py:4,px:5,children:"Vhicules"}),e.jsx(Q,{as:mr,to:"/dashboard/evenements",variant:"ghost",justifyContent:"flex-start",onClick:x.onClose,py:4,px:5,children:"vnements"}),e.jsx(Q,{as:mr,to:"/dashboard/myrbe",variant:"ghost",justifyContent:"flex-start",onClick:x.onClose,py:4,px:5,children:"MyRBE"}),e.jsx(Q,{as:mr,to:"/dashboard/retromerch",variant:"ghost",justifyContent:"flex-start",onClick:x.onClose,py:4,px:5,children:"RtroMerch"}),e.jsx(xn,{}),e.jsx(Q,{onClick:()=>{g.onOpen(),x.onClose()},variant:"ghost",justifyContent:"flex-start",py:4,px:5,children:"Voir les flashs"}),l&&e.jsx(Q,{onClick:()=>{f.onOpen(),x.onClose()},variant:"ghost",justifyContent:"flex-start",py:4,px:5,children:"Grer les flashs"}),e.jsx(xn,{}),e.jsx(Q,{as:mr,to:"/adhesion",variant:"ghost",justifyContent:"flex-start",onClick:x.onClose,py:4,px:5,children:"Mon Adhsion"}),e.jsx(Q,{as:mr,to:"/retromail",variant:"ghost",justifyContent:"flex-start",onClick:x.onClose,py:4,px:5,children:"RtroMail"}),e.jsx(Q,{onClick:()=>{x.onClose(),N()},colorScheme:"red",justifyContent:"flex-start",variant:"ghost",py:4,px:5,children:"Dconnexion"})]})})]})]}),e.jsx(oe,{children:V.map(U=>{const W=G(U.category);return e.jsx(oe,{bg:W.bg,borderTop:"2px solid",borderColor:W.borderColor||W.border,py:2,px:4,children:e.jsxs(ee,{spacing:3,flex:"1",align:"center",children:[e.jsx(oe,{children:e.jsx(vj,{catKey:U.category})}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:{base:"sm",md:"md"},color:W.color,children:U.message}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:U.createdAt?`Publi: ${new Date(U.createdAt).toLocaleString()}`:""})]}),e.jsx(oe,{children:l?e.jsxs(ee,{spacing:2,children:[e.jsx(Q,{size:"sm",onClick:()=>re(U),children:"diter"}),e.jsx(Q,{size:"sm",colorScheme:U.active?"yellow":"green",onClick:()=>je(U.id),children:U.active?"Dsactiver":"Activer"}),e.jsx(Q,{size:"sm",colorScheme:"red",onClick:()=>Se(U.id),children:"Supprimer"})]}):e.jsx(Q,{size:"sm",onClick:()=>de(U.id),children:"Prendre connaissance"})})]})},U.id)})}),e.jsxs(Et,{isOpen:g.isOpen,onClose:g.onClose,isCentered:!0,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxW:"900px",children:[e.jsx(Tt,{children:"Flashs en cours"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[I.length===0&&e.jsx(k,{color:"gray.600",children:"Aucun flash en cours."}),I.map(U=>e.jsxs(oe,{p:3,borderWidth:"1px",borderRadius:"md",bg:"white",children:[e.jsxs(ee,{spacing:2,align:"center",children:[e.jsx(vj,{catKey:U.category}),e.jsx(k,{fontWeight:"600",children:U.message})]}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:U.createdAt?`Publi: ${new Date(U.createdAt).toLocaleString()}`:""}),e.jsx(Q,{size:"sm",onClick:()=>{de(U.id)},children:"Prendre connaissance"})]},U.id))]})}),e.jsx(Vt,{children:e.jsx(Q,{onClick:g.onClose,children:"Fermer"})})]})]}),e.jsxs(Et,{isOpen:f.isOpen,onClose:()=>{D(null),f.onClose()},isCentered:!0,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxW:"900px",children:[e.jsx(Tt,{children:"Gestion des flashs"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(fo,{direction:"row",justify:"space-between",align:"center",children:[e.jsx(k,{fontWeight:"600",children:"Diffusions existantes"}),e.jsx(Q,{size:"sm",onClick:he,children:"Nouveau flash"})]}),b.length===0&&e.jsx(k,{color:"gray.600",children:"Aucun flash enregistr."}),b.map(U=>{const W=G(U.category);return e.jsxs(oe,{p:3,borderWidth:"1px",borderRadius:"md",bg:W.bg,children:[e.jsxs(ee,{spacing:2,align:"center",children:[e.jsx(vj,{catKey:U.category}),e.jsx(k,{fontWeight:"600",children:U.message})]}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:U.createdAt?`Publi: ${new Date(U.createdAt).toLocaleString()}`:""}),e.jsxs(ee,{spacing:2,children:[e.jsx(Q,{size:"sm",onClick:()=>re(U),children:"diter"}),e.jsx(Q,{size:"sm",onClick:()=>je(U.id),children:U.active?"Dsactiver":"Activer"}),e.jsx(Q,{size:"sm",colorScheme:"red",onClick:()=>Se(U.id),children:"Supprimer"})]})]},U.id)}),e.jsxs(oe,{mt:2,p:3,borderWidth:"1px",borderRadius:"md",bg:"white",children:[e.jsx(k,{fontWeight:"600",mb:2,children:A?"Modifier le flash":"Crer un nouveau flash"}),e.jsxs(X,{mb:2,children:[e.jsx(Z,{children:"Catgorie"}),e.jsxs(ut,{value:P.category,onChange:U=>M(W=>({...W,category:U.target.value})),children:[e.jsx("option",{value:"INFO",children:bu.INFO.label}),e.jsx("option",{value:"NOTIF",children:bu.NOTIF.label}),e.jsx("option",{value:"POS",children:bu.POS.label})]})]}),e.jsxs(X,{mb:2,children:[e.jsx(Z,{children:"Message"}),e.jsx(Xt,{value:P.message,onChange:U=>M(W=>({...W,message:U.target.value})),rows:4})]}),e.jsxs(X,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Z,{mb:"0",mr:3,children:"Actif"}),e.jsx(Jn,{isChecked:P.active,onChange:U=>M(W=>({...W,active:U.target.checked}))})]}),e.jsxs(X,{mb:2,children:[e.jsx(Z,{children:"Expire le (optionnel)"}),e.jsx("input",{type:"datetime-local",value:P.expiresAt||"",onChange:U=>M(W=>({...W,expiresAt:U.target.value||""})),style:{width:"100%",padding:"8px",borderRadius:6,border:"1px solid #e2e8f0"}})]}),e.jsxs(ee,{gap:2,justify:"flex-end",children:[e.jsx(Q,{variant:"ghost",onClick:()=>{D(null),M({message:"",category:"INFO",active:!0,expiresAt:""})},children:"Rinitialiser"}),e.jsx(Q,{colorScheme:"blue",onClick:ce,children:A?"Sauvegarder":"Crer"})]})]})]})}),e.jsx(Vt,{children:e.jsx(Q,{onClick:()=>{D(null),f.onClose()},children:"Fermer"})})]})]})]})}function Po({children:t}){const{isAuthenticated:n,user:r,sessionChecked:i,ensureSession:l}=es(),[u,d]=v.useState(!1);return v.useEffect(()=>{!i&&!u&&(l(),d(!0))},[i,u,l]),i?!n||!r?e.jsx(Au,{to:"/login",replace:!0}):t:e.jsx(yn,{py:20,children:e.jsx(pn,{size:"lg"})})}var NM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lA=wn.createContext&&wn.createContext(NM),YQ=["attr","size","title"];function ZQ(t,n){if(t==null)return{};var r=XQ(t,n),i,l;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(l=0;l<u.length;l++)i=u[l],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function XQ(t,n){if(t==null)return{};var r={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(n.indexOf(i)>=0)continue;r[i]=t[i]}return r}function Wx(){return Wx=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Wx.apply(this,arguments)}function cA(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,i)}return r}function qx(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?cA(Object(r),!0).forEach(function(i){KQ(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function KQ(t,n,r){return n=QQ(n),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function QQ(t){var n=JQ(t,"string");return typeof n=="symbol"?n:n+""}function JQ(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function LM(t){return t&&t.map((n,r)=>wn.createElement(n.tag,qx({key:r},n.attr),LM(n.child)))}function ft(t){return n=>wn.createElement(eJ,Wx({attr:qx({},t.attr)},n),LM(t.child))}function eJ(t){var n=r=>{var{attr:i,size:l,title:u}=t,d=ZQ(t,YQ),p=l||r.size||"1em",f;return r.className&&(f=r.className),t.className&&(f=(f?f+" ":"")+t.className),wn.createElement("svg",Wx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,d,{className:f,style:qx(qx({color:t.color||r.color},r.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),u&&wn.createElement("title",null,u),t.children)};return lA!==void 0?wn.createElement(lA.Consumer,null,r=>n(r)):n(NM)}function _l(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Pv(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function th(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function OM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function tJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(t)}function nJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(t)}function rJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(t)}function sJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function X1(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"10"},child:[]},{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"16"},child:[]}]})(t)}function iJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function Os(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function K1(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function Kp(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function Q1(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function BM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function Gx(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function J1(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function Eu(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function uA(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function aJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(t)}function Yx(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(t)}function Hu(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function ua(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function Vb(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function nh(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function Bs(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function $M(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function Ub(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function Rh(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function Qp(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function Hb(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(t)}function oJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function fh(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(t)}function ew(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function lJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function FM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function Lu(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(t)}function cJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"4"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"9.17",y2:"9.17"},child:[]},{tag:"line",attr:{x1:"14.83",y1:"14.83",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"14.83",y1:"9.17",x2:"19.07",y2:"4.93"},child:[]},{tag:"line",attr:{x1:"14.83",y1:"9.17",x2:"18.36",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"9.17",y2:"14.83"},child:[]}]})(t)}function uJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(t)}function VM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function Ko(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function $l(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function kc(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function dJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"18"},child:[]},{tag:"line",attr:{x1:"16",y1:"6",x2:"16",y2:"22"},child:[]}]})(t)}function hJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function fJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function ph(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}function mh(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function UM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function pJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(t)}function Bn(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function dA(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"},child:[]},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"},child:[]}]})(t)}function Fa(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Il(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function ym(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function mJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function Qu(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function gJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(t)}function jm(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function xJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function vJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"21",x2:"4",y2:"14"},child:[]},{tag:"line",attr:{x1:"4",y1:"10",x2:"4",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"20",y1:"21",x2:"20",y2:"16"},child:[]},{tag:"line",attr:{x1:"20",y1:"12",x2:"20",y2:"3"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"7",y2:"14"},child:[]},{tag:"line",attr:{x1:"9",y1:"8",x2:"15",y2:"8"},child:[]},{tag:"line",attr:{x1:"17",y1:"16",x2:"23",y2:"16"},child:[]}]})(t)}function yJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function Tp(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(t)}function Qn(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function jJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(t)}function bJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(t)}function HM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function Wu(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(t)}function Wb(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(t)}function WM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function qM(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(t)}function hA(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function Zx(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(t)}function yj(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Va(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function SJ(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function qu(t){return ft({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function Hr({children:t,allowedRoles:n=null,deniedRoles:r=null,fallbackRoute:i="/dashboard/home",showError:l=!0}){const{isAuthenticated:u,roles:d}=es();if(!u)return e.jsx(Au,{to:"/login",replace:!0});const p=d?.[0]||"MEMBER";return r&&r.includes(p)?(console.warn(` RoleProtectedRoute: Role "${p}" is denied access`),l?e.jsx(yn,{minH:"60vh",px:4,children:e.jsxs(J,{spacing:4,textAlign:"center",children:[e.jsx(Cn,{as:Ko,boxSize:12,color:"red.500"}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",mb:2,children:"Accs Refus"}),e.jsx(k,{color:"gray.600",mb:4,children:"Cette section n'est pas disponible pour votre rle."}),e.jsxs(k,{fontSize:"sm",color:"gray.500",children:["Rle: ",e.jsx("strong",{children:p})]})]})]})}):e.jsx(Au,{to:i,replace:!0})):n&&!n.includes(p)?(console.warn(` RoleProtectedRoute: Role "${p}" not in allowed roles`),l?e.jsx(yn,{minH:"60vh",px:4,children:e.jsxs(J,{spacing:4,textAlign:"center",children:[e.jsx(Cn,{as:Ko,boxSize:12,color:"red.500"}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",mb:2,children:"Accs Refus"}),e.jsx(k,{color:"gray.600",mb:4,children:"Cette section n'est pas disponible pour votre rle."}),e.jsxs(k,{fontSize:"sm",color:"gray.500",children:["Rles autoriss: ",e.jsx("strong",{children:n.join(", ")})]})]})]})}):e.jsx(Au,{to:i,replace:!0})):t}function Wg({children:t,resource:n=null,permissionType:r="access",fallbackRoute:i="/dashboard/home",showError:l=!1}){const{isAuthenticated:u,user:d}=es();if(!u)return console.warn(" PermissionProtectedRoute: Not authenticated"),e.jsx(Au,{to:"/login",replace:!0});if(!d)return console.warn(" PermissionProtectedRoute: No user data"),e.jsx(Au,{to:"/login",replace:!0});if(!n)return t;const p=d.role||d.roles?.[0]||"MEMBER";return Sl(p,n)?(console.log(` PermissionProtectedRoute: Access granted to "${n}" for role "${p}"`),t):(console.warn(` PermissionProtectedRoute: User role "${p}" denied access to resource "${n}"`),l?e.jsx(oe,{p:8,textAlign:"center",minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsxs(J,{spacing:4,children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",children:" Accs Refus"}),e.jsx(k,{fontSize:"md",color:"gray.600",children:"Vous n'avez pas les permissions ncessaires pour accder  cette ressource."}),e.jsxs(k,{fontSize:"sm",color:"gray.400",children:["Votre rle: ",e.jsx("strong",{children:p})]})]})}):e.jsx(Au,{to:i,replace:!0}))}function GM(t){if(!t)return null;const n=String(t).trim().toUpperCase();if(_p[n])return n;const r={ADMINISTRATEUR:"ADMIN",ADMINISTRATEURS:"ADMIN"};return r[n]?r[n]:n}function jj(t,n){const r=GM(t),i=_p[r];if(!i)return console.warn(` Rle inconnu: "${t}" (normalis: "${r}")`),!1;const l=i.permissions[n]||[];return l.includes(Ex.EDIT)||l.includes("edit")}function wJ(){const{matricule:t,roles:n=[]}=es(),r=n?.[0]||null,i=GM(r),l=()=>!i||!t?!1:jj(i,Ae.VEHICLE_CREATE);return{canCreateVehicle:l,canViewVehicles:()=>{if(!i||!t)return!1;const x=_p[i];if(!x)return!1;const y=x.permissions[Ae.VEHICLES]||[];return y.includes(Ex.VIEW)||y.includes("view")||y.includes(Ex.EDIT)||y.includes("edit")},canEditVehicle:()=>!i||!t?!1:jj(i,Ae.VEHICLE_EDIT),canDeleteVehicle:()=>!i||!t?!1:jj(i,Ae.VEHICLE_DELETE),getAccessDeniedMessage:(x="create")=>{const y=r||"inconnu",b=Object.entries(_p).filter(([C,_])=>{const A=_.permissions[Ae.VEHICLE_CREATE]||[];return A.includes(Ex.EDIT)||A.includes("edit")}).map(([C,_])=>_.label),w={create:`Vous n'tes pas autoris  ajouter des vhicules.

Rle actuel: ${y}
Rles autoriss: ${b.join(", ")}`,view:`Vous n'tes pas autoris  consulter les vhicules. Rle: ${y}`,edit:`Vous n'tes pas autoris  modifier les vhicules. Rle: ${y}`,delete:`Vous n'tes pas autoris  supprimer les vhicules. Rle: ${y}`};return w[x]||w.create},currentRole:i,currentMatricule:t,rawRole:r,debugInfo:()=>({rawRole:r,normalizedRole:i,matricule:t,canCreate:l(),roleConfig:_p[i]})}}function CJ({children:t}){const{matricule:n,user:r}=es(),{canCreateVehicle:i,getAccessDeniedMessage:l,currentRole:u,rawRole:d,debugInfo:p}=wJ();if(i())return t;const f=p?.();return e.jsx(oe,{p:8,maxW:"700px",mx:"auto",mt:8,children:e.jsxs(J,{spacing:4,align:"stretch",textAlign:"center",children:[e.jsx(Te,{size:"lg",color:"red.600",children:" Accs refus"}),e.jsx(oe,{bg:"red.50",p:4,borderRadius:"md",borderLeft:"4px",borderColor:"red.500",children:e.jsx(k,{fontWeight:"bold",mb:2,whiteSpace:"pre-wrap",children:l("create")})}),e.jsxs(oe,{bg:"blue.50",p:4,borderRadius:"md",borderLeft:"4px",borderColor:"blue.500",children:[e.jsx(k,{fontWeight:"bold",mb:2,fontSize:"sm",children:" Informations actuelles:"}),e.jsxs(J,{align:"start",spacing:1,fontSize:"sm",children:[e.jsxs(k,{children:[e.jsx("strong",{children:"Matricule:"})," ",e.jsx(wh,{children:n||"N/A"})]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Rle brut:"})," ",e.jsx(wh,{children:d||"N/A"})]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Rle normalis:"})," ",e.jsx(Qe,{colorScheme:"purple",children:u||"INCONNU"})]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Peut crer:"})," ",e.jsx(Qe,{colorScheme:"red",children:"Non"})]})]})]}),f&&e.jsxs(oe,{bg:"gray.100",p:3,borderRadius:"md",textAlign:"left",fontSize:"xs",fontFamily:"monospace",overflowX:"auto",children:[e.jsx(k,{fontWeight:"bold",mb:1,children:"Debug info:"}),e.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(f,null,2)})]}),e.jsx(xn,{}),e.jsx(k,{fontSize:"xs",color:"gray.600",p:3,bg:"gray.50",borderRadius:"md",children:`Si vous pensez que c'est une erreur, contactez un administrateur avec le lien "Support" en bas de page.`})]})})}var EJ=Object.defineProperty,Xx=Object.getOwnPropertySymbols,YM=Object.prototype.hasOwnProperty,ZM=Object.prototype.propertyIsEnumerable,fA=(t,n,r)=>n in t?EJ(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,qb=(t,n)=>{for(var r in n||(n={}))YM.call(n,r)&&fA(t,r,n[r]);if(Xx)for(var r of Xx(n))ZM.call(n,r)&&fA(t,r,n[r]);return t},Gb=(t,n)=>{var r={};for(var i in t)YM.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&Xx)for(var i of Xx(t))n.indexOf(i)<0&&ZM.call(t,i)&&(r[i]=t[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Gu;(t=>{const n=class Nn{constructor(f,g,x,y){if(this.version=f,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],f<Nn.MIN_VERSION||f>Nn.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let b=[];for(let C=0;C<this.size;C++)b.push(!1);for(let C=0;C<this.size;C++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(x);if(this.drawCodewords(w),y==-1){let C=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);const A=this.getPenaltyScore();A<C&&(y=_,C=A),this.applyMask(_)}}l(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(f,g){const x=t.QrSegment.makeSegments(f);return Nn.encodeSegments(x,g)}static encodeBinary(f,g){const x=t.QrSegment.makeBytes(f);return Nn.encodeSegments([x],g)}static encodeSegments(f,g,x=1,y=40,b=-1,w=!0){if(!(Nn.MIN_VERSION<=x&&x<=y&&y<=Nn.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let C,_;for(C=x;;C++){const M=Nn.getNumDataCodewords(C,g)*8,N=d.getTotalBits(f,C);if(N<=M){_=N;break}if(C>=y)throw new RangeError("Data too long")}for(const M of[Nn.Ecc.MEDIUM,Nn.Ecc.QUARTILE,Nn.Ecc.HIGH])w&&_<=Nn.getNumDataCodewords(C,M)*8&&(g=M);let A=[];for(const M of f){r(M.mode.modeBits,4,A),r(M.numChars,M.mode.numCharCountBits(C),A);for(const N of M.getData())A.push(N)}l(A.length==_);const D=Nn.getNumDataCodewords(C,g)*8;l(A.length<=D),r(0,Math.min(4,D-A.length),A),r(0,(8-A.length%8)%8,A),l(A.length%8==0);for(let M=236;A.length<D;M^=253)r(M,8,A);let P=[];for(;P.length*8<A.length;)P.push(0);return A.forEach((M,N)=>P[N>>>3]|=M<<7-(N&7)),new Nn(C,g,P,b)}getModule(f,g){return 0<=f&&f<this.size&&0<=g&&g<this.size&&this.modules[g][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let x=0;x<this.size;x++)this.setFunctionModule(6,x,x%2==0),this.setFunctionModule(x,6,x%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),g=f.length;for(let x=0;x<g;x++)for(let y=0;y<g;y++)x==0&&y==0||x==0&&y==g-1||x==g-1&&y==0||this.drawAlignmentPattern(f[x],f[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const g=this.errorCorrectionLevel.formatBits<<3|f;let x=g;for(let b=0;b<10;b++)x=x<<1^(x>>>9)*1335;const y=(g<<10|x)^21522;l(y>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,i(y,b));this.setFunctionModule(8,7,i(y,6)),this.setFunctionModule(8,8,i(y,7)),this.setFunctionModule(7,8,i(y,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,i(y,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,i(y,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,i(y,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let x=0;x<12;x++)f=f<<1^(f>>>11)*7973;const g=this.version<<12|f;l(g>>>18==0);for(let x=0;x<18;x++){const y=i(g,x),b=this.size-11+x%3,w=Math.floor(x/3);this.setFunctionModule(b,w,y),this.setFunctionModule(w,b,y)}}drawFinderPattern(f,g){for(let x=-4;x<=4;x++)for(let y=-4;y<=4;y++){const b=Math.max(Math.abs(y),Math.abs(x)),w=f+y,C=g+x;0<=w&&w<this.size&&0<=C&&C<this.size&&this.setFunctionModule(w,C,b!=2&&b!=4)}}drawAlignmentPattern(f,g){for(let x=-2;x<=2;x++)for(let y=-2;y<=2;y++)this.setFunctionModule(f+y,g+x,Math.max(Math.abs(y),Math.abs(x))!=1)}setFunctionModule(f,g,x){this.modules[g][f]=x,this.isFunction[g][f]=!0}addEccAndInterleave(f){const g=this.version,x=this.errorCorrectionLevel;if(f.length!=Nn.getNumDataCodewords(g,x))throw new RangeError("Invalid argument");const y=Nn.NUM_ERROR_CORRECTION_BLOCKS[x.ordinal][g],b=Nn.ECC_CODEWORDS_PER_BLOCK[x.ordinal][g],w=Math.floor(Nn.getNumRawDataModules(g)/8),C=y-w%y,_=Math.floor(w/y);let A=[];const D=Nn.reedSolomonComputeDivisor(b);for(let M=0,N=0;M<y;M++){let z=f.slice(N,N+_-b+(M<C?0:1));N+=z.length;const I=Nn.reedSolomonComputeRemainder(z,D);M<C&&z.push(0),A.push(z.concat(I))}let P=[];for(let M=0;M<A[0].length;M++)A.forEach((N,z)=>{(M!=_-b||z>=C)&&P.push(N[M])});return l(P.length==w),P}drawCodewords(f){if(f.length!=Math.floor(Nn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let x=this.size-1;x>=1;x-=2){x==6&&(x=5);for(let y=0;y<this.size;y++)for(let b=0;b<2;b++){const w=x-b,_=(x+1&2)==0?this.size-1-y:y;!this.isFunction[_][w]&&g<f.length*8&&(this.modules[_][w]=i(f[g>>>3],7-(g&7)),g++)}}l(g==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let x=0;x<this.size;x++){let y;switch(f){case 0:y=(x+g)%2==0;break;case 1:y=g%2==0;break;case 2:y=x%3==0;break;case 3:y=(x+g)%3==0;break;case 4:y=(Math.floor(x/3)+Math.floor(g/2))%2==0;break;case 5:y=x*g%2+x*g%3==0;break;case 6:y=(x*g%2+x*g%3)%2==0;break;case 7:y=((x+g)%2+x*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][x]&&y&&(this.modules[g][x]=!this.modules[g][x])}}getPenaltyScore(){let f=0;for(let b=0;b<this.size;b++){let w=!1,C=0,_=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[b][A]==w?(C++,C==5?f+=Nn.PENALTY_N1:C>5&&f++):(this.finderPenaltyAddHistory(C,_),w||(f+=this.finderPenaltyCountPatterns(_)*Nn.PENALTY_N3),w=this.modules[b][A],C=1);f+=this.finderPenaltyTerminateAndCount(w,C,_)*Nn.PENALTY_N3}for(let b=0;b<this.size;b++){let w=!1,C=0,_=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[A][b]==w?(C++,C==5?f+=Nn.PENALTY_N1:C>5&&f++):(this.finderPenaltyAddHistory(C,_),w||(f+=this.finderPenaltyCountPatterns(_)*Nn.PENALTY_N3),w=this.modules[A][b],C=1);f+=this.finderPenaltyTerminateAndCount(w,C,_)*Nn.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let w=0;w<this.size-1;w++){const C=this.modules[b][w];C==this.modules[b][w+1]&&C==this.modules[b+1][w]&&C==this.modules[b+1][w+1]&&(f+=Nn.PENALTY_N2)}let g=0;for(const b of this.modules)g=b.reduce((w,C)=>w+(C?1:0),g);const x=this.size*this.size,y=Math.ceil(Math.abs(g*20-x*10)/x)-1;return l(0<=y&&y<=9),f+=y*Nn.PENALTY_N4,l(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let x=[6];for(let y=this.size-7;x.length<f;y-=g)x.splice(1,0,y);return x}}static getNumRawDataModules(f){if(f<Nn.MIN_VERSION||f>Nn.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*f+128)*f+64;if(f>=2){const x=Math.floor(f/7)+2;g-=(25*x-10)*x-55,f>=7&&(g-=36)}return l(208<=g&&g<=29648),g}static getNumDataCodewords(f,g){return Math.floor(Nn.getNumRawDataModules(f)/8)-Nn.ECC_CODEWORDS_PER_BLOCK[g.ordinal][f]*Nn.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let g=[];for(let y=0;y<f-1;y++)g.push(0);g.push(1);let x=1;for(let y=0;y<f;y++){for(let b=0;b<g.length;b++)g[b]=Nn.reedSolomonMultiply(g[b],x),b+1<g.length&&(g[b]^=g[b+1]);x=Nn.reedSolomonMultiply(x,2)}return g}static reedSolomonComputeRemainder(f,g){let x=g.map(y=>0);for(const y of f){const b=y^x.shift();x.push(0),g.forEach((w,C)=>x[C]^=Nn.reedSolomonMultiply(w,b))}return x}static reedSolomonMultiply(f,g){if(f>>>8||g>>>8)throw new RangeError("Byte out of range");let x=0;for(let y=7;y>=0;y--)x=x<<1^(x>>>7)*285,x^=(g>>>y&1)*f;return l(x>>>8==0),x}finderPenaltyCountPatterns(f){const g=f[1];l(g<=this.size*3);const x=g>0&&f[2]==g&&f[3]==g*3&&f[4]==g&&f[5]==g;return(x&&f[0]>=g*4&&f[6]>=g?1:0)+(x&&f[6]>=g*4&&f[0]>=g?1:0)}finderPenaltyTerminateAndCount(f,g,x){return f&&(this.finderPenaltyAddHistory(g,x),g=0),g+=this.size,this.finderPenaltyAddHistory(g,x),this.finderPenaltyCountPatterns(x)}finderPenaltyAddHistory(f,g){g[0]==0&&(f+=this.size),g.pop(),g.unshift(f)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(p,f,g){if(f<0||f>31||p>>>f)throw new RangeError("Value out of range");for(let x=f-1;x>=0;x--)g.push(p>>>x&1)}function i(p,f){return(p>>>f&1)!=0}function l(p){if(!p)throw new Error("Assertion error")}const u=class qr{constructor(f,g,x){if(this.mode=f,this.numChars=g,this.bitData=x,g<0)throw new RangeError("Invalid argument");this.bitData=x.slice()}static makeBytes(f){let g=[];for(const x of f)r(x,8,g);return new qr(qr.Mode.BYTE,f.length,g)}static makeNumeric(f){if(!qr.isNumeric(f))throw new RangeError("String contains non-numeric characters");let g=[];for(let x=0;x<f.length;){const y=Math.min(f.length-x,3);r(parseInt(f.substring(x,x+y),10),y*3+1,g),x+=y}return new qr(qr.Mode.NUMERIC,f.length,g)}static makeAlphanumeric(f){if(!qr.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],x;for(x=0;x+2<=f.length;x+=2){let y=qr.ALPHANUMERIC_CHARSET.indexOf(f.charAt(x))*45;y+=qr.ALPHANUMERIC_CHARSET.indexOf(f.charAt(x+1)),r(y,11,g)}return x<f.length&&r(qr.ALPHANUMERIC_CHARSET.indexOf(f.charAt(x)),6,g),new qr(qr.Mode.ALPHANUMERIC,f.length,g)}static makeSegments(f){return f==""?[]:qr.isNumeric(f)?[qr.makeNumeric(f)]:qr.isAlphanumeric(f)?[qr.makeAlphanumeric(f)]:[qr.makeBytes(qr.toUtf8ByteArray(f))]}static makeEci(f){let g=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)r(f,8,g);else if(f<16384)r(2,2,g),r(f,14,g);else if(f<1e6)r(6,3,g),r(f,21,g);else throw new RangeError("ECI assignment value out of range");return new qr(qr.Mode.ECI,0,g)}static isNumeric(f){return qr.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return qr.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,g){let x=0;for(const y of f){const b=y.mode.numCharCountBits(g);if(y.numChars>=1<<b)return 1/0;x+=4+b+y.bitData.length}return x}static toUtf8ByteArray(f){f=encodeURI(f);let g=[];for(let x=0;x<f.length;x++)f.charAt(x)!="%"?g.push(f.charCodeAt(x)):(g.push(parseInt(f.substring(x+1,x+3),16)),x+=2);return g}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let d=u;t.QrSegment=u})(Gu||(Gu={}));(t=>{(n=>{const r=class{constructor(l,u){this.ordinal=l,this.formatBits=u}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),n.Ecc=r})(t.QrCode||(t.QrCode={}))})(Gu||(Gu={}));(t=>{(n=>{const r=class{constructor(l,u){this.modeBits=l,this.numBitsCharCount=u}numCharCountBits(l){return this.numBitsCharCount[Math.floor((l+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),n.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Gu||(Gu={}));var rh=Gu;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var _J={L:rh.QrCode.Ecc.LOW,M:rh.QrCode.Ecc.MEDIUM,Q:rh.QrCode.Ecc.QUARTILE,H:rh.QrCode.Ecc.HIGH},XM=128,KM="L",QM="#FFFFFF",JM="#000000",ez=!1,tz=1,TJ=4,AJ=0,RJ=.1;function nz(t,n=0){const r=[];return t.forEach(function(i,l){let u=null;i.forEach(function(d,p){if(!d&&u!==null){r.push(`M${u+n} ${l+n}h${p-u}v1H${u+n}z`),u=null;return}if(p===i.length-1){if(!d)return;u===null?r.push(`M${p+n},${l+n} h1v1H${p+n}z`):r.push(`M${u+n},${l+n} h${p+1-u}v1H${u+n}z`);return}d&&u===null&&(u=p)})}),r.join("")}function rz(t,n){return t.slice().map((r,i)=>i<n.y||i>=n.y+n.h?r:r.map((l,u)=>u<n.x||u>=n.x+n.w?l:!1))}function kJ(t,n,r,i){if(i==null)return null;const l=t.length+r*2,u=Math.floor(n*RJ),d=l/n,p=(i.width||u)*d,f=(i.height||u)*d,g=i.x==null?t.length/2-p/2:i.x*d,x=i.y==null?t.length/2-f/2:i.y*d,y=i.opacity==null?1:i.opacity;let b=null;if(i.excavate){let C=Math.floor(g),_=Math.floor(x),A=Math.ceil(p+g-C),D=Math.ceil(f+x-_);b={x:C,y:_,w:A,h:D}}const w=i.crossOrigin;return{x:g,y:x,h:f,w:p,excavation:b,opacity:y,crossOrigin:w}}function DJ(t,n){return n!=null?Math.max(Math.floor(n),0):t?TJ:AJ}function sz({value:t,level:n,minVersion:r,includeMargin:i,marginSize:l,imageSettings:u,size:d,boostLevel:p}){let f=wn.useMemo(()=>{const C=(Array.isArray(t)?t:[t]).reduce((_,A)=>(_.push(...rh.QrSegment.makeSegments(A)),_),[]);return rh.QrCode.encodeSegments(C,_J[n],r,void 0,void 0,p)},[t,n,r,p]);const{cells:g,margin:x,numCells:y,calculatedImageSettings:b}=wn.useMemo(()=>{let w=f.getModules();const C=DJ(i,l),_=w.length+C*2,A=kJ(w,d,C,u);return{cells:w,margin:C,numCells:_,calculatedImageSettings:A}},[f,d,u,i,l]);return{qrcode:f,margin:x,cells:g,numCells:y,calculatedImageSettings:b}}var PJ=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),iz=wn.forwardRef(function(n,r){const i=n,{value:l,size:u=XM,level:d=KM,bgColor:p=QM,fgColor:f=JM,includeMargin:g=ez,minVersion:x=tz,boostLevel:y,marginSize:b,imageSettings:w}=i,_=Gb(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:A}=_,D=Gb(_,["style"]),P=w?.src,M=wn.useRef(null),N=wn.useRef(null),z=wn.useCallback(je=>{M.current=je,typeof r=="function"?r(je):r&&(r.current=je)},[r]),[I,V]=wn.useState(!1),{margin:$,cells:ae,numCells:he,calculatedImageSettings:re}=sz({value:l,level:d,minVersion:x,boostLevel:y,includeMargin:g,marginSize:b,imageSettings:w,size:u});wn.useEffect(()=>{if(M.current!=null){const je=M.current,de=je.getContext("2d");if(!de)return;let G=ae;const U=N.current,W=re!=null&&U!==null&&U.complete&&U.naturalHeight!==0&&U.naturalWidth!==0;W&&re.excavation!=null&&(G=rz(ae,re.excavation));const me=window.devicePixelRatio||1;je.height=je.width=u*me;const F=u/he*me;de.scale(F,F),de.fillStyle=p,de.fillRect(0,0,he,he),de.fillStyle=f,PJ?de.fill(new Path2D(nz(G,$))):ae.forEach(function(fe,te){fe.forEach(function(R,Y){R&&de.fillRect(Y+$,te+$,1,1)})}),re&&(de.globalAlpha=re.opacity),W&&de.drawImage(U,re.x+$,re.y+$,re.w,re.h)}}),wn.useEffect(()=>{V(!1)},[P]);const ce=qb({height:u,width:u},A);let Se=null;return P!=null&&(Se=wn.createElement("img",{src:P,key:P,style:{display:"none"},onLoad:()=>{V(!0)},ref:N,crossOrigin:re?.crossOrigin})),wn.createElement(wn.Fragment,null,wn.createElement("canvas",qb({style:ce,height:u,width:u,ref:z,role:"img"},D)),Se)});iz.displayName="QRCodeCanvas";var MJ=wn.forwardRef(function(n,r){const i=n,{value:l,size:u=XM,level:d=KM,bgColor:p=QM,fgColor:f=JM,includeMargin:g=ez,minVersion:x=tz,boostLevel:y,title:b,marginSize:w,imageSettings:C}=i,_=Gb(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:A,cells:D,numCells:P,calculatedImageSettings:M}=sz({value:l,level:d,minVersion:x,boostLevel:y,includeMargin:g,marginSize:w,imageSettings:C,size:u});let N=D,z=null;C!=null&&M!=null&&(M.excavation!=null&&(N=rz(D,M.excavation)),z=wn.createElement("image",{href:C.src,height:M.h,width:M.w,x:M.x+A,y:M.y+A,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const I=nz(N,A);return wn.createElement("svg",qb({height:u,width:u,viewBox:`0 0 ${P} ${P}`,ref:r,role:"img"},_),!!b&&wn.createElement("title",null,b),wn.createElement("path",{fill:p,d:`M0,0 h${P}v${P}H0z`,shapeRendering:"crispEdges"}),wn.createElement("path",{fill:f,d:I,shapeRendering:"crispEdges"}),z)});MJ.displayName="QRCodeSVG";const pA=window.location.origin,zJ=()=>{const[t,n]=v.useState([]),[r,i]=v.useState(!1),[l,u]=v.useState(""),[d,p]=v.useState(!1),[f,g]=v.useState(null),x=on(),y=v.useRef(null),b=v.useCallback(async A=>{try{i(!0);const D=await yt.get("/vehicles");n(Array.isArray(D)?D:[])}catch(D){D.name!=="AbortError"&&(console.error(D),n([]),x({status:"error",title:"Impossible de charger la liste",description:D.message}))}finally{i(!1)}},[x]);v.useEffect(()=>{const A=new AbortController;return b(A.signal),()=>A.abort()},[b]);const w=t.filter(A=>{if(!l.trim())return!0;const D=l.toLowerCase();return[A.parc,A.modele,A.marque,A.immat].filter(Boolean).some(P=>P.toLowerCase().includes(D))}),C=A=>{g(A),p(!0)},_=()=>{const A=y.current?.querySelector("canvas");if(A){const D=A.toDataURL(),P=document.createElement("a");P.href=D,P.download=`qr-${f?.parc||"vehicle"}.png`,P.click()}};return e.jsxs(oe,{p:6,children:[e.jsxs(sr,{justify:"space-between",align:"center",mb:6,children:[e.jsx(Te,{children:"Vhicules"}),e.jsx(Q,{as:mr,to:"/dashboard/vehicules/ajouter",leftIcon:e.jsx(Bn,{}),colorScheme:"blue",children:"Ajouter un vhicule"})]}),e.jsx(oe,{mb:6,children:e.jsx(ge,{placeholder:"Rechercher par parc, modle, marque ou immatriculation...",value:l,onChange:A=>u(A.target.value),maxW:"400px"})}),r?e.jsx(yn,{py:20,children:e.jsx(pn,{size:"xl"})}):e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:6,children:w.map(A=>e.jsxs(Pe,{shadow:"md",children:[e.jsx(zt,{pb:2,children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:A.parc}),e.jsx(Qe,{colorScheme:A.etat==="disponible"?"green":"orange",children:A.etat})]})}),e.jsx(ke,{pt:0,children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsxs(k,{children:[e.jsx("strong",{children:"Modle:"})," ",A.modele||"Non spcifi"]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Marque:"})," ",A.marque||"Non spcifie"]}),A.immat&&e.jsxs(k,{children:[e.jsx("strong",{children:"Immat:"})," ",A.immat]}),e.jsxs(ee,{spacing:2,pt:4,w:"100%",children:[e.jsx(Q,{as:mr,to:`/dashboard/vehicules/${A.parc}`,leftIcon:e.jsx(Bs,{}),size:"sm",flex:1,children:"Grer"}),e.jsx(Q,{leftIcon:e.jsx(ew,{}),size:"sm",onClick:()=>C(A),children:"QR"})]})]})})]},A.parc))}),w.length===0&&!r&&e.jsx(yn,{py:20,children:e.jsx(k,{color:"gray.500",children:"Aucun vhicule trouv"})}),e.jsxs(Et,{isOpen:d,onClose:()=>p(!1),isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsxs(Tt,{children:["QR Code - ",f?.parc]}),e.jsx($t,{}),e.jsx(_t,{pb:6,children:e.jsxs(J,{spacing:4,children:[e.jsx(oe,{ref:y,children:e.jsx(iz,{value:`${pA}/mobile/v/${f?.parc}`,size:200,level:"M"})}),e.jsx(k,{fontSize:"sm",color:"gray.600",textAlign:"center",children:`${pA}/mobile/v/${f?.parc}`}),e.jsx(Q,{onClick:_,colorScheme:"blue",children:"Tlcharger"})]})})]})]})]})},IJ=(ka||"https://attractive-kindness-rbe-serveurs.up.railway.app").replace(/\/+$/,""),NJ=(localStorage.getItem("rbe_api_prefix")||"api").replace(/^\/+|\/+$/g,""),qg=()=>(localStorage.getItem("rbe_api_vehicles_path")||`${NJ}/vehicles`).replace(/^\/+/,"").replace(/\/+$/,""),LJ=()=>(localStorage.getItem("rbe_api_origin")||IJ).replace(/\/+$/,""),Mo=t=>{const n=String(t||"").replace(/^\/+/,""),r=LJ(),i=`/${n}`,l=r?`${r}/${n}`:null,u=[i];return l&&u.push(l),u},gu=async(t,n)=>{let r=null;for(const i of t)try{const l=await fetch(i,n);if(!l.ok){r=new Error(`HTTP ${l.status}`);continue}if(!(l.headers.get("content-type")||"").toLowerCase().includes("application/json")){r=new Error("non-json");continue}return await l.json()}catch(l){r=l}throw r||new Error("fetch failed")};function OJ(){const{parc:t}=Qx(),[n]=oL(),r=on(),i=Ua(),l=n.get("t")||"",{matricule:u,setMatricule:d,token:p}=es(),[f,g]=v.useState(l||""),[x,y]=v.useState(null),[b,w]=v.useState([]),[C,_]=v.useState([]),[A,D]=v.useState(!0),[P,M]=v.useState(!1),[N,z]=v.useState(!1),[I,V]=v.useState(!1),[$,ae]=v.useState(!1),[he,re]=v.useState(u||""),[ce,Se]=v.useState(!1),[je,de]=v.useState([]),[G,U]=v.useState(!1),[W,me]=v.useState(""),[F,fe]=v.useState([]),[te,R]=v.useState(""),[Y,q]=v.useState(""),[le,We]=v.useState(""),[pe,ye]=v.useState(""),[Ze,ht]=v.useState(""),[rt,vt]=v.useState(""),[Ue,qt]=v.useState(""),[Je,Ge]=v.useState(null),[Ve,se]=v.useState(null),be=`rbe_current_usage_${t}`,[at,St]=v.useState(()=>{const Ne=localStorage.getItem(be);return Ne?JSON.parse(Ne):null}),An=Ne=>{St(Ne),Ne?localStorage.setItem(be,JSON.stringify(Ne)):localStorage.removeItem(be)},qe=()=>new Promise(Ne=>{if(!("geolocation"in navigator))return Ne(null);navigator.geolocation.getCurrentPosition(Mt=>Ne({lat:Mt.coords.latitude,lng:Mt.coords.longitude,accuracy:Mt.coords.accuracy}),()=>Ne(null),{enableHighAccuracy:!0,timeout:8e3,maximumAge:3e4})});v.useEffect(()=>{if(N&&!I){const Ne=new Date;We(Ne.toISOString().slice(0,10)),ye(Ne.toTimeString().slice(0,5)),qe().then(Ge)}if(N&&I){const Ne=new Date;ht(Ne.toISOString().slice(0,10)),vt(Ne.toTimeString().slice(0,5)),qe().then(se)}N||V(!1)},[N,I]);const Me=async()=>{if(p)try{U(!0);const Ne=Mo(`${(localStorage.getItem("rbe_api_prefix")||"api").replace(/^\/+/,"")}/members?limit=500`),Mt=await gu(Ne,{headers:{Authorization:`Bearer ${p}`}});de(Array.isArray(Mt?.members)?Mt.members:[])}catch{de([])}finally{U(!1)}},nt=(Ne=f,Mt=u)=>{const Kt={"Content-Type":"application/json"};return Ne?Kt["x-qr-token"]=Ne:Mt&&(Kt["x-user-matricule"]=Mt),p&&(Kt.Authorization=`Bearer ${p}`),Kt};v.useEffect(()=>{let Ne=!1;return(async()=>{try{D(!0);const Mt=nt(f),Kt=qg(),ln=Mo(`${Kt}/${encodeURIComponent(t)}`),Zt=Mo(`${Kt}/${encodeURIComponent(t)}/reports`),Pn=Mo(`${Kt}/${encodeURIComponent(t)}/usages`),[lt,vn,Sr]=await Promise.all([gu(ln,{headers:Mt}),gu(Zt,{headers:Mt}).catch(()=>[]),gu(Pn,{headers:Mt}).catch(()=>[])]);if(Ne)return;y(lt);const ts=Array.isArray(vn)?vn.map(Zn=>({id:Zn.id,type:Zn.type||"Rapport",date:Zn.createdAt||Zn.date||new Date().toISOString(),note:Zn.description||Zn.note||"",createdBy:Zn.createdBy||Zn.author||""})):[];w(ts),_(Array.isArray(Sr)?Sr:[])}catch(Mt){console.warn("fetch vehicle failed:",Mt),y(null),w([]),_([])}finally{Ne||D(!1)}})(),()=>{Ne=!0}},[t,f]);const wt=async Ne=>{if(Ne?.preventDefault?.(),!he?.trim())return r({status:"warning",title:"Matricule requis"});try{Se(!0),d(he.trim()),r({status:"success",title:"Connect",description:he.trim()}),g(""),setTimeout(()=>{(async()=>{try{D(!0);const Mt=nt("",he.trim()),Kt=qg(),ln=Mo(`${Kt}/${encodeURIComponent(t)}`),Zt=Mo(`${Kt}/${encodeURIComponent(t)}/reports`),Pn=Mo(`${Kt}/${encodeURIComponent(t)}/usages`),[lt,vn,Sr]=await Promise.all([gu(ln,{headers:Mt}),gu(Zt,{headers:Mt}).catch(()=>[]),gu(Pn,{headers:Mt}).catch(()=>[])]);y(lt);const ts=Array.isArray(vn)?vn.map(Zn=>({id:Zn.id,type:Zn.type||"Rapport",date:Zn.createdAt||Zn.date||new Date().toISOString(),note:Zn.description||Zn.note||"",createdBy:Zn.createdBy||Zn.author||""})):[];w(ts),_(Array.isArray(Sr)?Sr:[])}catch{r({status:"error",title:"Accs refus"})}finally{D(!1)}})()},250)}finally{Se(!1)}},Xe=async Ne=>{try{const Mt=qg(),Kt=Mo(`${Mt}/${encodeURIComponent(t)}/reports`),ln=await fetch(Kt[0],{method:"POST",headers:nt(),body:JSON.stringify({description:Ne?.note?`${Ne.type||"vnement"}: ${Ne.note}`:Ne?.type||"vnement"})});if(!ln.ok){const lt=await ln.json().catch(()=>({error:"err"}));throw new Error(lt?.error||ln.statusText||"Erreur")}const Zt=await ln.json(),Pn={id:Zt.id,type:"Rapport",date:Zt.createdAt||new Date().toISOString(),note:Zt.description||"",createdBy:Zt.createdBy||""};return w(lt=>[Pn,...lt]),r({status:"success",title:"vnement ajout"}),Zt}catch(Mt){throw console.error(Mt),r({status:"error",title:"Impossible d'ajouter l'vnement",description:String(Mt.message)}),Mt}},pt=async Ne=>{try{const Mt=qg(),Kt=Mo(`${Mt}/${encodeURIComponent(t)}/usages`),ln=await fetch(Kt[0],{method:"POST",headers:nt(),body:JSON.stringify(Ne)});if(!ln.ok){const Pn=await ln.json().catch(()=>({error:"err"}));throw new Error(Pn?.error||ln.statusText||"Erreur")}const Zt=await ln.json();return _(Pn=>[Zt,...Pn]),Zt}catch(Mt){throw console.error(Mt),r({status:"error",title:"Impossible d'ajouter l'usage",description:String(Mt.message)}),Mt}},ot=async(Ne,Mt)=>{try{const Kt=Mo(`usages/${encodeURIComponent(Ne)}`),ln=await fetch(Kt[0],{method:"PUT",headers:nt(),body:JSON.stringify(Mt)});if(!ln.ok){const Pn=await ln.json().catch(()=>({error:"err"}));throw new Error(Pn?.error||ln.statusText||"Erreur")}const Zt=await ln.json();return _(Pn=>Pn.map(lt=>lt.id===Zt.id?Zt:lt)),Zt}catch(Kt){throw console.error(Kt),r({status:"error",title:"Impossible de mettre  jour l'usage",description:String(Kt.message)}),Kt}};return A?e.jsx(yn,{p:8,children:e.jsx(pn,{size:"lg"})}):e.jsxs(oe,{p:4,maxW:"720px",mx:"auto",children:[x?e.jsxs(oe,{children:[e.jsx(Te,{size:"md",children:x.modele||`Parc ${x.parc}`}),e.jsx(k,{mt:1,opacity:.8,children:x.immat?`${x.immat}  Parc ${x.parc}`:`Parc ${x.parc}`}),e.jsxs(fo,{spacing:4,mt:6,children:[e.jsx(Q,{colorScheme:"red",onClick:()=>M(!0),children:"Signaler une anomalie"}),!at&&e.jsx(Q,{colorScheme:"orange",onClick:()=>{V(!1),z(!0)},children:"Dmarrer un pointage"}),at&&e.jsx(Q,{colorScheme:"green",onClick:()=>{V(!0),z(!0)},children:"Terminer le pointage"}),e.jsx(Q,{colorScheme:"blue",onClick:()=>ae(!0),children:"Ajouter un vnement au vhicule"})]}),e.jsxs(oe,{mt:6,children:[e.jsx(Te,{size:"sm",mb:2,children:"Derniers vnements"}),e.jsxs(J,{spacing:2,align:"stretch",children:[b.length===0&&e.jsx(k,{opacity:.7,children:"Aucun vnement"}),b.map(Ne=>e.jsxs(oe,{p:3,border:"1px solid #eee",borderRadius:"md",children:[e.jsxs(k,{fontSize:"sm",children:[e.jsx("b",{children:Ne.type}),"  ",new Date(Ne.date).toLocaleString()]}),Ne.note&&e.jsx(k,{mt:1,fontSize:"sm",children:Ne.note}),e.jsxs(k,{mt:1,fontSize:"xs",opacity:.7,children:["Ajout par ",Ne.createdBy||""]})]},Ne.id))]})]}),e.jsxs(oe,{mt:6,children:[e.jsx(Te,{size:"sm",mb:2,children:"Derniers passages"}),e.jsxs(J,{spacing:2,align:"stretch",children:[C.length===0&&e.jsx(k,{opacity:.7,children:"Aucun passage"}),C.map(Ne=>e.jsxs(oe,{p:3,border:"1px solid #eee",borderRadius:"md",children:[e.jsxs(k,{fontSize:"sm",children:[Ne.conducteur||"","  ",Ne.km?`${Ne.km} km`:"","  ",Ne.durationMin?`${Ne.durationMin} min`:""]}),Ne.note&&e.jsx(k,{mt:1,fontSize:"sm",children:Ne.note}),e.jsxs(k,{mt:1,fontSize:"xs",opacity:.7,children:["Ajout par ",Ne.createdBy||""]})]},Ne.id))]})]})]}):e.jsxs(oe,{textAlign:"center",py:8,children:[e.jsx(Te,{size:"md",children:"Accs restreint"}),e.jsx(k,{mt:2,opacity:.8,children:"Ce carnet est accessible uniquement via le QR code du vhicule ou aprs authentification."}),e.jsx(oe,{mt:6,as:"form",onSubmit:wt,maxW:"360px",mx:"auto",children:e.jsxs(J,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Matricule"}),e.jsx(ge,{value:he,onChange:Ne=>re(Ne.target.value),placeholder:"ex: w.belaidi"})]}),e.jsxs(ee,{children:[e.jsx(Q,{colorScheme:"blue",onClick:wt,isLoading:ce,children:"Se connecter"}),e.jsx(Q,{variant:"ghost",onClick:()=>i(-1),children:"Retour"})]})]})}),e.jsx(k,{mt:4,fontSize:"sm",opacity:.8,children:"Astuce : scannez le QR sur le vhicule pour accder sans vous connecter."})]}),e.jsxs(Et,{isOpen:P,onClose:()=>M(!1),isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Signaler une anomalie"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsxs(k,{fontSize:"sm",opacity:.8,children:["Vhicule : ",e.jsx("b",{children:x?.parc})," ",x?.immat?` ${x.immat}`:""]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Type d'anomalie"}),e.jsx(ge,{id:"anom-type",placeholder:"ex: Frein / Porte / Moteur"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{id:"anom-note",placeholder:"Dcris l'anomalie..."})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:()=>M(!1),children:"Annuler"}),e.jsx(Q,{colorScheme:"red",onClick:async()=>{const Ne=document.getElementById("anom-type")?.value||"Anomalie",Mt=document.getElementById("anom-note")?.value||"";try{await Xe({type:`Anomalie: ${Ne}`,note:Mt}),M(!1)}catch{}},children:"Signaler"})]})]})]}),e.jsxs(Et,{isOpen:N,onClose:()=>z(!1),isCentered:!0,onOverlayClick:()=>{},children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:I?"Terminer le pointage":"Dmarrer un pointage"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsxs(k,{fontSize:"sm",opacity:.8,children:["Vhicule : ",e.jsx("b",{children:x?.parc})," ",x?.immat?` ${x.immat}`:""]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Conducteur"}),e.jsx(ge,{id:"pass-conducteur",placeholder:"Nom ou matricule"})]}),!I&&e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Date d'arrive"}),e.jsx(ge,{type:"date",value:le,onChange:Ne=>We(Ne.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Heure d'arrive"}),e.jsx(ge,{type:"time",value:pe,onChange:Ne=>ye(Ne.target.value)})]})]}),Je&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[" Arrive GPS: ",Je.lat.toFixed(5),",",Je.lng.toFixed(5)," (",Math.round(Je.accuracy),"m)"]})]}),I&&e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Date de sortie"}),e.jsx(ge,{type:"date",value:Ze,onChange:Ne=>ht(Ne.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Heure de sortie"}),e.jsx(ge,{type:"time",value:rt,onChange:Ne=>vt(Ne.target.value)})]})]}),Ve&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[" Sortie GPS: ",Ve.lat.toFixed(5),",",Ve.lng.toFixed(5)," (",Math.round(Ve.accuracy),"m)"]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Membres prsents"}),e.jsx(ge,{placeholder:"Rechercher un adhrent (nom, prnom, n)",value:W,onChange:Ne=>me(Ne.target.value),onFocus:()=>{je.length===0&&Me()}}),e.jsxs(oe,{mt:2,maxH:"180px",overflowY:"auto",border:"1px solid #eee",borderRadius:"md",p:2,children:[G&&e.jsx(yn,{py:3,children:e.jsx(pn,{size:"sm"})}),!G&&je.filter(Ne=>{if(!W.trim())return!0;const Mt=W.toLowerCase();return[Ne.firstName,Ne.lastName,Ne.memberNumber,Ne.email].filter(Boolean).some(Kt=>String(Kt).toLowerCase().includes(Mt))}).slice(0,50).map(Ne=>{const Mt=Ne.id,Kt=F.includes(Mt),ln=`${Ne.lastName?.toUpperCase()||""} ${Ne.firstName||""}${Ne.memberNumber?`  ${Ne.memberNumber}`:""}`.trim();return e.jsxs(ee,{py:1,spacing:3,children:[e.jsx("input",{type:"checkbox",checked:Kt,onChange:Zt=>{fe(Pn=>Zt.target.checked?[...Pn,Mt]:Pn.filter(lt=>lt!==Mt))}}),e.jsx(k,{fontSize:"sm",children:ln})]},Mt)}),!G&&je.length===0&&e.jsx(k,{fontSize:"sm",opacity:.7,children:"Aucun adhrent charg. Connectez-vous pour voir la liste."})]})]}),e.jsxs(ee,{children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Invit - Prnom"}),e.jsx(ge,{value:te,onChange:Ne=>R(Ne.target.value),placeholder:"Prnom invit"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Invit - Nom"}),e.jsx(ge,{value:Y,onChange:Ne=>q(Ne.target.value),placeholder:"Nom invit"})]})]}),I&&e.jsxs(X,{children:[e.jsx(Z,{children:"Actions ralises"}),e.jsx(Xt,{value:Ue,onChange:Ne=>qt(Ne.target.value),placeholder:"Dtaillez les actions ralises pendant le passage",rows:4})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:()=>z(!1),children:"Annuler"}),e.jsx(Q,{colorScheme:I?"green":"orange",onClick:async()=>{const Ne=document.getElementById("pass-conducteur")?.value||"",Kt=je.filter(Sr=>F.includes(Sr.id)).map(Sr=>`${Sr.firstName||""} ${Sr.lastName||""}`.trim()).filter(Boolean),ln=te||Y?`Invit: ${[te,Y].filter(Boolean).join(" ")}`:"",Zt=[Ne?`Conducteur: ${Ne}`:"",...Kt,ln].filter(Boolean).join("; "),Pn=(Sr,ts)=>{if(!Sr&&!ts)return null;const Zn=Sr||new Date().toISOString().split("T")[0],Oi=ts||new Date().toTimeString().slice(0,5),[bi,el,ns]=Zn.split("-").map(Number),[Bi,$i]=Oi.split(":").map(Number);return new Date(bi,el-1,ns,Bi,$i,0).toISOString()},lt=Pn(le,pe),vn=Ze||rt?Pn(Ze,rt):null;try{if(I){if(!at)throw new Error("Aucun pointage en cours");const Sr=Ve?`
Sortie GPS: ${Ve.lat?.toFixed(5)},${Ve.lng?.toFixed(5)} (${Math.round(Ve.accuracy||0)}m)`:"",ts=Ue?`
Actions:
${Ue}`:"";await ot(at,{endedAt:vn||new Date().toISOString(),conducteur:Ne||null,participants:Zt||null,note:`${ts}${Sr}`.trim()}),An(null),r({status:"success",title:"Pointage termin"})}else{const Sr=Je?`
Arrive GPS: ${Je.lat?.toFixed(5)},${Je.lng?.toFixed(5)} (${Math.round(Je.accuracy||0)}m)`:"",ts=await pt({startedAt:lt||new Date().toISOString(),conducteur:Ne||null,participants:Zt||null,note:Sr||""});An(ts?.id||null),r({status:"success",title:"Pointage dmarr"})}z(!1),fe([]),R(""),q(""),me(""),We(""),ye(""),ht(""),vt(""),qt(""),Ge(null),se(null)}catch{}},children:"Signaler"})]})]})]}),e.jsxs(Et,{isOpen:$,onClose:()=>ae(!1),isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Ajouter un vnement"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsxs(k,{fontSize:"sm",opacity:.8,children:["Vhicule : ",e.jsx("b",{children:x?.parc})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Type"}),e.jsx(ge,{id:"evt-type",placeholder:"ex: Rvision"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Note"}),e.jsx(Xt,{id:"evt-note",placeholder:"Dtails..."})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:()=>ae(!1),children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:async()=>{const Ne=document.getElementById("evt-type")?.value||"vnement",Mt=document.getElementById("evt-note")?.value||"";try{await Xe({type:Ne,note:Mt}),ae(!1)}catch{}},children:"Ajouter"})]})]})]})]})}function az({value:t=[],onChange:n,uploadEndpoint:r,deleteEndpoint:i,authHeader:l}){const u=on(),[d,p]=v.useState(!1),f=(b,w)=>{const C=[...t],_=b+w;_<0||_>=C.length||([C[b],C[_]]=[C[_],C[b]],n(C))},g=async b=>{if(!i){n(t.filter(w=>w!==b));return}try{const w=await fetch(i,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:l},body:JSON.stringify({image:b})});if(!w.ok)throw new Error;const C=await w.json();n(C.gallery||[])}catch{n(t.filter(w=>w!==b))}},x=async b=>{if(!b?.length)return;p(!0);const w=new FormData;[...b].forEach(C=>w.append("images",C)),console.log(" Upload debug:",{endpoint:r,filesCount:b.length,hasAuth:!!l});try{const C=await fetch(r,{method:"POST",headers:{Authorization:l},body:w});if(console.log(" Upload response:",{status:C.status,statusText:C.statusText,headers:Object.fromEntries(C.headers)}),!C.ok){const A=await C.text().catch(()=>"");throw console.error(" Upload failed:",C.status,A),u({status:"error",title:"chec upload",description:`Erreur ${C.status}: ${A||C.statusText}`}),new Error(`HTTP ${C.status}: ${A}`)}const _=await C.json();n(_.gallery||[]),u({status:"success",title:"Images ajoutes"})}catch(C){console.error("Upload error",C),u({status:"error",title:"chec upload",description:C.message||"Erreur rseau"})}finally{p(!1)}},y=b=>!b||b.startsWith("http://")||b.startsWith("https://")||b.startsWith("data:")||b.startsWith("blob:")?b:"https://attractive-kindness-rbe-serveurs.up.railway.app"+b;return e.jsxs(oe,{children:[e.jsx(ge,{type:"file",multiple:!0,accept:"image/*",onChange:b=>x(b.target.files),isDisabled:d,mb:3}),t.length===0&&e.jsx(k,{fontSize:"sm",color:"gray.500",mb:2,children:"Aucune image dans la galerie."}),e.jsx(mt,{columns:{base:2,md:4},spacing:3,children:t.map((b,w)=>e.jsxs(oe,{border:"1px solid",borderColor:"gray.200",borderRadius:"md",p:1,children:[e.jsx(Li,{src:y(b),w:"100%",h:"110px",objectFit:"cover",borderRadius:"sm"}),e.jsxs(ee,{mt:1,justify:"space-between",children:[e.jsxs(ee,{children:[e.jsx(xt,{"aria-label":"Monter",icon:e.jsx(J1,{}),size:"xs",onClick:()=>f(w,-1),isDisabled:w===0}),e.jsx(xt,{"aria-label":"Descendre",icon:e.jsx(Q1,{}),size:"xs",onClick:()=>f(w,1),isDisabled:w===t.length-1})]}),e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(Qn,{}),size:"xs",colorScheme:"red",onClick:()=>g(b)})]})]},b+w))})]})}function oz({value:t=[],onChange:n}){const r=(u,d,p)=>{const f=[...t];f[u]={...f[u],[d]:p},n(f)},i=()=>n([...t||[],{label:"",value:""}]),l=u=>{const d=[...t];d.splice(u,1),n(d)};return e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Z,{mb:0,children:"Caractristiques"}),e.jsx(Q,{size:"xs",leftIcon:e.jsx(Bn,{}),onClick:i,children:"Ajouter"})]}),(t||[]).map((u,d)=>e.jsxs(ee,{align:"flex-start",children:[e.jsx(ge,{placeholder:"Label",value:u.label,onChange:p=>r(d,"label",p.target.value)}),e.jsx(ge,{placeholder:"Valeur",value:u.value,onChange:p=>r(d,"value",p.target.value)}),e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(jJ,{}),size:"sm",onClick:()=>l(d)})]},d))]})}const mA=[{value:"disponible",label:" Disponible",color:"green"},{value:"preserv",label:" Prserv",color:"blue"},{value:"en_restauration",label:" En restauration",color:"orange"},{value:"en_achat",label:" En achat",color:"yellow"},{value:"en_panne",label:" En panne",color:"red"},{value:"maintenance",label:" Maintenance",color:"orange"},{value:"a_venir",label:"  venir",color:"gray"}],BJ=[{value:"diesel",label:" Diesel"},{value:"essence",label:" Essence"},{value:"electrique",label:" lectrique"},{value:"gpl",label:"GPL"},{value:"hybride",label:"Hybride"},{value:"autre",label:"Autre"}];function $J({data:t={},onUpdate:n=()=>{},readOnly:r=!1}){const i=(l,u)=>{n(l,u)};return e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:4,fontSize:"lg",children:" Informations techniques"}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"600",children:"tat du vhicule"}),e.jsx(ut,{value:t.etat||"disponible",onChange:l=>i("etat",l.target.value),isDisabled:r,placeholder:"Slectionner l'tat",children:mA.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsxs(k,{fontSize:"xs",color:"gray.500",mt:1,children:["Statut du vhicule: ",t.etat?mA.find(l=>l.value===t.etat)?.label:"Non dfini"]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"600",children:"Type d'nergie"}),e.jsx(ut,{value:t.energie||"",onChange:l=>i("energie",l.target.value),isDisabled:r,placeholder:"Slectionner l'nergie",children:BJ.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Carburant/nergie du vhicule"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"600",children:"Immatriculation"}),e.jsx(ge,{type:"text",placeholder:"ex: FG-920-RE",value:t.immat||"",onChange:l=>i("immat",l.target.value),isReadOnly:r}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Numro de plaque d'immatriculation"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"600",children:"Mise en circulation"}),e.jsx(ge,{type:"date",value:t.miseEnCirculation||"",onChange:l=>i("miseEnCirculation",l.target.value),isReadOnly:r}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Date de mise en service"})]})]})]}),e.jsx(oe,{children:e.jsxs(k,{fontSize:"xs",color:"gray.600",p:3,bg:"blue.50",borderRadius:"md",children:[" ",e.jsx("strong",{children:"Important:"})," Toutes les informations techniques peuvent tre modifies  tout moment. Ces donnes ne sont pas geles et restent flexibles selon les besoins de gestion du parc."]})})]})}const FJ="https://attractive-kindness-rbe-serveurs.up.railway.app";function VJ(){const t=Ua(),n=on(),[r,i]=v.useState({parc:"",modele:"",marque:"",subtitle:"",etat:"disponible",immat:"",energie:"",miseEnCirculation:"",description:"",history:"",caracteristiques:[],gallery:[],isPublic:!1}),[l,u]=v.useState(!1),d=(f,g)=>i(x=>({...x,[f]:g})),p=async()=>{if(!r.parc.trim()){n({status:"error",title:"Parc requis"});return}u(!0);try{const f=await fetch(`${FJ}/vehicles`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({parc:r.parc.trim(),modele:r.modele,marque:r.marque,subtitle:r.subtitle,etat:r.etat,immat:r.immat,energie:r.energie,miseEnCirculation:r.miseEnCirculation,description:r.description,history:r.history,caracteristiques:r.caracteristiques,gallery:r.gallery,isPublic:r.isPublic})});if(!f.ok){const x=await f.json();throw new Error(x.error||"Erreur cration")}const g=await f.json();n({status:"success",title:"Vhicule cr !",description:`Le vhicule ${r.parc} a t cr avec succs`}),t(`/dashboard/vehicules/${g.parc}`)}catch(f){console.error(" Erreur cration:",f),n({status:"error",title:"Erreur sauvegarde",description:f.message})}finally{u(!1)}};return e.jsxs(oe,{p:8,children:[e.jsxs(ee,{mb:6,children:[e.jsx(Q,{as:"a",href:"/dashboard/vehicules",leftIcon:e.jsx(OM,{}),variant:"outline",children:"Retour"}),e.jsx(Te,{children:" Crer un vhicule"})]}),e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:" Identit du vhicule"}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Numro de parc"}),e.jsx(ge,{placeholder:"ex: 920",value:r.parc,onChange:f=>d("parc",f.target.value),fontWeight:"bold"}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:"Identifiant unique du vhicule"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Marque"}),e.jsx(ge,{placeholder:"ex: Mercedes-Benz",value:r.marque,onChange:f=>d("marque",f.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Modle"}),e.jsx(ge,{placeholder:"ex: Citaro",value:r.modele,onChange:f=>d("modele",f.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Sous-titre"}),e.jsx(ge,{placeholder:"ex: Un grand classique",value:r.subtitle,onChange:f=>d("subtitle",f.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Immatriculation"}),e.jsx(ge,{placeholder:"ex: FG-920-RE",value:r.immat,onChange:f=>d("immat",f.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"tat"}),e.jsx(ge,{placeholder:"ex: Disponible, Prserv, En restauration...",value:r.etat,onChange:f=>d("etat",f.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"nergie"}),e.jsx(ge,{placeholder:"ex: Diesel",value:r.energie,onChange:f=>d("energie",f.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Mise en circulation"}),e.jsx(ge,{type:"date",value:r.miseEnCirculation,onChange:f=>d("miseEnCirculation",f.target.value)})]})]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:" Descriptions"}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{rows:4,placeholder:"Description gnrale du vhicule...",value:r.description,onChange:f=>d("description",f.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Historique"}),e.jsx(Xt,{rows:5,placeholder:"Historique, anecdotes, restaurations...",value:r.history,onChange:f=>d("history",f.target.value)})]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:" Caractristiques techniques"}),e.jsx($J,{data:r,onUpdate:d})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:" Caractristiques additionnelles"}),e.jsx(oz,{value:r.caracteristiques,onChange:f=>d("caracteristiques",f)})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:" Galerie photos"}),e.jsx(az,{value:r.gallery,onChange:f=>d("gallery",f),parc:r.parc||"nouveau"})]})})}),e.jsx(Pe,{bg:"blue.50",children:e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:" Publication"}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:0,flex:1,children:"Afficher sur le site public"}),e.jsx(Jn,{isChecked:r.isPublic,onChange:f=>d("isPublic",f.target.checked),size:"lg",colorScheme:"green"})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:r.isPublic?" Ce vhicule sera visible sur le site public":" Ce vhicule n'est visible que par les administrateurs"})]})})}),e.jsx(xn,{}),e.jsxs(ee,{spacing:4,justify:"flex-end",children:[e.jsx(Q,{variant:"outline",onClick:()=>t("/dashboard/vehicules"),children:"Annuler"}),e.jsx(Q,{colorScheme:"green",leftIcon:e.jsx(Il,{}),isLoading:l,loadingText:"Cration...",onClick:p,size:"lg",children:"Crer le vhicule"})]})]})]})}function UJ({parc:t,marque:n,modele:r,onSuccess:i}){const{isOpen:l,onOpen:u,onClose:d}=It(),[p,f]=v.useState(!1),[g,x]=v.useState(""),y=on(),b=Ua(),w="https://attractive-kindness-rbe-serveurs.up.railway.app",C=`DELETE ${t}`,_=async()=>{if(g!==C){y({status:"error",title:"Confirmation incorrecte",description:`Veuillez taper exactement: ${C}`});return}f(!0);try{const A=await fetch(`${w}/vehicles/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!A.ok){const D=await A.json();throw new Error(D.error||"Erreur lors de la suppression")}y({status:"success",title:"Vhicule supprim",description:`Le vhicule ${t} a t supprim avec succs`,duration:3e3}),d(),x(""),setTimeout(()=>{i?i():b("/dashboard/vehicules")},500)}catch(A){console.error("Erreur suppression:",A),y({status:"error",title:"Erreur suppression",description:A.message})}finally{f(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{leftIcon:e.jsx(Qn,{}),colorScheme:"red",variant:"outline",onClick:u,size:"sm",children:"Supprimer ce vhicule"}),e.jsxs(Et,{isOpen:l,onClose:d,isCentered:!0,size:"md",children:[e.jsx(At,{backdropFilter:"blur(5px)"}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:e.jsxs(ee,{spacing:2,color:"red.600",children:[e.jsx(th,{size:24}),e.jsx(k,{children:"Supprimer le vhicule?"})]})}),e.jsx($t,{isDisabled:p}),e.jsx(_t,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(oe,{bg:"red.50",p:3,borderRadius:"md",borderLeft:"4px",borderColor:"red.500",children:[e.jsx(k,{fontWeight:"600",color:"red.700",mb:2,children:" Action irrversible"}),e.jsxs(k,{fontSize:"sm",color:"red.600",children:["Cette action ne peut pas tre annule. Le vhicule ",t," (",n," ",r,") et toutes ses donnes seront supprims dfinitivement."]})]}),e.jsxs(oe,{bg:"gray.50",p:3,borderRadius:"md",children:[e.jsx(k,{fontWeight:"600",fontSize:"sm",mb:2,children:"Vhicule  supprimer:"}),e.jsxs(J,{align:"stretch",spacing:1,fontSize:"sm",children:[e.jsxs(k,{children:[e.jsx("strong",{children:"Parc:"})," ",t]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Marque:"})," ",n||"Non dfini"]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Modle:"})," ",r||"Non dfini"]})]})]}),e.jsxs(oe,{children:[e.jsxs(k,{fontWeight:"600",fontSize:"sm",mb:2,children:["Pour confirmer, tapez: ",e.jsx("code",{style:{background:"#f0f0f0",padding:"2px 6px",borderRadius:"3px",fontWeight:"bold"},children:C})]}),e.jsx("input",{type:"text",placeholder:C,value:g,onChange:A=>x(A.target.value),style:{width:"100%",padding:"8px 12px",border:"2px solid #e2e8f0",borderRadius:"4px",fontSize:"14px",fontFamily:"monospace",boxSizing:"border-box"},disabled:p,autoFocus:!0})]})]})}),e.jsx(Vt,{children:e.jsxs(ee,{spacing:3,children:[e.jsx(Q,{variant:"outline",onClick:d,isDisabled:p,children:"Annuler"}),e.jsx(Q,{colorScheme:"red",onClick:_,isLoading:p,loadingText:"Suppression...",isDisabled:g!==C,children:"Supprimer dfinitivement"})]})})]})]})]})}const HJ=window.location.origin;function WJ({etat:t}){const n={disponible:"green",en_panne:"red",maintenance:"orange",Service:"green",Prserv:"blue","A VENIR":"gray",Restauration:"orange"};return e.jsx(Qe,{colorScheme:n[t]||"purple",children:t})}function qJ({vehicle:t,parc:n,onChange:r,authHeader:i}){const{isOpen:l,onOpen:u,onClose:d}=It(),p=v.useRef(),[f,g]=v.useState(!1),[x,y]=v.useState(null),[b,w]=v.useState(!1),C=on(),_=async N=>{if(!N)return;g(!0);const z=new FormData;z.append("image",N);try{const I=await fetch(`https://attractive-kindness-rbe-serveurs.up.railway.app/vehicles/${n}/background`,{method:"POST",headers:{Authorization:i},body:z});if(!I.ok)throw new Error("Upload failed");const V=await I.json();r({backgroundImage:V.backgroundImage}),C({status:"success",title:"Image de fond mise  jour"})}catch{C({status:"error",title:"Erreur upload image de fond"})}finally{g(!1)}},A=async()=>{try{await yt.put(`/vehicles/${n}`,{backgroundImage:null,backgroundPosition:null}),r({backgroundImage:null,backgroundPosition:null}),C({status:"success",title:"Image de fond supprime"})}catch{C({status:"error",title:"Erreur suppression image de fond"})}},D=async N=>{const z=N.target.getBoundingClientRect(),I=(N.clientX-z.left)/z.width*100,V=(N.clientY-z.top)/z.height*100,$=`${I.toFixed(1)}% ${V.toFixed(1)}%`;y({x:I,y:V});try{await yt.put(`/vehicles/${n}`,{backgroundPosition:$}),r({backgroundPosition:$}),C({status:"success",title:"Position focale sauvegarde",description:$})}catch{C({status:"error",title:"Erreur sauvegarde position"})}},P=t.backgroundImage??null,M=P&&t.backgroundPosition||"center";return e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",cursor:"pointer",onClick:()=>w(!b),children:[e.jsx(Te,{size:"md",children:" Image de fond Hero"}),e.jsxs(ee,{spacing:2,children:[P&&b&&e.jsx(Q,{leftIcon:e.jsx(Qn,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:N=>{N.stopPropagation(),A()},children:"Supprimer"}),e.jsx(xt,{icon:b?e.jsx(J1,{}):e.jsx(Q1,{}),size:"sm",variant:"ghost","aria-label":b?"Replier":"Dplier"})]})]}),e.jsx(v1,{in:b,animateOpacity:!0,children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Gestion de l'image de fond plein cran pour la page publique"}),e.jsxs(ee,{children:[e.jsx(Q,{leftIcon:e.jsx(WM,{}),size:"sm",onClick:N=>{N.stopPropagation(),p.current?.click()},isLoading:f,colorScheme:"blue",children:"Changer le fond"}),P&&e.jsx(Q,{leftIcon:e.jsx(yJ,{}),size:"sm",colorScheme:"orange",onClick:N=>{N.stopPropagation(),u()},children:"Position focale"})]})]}),e.jsx(ge,{ref:p,type:"file",accept:"image/*",onChange:N=>_(N.target.files[0]),display:"none"}),P&&e.jsxs(oe,{borderRadius:"md",overflow:"hidden",bg:"gray.100",border:"1px solid",borderColor:"gray.200",children:[e.jsx(Li,{src:P,alt:"Aperu image de fond",w:"100%",h:"200px",objectFit:"cover",objectPosition:M}),e.jsxs(k,{fontSize:"sm",color:"gray.600",p:2,bg:"gray.50",children:[" Position focale : ",M]})]}),!P&&e.jsxs(oe,{borderRadius:"md",border:"2px dashed",borderColor:"gray.300",p:8,textAlign:"center",bg:"gray.50",children:[e.jsx(k,{color:"gray.500",mb:2,children:"Aucune image de fond dfinie"}),e.jsx(k,{fontSize:"sm",color:"gray.400",children:"La premire image de la galerie sera utilise par dfaut"})]})]})}),e.jsxs(Et,{isOpen:l,onClose:d,size:"4xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Ajuster la position focale"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsx(k,{color:"gray.600",children:"Cliquez sur l'image pour dfinir le point focal qui sera visible sur la page publique"}),P&&e.jsxs(oe,{position:"relative",borderRadius:"md",overflow:"hidden",children:[e.jsx(Li,{src:P,alt:"Rglage position focale",w:"100%",h:"400px",objectFit:"cover",cursor:"crosshair",onClick:D}),x&&e.jsx(oe,{position:"absolute",left:`${x.x}%`,top:`${x.y}%`,transform:"translate(-50%, -50%)",w:"20px",h:"20px",borderRadius:"50%",bg:"red.500",border:"2px solid white",boxShadow:"0 0 0 2px red.500",zIndex:1})]}),e.jsxs(k,{fontSize:"sm",color:"gray.500",mb:4,children:[" Position actuelle : ",M]})]})})]})]})]})}function GJ(){const{parc:t}=Qx(),n=Ua(),r=on(),[i,l]=v.useState(!0),[u,d]=v.useState(!1),[p,f]=v.useState(null),[g,x]=v.useState({}),[y,b]=v.useState([]),w={marque:"Mercedes-Benz",modele:"Citaro ",subtitle:"Citaro 1 |  II |  | ",etat:"Prserv",type:"Bus",immat:"FG-920-RE",energie:"Diesel",miseEnCirculation:"2001-07-01",numerosFlotte:"592 / 720 / X / 920",constructeur:"Mercedes-Benz",longueur:"11,95 m",placesAssises:"32",placesDebout:"64",ufr:"1",statut:"Prserv",preservePar:"Association RtroBus Essonne",normeEuro:"Euro II",moteur:"Mercedes-Benz OM906hLA - 279 ch",boiteVitesses:"Automatique ZF5HP-502C",nombrePortes:"2",livree:"Grise",girouette:"Duhamel LED Oranges + Pastilles Vertes",climatisation:"Complte",description:"Ce vhicule est un exemple emblmatique de la gamme Citaro de premire gnration. Mis en service commercial en juillet 2001, il reprsente l'volution technologique des transports urbains du dbut des annes 2000. quip d'une climatisation complte et accessible aux personnes  mobilit rduite.",history:"Le Mercedes-Benz Citaro est un autobus urbain produit par Daimler AG depuis 1997. Ce modle a rvolutionn les transports publics europens avec son design moderne et ses innovations techniques. Notre exemplaire FG-920-RE a t command par Cars Bridet  Wissous pour le rseau du Palladin et mis en service en juillet 2001. Au cours de sa carrire, il a port successivement les numros 592, 720, X, puis 920. Il a assur la desserte Le Palladin jusqu'en aot 2014. Aprs plusieurs annes de service fidle, il est pass brivement par Brtigny en 2018, puis a rejoint Transdev STRAV  Limeil-Brvannes, avant d'tre exploit par Cars Sur. En mai 2025, ce vhicule historique a trouv sa place au sein de la collection de l'association RtroBus Essonne, o il tmoigne de l'volution du transport public francilien au dbut du XXIe sicle.",caracteristiques:[{label:"Numros de flotte",value:"592 / 720 / X / 920"},{label:"Constructeur",value:"Mercedes-Benz"},{label:"Modle",value:"Citaro "},{label:"Immatriculation",value:"FG-920-RE"},{label:"Mise en circulation",value:"juillet 2001"},{label:"Longueur",value:"11,95 m"},{label:"Places assises",value:"32"},{label:"Places debout",value:"64"},{label:"UFR",value:"1"},{label:"Statut",value:"Prserv"},{label:"Prserv par",value:"Association RtroBus Essonne"},{label:"nergie",value:"Diesel"},{label:"Norme Euro",value:"Euro II"},{label:"Moteur",value:"Mercedes-Benz OM906hLA - 279 ch"},{label:"Bote de vitesses",value:"Automatique ZF5HP-502C"},{label:"Nombre de portes",value:"2"},{label:"Livre",value:"Grise"},{label:"Girouette",value:"Duhamel LED Oranges + Pastilles Vertes"},{label:"Climatisation",value:"Complte"}]},C=v.useCallback(async()=>{if(t){l(!0);try{const M=await yt.get(`/vehicles/${t}`);f(M);try{const z=await yt.get(`/vehicles/${t}/usages`);b(Array.isArray(z)?z:[])}catch{b([])}const N={...w,...M,caracteristiques:M.caracteristiques&&M.caracteristiques.length>0?M.caracteristiques:w.caracteristiques,description:M.description||w.description,history:M.history||w.history};x(N)}catch(M){r({status:"error",title:M.message||"Erreur chargement"}),n("/dashboard/vehicules")}finally{l(!1)}}},[t,r,n]);v.useEffect(()=>{C()},[C]);const _=v.useCallback(()=>{const M=[{label:"Numros de flotte",value:g.numerosFlotte||""},{label:"Constructeur",value:g.constructeur||""},{label:"Modle",value:g.modele||""},{label:"Immatriculation",value:g.immat||""},{label:"Mise en circulation",value:g.miseEnCirculation?"juillet 2001":""},{label:"Longueur",value:g.longueur||""},{label:"Places assises",value:g.placesAssises||""},{label:"Places debout",value:g.placesDebout||""},{label:"UFR",value:g.ufr||""},{label:"Statut",value:g.statut||""},{label:"Prserv par",value:g.preservePar||""},{label:"nergie",value:g.energie||""},{label:"Norme Euro",value:g.normeEuro||""},{label:"Moteur",value:g.moteur||""},{label:"Bote de vitesses",value:g.boiteVitesses||""},{label:"Nombre de portes",value:g.nombrePortes||""},{label:"Livre",value:g.livree||""},{label:"Girouette",value:g.girouette||""},{label:"Climatisation",value:g.climatisation||""}].filter(N=>N.value);x(N=>({...N,caracteristiques:M}))},[g.numerosFlotte,g.constructeur,g.modele,g.immat,g.miseEnCirculation,g.longueur,g.placesAssises,g.placesDebout,g.ufr,g.statut,g.preservePar,g.energie,g.normeEuro,g.moteur,g.boiteVitesses,g.nombrePortes,g.livree,g.girouette,g.climatisation]);v.useEffect(()=>{_()},[_]);const A=async()=>{try{d(!0);const M=g.statut||g.etat;await yt.put(`/vehicles/${t}`,{etat:M,marque:g.marque,modele:g.modele,type:g.type,immat:g.immat,energie:g.energie,miseEnCirculation:g.miseEnCirculation,subtitle:g.subtitle,description:g.description,history:g.history,caracteristiques:g.caracteristiques,gallery:g.gallery,backgroundImage:g.backgroundImage,backgroundPosition:g.backgroundPosition,isPublic:g.isPublic!==void 0?g.isPublic:p?.isPublic||!1,numerosFlotte:g.numerosFlotte,constructeur:g.constructeur,longueur:g.longueur,placesAssises:g.placesAssises,placesDebout:g.placesDebout,ufr:g.ufr,statut:g.statut,preservePar:g.preservePar,normeEuro:g.normeEuro,moteur:g.moteur,boiteVitesses:g.boiteVitesses,nombrePortes:g.nombrePortes,livree:g.livree,girouette:g.girouette,climatisation:g.climatisation}),r({status:"success",title:" Sauvegard avec succs",description:"Visible sur la page publique"}),C()}catch{r({status:"error",title:" Erreur sauvegarde"})}finally{d(!1)}},D=M=>{f(N=>({...N,...M})),x(N=>({...N,...M}))},P=()=>{x(M=>({...M,...w,parc:M.parc,id:M.id,createdAt:M.createdAt,updatedAt:M.updatedAt,gallery:M.gallery,backgroundImage:M.backgroundImage,backgroundPosition:M.backgroundPosition})),r({status:"info",title:" Donnes par dfaut restaures",description:"N'oubliez pas de sauvegarder"})};return i?e.jsx(yn,{h:"60vh",children:e.jsx(pn,{size:"xl"})}):p?(p.marque?`${p.marque}${p.modele}`:p.modele,e.jsxs(oe,{p:8,children:[e.jsxs(sr,{align:"center",justify:"space-between",mb:6,children:[e.jsxs(ee,{children:[e.jsx(Q,{leftIcon:e.jsx(OM,{}),variant:"ghost",onClick:()=>n("/dashboard/vehicules"),children:"Retour"}),e.jsxs(Te,{size:"lg",children:[" dition vhicule ",p.parc]}),e.jsx(WJ,{etat:p.etat})]}),e.jsxs(ee,{children:[e.jsx(Q,{size:"sm",variant:"outline",onClick:P,children:" Donnes par dfaut"}),e.jsx(Q,{leftIcon:e.jsx($M,{}),colorScheme:"blue",variant:"outline",onClick:()=>window.open(HJ+"/vehicles/"+t,"_blank"),children:" Voir la page publique"})]})]}),e.jsxs(J,{spacing:8,align:"stretch",children:[e.jsx(oe,{bg:"blue.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"blue.200",children:e.jsx(qJ,{vehicle:p,parc:t,onChange:D,authHeader:`Bearer ${localStorage.getItem("token")}`})}),e.jsxs(oe,{bg:"gray.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"gray.200",children:[e.jsxs(sr,{justify:"space-between",align:"center",mb:4,children:[e.jsx(Te,{size:"md",children:" Informations principales"}),e.jsxs(X,{display:"flex",alignItems:"center",w:"auto",children:[e.jsxs(Z,{htmlFor:"isPublic",mb:"0",mr:3,fontWeight:"bold",children:[g.isPublic?" Visible":" Cach"," sur le site public:"]}),e.jsx(Jn,{id:"isPublic",isChecked:g.isPublic||!1,onChange:M=>x(N=>({...N,isPublic:M.target.checked})),colorScheme:g.isPublic?"green":"red",size:"lg"})]})]}),e.jsxs(mt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Parc"}),e.jsx(ge,{value:p.parc,isReadOnly:!0,bg:"gray.100"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Numros de flotte"}),e.jsx(ge,{value:g.numerosFlotte||"",onChange:M=>x(N=>({...N,numerosFlotte:M.target.value})),placeholder:"592 / 720 / X / 920"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Constructeur"}),e.jsx(ge,{value:g.constructeur||"",onChange:M=>x(N=>({...N,constructeur:M.target.value})),placeholder:"Mercedes-Benz"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Modle"}),e.jsx(ge,{value:g.modele||"",onChange:M=>x(N=>({...N,modele:M.target.value})),placeholder:"Citaro "})]})]}),e.jsxs(mt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Immatriculation"}),e.jsx(ge,{value:g.immat||"",onChange:M=>x(N=>({...N,immat:M.target.value})),placeholder:"FG-920-RE"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Mise en circulation"}),e.jsx(ge,{type:"date",value:g.miseEnCirculation?new Date(g.miseEnCirculation).toISOString().split("T")[0]:"",onChange:M=>x(N=>({...N,miseEnCirculation:M.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Longueur"}),e.jsx(ge,{value:g.longueur||"",onChange:M=>x(N=>({...N,longueur:M.target.value})),placeholder:"11,95 m"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Places assises"}),e.jsx(ge,{value:g.placesAssises||"",onChange:M=>x(N=>({...N,placesAssises:M.target.value})),placeholder:"32"})]})]}),e.jsxs(mt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Places debout"}),e.jsx(ge,{value:g.placesDebout||"",onChange:M=>x(N=>({...N,placesDebout:M.target.value})),placeholder:"64"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"UFR"}),e.jsx(ge,{value:g.ufr||"",onChange:M=>x(N=>({...N,ufr:M.target.value})),placeholder:"1"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Statut"}),e.jsxs(ut,{value:g.statut||"",onChange:M=>x(N=>({...N,statut:M.target.value})),children:[e.jsx("option",{value:"Prserv",children:"Prserv"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"disponible",children:"Disponible"}),e.jsx("option",{value:"en_panne",children:"En panne"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"A VENIR",children:"A venir"}),e.jsx("option",{value:"Restauration",children:"Restauration"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"nergie"}),e.jsxs(ut,{value:g.energie||"",onChange:M=>x(N=>({...N,energie:M.target.value})),children:[e.jsx("option",{value:"Diesel",children:"Diesel"}),e.jsx("option",{value:"lectrique",children:"lectrique"}),e.jsx("option",{value:"Hybride",children:"Hybride"}),e.jsx("option",{value:"GNV",children:"GNV"})]})]})]}),e.jsx(mt,{columns:{base:1,md:1},spacing:4,mb:4,children:e.jsxs(X,{children:[e.jsx(Z,{children:"Prserv par"}),e.jsx(ge,{value:g.preservePar||"",onChange:M=>x(N=>({...N,preservePar:M.target.value})),placeholder:"Association RtroBus Essonne"})]})}),e.jsxs(mt,{columns:{base:1,md:2,lg:3},spacing:4,mb:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Norme Euro"}),e.jsx(ge,{value:g.normeEuro||"",onChange:M=>x(N=>({...N,normeEuro:M.target.value})),placeholder:"Euro II"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Moteur"}),e.jsx(ge,{value:g.moteur||"",onChange:M=>x(N=>({...N,moteur:M.target.value})),placeholder:"Mercedes-Benz OM906hLA - 279 ch"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Bote de vitesses"}),e.jsx(ge,{value:g.boiteVitesses||"",onChange:M=>x(N=>({...N,boiteVitesses:M.target.value})),placeholder:"Automatique ZF5HP-502C"})]})]}),e.jsxs(mt,{columns:{base:1,md:2,lg:4},spacing:4,mb:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Nombre de portes"}),e.jsx(ge,{value:g.nombrePortes||"",onChange:M=>x(N=>({...N,nombrePortes:M.target.value})),placeholder:"2"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Livre"}),e.jsx(ge,{value:g.livree||"",onChange:M=>x(N=>({...N,livree:M.target.value})),placeholder:"Grise"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Girouette"}),e.jsx(ge,{value:g.girouette||"",onChange:M=>x(N=>({...N,girouette:M.target.value})),placeholder:"Duhamel LED Oranges + Pastilles Vertes"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Climatisation"}),e.jsx(ge,{value:g.climatisation||"",onChange:M=>x(N=>({...N,climatisation:M.target.value})),placeholder:"Complte"})]})]}),e.jsxs(X,{mt:4,children:[e.jsx(Z,{children:"Sous-titre (badges affichs)"}),e.jsx(ge,{value:g.subtitle||"",onChange:M=>x(N=>({...N,subtitle:M.target.value})),placeholder:"Citaro 1 |  II |  | "}),e.jsx(k,{fontSize:"sm",color:"gray.600",mt:1,children:'Exemple avec mojis : "Citaro 1 |  II |  | "'})]}),e.jsx(Pe,{mt:6,bg:"blue.50",borderWidth:"2px",borderColor:"blue.200",children:e.jsx(ke,{children:e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:0,flex:1,children:e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"bold",children:" Afficher sur le site public"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:p?.isPublic?" Ce vhicule est visible par tous":" Ce vhicule n'est visible que par les administrateurs"})]})}),e.jsx(Jn,{isChecked:p?.isPublic||!1,onChange:M=>f(N=>({...N,isPublic:M.target.checked})),size:"lg",colorScheme:"green"})]})})}),e.jsx(k,{fontSize:"xs",color:"blue.600",mt:4,fontStyle:"italic",children:" Les caractristiques techniques sont automatiquement mises  jour en fonction des champs ci-dessus"})]}),e.jsxs(oe,{bg:"green.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"green.200",children:[e.jsx(Te,{size:"md",mb:4,children:" Textes descriptifs"}),e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:g.description||"",onChange:M=>x(N=>({...N,description:M.target.value})),rows:4,placeholder:"Ce vhicule est un exemple emblmatique..."}),e.jsx(k,{fontSize:"xs",color:"gray.600",mt:1,children:'Apparat dans la section "Description" sur la page publique'})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Histoire"}),e.jsx(Xt,{value:g.history||"",onChange:M=>x(N=>({...N,history:M.target.value})),rows:6,placeholder:"Le Mercedes-Benz Citaro est un autobus urbain..."}),e.jsx(k,{fontSize:"xs",color:"gray.600",mt:1,children:'Apparat dans la section "Histoire" sur la page publique'})]})]})]}),e.jsxs(oe,{bg:"purple.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"purple.200",children:[e.jsx(Te,{size:"md",mb:4,children:" Galerie photos"}),e.jsx(az,{value:g.gallery||[],onChange:M=>x(N=>({...N,gallery:M})),uploadEndpoint:`https://attractive-kindness-rbe-serveurs.up.railway.app/vehicles/${t}/gallery`,deleteEndpoint:`https://attractive-kindness-rbe-serveurs.up.railway.app/vehicles/${t}/gallery`,authHeader:`Bearer ${localStorage.getItem("token")}`}),e.jsx(k,{fontSize:"sm",color:"gray.600",mt:2,children:"La premire image peut servir de fond si aucune image de fond spcifique n'est dfinie. Les autres images apparaissent dans le carrousel."})]}),e.jsxs(oe,{bg:"orange.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"orange.200",children:[e.jsx(Te,{size:"md",mb:4,children:" Carnet de suivi"}),!y?.length&&e.jsx(k,{color:"gray.600",children:"Aucun passage enregistr pour ce vhicule."}),e.jsx(J,{align:"stretch",spacing:3,divider:e.jsx(xn,{}),mt:y?.length?2:0,children:y.map(M=>e.jsxs(oe,{children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{fontWeight:"bold",children:M.conducteur||""}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:M.startedAt?new Date(M.startedAt).toLocaleString():""})]}),M.participants&&e.jsx(k,{mt:1,fontSize:"sm",children:M.participants}),M.note&&e.jsx(k,{mt:1,fontSize:"sm",color:"gray.700",children:M.note})]},M.id))})]}),e.jsxs(oe,{bg:"orange.50",p:6,borderRadius:"lg",border:"1px solid",borderColor:"orange.200",children:[e.jsx(Te,{size:"md",mb:4,children:" Carnet de suivi"}),!y?.length&&e.jsx(k,{color:"gray.600",children:"Aucun passage enregistr pour ce vhicule."}),e.jsx(J,{align:"stretch",spacing:3,divider:e.jsx(xn,{}),mt:y?.length?2:0,children:y.map(M=>{const N=M.startedAt?new Date(M.startedAt):null,z=M.endedAt?new Date(M.endedAt):null,I=N&&z?Math.round((z-N)/6e4):null;return e.jsxs(oe,{children:[e.jsxs(ee,{justify:"space-between",align:"start",children:[e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontWeight:"bold",children:M.conducteur||""}),M.participants&&e.jsx(k,{mt:1,fontSize:"sm",children:M.participants})]}),e.jsxs(J,{align:"end",spacing:0,children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:N?N.toLocaleString():""}),z&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[" ",z.toLocaleString()," ",I!=null?`(${I} min)`:""]})]})]}),M.note&&e.jsx(k,{mt:2,fontSize:"sm",whiteSpace:"pre-wrap",children:M.note})]},M.id)})})]}),e.jsxs(oe,{textAlign:"center",py:4,children:[e.jsxs(ee,{spacing:4,justify:"center",children:[e.jsx(Q,{leftIcon:e.jsx(Il,{}),colorScheme:"blue",size:"lg",onClick:A,isLoading:u,loadingText:"Sauvegarde en cours...",children:" Sauvegarder les modifications"}),e.jsx(UJ,{parc:t,marque:g.marque,modele:g.modele,onSuccess:()=>n("/dashboard/vehicules")})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",mt:2,children:"Les modifications seront visibles immdiatement sur la page publique"})]})]})]})):null}const YJ=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="5173"),ZJ=(YJ?"https://attractive-kindness-rbe-serveurs.up.railway.app":"").replace(/\/$/,""),Yf=async t=>{if(t.status===204)return null;if(!t.headers.get("content-type")?.includes("application/json")){const r=await t.text().catch(()=>"");throw new Error(`Non-JSON: ${t.status}: ${r?.slice(0,200)}`)}return t.json()},Zf=t=>{const n=String(t||"").replace(/^\/+/,"/");return`${ZJ}${n}`},Gg=(t={})=>{const n=Tc.getToken();return PM({Accept:"application/json",...t},n)},Xf=t=>{if(t.status===401)throw console.warn(" Unauthorized - clearing auth"),Tc.setToken(null),window.location.href="/login",new Error("Unauthorized");if(t.status===403)throw new Error("Forbidden");if(t.status===404)return{notFound:!0};throw new Error(`HTTP ${t.status}`)},Yg={async get(t,n={}){const r=Zf(t),i=Gg(n.headers);console.log(` GET ${r}`);try{const l=await fetch(r,{method:"GET",headers:i,credentials:"include",...n});return l.ok?await Yf(l):Xf(l)}catch(l){throw console.error(` GET ${t}:`,l.message),l}},async post(t,n,r={}){const i=Zf(t),l=Gg({"Content-Type":"application/json",...r.headers});console.log(` POST ${i}`,n);try{const u=await fetch(i,{method:"POST",headers:l,body:JSON.stringify(n),credentials:"include",...r});return u.ok?await Yf(u):Xf(u)}catch(u){throw console.error(` POST ${t}:`,u.message),u}},async patch(t,n,r={}){const i=Zf(t),l=Gg({"Content-Type":"application/json",...r.headers});console.log(` PATCH ${i}`,n);try{const u=await fetch(i,{method:"PATCH",headers:l,body:JSON.stringify(n),credentials:"include",...r});return u.ok?await Yf(u):Xf(u)}catch(u){throw console.error(` PATCH ${t}:`,u.message),u}},async delete(t,n={}){const r=Zf(t),i=Gg(n.headers);console.log(` DELETE ${r}`);try{const l=await fetch(r,{method:"DELETE",headers:i,credentials:"include",...n});return l.ok?await Yf(l):Xf(l)}catch(l){throw console.error(` DELETE ${t}:`,l.message),l}},async upload(t,n,r={}){const i=Zf(t),l=Tc.getToken(),u=PM({},l);console.log(` UPLOAD ${i}`);try{const d=await fetch(i,{method:"POST",headers:u,body:n,credentials:"include",...r});return d.ok?await Yf(d):Xf(d)}catch(d){throw console.error(` UPLOAD ${t}:`,d.message),d}}},Ma=async(t,n={})=>{const r=n.method?.toUpperCase()||"GET";if(r==="GET")return Yg.get(t,n);if(r==="POST")return Yg.post(t,n.body,n);if(r==="PATCH")return Yg.patch(t,n.body,n);if(r==="DELETE")return Yg.delete(t,n);throw new Error(`Unsupported: ${r}`)};function XJ(t){const[n,r]=v.useState([]),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{if(!t)return;(async()=>{try{l(!0),d(null);const y=await Ma(`/api/user-permissions/${t}`);if(y.success){const b=(y.permissions||[]).map(w=>({...w,actions:Array.isArray(w.actions)?w.actions:JSON.parse(w.actions||"[]")}));r(b)}else d(y.error||"Failed to load permissions")}catch(y){console.error("Error loading permissions:",y),d(y.message)}finally{l(!1)}})()},[t]),{permissions:n,loading:i,error:u,hasPermission:(x,y)=>{const b=n.find(w=>w.resource===x);return!b||b.expiresAt&&new Date(b.expiresAt)<new Date?!1:b.actions.includes(y)},hasResourceAccess:x=>n.some(y=>y.resource===x),getResourceActions:x=>{const y=n.find(b=>b.resource===x);return!y||y.expiresAt&&new Date(y.expiresAt)<new Date?[]:y.actions}}}const kh=({title:t,subtitle:n,breadcrumbs:r=[],children:i,headerActions:l,bgGradient:u,maxW:d="container.xl",titleSize:p="2xl",titleWeight:f="800",headerVariant:g="full"})=>{const x=Tn(u||"linear(to-r, rbe.600, rbe.800)","linear(to-r, rbe.700, rbe.900)");return e.jsxs(oe,{minH:"100vh",fontFamily:"Montserrat, system-ui, sans-serif",children:[g==="full"?e.jsxs(oe,{bgGradient:x,color:"white",py:{base:12,md:16},position:"relative",overflow:"hidden",children:[e.jsx(oe,{position:"absolute",inset:0,bgGradient:"radial(circle at 30% 30%, whiteAlpha.200, transparent 50%)",pointerEvents:"none"}),e.jsx(ei,{maxW:d,position:"relative",children:e.jsxs(J,{spacing:6,align:"stretch",children:[r.length>0&&e.jsx(yb,{separator:e.jsx(Gx,{color:"whiteAlpha.700"}),color:"whiteAlpha.800",fontSize:"sm",children:r.map((y,b)=>e.jsx(bb,{children:e.jsx(Bx,{as:mr,to:y.href,_hover:{color:"white"},children:y.label})},b))}),e.jsxs(J,{spacing:4,textAlign:"center",children:[e.jsx(Te,{as:"h1",size:p,fontWeight:f,letterSpacing:"-0.025em",textShadow:"0 2px 4px rgba(0,0,0,0.1)",children:t}),n&&e.jsx(k,{fontSize:{base:"lg",md:"xl"},opacity:.9,maxW:"2xl",lineHeight:"relaxed",children:n}),l&&e.jsx(oe,{pt:4,children:l})]})]})})]}):e.jsxs(ei,{maxW:d,py:{base:6,md:8},children:[r.length>0&&e.jsx(yb,{separator:e.jsx(Gx,{}),color:Tn("gray.600","gray.300"),fontSize:"sm",mb:4,children:r.map((y,b)=>e.jsx(bb,{children:e.jsx(Bx,{as:mr,to:y.href,children:y.label})},b))}),e.jsxs(oe,{bgGradient:x,color:"white",p:{base:6,md:8},borderRadius:"xl",textAlign:"center",boxShadow:"lg",children:[e.jsx(Te,{as:"h1",size:p,fontWeight:f,letterSpacing:"-0.02em",children:t}),n&&e.jsx(k,{mt:2,opacity:.9,fontSize:{base:"md",md:"lg"},children:n}),l&&e.jsx(oe,{pt:4,children:l})]})]}),e.jsx(ei,{maxW:d,py:{base:8,md:12},children:i})]})},Tl=({title:t,description:n,icon:r,badge:i,children:l,variant:u="modern",color:d="gray",onClick:p,...f})=>{const g=Tn("white","gray.800"),x=Tn("gray.200","gray.600"),y=Tn("0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2)");return e.jsxs(Pe,{variant:u,bg:g,borderColor:x,cursor:p?"pointer":"default",onClick:p,_hover:p?{boxShadow:y,transform:"translateY(-4px)",borderColor:`${d}.300`}:{},transition:"all 0.3s ease-out",...f,children:[(t||r||i)&&e.jsx(zt,{pb:n?3:6,children:e.jsxs(ee,{justify:"space-between",align:"start",children:[e.jsxs(ee,{spacing:3,flex:1,children:[r&&e.jsx(Cn,{as:r,color:`${d}.600`,boxSize:6,flexShrink:0}),e.jsxs(J,{align:"start",spacing:1,flex:1,children:[e.jsx(Te,{size:"md",color:"gray.700",fontWeight:"600",children:t}),n&&e.jsx(k,{variant:"description",fontSize:"sm",children:n})]})]}),i&&e.jsx(Qe,{colorScheme:i.color||d,variant:"subtle",children:i.label})]})}),l&&e.jsx(ke,{pt:t?0:6,children:l})]})},KJ=[{title:"RtroDemandes",description:"Crez vos demandes et consultez le rcapitulatif",to:"/dashboard/retro-demandes",icon:Bn,color:"blue",resource:"RETRODEMANDES",cardAccess:!0},{title:"RtroBus",description:"Suivi complet du parc, entretiens et pointages",to:"/dashboard/retrobus",icon:Tp,color:"teal",resource:"VEHICLES",cardAccess:!0,badge:{label:"Workspace",color:"teal"}},{title:"Gestion Financire",description:"Recettes, dpenses et oprations programmes",to:"/admin/finance-v2",icon:Hu,color:"rbe",resource:"FINANCE",cardAccess:!0},{title:"Gestion des vnements",description:"Cration, planification et suivi",to:"/dashboard/events-management",icon:Os,color:"green",resource:"EVENTS",cardAccess:!0},{title:"Grer les adhsions",description:"Membres, cotisations et documents",to:"/dashboard/members-management",icon:Va,color:"blue",resource:"MEMBERS",cardAccess:!0},{title:"Gestion des Stocks",description:"Inventaire et matriel de l'association",to:"/dashboard/stock-management",icon:mh,color:"yellow",resource:"STOCK",cardAccess:!0},{title:"Gestion Newsletter",description:"Abonns et campagnes d'envoi",to:"/dashboard/newsletter",icon:$l,color:"purple",resource:"NEWSLETTER",cardAccess:!0},{title:"RtroPlanning",description:"Calendrier centralis: campagnes, tournes, affectations",to:"/dashboard/retroplanning",icon:Os,color:"orange",resource:"PLANNING",cardAccess:!0,hidden:!0},{title:"Gestion du Site",description:"Changelog, contenu et mise  jour",to:"/dashboard/site-management",icon:fh,color:"pink",resource:"SITE_MANAGEMENT",cardAccess:!0},{title:"Gestion des Autorisations",description:"Rles et permissions des utilisateurs",to:"/dashboard/permissions-management",icon:jm,color:"red",requiredRole:["ADMIN","MANAGER","OPERATOR"],resource:"PERMISSIONS_MANAGEMENT",cardAccess:!0},{title:"RtroSupport",description:"Tickets: incidents, bugs et amliorations",to:"/dashboard/support",icon:cJ,color:"cyan",resource:"RETROSUPPORT",cardAccess:!0}];function QJ(){const t=Tn("blue.50","blue.900"),n=Tn("blue.500","blue.300"),{user:r,roles:i,customPermissions:l,isAdmin:u}=es(),d=i?.[0]||"MEMBER",{permissions:p,loading:f}=XJ(r?.id),g=y=>{if(y.hidden&&!u)return!1;if(u)return!0;if(d==="PRESTATAIRE")return y.title==="RtroSupport";if(y.requiredRole&&!y.requiredRole.some(b=>i.includes(b)))return!1;if(y.cardAccess){if(p.some(w=>w.resource===y.resource))return!0;if(d==="PARTENAIRE")return!1;if(y.resource){const C={VEHICLES:Ae.VEHICLES,EVENTS:Ae.EVENTS,PLANNING:Ae.RETROPLANNING,FINANCE:Ae.FINANCE,MEMBERS:Ae.MEMBERS,STOCK:Ae.STOCK,NEWSLETTER:Ae.NEWSLETTER,SITE_MANAGEMENT:Ae.SITE_MANAGEMENT,RETRODEMANDES:Ae.RETRODEMANDES,RETROMAIL:Ae.RETROMAIL,RETROSUPPORT:Ae.RETROSUPPORT,PERMISSIONS_MANAGEMENT:Ae.PERMISSIONS_MANAGEMENT}[y.resource];return!C||Sl(d,C,l)}return!0}return!0},x=KJ.filter(g);return f?e.jsx(kh,{title:"Espace MyRBE",subtitle:"Les outils d'administration RtroBus Essonne",bgGradient:"linear(to-r, blue.500, purple.600)",children:e.jsxs(J,{spacing:4,py:8,children:[e.jsx(pn,{size:"lg"}),e.jsx(k,{children:"Chargement des permissions..."})]})}):e.jsx(kh,{title:"Espace MyRBE",subtitle:"Les outils d'administration RtroBus Essonne",headerVariant:"card",bgGradient:"linear(to-r, blue.500, purple.600)",titleSize:"xl",titleWeight:"700",breadcrumbs:[{label:"Dashboard",href:"/dashboard/home"},{label:"MyRBE",href:"/dashboard/myrbe"}],children:e.jsxs(J,{spacing:8,align:"stretch",children:[x.length>0?e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:6,children:x.map(y=>e.jsx(Tl,{title:y.title,description:y.description,icon:y.icon,color:y.color,badge:y.badge,as:mr,to:y.to},y.title))}):e.jsxs(oe,{bg:Tn("gray.50","gray.900"),borderRadius:"md",p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:Tn("gray.300","gray.600"),children:[e.jsx(ee,{justify:"center",mb:3,children:e.jsx(Pv,{size:32})}),e.jsx(Te,{size:"md",mb:2,children:"Accs limit"}),e.jsx(k,{color:"gray.600",mb:4,children:"Vous n'avez pas accs aux fonctionnalits de MyRBE avec votre rle et vos permissions actuels."}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Contactez un administrateur pour demander l'accs."})]}),x.length>0&&e.jsxs(J,{spacing:6,children:[e.jsx(oe,{bg:t,p:6,borderRadius:"xl",borderLeft:"4px solid",borderLeftColor:n,w:"full",children:e.jsxs(J,{spacing:3,align:"start",children:[e.jsx(ee,{children:e.jsx(k,{fontSize:"lg",fontWeight:"600",color:"blue.700",children:" Guide d'utilisation"})}),e.jsx(k,{color:"blue.600",lineHeight:"relaxed",fontSize:"sm",children:"Votre vue MyRBE est personnalise selon vos permissions individuelles et votre rle. Les cartes affiches correspondent  vos droits d'accs. Les modifications que vous effectuez sont automatiquement sauvegardes et synchronises avec les autres membres de l'quipe."}),e.jsxs(ee,{spacing:3,pt:2,children:[e.jsx(Q,{size:"sm",variant:"secondary",colorScheme:"blue",children:"Guide complet"}),e.jsx(Q,{size:"sm",variant:"modern",as:mr,to:"/dashboard/support",children:"Support technique"})]})]})}),e.jsxs(mt,{columns:{base:2,md:4},spacing:4,w:"full",children:[e.jsx(Tl,{title:"Cartes visibles",description:`${x.length}`,color:"blue",variant:"modern"}),e.jsx(Tl,{title:"Votre rle",description:d,color:"green",variant:"modern"}),e.jsx(Tl,{title:"Permissions individuelles",description:`${p.length}`,color:"orange",variant:"modern"}),e.jsx(Tl,{title:"Version",description:"v2.2.0",color:"purple",variant:"modern"})]})]})]})})}const Sc="https://attractive-kindness-rbe-serveurs.up.railway.app",gA=[{matricule:"w.belaidi",label:"Waiyl Belaidi"},{matricule:"m.ravichandran",label:"Mthusan Ravichandran"}];function xA(t,n){return`pointage:${t}:${n}`}function JJ(t){try{const n="rbe:reports:local",r=localStorage.getItem(n),i=r?JSON.parse(r):[];return i.unshift(t),localStorage.setItem(n,JSON.stringify(i)),!0}catch(n){return console.error("saveLocalReport failed",n),!1}}function eee(){const{parc:t}=Qx(),n=on(),{matricule:r,prenom:i}=es(),[l,u]=v.useState(null),[d,p]=v.useState(!0),[f,g]=v.useState(gA),[x,y]=v.useState(""),[b,w]=v.useState([]),[C,_]=v.useState(null),[A,D]=v.useState(!1),[P,M]=v.useState(!1),[N,z]=v.useState(!1),[I,V]=v.useState(""),[$,ae]=v.useState(""),[he,re]=v.useState(!1),[ce,Se]=v.useState(""),[je,de]=v.useState([]),[G,U]=v.useState(!1),[W,me]=v.useState(null);v.useEffect(()=>{let ye=!1;return(async()=>{try{p(!0);const Ze=await fetch(`${Sc}/vehicles/${encodeURIComponent(t)}`);if(!Ze.ok)throw new Error("Vhicule introuvable");const ht=await Ze.json();ye||u(ht)}catch(Ze){console.error(Ze),n({status:"error",title:"Impossible de charger le vhicule",description:String(Ze.message)})}finally{ye||p(!1)}})(),()=>{ye=!0}},[t,n]),v.useEffect(()=>{r&&r.trim()?(y(r),f.some(ye=>ye.matricule===r)||g(ye=>[{matricule:r,label:i?`${i} (${r})`:r},...ye])):x||y(gA[0].matricule)},[r,i]),v.useEffect(()=>{if(!x)return;const ye=xA(t,x);try{const Ze=localStorage.getItem(ye);if(Ze){const ht=JSON.parse(Ze);_(ht)}else _(null)}catch(Ze){console.warn("failed reading pointage from storage",Ze)}},[t,x]);const F=ye=>{const Ze=xA(t,x);if(ye)try{localStorage.setItem(Ze,JSON.stringify(ye))}catch(ht){console.warn("persistActiveLocal failed",ht)}else try{localStorage.removeItem(Ze)}catch(ht){console.warn("persistActiveLocal remove failed",ht)}},fe=ye=>{try{return new Date(ye).toLocaleString()}catch{return ye}},te=()=>{const ye=I.trim();if(!ye)return n({status:"warning",title:"Matricule requis"});if(ye===x)return V(""),n({status:"info",title:"C'est dj le membre principal"});if(b.includes(ye))return V(""),n({status:"info",title:"Participant dj ajout"});w(Ze=>[...Ze,ye]),f.some(Ze=>Ze.matricule===ye)||g(Ze=>[{matricule:ye,label:ye},...Ze]),V(""),n({status:"success",title:"Participant ajout"})},R=ye=>{w(Ze=>Ze.filter(ht=>ht!==ye))},Y=async()=>{D(!0);try{try{if(!(await fetch(`${Sc}/health`)).ok){n({status:"error",title:"API indisponible",description:"Le serveur est indisponible  le pointage informatique est dsactiv."}),D(!1);return}}catch{n({status:"error",title:"API indisponible",description:"Impossible de joindre le serveur  le pointage informatique est dsactiv."}),D(!1);return}const ye=[...b],Ze={conducteur:x||null,participants:ye,note:"pointage:start",startedAt:new Date().toISOString()},ht=await fetch(`${Sc}/vehicles/${encodeURIComponent(t)}/usages`,{method:"POST",headers:{"Content-Type":"application/json","x-user-matricule":x||""},body:JSON.stringify(Ze)});if(!ht.ok){let Ue=null;try{Ue=await ht.json()}catch{Ue=await ht.text().catch(()=>null)}console.warn("startPointage server error",ht.status,Ue),n({status:"error",title:"chec du pointage",description:Ue?.error||`Erreur serveur (${ht.status})`}),D(!1);return}const rt=await ht.json(),vt={id:rt.id||`local-${Date.now()}`,startedAt:rt.startedAt||Ze.startedAt,conducteur:Ze.conducteur,participants:Ze.participants||[]};_(vt),F(vt),n({status:"success",title:"Pointage dmarr",description:` ${fe(vt.startedAt)}`}),M(!1)}catch(ye){console.error(ye),n({status:"error",title:"chec du pointage",description:String(ye.message)})}finally{D(!1)}},q=async()=>{if(!C)return;D(!0);const ye=new Date().toISOString(),Ze=(ht,rt)=>{try{const vt="rbe:usages:local",Ue=localStorage.getItem(vt),qt=Ue?JSON.parse(Ue):[],Je={id:`local-end-${Date.now()}`,relatedTo:ht,parc:t,startedAt:rt||C.startedAt,endedAt:ye,conducteur:C.conducteur||x,participants:C.participants||b,note:$||"depointe",createdAt:new Date().toISOString(),synced:!1};return qt.unshift(Je),localStorage.setItem(vt,JSON.stringify(qt)),Je}catch(vt){return console.error("saveLocalEnded failed",vt),null}};try{try{if(!(await fetch(`${Sc}/health`)).ok){n({status:"error",title:"API indisponible",description:"Impossible de terminer le pointage  serveur indisponible."}),D(!1);return}}catch{n({status:"error",title:"API indisponible",description:"Impossible de joindre le serveur  le pointage ne peut pas tre termin."}),D(!1);return}const ht={endedAt:ye,note:$||"depointe",participants:C.participants||b};let rt=null;try{const Je=await fetch(`${Sc}/vehicles/${encodeURIComponent(t)}/usages/${encodeURIComponent(C.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(ht)});if(Je.ok){try{rt=await Je.json()}catch{rt=null}F(null),_(null),z(!1),ae(""),n({status:"success",title:"Dpointe",description:`arrt  ${new Date(ye).toLocaleString()}`})}else{let Ge=null;try{Ge=await Je.json()}catch{Ge=await Je.text().catch(()=>null)}console.warn("depointerWithNote: PATCH failed",Je.status,Ge)}}catch(Je){console.warn("depointerWithNote: PATCH network error",Je)}if(!rt)try{const Je=await fetch(`${Sc}/vehicles/${encodeURIComponent(t)}/usages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conducteur:x||null,note:$||"pointage:end",relatedTo:C.id,participants:C.participants||b,endedAt:ye})});if(Je.ok){try{rt=await Je.json()}catch{rt=null}F(null),_(null),z(!1),ae(""),n({status:"success",title:"Dpointe (fallback)",description:`arrt  ${new Date(ye).toLocaleString()}`})}else{let Ge=null;try{Ge=await Je.json()}catch{Ge=await Je.text().catch(()=>null)}console.warn("depointerWithNote: POST fallback failed",Je.status,Ge)}}catch(Je){console.warn("depointerWithNote: POST fallback network error",Je)}if(!rt){const Je=Ze(C.id,C.startedAt);F(null),_(null),z(!1),ae(""),n({status:"warning",title:"Dpointe local",description:Je?"Le pointage a t enregistr localement (pas d'API). La fiche peut tre envoye plus tard.":"Le serveur est indisponible et la sauvegarde locale a chou."}),me({usageId:Je?Je.id:`local-${Date.now()}`,startedAt:Je?.startedAt||C.startedAt,endedAt:Je?.endedAt||ye,conducteur:C.conducteur||x,participants:C.participants||b}),Se($||""),de([]),re(!0);return}const vt=rt?.id||C.id,Ue=rt?.startedAt||C.startedAt,qt=rt?.endedAt||ye;me({usageId:vt,startedAt:Ue,endedAt:qt,conducteur:x,participants:C.participants||b}),Se($||""),de([]),re(!0)}catch(ht){console.error("depointerWithNote: unexpected error",ht),n({status:"error",title:"chec du dpointeur",description:String(ht.message)})}finally{D(!1)}},le=ye=>{const Ze=Array.from(ye.target.files||[]);de(ht=>[...ht,...Ze]),ye.target.value=""},We=ye=>{de(Ze=>Ze.filter((ht,rt)=>rt!==ye))},pe=async()=>{if(W){U(!0);try{const{usageId:ye,startedAt:Ze,endedAt:ht,conducteur:rt,participants:vt}=W,Ue=new FormData;Ue.append("description",ce||""),Ue.append("startedAt",Ze||""),Ue.append("endedAt",ht||""),Ue.append("conducteur",rt||""),Ue.append("participants",JSON.stringify(vt||[])),je.forEach((Je,Ge)=>Ue.append("files",Je,Je.name));let qt=!1;try{const Je=await fetch(`${Sc}/vehicles/${encodeURIComponent(t)}/usages/${encodeURIComponent(ye)}/report`,{method:"POST",body:Ue});Je.ok?(qt=!0,n({status:"success",title:"Fiche enregistre",description:"La fiche a t enregistre sur le serveur."})):console.warn("primary report endpoint failed",Je.status)}catch(Je){console.warn("primary report endpoint error",Je)}if(!qt)try{const Je=await fetch(`${Sc}/vehicles/${encodeURIComponent(t)}/reports`,{method:"POST",body:Ue});Je.ok?(qt=!0,n({status:"success",title:"Fiche enregistre (fallback)",description:"La fiche a t envoye au fallback serveur."})):console.warn("fallback report endpoint failed",Je.status)}catch(Je){console.warn("fallback report endpoint error",Je)}if(!qt){const Je={id:`local-${Date.now()}`,parc:t,usageId:ye,startedAt:Ze,endedAt:ht,conducteur:rt,participants:vt||[],description:ce||"",files:je.map(Ve=>({name:Ve.name,size:Ve.size,type:Ve.type})),createdAt:new Date().toISOString()},Ge=JJ(Je);n(Ge?{status:"warning",title:"Fiche sauvegarde localement",description:"Pas d'API disponible  la fiche est dans votre navigateur."}:{status:"error",title:"chec sauvegarde locale",description:"Impossible de sauvegarder la fiche."})}re(!1),Se(""),de([]),me(null)}catch(ye){console.error(ye),n({status:"error",title:"Erreur lors de l'envoi de la fiche",description:String(ye.message)})}finally{U(!1)}}};return d?e.jsx(yn,{p:8,children:e.jsx(pn,{size:"lg"})}):e.jsxs(ei,{maxW:"4xl",py:10,children:[e.jsx(Te,{as:"h1",size:"xl",mb:4,children:"MyRBE  Actions rapides"}),e.jsxs(oe,{mb:4,children:[e.jsxs(k,{fontSize:"md",children:[e.jsx("b",{children:"Vhicule :"})," ",l?.immat||`Parc ${t}`]}),e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Parc ",t]})]}),e.jsxs(oe,{mb:4,children:[e.jsx(k,{mb:2,children:e.jsx("b",{children:"Initiateur (scan)"})}),e.jsxs(ee,{spacing:3,align:"start",children:[e.jsxs(ut,{value:x,onChange:ye=>y(ye.target.value),maxW:"360px",children:[f.map(ye=>e.jsxs("option",{value:ye.matricule,children:[ye.label," (",ye.matricule,")"]},ye.matricule)),r&&!f.some(ye=>ye.matricule===r)&&e.jsx("option",{value:r,children:i?`${i} (${r})`:r})]}),e.jsx(oe,{children:e.jsx(ge,{placeholder:"Ajouter participant (matricule)",value:I,onChange:ye=>V(ye.target.value),maxW:"220px"})}),e.jsx(Q,{size:"sm",onClick:te,children:"Ajouter"})]}),e.jsxs(oe,{mt:3,children:[e.jsx(k,{mb:2,fontSize:"sm",children:"Participants prsents :"}),e.jsxs(AM,{spacing:2,children:[b.length===0&&e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Aucun participant ajout"}),b.map(ye=>e.jsxs(Yo,{size:"sm",borderRadius:"full",variant:"solid",colorScheme:"blue",children:[e.jsx(Zo,{children:ye}),e.jsx(Z1,{onClick:()=>R(ye)})]},ye))]})]})]}),e.jsxs(fo,{direction:{base:"column",md:"row"},spacing:4,mb:4,children:[e.jsx(Q,{colorScheme:"blue",size:"lg",onClick:()=>n({status:"info",title:"Planifier",description:"Fonctionnalit planification  ajouter"}),children:"Planifier une intervention"}),e.jsx(Q,{colorScheme:"red",size:"lg",onClick:()=>n({status:"info",title:"Signaler",description:"Fonctionnalit signalement  ajouter"}),children:"Signaler une anomalie"}),e.jsx(Q,{colorScheme:C?"orange":"green",size:"lg",onClick:()=>{C?z(!0):M(!0)},isLoading:A,children:C?"Dpointer":"Pointer"})]}),e.jsxs(oe,{children:[e.jsxs(k,{fontSize:"sm",color:"gray.700",children:[e.jsx("b",{children:"Initiateur :"})," ",x," ",r===x&&i?`  ${i}`:""]}),C?e.jsxs(k,{fontSize:"sm",color:"gray.700",children:["Point depuis : ",fe(C.startedAt)]}):e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Aucun pointage actif pour ce membre sur ce vhicule."})]}),e.jsxs(Et,{isOpen:P,onClose:()=>M(!1),isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Pointer  dmarrer"}),e.jsx($t,{}),e.jsxs(_t,{children:[e.jsxs(k,{mb:3,children:["Vhicule : ",e.jsx("b",{children:l?.immat||`Parc ${t}`})]}),e.jsxs(k,{mb:3,children:["Initiateur : ",e.jsx("b",{children:x})]}),e.jsxs(k,{mb:3,children:["Participants : ",b.length?b.join(", "):""]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Confirmer pour crer le pointage (heure actuelle enregistre)."})]}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:()=>M(!1),children:"Annuler"}),e.jsx(Q,{colorScheme:"green",onClick:Y,isLoading:A,children:"Confirmer"})]})]})]}),e.jsxs(Et,{isOpen:N,onClose:()=>z(!1),isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Dpointer  terminer"}),e.jsx($t,{}),e.jsxs(_t,{children:[e.jsxs(k,{mb:3,children:["Vhicule : ",e.jsx("b",{children:l?.immat||`Parc ${t}`})]}),e.jsxs(k,{mb:3,children:["Initiateur : ",e.jsx("b",{children:x})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description des activits ralises"}),e.jsx(Xt,{value:$,onChange:ye=>ae(ye.target.value),placeholder:"Ex: contrle frein, remplacement ampoule..."})]}),e.jsx(k,{mt:3,fontSize:"sm",color:"gray.500",children:"(Aprs validation, vous pourrez ajouter photos/vidos  la fiche.)"})]}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:()=>z(!1),children:"Annuler"}),e.jsx(Q,{colorScheme:"orange",onClick:q,isLoading:A,isDisabled:!$.trim(),children:"Confirmer dpointer"})]})]})]}),e.jsxs(Et,{isOpen:he,onClose:()=>re(!1),size:"xl",isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Fiche de pointage  dtails"}),e.jsx($t,{}),e.jsxs(_t,{children:[e.jsxs(oe,{mb:3,children:[e.jsxs(k,{children:[e.jsx("b",{children:"Vhicule :"})," ",l?.immat||`Parc ${t}`]}),e.jsxs(k,{children:[e.jsx("b",{children:"Initiateur :"})," ",W?.conducteur]}),e.jsxs(k,{children:[e.jsx("b",{children:"Participants :"})," ",(W?.participants||[]).join(", ")||""]}),e.jsxs(k,{children:[e.jsx("b",{children:"Dbut :"})," ",W?fe(W.startedAt):""]}),e.jsxs(k,{children:[e.jsx("b",{children:"Fin :"})," ",W?fe(W.endedAt):""]})]}),e.jsxs(X,{mb:3,children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:ce,onChange:ye=>Se(ye.target.value),placeholder:"Dcrivez les actions effectues..."})]}),e.jsxs(X,{mb:3,children:[e.jsx(Z,{children:"Photos / Vidos"}),e.jsx(ge,{type:"file",accept:"image/*,video/*",multiple:!0,onChange:le}),je.length>0&&e.jsx(mt,{columns:{base:2,md:3},spacing:2,mt:3,children:je.map((ye,Ze)=>e.jsxs(oe,{borderRadius:"md",overflow:"hidden",pos:"relative",bg:"gray.50",p:2,children:[ye.type.startsWith("image/")?e.jsx(Li,{src:URL.createObjectURL(ye),alt:ye.name,objectFit:"cover",maxH:"140px",w:"100%"}):e.jsxs(oe,{p:2,children:[e.jsx(k,{fontSize:"sm",noOfLines:2,children:ye.name}),e.jsxs(k,{fontSize:"xs",color:"gray.600",children:[ye.size/1024|0," KB"]})]}),e.jsx(xt,{"aria-label":"Supprimer",size:"sm",pos:"absolute",top:"6px",right:"6px",onClick:()=>We(Ze),icon:e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6"}),e.jsx("path",{d:"M10 11v6"}),e.jsx("path",{d:"M14 11v6"})]})})]},Ze))})]}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Les fichiers seront envoys au serveur si disponible ; sinon la fiche sera sauvegarde localement."})]}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:()=>re(!1),children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:pe,isLoading:G,children:"Enregistrer la fiche"})]})]})]})]})}const Bh=({title:t,subtitle:n,sections:r=[],defaultSectionId:i,headerActions:l,footer:u,sidebarFooter:d,sidebarTitleIcon:p,sidebarTitle:f="Espace MyRBE",sidebarSubtitle:g="Outils d'administration",versionLabel:x="MyRBE Workspace"})=>{const[y,b]=v.useState(i||r[0]?.id),[w,C]=v.useState(!0),[_]=DP("(max-width: 768px)"),A=v.useRef(null);v.useEffect(()=>{A.current&&A.current.scrollTo({top:0,behavior:"auto"})},[y]);const D=Tn("gray.50","gray.900"),P=Tn("white","gray.800"),M=Tn("gray.200","gray.700"),N=Tn("gray.100","gray.700"),z=Tn("blue.50","blue.900"),I=Tn("blue.500","blue.300"),V=Tn("gray.800","whiteAlpha.900"),$=Tn("gray.500","gray.400"),ae=v.useMemo(()=>r.find(ce=>ce.id===y)||r[0],[y,r]),he=ae?.render,re=()=>C(ce=>!ce);return e.jsxs(ee,{align:"stretch",spacing:0,h:"100vh",bg:P,children:[e.jsx(oe,{w:w&&!_?"280px":_?"100%":"0",bg:D,borderRight:"1px",borderColor:M,overflowY:"auto",transition:"width 0.3s ease",display:_&&!w?"none":"block",position:_?"absolute":"relative",h:"100%",zIndex:_?20:"auto",boxShadow:_&&w?"lg":"none",children:e.jsxs(J,{align:"stretch",spacing:0,h:"full",children:[e.jsxs(oe,{p:6,borderBottom:"1px",borderColor:M,children:[e.jsxs(ee,{justify:"space-between",mb:3,children:[e.jsxs(ee,{spacing:3,children:[p&&e.jsx(Cn,{as:p,color:"blue.500",boxSize:6}),e.jsxs(oe,{children:[e.jsx(Te,{size:"md",color:V,children:f}),e.jsx(k,{fontSize:"sm",color:$,children:g})]})]}),_&&e.jsx(Q,{size:"sm",variant:"ghost",onClick:re,children:e.jsx(qu,{})})]}),x&&e.jsx(k,{fontSize:"xs",color:"gray.500",children:x})]}),e.jsx(J,{align:"stretch",spacing:1,px:3,py:4,flex:1,children:r.map(ce=>{const Se=ce.id===ae?.id,je=ce.icon;return e.jsx(Q,{leftIcon:je?e.jsx(Cn,{as:je}):void 0,variant:"ghost",justifyContent:"flex-start",w:"full",bg:Se?z:"transparent",borderLeft:"3px",borderColor:Se?I:"transparent",borderRadius:0,px:4,py:6,fontSize:"sm",fontWeight:Se?"600":"500",color:Se?I:"inherit",_hover:{bg:N,borderLeftColor:I},onClick:()=>{b(ce.id),_&&C(!1)},children:e.jsxs(sr,{direction:"column",align:"flex-start",children:[e.jsx(k,{children:ce.label}),ce.description&&e.jsx(k,{fontSize:"xs",color:"gray.500",children:ce.description})]})},ce.id)})}),e.jsx(oe,{p:4,borderTop:"1px",borderColor:M,fontSize:"xs",color:"gray.500",textAlign:"center",children:d||"MyRBE"})]})}),e.jsxs(oe,{flex:1,overflowY:"auto",position:"relative",h:"100%",ref:A,children:[_&&!w&&e.jsx(Q,{position:"fixed",top:4,left:4,size:"sm",variant:"solid",zIndex:30,onClick:re,children:e.jsx(hJ,{})}),e.jsxs(oe,{p:6,minH:"full",children:[e.jsxs(sr,{align:{base:"flex-start",md:"center"},justify:"space-between",wrap:"wrap",mb:6,gap:4,children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",color:V,children:t}),n&&e.jsx(k,{color:$,children:n})]}),l&&e.jsx(ee,{spacing:3,flexWrap:"wrap",justify:"flex-end",children:(Array.isArray(l),l)})]}),e.jsx(xn,{mb:6}),e.jsx(oe,{children:he?he():e.jsx(k,{color:"gray.500",children:"Aucune section disponible."})}),u&&e.jsx(oe,{mt:10,children:u})]})]})]})};function tee({etat:t}){const n={disponible:"green",en_panne:"red",maintenance:"orange",Service:"green",Prserv:"blue","A VENIR":"gray",Restauration:"orange"};return e.jsx(Qe,{colorScheme:n[t]||"purple",children:t||""})}function nee({vehicles:t,apiClient:n}){const r=on(),[i,l]=v.useState(null),[u,d]=v.useState([]),[p,f]=v.useState([]),[g,x]=v.useState(null),[y,b]=v.useState(!1),[w,C]=v.useState(!1),[_,A]=v.useState({type:"other",description:"",cost:"",mileage:"",performedBy:"",location:"",status:"completed",notes:""}),[D,P]=v.useState(!1),[M,N]=v.useState({serviceType:"oil_change",description:"",frequency:"yearly",priority:"medium",notes:""}),z=async re=>{try{b(!0);const[ce,Se,je]=await Promise.all([n.get(`/vehicles/${encodeURIComponent(re)}/maintenance`).catch(()=>[]),n.get(`/vehicles/${encodeURIComponent(re)}/service-schedule`).catch(()=>[]),n.get(`/vehicles/${encodeURIComponent(re)}/maintenance-summary`).catch(()=>null)]);d(Array.isArray(ce)?ce:[]),f(Array.isArray(Se)?Se:[]),x(je)}catch(ce){console.error("Error loading maintenance data:",ce),d([]),f([]),x(null)}finally{b(!1)}},I=re=>{const ce=re.parc||re.id||re.slug;l(ce),z(ce)},V=async()=>{if(!i||!_.type||!_.description){r({status:"warning",title:"Formulaire incomplet"});return}try{const re=await n.post(`/vehicles/${encodeURIComponent(i)}/maintenance`,_);d([re,...u]),A({type:"other",description:"",cost:"",mileage:"",performedBy:"",location:"",status:"completed",notes:""}),C(!1),r({status:"success",title:"Entretien ajout"}),await z(i)}catch(re){r({status:"error",title:"Erreur",description:re.message})}},$=async()=>{if(!i||!M.serviceType){r({status:"warning",title:"Formulaire incomplet"});return}try{const re=await n.post(`/vehicles/${encodeURIComponent(i)}/service-schedule`,M);f([re,...p]),N({serviceType:"oil_change",description:"",frequency:"yearly",priority:"medium",notes:""}),P(!1),r({status:"success",title:"Tche programme"}),await z(i)}catch(re){r({status:"error",title:"Erreur",description:re.message})}},ae={oil_change:{label:"Vidange",color:"blue"},tire_change:{label:"Changement pneus",color:"purple"},brake_service:{label:"Service freins",color:"red"},inspection:{label:"Inspection",color:"green"},repair:{label:"Rparation",color:"orange"},washing:{label:"Lavage",color:"cyan"},other:{label:"Autre",color:"gray"}},he={completed:"green",in_progress:"yellow",pending:"orange",cancelled:"gray"};return i?e.jsxs(J,{align:"start",spacing:4,w:"full",children:[e.jsxs(ee,{justify:"space-between",w:"full",children:[e.jsxs(ee,{children:[e.jsx(Tp,{}),e.jsxs(Te,{size:"sm",children:["Entretien - ",i]})]}),e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>l(null),children:" Retour"})]}),y?e.jsxs(ee,{spacing:3,children:[e.jsx(pn,{size:"sm"}),e.jsx(k,{children:"Chargement..."})]}):e.jsxs(e.Fragment,{children:[g&&e.jsxs(mt,{columns:{base:2,md:4},gap:3,w:"full",children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"Cot total"}),e.jsxs(Dt,{fontSize:"lg",children:[g.totalCost.toFixed(2),""]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"Entretiens"}),e.jsx(Dt,{fontSize:"lg",children:g.maintenanceCount})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"Tches en retard"}),e.jsx(Dt,{fontSize:"lg",color:"red.500",children:g.overdueTasks})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"En attente"}),e.jsx(Dt,{fontSize:"lg",color:"orange.500",children:g.pendingTasks})]})})})]}),e.jsxs(ga,{w:"full",colorScheme:"blue",children:[e.jsxs(xa,{children:[e.jsxs(hn,{children:["Historique (",u.length,")"]}),e.jsxs(hn,{children:["Planning (",p.length,")"]})]}),e.jsxs(va,{children:[e.jsxs(fn,{children:[e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"sm",children:"Historique d'entretien"}),e.jsx(Q,{size:"sm",colorScheme:"green",onClick:()=>C(!0),children:"+ Ajouter"})]}),u.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucun entretien enregistr"]}):e.jsx(J,{align:"stretch",spacing:2,maxH:"500px",overflowY:"auto",children:u.map(re=>e.jsx(Pe,{variant:"outline",size:"sm",children:e.jsxs(ke,{py:2,children:[e.jsxs(ee,{justify:"space-between",mb:1,children:[e.jsxs(ee,{spacing:2,children:[e.jsx(Qe,{colorScheme:ae[re.type]?.color||"gray",children:ae[re.type]?.label||re.type}),e.jsx(k,{fontSize:"sm",fontWeight:"600",children:new Date(re.date).toLocaleDateString("fr-FR")})]}),e.jsx(Qe,{colorScheme:he[re.status]||"gray",children:re.status})]}),e.jsx(k,{fontSize:"sm",color:"gray.700",children:re.description}),e.jsxs(ee,{spacing:4,mt:2,fontSize:"xs",color:"gray.600",children:[re.cost>0&&e.jsxs(k,{children:[" ",re.cost.toFixed(2),""]}),re.mileage&&e.jsxs(k,{children:[" ",re.mileage," km"]}),re.performedBy&&e.jsxs(k,{children:[" ",re.performedBy]}),re.nextDueDate&&e.jsxs(k,{children:[" Prochainement: ",new Date(re.nextDueDate).toLocaleDateString("fr-FR")]})]})]})},re.id))})]}),e.jsxs(Et,{isOpen:w,onClose:()=>C(!1),children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Ajouter un entretien"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:3,children:[e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Type"}),e.jsx("select",{value:_.type,onChange:re=>A({..._,type:re.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:Object.entries(ae).map(([re,ce])=>e.jsx("option",{value:re,children:ce.label},re))})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Description *"}),e.jsx("textarea",{value:_.description,onChange:re=>A({..._,description:re.target.value}),placeholder:"Dtails de l'intervention...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc",minHeight:"80px"}})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Cot ()"}),e.jsx("input",{type:"number",value:_.cost,onChange:re=>A({..._,cost:re.target.value}),placeholder:"0.00",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Kilomtrage"}),e.jsx("input",{type:"number",value:_.mileage,onChange:re=>A({..._,mileage:re.target.value}),placeholder:"12345",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Effectu par"}),e.jsx("input",{type:"text",value:_.performedBy,onChange:re=>A({..._,performedBy:re.target.value}),placeholder:"Nom du mcanicien/atelier",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Lieu"}),e.jsx("input",{type:"text",value:_.location,onChange:re=>A({..._,location:re.target.value}),placeholder:"Garage, atelier...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Statut"}),e.jsxs("select",{value:_.status,onChange:re=>A({..._,status:re.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:[e.jsx("option",{value:"completed",children:"Complt"}),e.jsx("option",{value:"in_progress",children:"En cours"}),e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"cancelled",children:"Annul"})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{mr:3,onClick:()=>C(!1),variant:"ghost",children:"Annuler"}),e.jsx(Q,{colorScheme:"green",onClick:V,children:"Ajouter"})]})]})]})]}),e.jsxs(fn,{children:[e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"sm",children:"Planning de maintenance"}),e.jsx(Q,{size:"sm",colorScheme:"blue",onClick:()=>P(!0),children:"+ Programmer"})]}),p.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucune tche programme"]}):e.jsx(J,{align:"stretch",spacing:2,maxH:"500px",overflowY:"auto",children:p.map(re=>e.jsx(Pe,{variant:"outline",size:"sm",borderLeftWidth:"4px",borderLeftColor:re.status==="overdue"?"red.500":re.status==="pending"?"orange.500":"green.500",children:e.jsxs(ke,{py:2,children:[e.jsxs(ee,{justify:"space-between",mb:1,children:[e.jsxs(ee,{spacing:2,children:[e.jsx(Qe,{colorScheme:re.priority==="critical"?"red":re.priority==="high"?"orange":"blue",children:re.priority}),e.jsx(k,{fontSize:"sm",fontWeight:"600",children:re.serviceType})]}),e.jsx(Qe,{colorScheme:re.status==="completed"?"green":re.status==="overdue"?"red":re.status==="pending"?"yellow":"gray",children:re.status})]}),re.description&&e.jsx(k,{fontSize:"sm",color:"gray.700",children:re.description}),e.jsxs(ee,{spacing:4,mt:2,fontSize:"xs",color:"gray.600",children:[re.plannedDate&&e.jsxs(k,{children:[" ",new Date(re.plannedDate).toLocaleDateString("fr-FR")]}),e.jsxs(k,{children:[" ",re.frequency]})]})]})},re.id))})]}),e.jsxs(Et,{isOpen:D,onClose:()=>P(!1),children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Programmer une maintenance"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:3,children:[e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Type de service *"}),e.jsxs("select",{value:M.serviceType,onChange:re=>N({...M,serviceType:re.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:[e.jsx("option",{value:"oil_change",children:"Vidange"}),e.jsx("option",{value:"tire_inspection",children:"Inspection pneus"}),e.jsx("option",{value:"brake_check",children:"Vrification freins"}),e.jsx("option",{value:"full_inspection",children:"Inspection complte"}),e.jsx("option",{value:"other",children:"Autre"})]})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Description"}),e.jsx("input",{type:"text",value:M.description,onChange:re=>N({...M,description:re.target.value}),placeholder:"Dtails...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Frquence"}),e.jsxs("select",{value:M.frequency,onChange:re=>N({...M,frequency:re.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:[e.jsx("option",{value:"weekly",children:"Hebdomadaire"}),e.jsx("option",{value:"monthly",children:"Mensuelle"}),e.jsx("option",{value:"quarterly",children:"Trimestrielle"}),e.jsx("option",{value:"yearly",children:"Annuelle"}),e.jsx("option",{value:"as_needed",children:" la demande"})]})]}),e.jsxs(oe,{w:"full",children:[e.jsx(Z,{children:"Priorit"}),e.jsxs("select",{value:M.priority,onChange:re=>N({...M,priority:re.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:[e.jsx("option",{value:"low",children:"Basse"}),e.jsx("option",{value:"medium",children:"Moyenne"}),e.jsx("option",{value:"high",children:"Haute"}),e.jsx("option",{value:"critical",children:"Critique"})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{mr:3,onClick:()=>P(!1),variant:"ghost",children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:$,children:"Programmer"})]})]})]})]})]})]})]})]}):e.jsxs(J,{align:"start",spacing:4,py:2,children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",children:[e.jsx(k,{fontWeight:"600",children:"Slectionnez un vhicule"}),e.jsx(k,{fontSize:"sm",children:"Choisissez un vhicule ci-dessous pour voir son historique d'entretien et son planning."})]})]}),e.jsx(mt,{columns:{base:1,sm:2,md:3},gap:3,w:"full",children:t&&t.map(re=>{const ce=re.parc||re.id||re.slug;return e.jsx(Pe,{variant:"outline",cursor:"pointer",_hover:{shadow:"md"},onClick:()=>I(re),children:e.jsxs(ke,{children:[e.jsx(Te,{size:"sm",children:ce}),e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[re.marque," ",re.modele]}),e.jsx(Q,{mt:2,size:"sm",colorScheme:"blue",w:"full",children:"Consulter"})]})},ce)})})]})}function ree(){const t=on(),n=Ua(),[r,i]=v.useState([]),[l,u]=v.useState(!0),[d,p]=v.useState({}),[f,g]=v.useState({}),[x,y]=v.useState(!1),[b,w]=v.useState(!1),[C,_]=v.useState(null),[A,D]=v.useState([]),[P,M]=v.useState(0),[N,z]=v.useState(!1),I=v.useCallback(async()=>{try{u(!0);const G=await yt.get("/vehicles");i(Array.isArray(G)?G:G?.vehicles||[])}catch(G){t({status:"error",title:"Chargement des vhicules",description:G.message||"Impossible de charger la liste"})}finally{u(!1)}},[t]);v.useEffect(()=>{I()},[I]),v.useEffect(()=>{if(!r||r.length===0)return;let G=!1;return(async()=>{const W=r.slice(0,24);await Promise.all(W.map(async me=>{const F=me.parc||me.id||me.slug;if(F)try{const fe=await yt.get(`/vehicles/${encodeURIComponent(F)}/usages`);if(G)return;const te=Array.isArray(fe)?fe.find(R=>!R.endedAt):null;p(R=>({...R,[F]:te?{active:!0,startedAt:te.startedAt,conducteur:te.conducteur}:{active:!1}}))}catch{}}))})(),()=>{G=!0}},[r]);const V=async()=>{if(!(!r||r.length===0)){y(!0);try{const G={};await Promise.all(r.map(async U=>{const W=U.parc||U.id||U.slug;if(W)try{const me=await yt.get(`/vehicles/${encodeURIComponent(W)}/usages`);G[W]=Array.isArray(me)?me:[]}catch{G[W]=[]}})),g(G)}catch(G){console.error("Erreur chargement usages:",G)}finally{y(!1)}}},$=v.useMemo(()=>!r||r.length===0?null:e.jsx(mt,{columns:{base:1,sm:2,lg:3},gap:4,mt:4,children:r.map(G=>{const U=G.parc||G.id||G.slug,W=d[U]||{};let me=[],F=0;try{if(G.fuel!==void 0&&G.fuel!==null)F=Number(G.fuel)||0;else if(G.caracteristiques){typeof G.caracteristiques=="string"?me=JSON.parse(G.caracteristiques):Array.isArray(G.caracteristiques)&&(me=G.caracteristiques);const te=me.find(R=>R.label==="Niveau gasoil");te&&(F=Number(te.value)||0)}}catch(te){console.warn("Erreur parsing caractristiques:",te)}const fe=Array.isArray(me)&&me.length>0;return e.jsx(Pe,{variant:"outline",_hover:{shadow:"md"},children:e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:3,children:[e.jsxs(ee,{justify:"space-between",w:"full",children:[e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(Te,{size:"md",children:U}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:[G.marque,G.modele].filter(Boolean).join(" ")||G.titre||"Vhicule"})]}),e.jsx(tee,{etat:G.etat||G.statut})]}),fe?e.jsxs(ee,{w:"full",children:[e.jsx(Cn,{as:FM,color:"green.500"}),e.jsxs(k,{fontSize:"sm",color:"green.600",children:[me.length," info(s) technique(s)"]})]}):e.jsxs(ee,{w:"full",children:[e.jsx(Cn,{as:th,color:"orange.500"}),e.jsx(k,{fontSize:"sm",color:"orange.600",children:"Aucune info technique"})]}),e.jsxs(ee,{w:"full",spacing:2,children:[e.jsx(Cn,{as:vJ,color:"blue.500"}),e.jsxs(k,{fontSize:"sm",color:"blue.600",children:["Gasoil: ",F,"%"]}),e.jsx(Q,{size:"xs",variant:"outline",onClick:()=>{_(G),D(me),M(F),w(!0)},children:"Infos techniques"})]}),e.jsxs(ee,{spacing:2,flexWrap:"wrap",children:[W.active?e.jsxs(Yo,{colorScheme:"purple",size:"sm",children:[e.jsx($b,{as:Eu}),e.jsx(Zo,{children:"Pointage en cours"})]}):e.jsx(Yo,{size:"sm",colorScheme:"gray",variant:"subtle",children:e.jsx(Zo,{children:"Disponible"})}),(G.etat==="en_panne"||G.statut==="en_panne")&&e.jsxs(Yo,{colorScheme:"red",size:"sm",children:[e.jsx($b,{as:th}),e.jsx(Zo,{children:"Panne"})]})]}),e.jsx(xn,{}),e.jsxs(ee,{w:"full",spacing:2,children:[e.jsx(Q,{size:"sm",leftIcon:e.jsx(Bs,{}),onClick:()=>n(`/dashboard/vehicules/${encodeURIComponent(U)}`),flex:1,children:"diter"}),e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>n(`/mobile/v/${encodeURIComponent(U)}`),flex:1,children:"Pointage"})]})]})})},U)})}),[r,n,d]),je=[{id:"vehicles",label:"Parc vhicules",icon:Tp,description:"Vue d'ensemble",render:()=>e.jsx(J,{align:"stretch",spacing:4,children:l?e.jsxs(ee,{spacing:3,pt:4,children:[e.jsx(pn,{}),e.jsx(k,{children:"Chargement des vhicules"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"600",children:"Infos techniques"}),e.jsx(k,{fontSize:"sm",children:'Utilisez le bouton "Infos techniques" de chaque carte pour mettre  jour le niveau de gasoil et les caractristiques.'})]})]}),$||e.jsx(k,{mt:2,children:"Aucun vhicule pour le moment."})]})})},{id:"history",label:"Historique",icon:Qp,description:"Usages rcents",render:()=>e.jsxs(J,{align:"start",spacing:4,py:2,children:[e.jsxs(ee,{justify:"space-between",w:"full",children:[e.jsxs(ee,{children:[e.jsx(Qp,{}),e.jsx(Te,{size:"sm",children:"Historique des usages"})]}),e.jsx(Q,{size:"sm",onClick:V,isLoading:x,children:"Charger"})]}),x?e.jsxs(ee,{spacing:3,children:[e.jsx(pn,{size:"sm"}),e.jsx(k,{children:"Chargement de l'historique..."})]}):Object.keys(f).length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),`Cliquez sur "Charger" pour afficher l'historique des usages`]}):e.jsx(J,{align:"stretch",w:"full",spacing:4,children:r.map(G=>{const U=G.parc||G.id||G.slug,me=(f[U]||[]).filter(F=>F.endedAt);return me.length===0?null:e.jsx(Pe,{variant:"outline",children:e.jsxs(ke,{children:[e.jsxs(Te,{size:"sm",mb:3,children:[U," - ",me.length," usage(s)"]}),e.jsxs(Fn,{size:"sm",variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Dbut"}),e.jsx(_e,{children:"Fin"}),e.jsx(_e,{children:"Conducteur"}),e.jsx(_e,{children:"Note"})]})}),e.jsx(Wn,{children:me.slice(0,5).map(F=>e.jsxs(bt,{children:[e.jsx(Ee,{children:new Date(F.startedAt).toLocaleDateString("fr-FR")}),e.jsx(Ee,{children:F.endedAt?new Date(F.endedAt).toLocaleDateString("fr-FR"):"-"}),e.jsx(Ee,{children:F.conducteur||"-"}),e.jsx(Ee,{fontSize:"sm",color:"gray.600",children:F.note||"-"})]},F.id))})]}),me.length>5&&e.jsxs(k,{mt:2,fontSize:"sm",color:"gray.500",children:["... et ",me.length-5," autres usage(s)"]})]})},U)})})]})},{id:"maintenance",label:"Entretien",icon:Tp,description:"Planification & suivi",render:()=>e.jsx(nee,{vehicles:r,apiClient:yt})},{id:"administrative",label:"Administratif",icon:th,description:"Documents & obligations",render:()=>e.jsxs(J,{align:"start",spacing:3,py:2,children:[e.jsxs(ee,{children:[e.jsx(th,{}),e.jsx(Te,{size:"sm",children:"Situation administrative"})]}),e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),"Cette section sera dveloppe prochainement pour grer : documents, assurances, contrle technique, conformit."]}),e.jsx(k,{opacity:.8,children:"En attendant, vous pouvez ajouter ces informations dans les notes de chaque vhicule via la page d'dition."})]})},{id:"checkins",label:"Pointages",icon:Eu,description:"Sessions actives",render:()=>e.jsxs(J,{align:"start",spacing:4,py:2,children:[e.jsxs(ee,{children:[e.jsx(Eu,{}),e.jsx(Te,{size:"sm",children:"Pointages actifs"})]}),r.filter(G=>{const U=G.parc||G.id||G.slug;return d[U]?.active}).length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucun pointage en cours actuellement"]}):e.jsx(mt,{columns:{base:1,md:2},gap:4,w:"full",children:r.map(G=>{const U=G.parc||G.id||G.slug,W=d[U];if(!W?.active)return null;const me=W.startedAt?Math.floor((Date.now()-new Date(W.startedAt).getTime())/(1e3*60)):0;return e.jsx(Pe,{variant:"outline",borderColor:"purple.300",children:e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsx(Te,{size:"sm",children:U}),e.jsxs(ee,{children:[e.jsx(Cn,{as:Eu,color:"purple.500"}),e.jsxs(k,{fontSize:"sm",children:["En cours depuis ",me," min"]})]}),W.conducteur&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Conducteur: ",W.conducteur]}),e.jsx(Q,{size:"sm",colorScheme:"purple",onClick:()=>n(`/mobile/v/${encodeURIComponent(U)}`),children:"Voir le pointage"})]})})},U)})})]})}],de=[e.jsx(Q,{leftIcon:e.jsx(Fa,{}),variant:"outline",size:"sm",onClick:I,isLoading:l,children:"Actualiser"},"refresh"),e.jsx(Q,{leftIcon:e.jsx(Bs,{}),colorScheme:"blue",size:"sm",onClick:()=>n("/dashboard/vehicules"),children:"Gestion complte"},"manage")];return e.jsxs(e.Fragment,{children:[e.jsx(Bh,{title:"RtroBus",subtitle:"Suivi d'entretien, d'usages et de disponibilit du parc.",sections:je,defaultSectionId:"vehicles",sidebarTitle:"RtroBus",sidebarSubtitle:"Parc & maintenance",sidebarTitleIcon:Tp,versionLabel:"RtroBus v3",headerActions:de}),e.jsxs(Et,{isOpen:b,onClose:()=>w(!1),size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsxs(Tt,{children:["Informations techniques : ",C?.parc]}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Z,{children:"Niveau actuel du gasoil (%)"}),e.jsxs(oe,{children:[e.jsxs(oe,{position:"relative",h:"60px",mb:6,children:[e.jsx(oe,{position:"absolute",top:"20px",left:"0",right:"0",h:"2px",bg:"gray.300"}),[0,50,100].map(G=>e.jsxs(oe,{position:"absolute",left:`${G}%`,top:"12px",transform:"translateX(-50%)",textAlign:"center",children:[e.jsx(oe,{w:"3px",h:"16px",bg:"gray.800",mx:"auto",mb:1}),e.jsxs(k,{fontSize:"xs",fontWeight:"bold",children:[G,"%"]})]},G)),Array.from({length:99}).map((G,U)=>{const W=U+1;return W===50?null:e.jsx(oe,{position:"absolute",left:`${W}%`,top:"16px",transform:"translateX(-50%)",w:"1px",h:"8px",bg:"gray.400"},`small-${W}`)}),e.jsxs(oe,{position:"absolute",left:`${P}%`,top:"0",transform:"translateX(-50%)",display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsxs(k,{fontSize:"sm",fontWeight:"bold",color:"blue.600",children:[P,"%"]}),e.jsx(oe,{w:"2px",h:"20px",bg:"blue.600",mt:1})]})]}),e.jsxs(gM,{value:P,onChange:M,min:0,max:100,step:1,children:[e.jsx(vM,{children:e.jsx(yM,{})}),e.jsx(xM,{})]})]}),e.jsx(xn,{}),e.jsx(oz,{value:A,onChange:D})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:()=>w(!1),children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",isLoading:N,onClick:async()=>{try{z(!0);const G=Array.isArray(A)?[...A]:[];await yt.put(`/vehicles/${encodeURIComponent(C.parc)}`,{fuel:Number(P),caracteristiques:G}),i(U=>U.map(W=>(W.parc||W.id||W.slug)===C.parc?{...W,fuel:Number(P),caracteristiques:G}:W)),t({status:"success",title:"Carburant et caractristiques mis  jour"}),z(!1),w(!1)}catch(G){t({status:"error",title:"Erreur lors de la mise  jour",description:G.message}),z(!1)}},children:"Enregistrer"})]})]})]})]})}const Ap={getAll:async()=>yt.get("/vehicles"),getByParc:async t=>yt.get(`/vehicles/${t}`),create:async t=>yt.post("/vehicles",t),update:async(t,n)=>yt.put(`/vehicles/${t}`,n),delete:async t=>yt.delete(`/vehicles/${t}`)},za={getAll:async()=>yt.get("/events"),getById:async t=>yt.get(`/events/${t}`),create:async t=>yt.post("/events",t),update:async(t,n)=>yt.put(`/events/${t}`,n),delete:async t=>yt.delete(`/events/${t}`),publish:async(t,n)=>yt.put(`/events/${t}`,{status:n})},vA="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/+$/,""),Yb=()=>{const t=localStorage.getItem("token");return t?{Authorization:`Bearer ${t}`}:{}},see=async t=>{const n=(t.headers.get("content-type")||"").toLowerCase();if(!(n.includes("application/json")||n.includes("+json"))){const r=await t.text().catch(()=>"");throw new Error(`Rponse non-JSON (${t.status}) ${r?.slice(0,200)||""}`)}},Zb=(t,n={},r=8e3)=>{const i=new AbortController,l=setTimeout(()=>i.abort(),r);return fetch(t,{...n,signal:i.signal}).finally(()=>clearTimeout(l))},up=t=>{const n=String(t||"").replace(/^\/+|\/+$/g,"");return vA?`${vA}/${n}`:`/${n}`},Xb=["api/members","members","api/v1/members","v1/members"];async function Kf(t,n,r){let i=null;for(const l of Xb)try{const u=up(l),d=await Zb(u,{method:t,headers:{Accept:"application/json","Content-Type":n instanceof FormData?void 0:"application/json",...Yb(),...r||{}},body:n==null?void 0:n instanceof FormData?n:JSON.stringify(n)});if(!d.ok){i=new Error(`HTTP ${d.status}`);continue}return await see(d),await d.json()}catch(u){i=u;continue}throw i||new Error("Aucun endpoint membre valide")}const Rl={async getAll(){try{const t=await Kf("GET");return Array.isArray(t)?{members:t}:Array.isArray(t?.members)?t:Array.isArray(t?.data)?{members:t.data}:{members:[]}}catch{return{members:[]}}},async testConnectivity(){const t=[up("api/health"),up("health"),up(Xb[0])];for(const n of t)try{if((await Zb(n,{method:"GET",headers:{...Yb()}},3e3)).ok)return!0}catch{}return!1},async create(t){const n=await Kf("POST",t);return n?.member||n?.data||n},async update(t,n){try{const r=await Kf("PATCH",{id:t,...n},{"X-Method-Override":"PATCH"});return r?.member||r?.data||r}catch{const r=await Kf("PUT",{id:t,...n});return r?.member||r?.data||r}},async delete(t){const n={id:t};try{const r=await Kf("DELETE",n);return r?.ok===!0?r:{ok:!0}}catch(r){for(const i of Xb)try{const l=up(`${i}/${encodeURIComponent(t)}`);if((await Zb(l,{method:"DELETE",headers:{...Yb()}})).ok)return{ok:!0}}catch{}throw r}}},iee="rbe:announcements";function aee(){try{const t=localStorage.getItem(iee);if(!t)return[];const n=JSON.parse(t);if(!Array.isArray(n))return[];const r=Date.now();return n.filter(i=>i&&i.active&&(!i.expiresAt||new Date(i.expiresAt).getTime()>r))}catch(t){return console.warn("loadFlashes:",t),[]}}function bj(){const t=es(),[n,r]=v.useState([]),[i,l]=v.useState({vehicles:{total:0,active:0,loading:!0},events:{total:0,upcoming:0,published:0,loading:!0},members:{total:0,active:0,loading:!0}}),[u,d]=v.useState(!0),[p,f]=v.useState([]),[g,x]=v.useState(0),y=on(),b=Tn("white","gray.800"),w=Tn("linear(to-r, blue.500, purple.600)","linear(to-r, blue.600, purple.700)"),C=Tn("gray.200","gray.700");v.useEffect(()=>{r(aee()),_();const $=setInterval(_,300*1e3);return()=>clearInterval($)},[]);const _=async()=>{console.log(" Chargement des donnes du dashboard..."),M(),N(),z(),A()},A=async()=>{try{const $=await yt.get("/api/retro-news"),he=(Array.isArray($.data)?$.data:[]).filter(re=>re.published).sort((re,ce)=>re.featured!==ce.featured?ce.featured-re.featured:new Date(ce.publishedAt)-new Date(re.publishedAt));f(he)}catch($){console.error("Erreur chargement RtroActus:",$),f([])}},D=async $=>{const ae=encodeURIComponent(`RtroActus: ${$?.title||"News"}`),he=encodeURIComponent(`Dcouvrez cette actualit de RtroBus Essonne:

${$?.title||"Sans titre"}

${$?.content||""}

Site: https://retrobus-essonne.fr`);window.location.href=`mailto:?subject=${ae}&body=${he}`},P=async $=>{if(navigator.share)try{await navigator.share({title:$?.title||"RtroActus",text:$?.content||"",url:"https://retrobus-essonne.fr"})}catch(ae){ae.name!=="AbortError"&&console.error("Erreur partage web:",ae)}else{const ae=`${$?.title}
${$?.content}
https://retrobus-essonne.fr`;navigator.clipboard.writeText(ae).then(()=>{y({title:"Copi!",description:"L'actualit a t copie dans le presse-papiers",status:"success",duration:2e3,isClosable:!0})})}},M=async()=>{try{if(console.log(" Chargement des vhicules..."),!Ap||typeof Ap.getAll!="function"){console.warn("vehiculesAPI non disponible"),l(re=>({...re,vehicles:{total:0,active:0,loading:!1}}));return}const $=await Ap.getAll();console.log(" Rponse vhicules:",$);let ae=[];$?.data?ae=Array.isArray($.data)?$.data:[$.data]:Array.isArray($)&&(ae=$);const he={total:ae.length,active:ae.filter(re=>{const ce=re?.statut||re?.status||re?.etat||"";return ce==="ACTIF"||ce==="ACTIVE"||ce==="active"||ce==="En service"}).length,loading:!1};console.log(" Stats vhicules:",he),l(re=>({...re,vehicles:he}))}catch($){console.error(" Erreur chargement vhicules:",$),l(ae=>({...ae,vehicles:{total:0,active:0,loading:!1}}))}},N=async()=>{try{if(console.log(" Chargement des vnements..."),!za||typeof za.getAll!="function"){console.warn("eventsAPI non disponible"),l(ce=>({...ce,events:{total:0,upcoming:0,published:0,loading:!1}}));return}const $=await za.getAll();console.log(" Rponse vnements:",$);let ae=[];$?.data?ae=Array.isArray($.data)?$.data:[$.data]:Array.isArray($)&&(ae=$);const he=new Date,re={total:ae.length,upcoming:ae.filter(ce=>{try{const Se=new Date(ce?.date||ce?.dateEvent||ce?.startDate),je=ce?.status||ce?.statut||"";return Se>he&&(je==="PUBLISHED"||je==="published"||je==="Publi")}catch{return!1}}).length,published:ae.filter(ce=>{const Se=ce?.status||ce?.statut||"";return Se==="PUBLISHED"||Se==="published"||Se==="Publi"}).length,loading:!1};console.log(" Stats vnements:",re),l(ce=>({...ce,events:re}))}catch($){console.error(" Erreur chargement vnements:",$),l(ae=>({...ae,events:{total:0,upcoming:0,published:0,loading:!1}}))}},z=async()=>{try{if(console.log(" Chargement des membres..."),!Rl||typeof Rl.getAll!="function"){console.warn("membersAPI non disponible"),l(re=>({...re,members:{total:0,active:0,loading:!1}}));return}const $=await Rl.getAll();console.log(" Rponse membres:",$);let ae=[];$?.members?ae=Array.isArray($.members)?$.members:[$.members]:$?.data?ae=Array.isArray($.data)?$.data:[$.data]:Array.isArray($)&&(ae=$);const he={total:ae.length,active:ae.filter(re=>{const ce=re?.membershipStatus||re?.statut||re?.status||re?.adhesionStatus||"";return ce==="ACTIVE"||ce==="active"||ce==="Actif"||ce===" jour"}).length,loading:!1};console.log(" Stats membres:",he),l(re=>({...re,members:he}))}catch($){console.error(" Erreur chargement membres:",$),l(ae=>({...ae,members:{total:0,active:0,loading:!1}}))}};v.useEffect(()=>{!i.vehicles.loading&&!i.events.loading&&!i.members.loading&&u&&(console.log(" Toutes les donnes sont charges"),d(!1))},[i,u]);const I=()=>{const $=new Date().getHours();return $<12?"Bonjour":$<17?"Bon aprs-midi":"Bonsoir"},V=v.useMemo(()=>n.map($=>({id:$.id,message:$.message,category:$.category||"info",createdAt:$.createdAt})),[n]);return u?e.jsx(ei,{maxW:"container.xl",py:8,children:e.jsxs(J,{spacing:8,children:[e.jsxs(oe,{bgGradient:w,color:"white",p:8,borderRadius:"xl",textAlign:"center",w:"full",children:[e.jsx(Te,{size:"xl",children:"Chargement des donnes..."}),e.jsx(k,{mt:2,opacity:.9,children:"Rcupration des vhicules, vnements et membres"})]}),e.jsx(pn,{size:"xl",color:"blue.500"})]})}):e.jsxs(ei,{maxW:"container.xl",py:8,fontFamily:"Montserrat, sans-serif",children:[e.jsxs(oe,{bgGradient:w,color:"white",p:8,borderRadius:"xl",mb:8,textAlign:"center",children:[e.jsxs(Te,{size:"xl",mb:4,children:[I(),", ",t?.prenom||t?.email||"Utilisateur"," ! "]}),e.jsx(k,{fontSize:"lg",opacity:.9,children:"Voici un aperu de votre activit RtroBus Essonne"})]}),e.jsxs(mt,{columns:{base:1,lg:4},spacing:8,children:[e.jsx(Vu,{colSpan:{base:1,lg:3},children:e.jsxs(J,{spacing:8,align:"stretch",children:[e.jsxs(mt,{columns:{base:2,md:4},spacing:6,children:[e.jsx(Pe,{bg:b,borderColor:C,shadow:"lg",children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{color:"gray.600",children:"Vhicules actifs"}),e.jsx(Dt,{color:"blue.500",children:e.jsxs(ee,{children:[e.jsx(Cn,{as:Wu}),i.vehicles.loading?e.jsx(pn,{size:"sm"}):e.jsxs(k,{children:[i.vehicles.active,"/",i.vehicles.total]})]})}),e.jsx(Rc,{value:i.vehicles.total>0?i.vehicles.active/i.vehicles.total*100:0,colorScheme:"blue",size:"sm",mt:2,isIndeterminate:i.vehicles.loading})]})})}),e.jsx(Pe,{bg:b,borderColor:C,shadow:"lg",children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{color:"gray.600",children:"vnements  venir"}),e.jsx(Dt,{color:"green.500",children:e.jsxs(ee,{children:[e.jsx(Cn,{as:Os}),i.events.loading?e.jsx(pn,{size:"sm"}):e.jsxs(k,{children:[i.events.upcoming,"/",i.events.total]})]})}),e.jsx(Rc,{value:i.events.total>0?i.events.upcoming/i.events.total*100:0,colorScheme:"green",size:"sm",mt:2,isIndeterminate:i.events.loading})]})})}),e.jsx(Pe,{bg:b,borderColor:C,shadow:"lg",children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{color:"gray.600",children:"Membres actifs"}),e.jsx(Dt,{color:"purple.500",children:e.jsxs(ee,{children:[e.jsx(Cn,{as:Va}),i.members.loading?e.jsx(pn,{size:"sm"}):e.jsxs(k,{children:[i.members.active,"/",i.members.total]})]})}),e.jsx(Rc,{value:i.members.total>0?i.members.active/i.members.total*100:0,colorScheme:"purple",size:"sm",mt:2,isIndeterminate:i.members.loading})]})})})]}),p.length>0&&e.jsxs(Pe,{bg:b,borderColor:C,shadow:"lg",children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",fontWeight:"700",children:" Les RtroActus"}),e.jsxs(ee,{spacing:2,children:[e.jsx(xt,{icon:e.jsx(BM,{}),size:"sm",variant:"ghost",onClick:()=>x($=>$===0?p.length-1:$-1),"aria-label":"Actu prcdente",isDisabled:p.length<=1}),e.jsxs(k,{fontSize:"xs",color:"gray.500",children:[g+1," / ",p.length]}),e.jsx(xt,{icon:e.jsx(Gx,{}),size:"sm",variant:"ghost",onClick:()=>x($=>($+1)%p.length),"aria-label":"Actu suivante",isDisabled:p.length<=1})]})]})}),e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:3,children:[e.jsx(Te,{size:"sm",color:"blue.600",children:p[g]?.title||"Sans titre"}),p[g]?.date&&e.jsxs(ee,{spacing:2,color:"gray.500",fontSize:"sm",children:[e.jsx(Cn,{as:Os}),e.jsx(k,{children:new Date(p[g].date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsx(k,{fontSize:"sm",color:"gray.700",children:p[g]?.content||""}),p[g]?.imageUrl&&e.jsx(Li,{src:p[g].imageUrl,alt:p[g]?.title,maxH:"150px",w:"100%",objectFit:"cover",borderRadius:"md"}),e.jsxs(ee,{spacing:2,pt:4,w:"100%",children:[e.jsx(Q,{size:"sm",leftIcon:e.jsx(gJ,{}),colorScheme:"blue",variant:"outline",flex:1,onClick:()=>P(p[g]),children:"Partager"}),e.jsx(Q,{size:"sm",leftIcon:e.jsx($l,{}),colorScheme:"cyan",variant:"outline",flex:1,onClick:()=>D(p[g]),children:"Email"})]})]})})]})]})}),e.jsx(Vu,{children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(Pe,{bg:b,borderColor:C,shadow:"lg",children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",fontWeight:"700",children:"Notifications"}),e.jsx(Qe,{colorScheme:"blue",variant:"subtle",children:n.length})]})}),e.jsx(ke,{children:e.jsx(J,{spacing:3,align:"stretch",children:V.length===0?e.jsx(k,{color:"gray.500",fontSize:"sm",textAlign:"center",py:4,children:"Aucune notification"}):V.slice(0,5).map($=>e.jsx(oe,{p:3,borderRadius:"lg",bg:"gray.50",children:e.jsxs(ee,{justify:"space-between",align:"start",children:[e.jsxs(J,{align:"start",spacing:1,flex:1,children:[e.jsx(k,{fontSize:"sm",fontWeight:"600",children:$.message}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:$.createdAt?new Date($.createdAt).toLocaleDateString("fr-FR"):""})]}),e.jsx(Qe,{colorScheme:"blue",variant:"subtle",fontSize:"xs",children:$.category})]})},$.id))})})]}),e.jsxs(Pe,{bg:b,borderColor:C,shadow:"lg",children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",fontWeight:"700",children:"Liens utiles"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsx(Q,{as:mr,to:"/dashboard/myrbe",variant:"ghost",justifyContent:"flex-start",leftIcon:e.jsx(lJ,{}),size:"sm",children:"MyRBE"}),e.jsxs(Q,{as:mr,to:"/dashboard/vehicules",variant:"ghost",justifyContent:"flex-start",leftIcon:e.jsx(Wu,{}),size:"sm",children:["Vhicules (",i.vehicles.total,")"]}),e.jsxs(Q,{as:mr,to:"/dashboard/events-management",variant:"ghost",justifyContent:"flex-start",leftIcon:e.jsx(Os,{}),size:"sm",children:["vnements (",i.events.total,")"]}),e.jsxs(Q,{as:mr,to:"/dashboard/members-management",variant:"ghost",justifyContent:"flex-start",leftIcon:e.jsx(Va,{}),size:"sm",children:["Membres (",i.members.total,")"]}),e.jsx(Q,{as:mr,to:"/admin",variant:"ghost",justifyContent:"flex-start",leftIcon:e.jsx(Hu,{}),size:"sm",children:"Finance"}),e.jsx(xn,{my:1}),e.jsx(Q,{as:mr,to:"/dashboard/api-diagnostics",variant:"ghost",justifyContent:"flex-start",leftIcon:e.jsx(aJ,{}),size:"sm",colorScheme:"orange",children:" Diagnostiques API"})]})})]}),e.jsxs(Ut,{status:"info",borderRadius:"md",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",children:"APIs disponibles"}),e.jsx(k,{fontSize:"xs",children:"Les donnes sont rcupres en temps rel quand les APIs sont disponibles."})]})]})]})})]})]})}const Fd="https://attractive-kindness-rbe-serveurs.up.railway.app";function Sj(t){return`retromail:read:${t||"anon"}`}function yA(t){return`retromail:released:${t}`}function oee(){const{matricule:t,prenom:n,isAdmin:r}=es(),i=on(),[l,u]=v.useState(!0),[d,p]=v.useState([]),[f,g]=v.useState([]),[x,y]=v.useState(null),[b,w]=v.useState("");v.useEffect(()=>{let N=!0;return(async()=>{u(!0);try{const z=await fetch(`${Fd.replace(/\/$/,"")}/retromail/list`);if(!N)return;if(!z.ok)throw new Error(`status ${z.status}`);const I=await z.json();p(Array.isArray(I)?I:[])}catch(z){console.warn("retromail list failed",z),p(null)}finally{N&&u(!1)}})(),()=>{N=!1}},[]),v.useEffect(()=>{let N=!0;if(!d||d.length===0){g([]);return}return(async()=>{try{const z=await Promise.all(d.map(async V=>{try{const $=await fetch(`${Fd.replace(/\/$/,"")}/retromail/${encodeURIComponent(V)}`);if(!$.ok)return null;const ae=await $.json();return{filename:V,json:ae}}catch{return null}}));if(!N)return;const I=z.filter(Boolean).sort((V,$)=>{const ae=new Date(V.json.createdAt||0).getTime();return new Date($.json.createdAt||0).getTime()-ae});g(I),!x&&I.length>0&&y(I[0].filename)}catch(z){console.error(z)}})(),()=>{N=!1}},[d]);const C=N=>{const z=Sj(t);try{const I=localStorage.getItem(z),V=I?JSON.parse(I):{};V[N]=Date.now(),localStorage.setItem(z,JSON.stringify(V))}catch{}},_=N=>{try{const z=localStorage.getItem(Sj(t));if(!z)return!1;const I=JSON.parse(z);return!!(I&&I[N])}catch{return!1}},A=N=>{try{localStorage.setItem(yA(N),"1"),i({status:"success",title:"Vido libre",description:"Le tlchargement est maintenant autoris localement."}),g(z=>[...z])}catch(z){i({status:"error",title:"Impossible",description:String(z.message)})}},D=N=>localStorage.getItem(yA(N))==="1",P=v.useMemo(()=>{if(!f)return[];const N=(b||"").trim().toLowerCase();return N?f.filter(z=>{const I=z.json||{};return String(I.parc||"").toLowerCase().includes(N)||String(I.id||"").toLowerCase().includes(N)||String(I.description||"").toLowerCase().includes(N)}):f},[f,b]),M=f.find(N=>N.filename===x);return v.useEffect(()=>{x&&(C(x),g(N=>[...N]))},[x]),e.jsxs(oe,{p:6,children:[e.jsx(Te,{size:"lg",mb:4,children:"RtroMail"}),e.jsxs(sr,{gap:6,align:"stretch",children:[e.jsxs(oe,{w:{base:"100%",md:"360px"},borderWidth:"1px",borderRadius:"md",p:3,bg:"white",children:[e.jsxs(ee,{mb:3,children:[e.jsx(ge,{placeholder:"Rechercher par parc / id / texte",value:b,onChange:N=>w(N.target.value)}),e.jsx(Q,{size:"sm",onClick:()=>{w("")},children:"Effacer"})]}),l&&e.jsx(yn,{p:6,children:e.jsx(pn,{})}),!l&&d===null&&e.jsxs(oe,{p:4,bg:"orange.50",borderRadius:"md",children:[e.jsx(k,{color:"orange.800",fontWeight:"600",children:"API Retromail non disponible"}),e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Aucune liste trouve. Vrifie que le serveur expose ",e.jsx("code",{children:"/retromail/list"}),"."]})]}),!l&&P&&P.length===0&&e.jsx(k,{color:"gray.600",mt:3,children:"Aucun message."}),e.jsx(J,{align:"stretch",spacing:2,mt:3,children:P.map(N=>{const z=N.json||{},I=z.parc?`Parc ${z.parc}`:`Fiche ${z.id||N.filename}`,V=(z.description||"").slice(0,120),$=!_(N.filename);return e.jsx(Pe,{size:"sm",onClick:()=>y(N.filename),cursor:"pointer",bg:x===N.filename?"gray.50":"white",children:e.jsx(zt,{children:e.jsxs(sr,{justify:"space-between",align:"center",children:[e.jsxs(oe,{children:[e.jsxs(k,{fontWeight:"600",children:[I," ",z.id?e.jsx(Qe,{ml:2,children:`#${z.id}`}):null]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:V||e.jsx("i",{children:"(Pas de description)"})})]}),e.jsxs(oe,{textAlign:"right",children:[$?e.jsx(Qe,{colorScheme:"red",children:"Nouveau"}):e.jsx(k,{fontSize:"xs",color:"gray.500",children:"Lu"}),e.jsx(k,{fontSize:"xs",color:"gray.400",children:z.createdAt?new Date(z.createdAt).toLocaleString():""})]})]})})},N.filename)})})]}),e.jsx(oe,{flex:"1",borderWidth:"1px",borderRadius:"md",p:4,bg:"white",children:M?e.jsxs(e.Fragment,{children:[e.jsxs(sr,{justify:"space-between",align:"center",mb:3,children:[e.jsxs(oe,{children:[e.jsxs(Te,{size:"md",children:["Fiche pointage  ",M.json.parc?`Parc ${M.json.parc}`:M.json.id]}),e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["ID: ",M.json.id||M.filename,"  ",M.json.createdAt?new Date(M.json.createdAt).toLocaleString():""]})]}),e.jsx(oe,{children:e.jsxs(ee,{spacing:2,children:[e.jsx(Q,{size:"sm",as:"a",href:`${Fd.replace(/\/$/,"")}/retromail/${encodeURIComponent(M.filename.replace(/\.json$/,"")+".pdf")}`,target:"_blank",rel:"noreferrer",children:"Tlcharger PDF"}),e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>{const N=Sj(t),z=localStorage.getItem(N),I=z?JSON.parse(z):{};I[M.filename]?delete I[M.filename]:I[M.filename]=Date.now(),localStorage.setItem(N,JSON.stringify(I)),g(V=>[...V])},children:_(M.filename)?"Marquer non lu":"Marquer lu"})]})})]}),e.jsx(xn,{mb:3}),e.jsxs(oe,{mb:4,children:[e.jsx(k,{fontWeight:"600",children:"Initiateur :"}),e.jsx(k,{mb:2,children:M.json.conducteur||""}),e.jsx(k,{fontWeight:"600",children:"Participants :"}),e.jsx(k,{mb:2,children:(M.json.participants||[]).join(", ")||""}),e.jsx(k,{fontWeight:"600",children:"Description :"}),e.jsx(k,{mb:3,whiteSpace:"pre-wrap",children:M.json.description||""}),e.jsx(k,{fontWeight:"600",mb:2,children:"Images :"}),(M.json.files||[]).filter(N=>(N.mime||"").startsWith("image/")).length===0?e.jsx(k,{color:"gray.600",mb:2,children:"Aucune image."}):e.jsx(mt,{columns:{base:1,md:3},gap:3,mb:3,children:(M.json.files||[]).filter(N=>(N.mime||"").startsWith("image/")).map((N,z)=>e.jsxs(oe,{borderWidth:"1px",p:2,borderRadius:"md",bg:"gray.50",children:[e.jsx(Li,{src:`${Fd.replace(/\/$/,"")}/retromail/uploads/${encodeURIComponent(N.filename)}`,alt:N.originalname||N.filename,objectFit:"cover",maxH:"160px",w:"100%"}),e.jsxs(ee,{mt:2,justify:"space-between",children:[e.jsx(k,{fontSize:"sm",noOfLines:1,children:N.originalname||N.filename}),e.jsx(Q,{size:"sm",as:"a",href:`${Fd.replace(/\/$/,"")}/retromail/uploads/${encodeURIComponent(N.filename)}`,target:"_blank",rel:"noreferrer",children:"Ouvrir"})]})]},z))}),e.jsx(k,{fontWeight:"600",mb:2,children:"Vidos (spares)"}),(M.json.files||[]).filter(N=>(N.mime||"").startsWith("video/")||/\.(mp4|mov|avi|mkv)$/i.test(N.originalname||N.filename)).length===0?e.jsx(k,{color:"gray.600",children:"Aucune vido."}):e.jsx(J,{align:"stretch",spacing:2,mb:3,children:(M.json.files||[]).filter(N=>(N.mime||"").startsWith("video/")||/\.(mp4|mov|avi|mkv)$/i.test(N.originalname||N.filename)).map((N,z)=>{const I=D(N.filename);return e.jsx(oe,{p:3,borderWidth:"1px",borderRadius:"md",children:e.jsxs(sr,{justify:"space-between",align:"center",children:[e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"600",noOfLines:1,children:N.originalname||N.filename}),e.jsxs(k,{fontSize:"sm",color:"gray.500",children:[N.size/1024|0," KB"]}),!I&&e.jsx(k,{fontSize:"xs",color:"orange.600",children:"Tlchargement restreint ( analyser)"})]}),e.jsxs(ee,{children:[r&&!I&&e.jsx(Q,{size:"sm",colorScheme:"green",onClick:()=>A(N.filename),children:"Librer le tlchargement"}),e.jsx(Q,{size:"sm",as:"a",href:I?`${Fd.replace(/\/$/,"")}/retromail/uploads/${encodeURIComponent(N.filename)}`:"#",target:"_blank",rel:"noreferrer",isDisabled:!I,children:I?"Tlcharger":"Demand"})]})]})},z)})})]})]}):e.jsx(yn,{p:6,children:e.jsx(k,{color:"gray.600",children:"Slectionne un message  lire."})})})]})]})}function lee({template:t,data:n}){if(!t)return e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),e.jsx(k,{children:"Aucun template slectionn"})]});if(!t.htmlContent)return e.jsxs(Ut,{status:"error",children:[e.jsx(Ht,{}),e.jsx(k,{children:"Contenu HTML du template vide"})]});if(!n||typeof n!="object")return console.warn(" QuoteTemplatePreview: data is invalid or missing",n),e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),e.jsx(k,{children:"Donnes de template manquantes"})]});let r=t.htmlContent;try{Object.entries(n).forEach(([i,l])=>{if(i==="DEVIS_LINES_TR")return;const u=`{{${i}}}`,d=new RegExp(u,"g"),p=String(l||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");r=r.replace(d,p)}),n.DEVIS_LINES_TR&&(r=r.replace(/{{DEVIS_LINES_TR}}/g,n.DEVIS_LINES_TR))}catch(i){return console.error(" Erreur remplacement placeholders:",i),e.jsxs(Ut,{status:"error",children:[e.jsx(Ht,{}),e.jsxs(k,{children:["Erreur lors du rendu du template: ",i.message]})]})}try{t.logoBig&&(r=r.replace(/{{LOGO_BIG}}/g,`data:image/png;base64,${t.logoBig}`)),t.logoSmall&&(r=r.replace(/{{LOGO_SMALL}}/g,`data:image/png;base64,${t.logoSmall}`))}catch(i){console.warn(" Erreur remplacement logos:",i)}return e.jsx(oe,{maxH:"600px",overflowY:"auto",borderWidth:"1px",borderRadius:"md",p:4,bg:"white",className:"template-preview",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r},style:{fontSize:"14px",lineHeight:"1.6",color:"#333"}})})}function lz({devisId:t,onTotalChange:n}){const[r,i]=v.useState([]),[l,u]=v.useState(!1),[d,p]=v.useState(null),[f,g]=v.useState({}),x=on(),{isOpen:y,onOpen:b,onClose:w}=It(),[C,_]=v.useState({quantity:1,description:"",unitPrice:0});v.useEffect(()=>{t&&A()},[t]),v.useEffect(()=>{const V=r.reduce(($,ae)=>$+(ae.totalPrice||0),0);n&&n(V)},[r,n]);const A=async()=>{if(t)try{u(!0);const V=await Ma(`/api/devis-lines/${t}`);i(Array.isArray(V)?V:[])}catch(V){console.error(" Erreur chargement lignes:",V),x({title:"Erreur",description:"Impossible de charger les lignes",status:"error",duration:3e3})}finally{u(!1)}},D=async()=>{if(!C.description||C.unitPrice<=0){x({title:"Validation",description:"Description et prix unitaire requis",status:"warning",duration:3e3});return}try{const V={devisId:t,quantity:parseFloat(C.quantity)||1,description:C.description,unitPrice:parseFloat(C.unitPrice)||0,order:r.length},$=await Ma("/api/devis-lines",{method:"POST",body:JSON.stringify(V)});i([...r,$]),_({quantity:1,description:"",unitPrice:0}),w(),x({title:"Succs",description:"Ligne ajoute",status:"success",duration:2e3})}catch(V){console.error(" Erreur ajout ligne:",V),x({title:"Erreur",description:V.message,status:"error",duration:3e3})}},P=async V=>{if(!f[V]?.description||f[V]?.unitPrice<=0){x({title:"Validation",description:"Description et prix unitaire requis",status:"warning",duration:3e3});return}try{const $=await Ma(`/api/devis-lines/${V}`,{method:"PUT",body:JSON.stringify({quantity:parseFloat(f[V].quantity)||1,description:f[V].description,unitPrice:parseFloat(f[V].unitPrice)||0})});i(r.map(ae=>ae.id===V?$:ae)),p(null),x({title:"Succs",description:"Ligne mise  jour",status:"success",duration:2e3})}catch($){console.error(" Erreur mise  jour:",$),x({title:"Erreur",description:$.message,status:"error",duration:3e3})}},M=async V=>{try{await Ma(`/api/devis-lines/${V}`,{method:"DELETE"}),i(r.filter($=>$.id!==V)),x({title:"Succs",description:"Ligne supprime",status:"success",duration:2e3})}catch($){console.error(" Erreur suppression:",$),x({title:"Erreur",description:$.message,status:"error",duration:3e3})}},N=V=>{p(V.id),g($=>({...$,[V.id]:{quantity:V.quantity,description:V.description,unitPrice:V.unitPrice}}))},z=(V,$,ae)=>{g(he=>({...he,[V]:{...he[V],[$]:ae}}))},I=r.reduce((V,$)=>V+($.totalPrice||0),0);return e.jsxs(J,{spacing:4,width:"100%",align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Lignes du Devis"}),e.jsxs(ee,{children:[e.jsxs(Qe,{children:[r.length," ligne(s)"]}),e.jsx(Q,{size:"sm",colorScheme:"green",leftIcon:e.jsx(Bn,{}),onClick:b,isDisabled:!t,children:"Ajouter une ligne"})]})]}),r.length===0?e.jsx(k,{color:"gray.500",textAlign:"center",py:6,children:"Aucune ligne pour le moment. Ajoutez-en une!"}):e.jsx(oe,{overflowX:"auto",width:"100%",children:e.jsxs(Fn,{size:"sm",variant:"striped",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Description"}),e.jsx(_e,{isNumeric:!0,children:"Quantit"}),e.jsx(_e,{isNumeric:!0,children:"P.U. "}),e.jsx(_e,{isNumeric:!0,children:"Total "}),e.jsx(_e,{textAlign:"center",children:"Actions"})]})}),e.jsx(Wn,{children:r.map(V=>e.jsxs(bt,{children:[e.jsx(Ee,{children:d===V.id?e.jsx(ge,{size:"sm",value:f[V.id]?.description||"",onChange:$=>z(V.id,"description",$.target.value)}):V.description}),e.jsx(Ee,{isNumeric:!0,children:d===V.id?e.jsx(Ln,{size:"sm",min:.01,value:f[V.id]?.quantity||1,onChange:$=>z(V.id,"quantity",parseFloat($)),children:e.jsx(On,{})}):V.quantity}),e.jsx(Ee,{isNumeric:!0,children:d===V.id?e.jsx(Ln,{size:"sm",min:0,value:f[V.id]?.unitPrice||0,onChange:$=>z(V.id,"unitPrice",parseFloat($)),children:e.jsx(On,{})}):V.unitPrice.toFixed(2)}),e.jsx(Ee,{isNumeric:!0,fontWeight:"bold",children:(V.totalPrice||0).toFixed(2)}),e.jsx(Ee,{textAlign:"center",children:e.jsxs(ee,{justify:"center",spacing:1,children:[d===V.id?e.jsx(xt,{size:"sm",icon:e.jsx(Il,{}),colorScheme:"green",onClick:()=>P(V.id),"aria-label":"Enregistrer"}):e.jsx(xt,{size:"sm",icon:e.jsx(nh,{}),colorScheme:"blue",variant:"ghost",onClick:()=>N(V),"aria-label":"diter"}),e.jsx(xt,{size:"sm",icon:e.jsx(Qn,{}),colorScheme:"red",variant:"ghost",onClick:()=>M(V.id),"aria-label":"Supprimer"})]})})]},V.id))})]})}),e.jsx(xn,{}),e.jsxs(ee,{width:"100%",justify:"flex-end",fontWeight:"bold",fontSize:"lg",children:[e.jsx(k,{children:"Total:"}),e.jsxs(k,{color:"green.600",children:[I.toFixed(2)," "]})]}),e.jsxs(Et,{isOpen:y,onClose:w,size:"md",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Ajouter une ligne"}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{placeholder:"Description de la prestation",value:C.description,onChange:V=>_({...C,description:V.target.value})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Quantit"}),e.jsx(Ln,{min:.01,value:C.quantity,onChange:V=>_({...C,quantity:parseFloat(V)||1}),children:e.jsx(On,{})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Prix unitaire ()"}),e.jsx(Ln,{min:0,step:.01,value:C.unitPrice,onChange:V=>_({...C,unitPrice:parseFloat(V)||0}),children:e.jsx(On,{})})]}),C.quantity>0&&C.unitPrice>0&&e.jsx(oe,{p:3,bg:"green.50",borderRadius:"md",width:"100%",textAlign:"center",children:e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Total: ",(C.quantity*C.unitPrice).toFixed(2)," "]})})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:w,children:"Annuler"}),e.jsx(Q,{colorScheme:"green",onClick:D,isLoading:l,children:"Ajouter"})]})]})]})]})}const cee={},uee=()=>{const[t,n]=v.useState(!1),[r,i]=v.useState(0),[l,u]=v.useState(0),[d,p]=v.useState(null),[f,g]=v.useState(!0),[x,y]=v.useState({totalCredits:0,totalDebits:0,monthlyBalance:0,scheduledMonthlyImpact:0,scheduledCount:0}),[b,w]=v.useState([]),[C,_]=v.useState({type:"CREDIT",amount:"",description:"",category:"ADHESION",date:new Date().toISOString().split("T")[0]}),[A,D]=v.useState([]),[P,M]=v.useState({categoryId:"",allocatedAmount:"",notes:""}),[N,z]=v.useState([]),[I,V]=v.useState({type:"SCHEDULED_PAYMENT",amount:"",description:"",frequency:"MONTHLY",nextDate:new Date().toISOString().split("T")[0],totalAmount:""}),[$,ae]=v.useState(null),[he,re]=v.useState(()=>{const B=new Date;return`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}`}),[ce,Se]=v.useState(""),[je,de]=v.useState(null),[G,U]=v.useState([]),[W,me]=v.useState(!1),[F,fe]=v.useState(""),[te,R]=v.useState(""),[Y,q]=v.useState(""),[le,We]=v.useState([]),[pe,ye]=v.useState({scenarios:[],activeScenario:null,projectionMonths:12}),[Ze,ht]=v.useState(null),[rt,vt]=v.useState(null),[Ue,qt]=v.useState(null),[Je,Ge]=v.useState({name:"",description:"",projectionMonths:12}),[Ve,se]=v.useState({description:"",amount:"",category:"ADHESION",frequency:"MONTHLY"}),[be,at]=v.useState({description:"",amount:"",category:"MAINTENANCE",frequency:"MONTHLY"}),[St,An]=v.useState([]),[qe,Me]=v.useState({description:"",amount:"",date:new Date().toISOString().split("T")[0]}),nt=new Date().getFullYear(),[wt,Xe]=v.useState(nt),[pt,ot]=v.useState(null),[Ne,Mt]=v.useState([]),[Kt,ln]=v.useState([]),[Zt,Pn]=v.useState(null),[lt,vn]=v.useState({type:"QUOTE",number:"",title:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",amountExcludingTax:"",taxRate:20,taxAmount:0,amount:"",status:"DRAFT",eventId:"",memberId:"",destinataireName:"",destinataireAdresse:"",destinataireSociete:"",destinataireContacts:"",notes:"",paymentMethod:"",paymentDate:"",amountPaid:""}),[Sr,ts]=v.useState([]),[Zn,Oi]=v.useState({quantity:1,description:"",unitPrice:0}),[bi,el]=v.useState("manual"),[ns,Bi]=v.useState(null),[$i,po]=v.useState([]),[$s,Fi]=v.useState(null),[Er,rs]=v.useState(null),{isOpen:ya,onOpen:vs,onClose:Nt}=It(),{isOpen:Fl,onOpen:tl,onClose:Si}=It(),[Dr,us]=v.useState(null),{isOpen:ys,onOpen:Fs,onClose:ri}=It(),[xr,nl]=v.useState(null),[mo,si]=v.useState(""),{isOpen:ii,onOpen:rl,onClose:Rs}=It(),dt=on(),{isOpen:Uc,onOpen:Vi,onClose:Ui}=It(),{isOpen:ai,onOpen:Ha,onClose:wi}=It(),{isOpen:Ci,onOpen:Wa,onClose:oi}=It(),{isOpen:Rn,onOpen:ar,onClose:Pr}=It(),{isOpen:Hi,onOpen:Ei,onClose:Wi}=It(),{isOpen:cn,onOpen:or,onClose:qi}=It(),{isOpen:Mr,onOpen:ss,onClose:go}=It(),{isOpen:Gi,onOpen:js,onClose:dr}=It(),ks=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="5173")?cee?.VITE_API_BASE_URL||"https://attractive-kindness-rbe-serveurs.up.railway.app":"",qa=String(ks||"").replace(/\/$/,""),En=B=>`${qa}${B}`,Or=B=>{const ie=String(B||"");return ie.startsWith("/api/")?[ie,ie.replace(/^\/api/,"")]:[ie,`/api${ie}`]},bs=async(B,ie={})=>{const it=Array.isArray(B)?B:[B];let Lt=null;for(const Sn of it)try{const en=await fetch(En(Sn),ie);if(!en.ok)throw new Error(`${en.status} ${en.statusText}`);return(en.headers.get("content-type")||"").includes("application/json")?await en.json():{}}catch(en){Lt=en}if(Lt)throw Lt;return{}},xo=async(B,ie={})=>{const it=Array.isArray(B)?B:[B];let Lt=null;for(const Sn of it)try{const en=await fetch(En(Sn),{method:"DELETE",headers:ie});if(!en.ok)throw new Error(`${en.status} ${en.statusText}`);return!0}catch(en){Lt=en}if(Lt)throw Lt;return!1},vo=async(B,ie={},it={})=>{const Lt=Array.isArray(B)?B:[B];let Sn=null;for(const en of Lt)try{const Xn=await fetch(En(en),{method:"PATCH",headers:{"Content-Type":"application/json",...it},body:JSON.stringify(ie)});if(!Xn.ok)throw new Error(`${Xn.status} ${Xn.statusText}`);return(Xn.headers.get("content-type")||"").includes("application/json")?await Xn.json():ie}catch(Xn){Sn=Xn}if(Sn)throw Sn;return ie},Zi=()=>{try{const B=localStorage.getItem("rbe:finance:documents");return B?JSON.parse(B):[]}catch{return[]}},Vs=B=>{try{localStorage.setItem("rbe:finance:documents",JSON.stringify(B||[]))}catch{}},li=async()=>{try{n(!0),await Promise.all([Xi(),Yt(),Br(),_r(),Hs(),Ws(),Ss(),ws(wt),Ki()])}catch(B){console.error(" Erreur chargement donnes financires:",B),dt({status:"error",title:"Erreur de chargement",description:"Impossible de charger les donnes financires",duration:4e3,isClosable:!0})}finally{n(!1)}},Ss=async()=>{try{const B=Or("/api/finance/documents"),ie=await bs(B,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),it=Array.isArray(ie?.documents)?ie.documents:Array.isArray(ie?.items)?ie.items:Array.isArray(ie)?ie:[];if(it.length===0){const Lt=Zi();ln(Lt)}else ln(it),Vs(it)}catch{const ie=Zi();ln(ie)}},Us=async()=>{try{const B=Or("/api/quote-templates"),ie=await fetch(B[0]||"/api/quote-templates",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(ie.ok){const it=await ie.json(),Lt=Array.isArray(it)?it:it?.templates||[];po(Lt)}}catch(B){console.warn(" Impossible de charger les templates:",B),po([])}},Xi=async()=>{try{const B=await fetch(En("/api/finance/balance"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const ie=await B.json();u(ie.balance||0),p(ie.lastUpdate),g(ie.isLocked!==!1)}else console.warn(" Solde non disponible, utilisation de 0"),u(0)}catch(B){console.error(" Erreur chargement solde:",B),u(0)}},Yt=async()=>{try{const B=await fetch(En("/api/finance/transactions"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const ie=await B.json();w(ie.transactions||[])}else console.warn(" Transactions non disponibles"),w([])}catch(B){console.error(" Erreur chargement transactions:",B),w([])}},Br=async()=>{try{const B=await fetch(En("/api/finance/scheduled-operations"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const ie=await B.json();z(ie.operations||[])}else console.warn(" Oprations programmes non disponibles"),z([])}catch(B){console.error(" Erreur chargement oprations programmes:",B),z([])}},Mn=async B=>{try{const ie=await fetch(En(`/api/finance/scheduled-operations/${B}/payments`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ie.ok){const it=await ie.json();U(it.payments||[])}else U([])}catch(ie){console.error(" Erreur chargement paiements chance:",ie),U([])}},_r=async()=>{try{const B=await fetch(En("/api/finance/simulations"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const ie=await B.json();ye(it=>({...it,scenarios:ie.scenarios||[]}))}else console.warn(" Simulations non disponibles"),ye(ie=>({...ie,scenarios:[]}))}catch(B){console.error(" Erreur chargement simulations:",B),ye(ie=>({...ie,scenarios:[]}))}},Hs=async()=>{try{const B=await fetch(En("/api/finance/balance/history"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const ie=await B.json();We(ie.history||[])}else console.warn(" Historique non disponible"),We([])}catch(B){console.error(" Erreur chargement historique:",B),We([])}},Ws=async()=>{try{const B=await fetch(En("/api/finance/expense-reports"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const ie=await B.json();An(ie.reports||[])}else An([])}catch(B){console.error(" Erreur chargement notes de frais:",B),An([])}},ws=async B=>{try{const ie=await fetch(En(`/api/finance/reports?year=${encodeURIComponent(B)}`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ie.ok){const it=await ie.json();ot(it)}else ot(null)}catch(ie){console.error(" Erreur chargement rapports:",ie),ot(null)}},ci=async()=>{try{const B=await fetch(En(`/api/finance/reports/pdf?year=${encodeURIComponent(wt)}`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!B.ok){dt({status:"error",title:"Export PDF chou"});return}const ie=await B.blob(),it=URL.createObjectURL(ie),Lt=document.createElement("a");Lt.href=it,Lt.download=`rapport-financier-${wt}.pdf`,document.body.appendChild(Lt),Lt.click(),Lt.remove(),URL.revokeObjectURL(it)}catch(B){console.error(" Export PDF:",B),dt({status:"error",title:"Export PDF chou"})}},Ki=async()=>{try{const B=await fetch(En("/api/finance/categories"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(B.ok){const ie=await B.json();Mt(Array.isArray(ie)?ie:[])}}catch(B){console.error(" Erreur chargement catgories:",B)}},[Ga,vr]=v.useState(!1),[ds,sl]=v.useState(null),ue=(ds?.roles||[]).some(B=>String(B).toUpperCase()==="TRESORIER"),Ce=async()=>{try{const B=await fetch(En("/api/me"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const ie=await B.json();sl(ie),vr(!0),console.log(" Utilisateur connect:",ie.matricule,"- Modification du solde contrle par code")}}catch(B){console.error(" Erreur chargement utilisateur:",B)}},Be=()=>{const B=b.filter($n=>$n.type==="CREDIT").reduce(($n,Fr)=>$n+(Fr.amount||0),0),ie=b.filter($n=>$n.type==="DEBIT").reduce(($n,Fr)=>$n+(Fr.amount||0),0),it=new Date,Lt=new Date(it.getFullYear(),it.getMonth(),1),Sn=new Date(it.getFullYear(),it.getMonth()+1,0),en=b.filter($n=>{const Fr=new Date($n.date||$n.createdAt);return Fr>=Lt&&Fr<=Sn}),Xn=en.filter($n=>$n.type==="CREDIT").reduce(($n,Fr)=>$n+(Fr.amount||0),0),_i=en.filter($n=>$n.type==="DEBIT").reduce(($n,Fr)=>$n+(Fr.amount||0),0),Cs=Xn-_i,$r=N.filter($n=>$n.isActive).reduce(($n,Fr)=>{const hs=jn(Fr.frequency),ba=Fr.type==="SCHEDULED_CREDIT"?Fr.amount||0:-(Fr.amount||0);return $n+ba*hs},0);y({totalCredits:B,totalDebits:ie,monthlyBalance:Cs,scheduledMonthlyImpact:$r,scheduledCount:N.filter($n=>$n.isActive).length})},jt=({percent:B,color:ie="gray"})=>{const it=typeof B=="number"?Math.max(0,Math.min(1,B)):null,Lt=50,Sn=60,en=60,Xn=Math.PI,_i=Math.PI*(1-(it??0)),Cs=Sn+Lt*Math.cos(Xn),$r=en-Lt*Math.sin(Xn),$n=Sn+Lt*Math.cos(_i),Fr=en-Lt*Math.sin(_i),hs=0,ba=0,jo=`M ${Cs} ${$r} A ${Lt} ${Lt} 0 ${hs} ${ba} ${$n} ${Fr}`;return e.jsxs("svg",{viewBox:"0 0 120 70",width:"100%",height:"70",role:"img","aria-label":it!=null?`${Math.round(it*100)}%`:"N/A",children:[e.jsx("path",{d:`M ${Cs} ${$r} A ${Lt} ${Lt} 0 0 ${ba} ${Sn+Lt} ${en}`,stroke:"#E2E8F0",strokeWidth:"10",fill:"none"}),it!=null&&it>0&&e.jsx("path",{d:jo,stroke:ie,strokeWidth:"10",fill:"none",strokeLinecap:"round"}),e.jsx("text",{x:"60",y:"65",textAnchor:"middle",fontSize:"10",fill:"#4A5568",children:it!=null?`${Math.round(it*100)}%`:"N/A"})]})},ct=B=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(B||0),dn=B=>B?new Date(B).toLocaleDateString("fr-FR"):"N/A",Ot=B=>({ADHESION:"Adhsion",MAINTENANCE:"Maintenance",CARBURANT:"Carburant",ASSURANCE:"Assurance",AUTRE:"Autre"})[B]||B,jn=B=>{switch(B){case"SEMI_ANNUAL":return .5;case"ONE_SHOT":return 0;case"WEEKLY":return 4.33;case"QUARTERLY":return 1/3;case"YEARLY":return 1/12;case"MONTHLY":default:return 1}},mn=B=>{switch(B){case"ONE_SHOT":return"Ponctuel";case"SEMI_ANNUAL":return"Semestriel (6 mois)";case"WEEKLY":return"Hebdomadaire";case"QUARTERLY":return"Trimestriel";case"YEARLY":return"Annuel";case"MONTHLY":default:return"Mensuel"}},zr=async()=>{if(!F||F.length!==4){dt({status:"warning",title:"Code requis",description:"Veuillez saisir le code  4 chiffres (0920)",duration:3e3,isClosable:!0});return}if(F!=="0920"){dt({status:"error",title:"Code incorrect",description:"Le code de scurit n'est pas valide",duration:4e3,isClosable:!0});return}if(!te||isNaN(parseFloat(te))){dt({status:"warning",title:"Montant invalide",description:"Veuillez saisir un montant valide",duration:3e3,isClosable:!0});return}try{n(!0);const B=await fetch(En("/api/finance/balance/configure"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({code:F,newBalance:parseFloat(te),reason:Y?.trim()||`Mise  jour manuelle du solde par ${ds?.matricule||ds?.username||"inconnu"} - ${new Date().toLocaleDateString("fr-FR")}`})});if(B.ok){const ie=await B.json();u(ie.newBalance),fe(""),R(""),q(""),me(!1),Ui(),dt({status:"success",title:"Solde mis  jour",description:`Nouveau solde: ${ct(ie.newBalance)} (diffrence: ${ie.difference>=0?"+":""}${ct(ie.difference)})`,duration:5e3,isClosable:!0}),await Hs(),await Xi()}else{const ie=await B.text().catch(()=>"");let it={};try{it=ie?JSON.parse(ie):{}}catch{it={message:ie?.slice(0,200)||"Erreur inconnue"}}B.status===403?dt({status:"error",title:"Accs refus",description:"Vous n'avez pas l'autorisation de modifier le solde",duration:5e3,isClosable:!0}):B.status===401?dt({status:"error",title:"Code incorrect",description:"Le code de scurit 0920 est incorrect",duration:4e3,isClosable:!0}):dt({status:"error",title:"Erreur de configuration",description:it.message||"Erreur serveur",duration:4e3,isClosable:!0})}}catch(B){console.error(" Erreur configuration solde:",B),dt({status:"error",title:"Erreur",description:"Impossible de configurer le solde. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{n(!1)}},is=async()=>{if(!qe.description||!qe.amount){dt({status:"warning",title:"Champs requis",description:"Description et montant sont obligatoires"});return}try{n(!0);const B=await fetch(En("/api/finance/expense-reports"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({description:qe.description,amount:parseFloat(qe.amount),date:qe.date})});if(B.ok)dt({status:"success",title:"Note de frais ajoute"}),Me({description:"",amount:"",date:new Date().toISOString().split("T")[0]}),await Ws();else{const ie=await B.json().catch(()=>({}));dt({status:"error",title:"Erreur",description:ie.message||"Impossible d'ajouter la note de frais"})}}catch(B){console.error(" Erreur cration note de frais:",B),dt({status:"error",title:"Erreur",description:"Impossible d'ajouter la note de frais"})}finally{n(!1)}},Qi=async(B,ie)=>{try{(await fetch(En(`/api/finance/expense-reports/${B}`),{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({status:ie})})).ok?await Ws():dt({status:"error",title:"Erreur",description:"Mise  jour du statut impossible"})}catch(it){console.error(" Erreur MAJ statut note de frais:",it),dt({status:"error",title:"Erreur",description:"Mise  jour du statut impossible"})}},Ya=async B=>{try{(await fetch(En(`/api/finance/expense-reports/${B}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(dt({status:"success",title:"Note de frais supprime"}),await Ws()):dt({status:"error",title:"Erreur",description:"Suppression impossible"})}catch(ie){console.error(" Erreur suppression note de frais:",ie),dt({status:"error",title:"Erreur",description:"Suppression impossible"})}},Za=async()=>{if(!C.type||!C.amount||!C.description){dt({status:"warning",title:"Champs requis",description:"Type, montant et description sont obligatoires",duration:3e3,isClosable:!0});return}try{n(!0);const B=Or("/api/finance/transactions"),ie=await bs(B,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...C,amount:parseFloat(C.amount)})});if(ie){if(A.length>0){const it=Or(`/api/finance/transactions/${ie.id}/categories`),Lt=A.map(Sn=>({categoryId:Sn.categoryId,allocatedAmount:parseFloat(Sn.allocatedAmount),notes:Sn.notes||null}));await bs(it,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({allocations:Lt})})}dt({status:"success",title:"Transaction ajoute",description:A.length>0?`Transaction ajoute avec ${A.length} allocation(s)`:"La transaction a t enregistre avec succs",duration:3e3,isClosable:!0}),_({type:"CREDIT",amount:"",description:"",category:"ADHESION",date:new Date().toISOString().split("T")[0]}),D([]),M({categoryId:"",allocatedAmount:"",notes:""}),wi(),await Yt(),await Xi()}}catch(B){console.error(" Erreur ajout transaction:",B),dt({status:"error",title:"Erreur",description:"Impossible d'ajouter la transaction. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{n(!1)}},il=B=>{us({...B}),tl()},Vh=async()=>{if(!(!Dr||!Dr.id))try{n(!0);const B=Or(`/api/finance/transactions/${encodeURIComponent(Dr.id)}`);await bs(B,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({description:Dr.description,category:Dr.category,type:Dr.type,amount:parseFloat(Dr.amount),date:Dr.date})}),dt({status:"success",title:"Transaction mise  jour"}),Si(),await Yt(),await Xi()}catch(B){console.error(" Erreur modification transaction:",B),dt({status:"error",title:"Erreur",description:"Impossible de modifier la transaction"})}finally{n(!1)}},Uh=async B=>{try{if(!confirm("Supprimer cette transaction ?"))return;const ie=Or(`/api/finance/transactions/${encodeURIComponent(B)}`);await xo(ie,{Authorization:`Bearer ${localStorage.getItem("token")}`}),dt({status:"success",title:"Transaction supprime"}),await Yt(),await Xi()}catch(ie){console.error(" Erreur suppression transaction:",ie),dt({status:"error",title:"Erreur",description:"Suppression impossible"})}},Hc=B=>{nl(B),si(B?.documentId||""),Fs()},Hh=async()=>{try{if(!xr)return;const B=Or(`/api/finance/transactions/${encodeURIComponent(xr.id)}`);await bs(B,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({documentId:mo||null})}),w(ie=>ie.map(it=>it.id===xr.id?{...it,documentId:mo||null}:it)),ri(),nl(null),si(""),dt({status:"success",title:"Transaction lie au document"})}catch(B){console.error(" Erreur liaison transaction/document:",B),dt({status:"error",title:"Erreur",description:"Impossible de lier la transaction"})}},ui=async()=>{if(!ns){dt({status:"warning",title:"Erreur",description:"Slectionnez un template"});return}try{if(!lt.number){dt({status:"warning",title:"Champ requis",description:"Le numro du document est obligatoire"});return}if(!lt.title){dt({status:"warning",title:"Champ requis",description:"Le titre du document est obligatoire"});return}if(!lt.amount){dt({status:"warning",title:"Champ requis",description:"Le montant est obligatoire"});return}let B="";try{const it=Zt?.id||"temp-"+Date.now(),Lt=await fetchJson(`/api/devis-lines/${it}`),Sn=Array.isArray(Lt)?Lt:[];Sn.length>0&&(B=Sn.map(en=>`
            <tr>
              <td class="num">${en.quantity}</td>
              <td class="desc">${en.description}</td>
              <td class="num">${en.unitPrice.toFixed(2)} </td>
              <td class="num">${en.totalPrice.toFixed(2)} </td>
            </tr>
          `).join(""))}catch(it){console.warn(" Impossible de charger les lignes:",it.message)}const ie={NUM_DEVIS:lt.number,TITRE:lt.title,OBJET:lt.title,DESCRIPTION:lt.description||"",MONTANT:parseFloat(lt.amount||0).toFixed(2),PRIX_NET:parseFloat(lt.amount||0).toFixed(2),DATE:new Date(lt.date).toLocaleDateString("fr-FR"),DESTINATAIRE_NOM:lt.destinataireName||"Destinataire",DESTINATAIRE_ADRESSE:lt.destinataireAdresse||"",DESTINATAIRE_SOCIETE:lt.destinataireSociete||"",DESTINATAIRE_CONTACTS:lt.destinataireContacts||"",NOTES:lt.notes||"",LOGO_BIG:ns.logoBig||"",LOGO_SMALL:ns.logoSmall||"",DEVIS_LINES_TR:B};rs({templateId:ns.id,data:ie,templateName:ns.name}),vs(),dt({status:"success",title:"Aperu gnr",description:"Vrifiez l'aperu avant d'imprimer"})}catch(B){console.error(" Erreur gnration aperu:",B),dt({status:"error",title:"Erreur",description:"Impossible de gnrer l'aperu"})}},Wh=()=>{Pn(null),vn({type:"QUOTE",number:"",title:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",amountExcludingTax:"",taxRate:20,taxAmount:0,amount:"",status:"DRAFT",eventId:"",memberId:"",destinataireName:"",destinataireAdresse:"",notes:"",paymentMethod:"",paymentDate:"",amountPaid:""}),Bi(null),rl()},ed=B=>{Pn(B),vn({type:B.type||"QUOTE",number:B.number||"",title:B.title||"",description:B.description||"",date:(B.date||new Date().toISOString()).slice(0,10),dueDate:B.dueDate?B.dueDate.slice(0,10):"",amountExcludingTax:String(B.amountExcludingTax??""),taxRate:B.taxRate||20,taxAmount:B.taxAmount||0,amount:String(B.amount??""),status:B.quoteStatus||B.invoiceStatus||B.status||"DRAFT",eventId:B.eventId||"",memberId:B.memberId||"",destinataireName:B.destinataireName||"",destinataireAdresse:B.destinataireAdresse||"",notes:B.notes||"",paymentMethod:B.paymentMethod||"",paymentDate:B.paymentDate?B.paymentDate.slice(0,10):"",amountPaid:String(B.amountPaid??"")}),Bi(null),rl()},ja=async()=>{try{if(!lt.number||!lt.title){dt({status:"warning",title:"Erreur",description:"Numro et titre obligatoires"});return}const B=!!Zt?.id,ie=Or(B?`/api/finance/documents/${encodeURIComponent(Zt.id)}`:"/api/finance/documents"),it=parseFloat(lt.amount)||0,Lt={type:lt.type,number:lt.number,title:lt.title,description:lt.description||null,date:lt.date,dueDate:lt.dueDate||null,amountExcludingTax:it,taxRate:0,taxAmount:0,amount:it,quoteStatus:lt.type==="QUOTE"?lt.status:null,invoiceStatus:lt.type==="INVOICE"?lt.status:null,eventId:lt.eventId||null,memberId:lt.memberId||null,destinataireName:lt.destinataireName||null,destinataireAdresse:lt.destinataireAdresse||null,notes:lt.notes||null,paymentMethod:lt.paymentMethod||null,paymentDate:lt.paymentDate||null,amountPaid:parseFloat(lt.amountPaid||0)},Sn=await bs(ie,{method:B?"PUT":"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(Lt)});await Ss(),Rs(),dt({status:"success",title:B?"Document modifi":"Document cr"})}catch{const ie=Zt?.id||`local-${Date.now()}`,it=parseFloat(lt.amount)||0,Lt={...lt,id:ie,amountExcludingTax:it,taxRate:0,taxAmount:0,amount:it,quoteStatus:lt.type==="QUOTE"?lt.status:null,invoiceStatus:lt.type==="INVOICE"?lt.status:null},Sn=Zt?Kt.map(en=>en.id===Zt.id?Lt:en):[Lt,...Kt];Vs(Sn),ln(Sn),Rs(),dt({status:"info",title:"Document enregistr en local"})}},td=async B=>{try{const ie=Or(`/api/finance/documents/${encodeURIComponent(B)}`);await xo(ie,{Authorization:`Bearer ${localStorage.getItem("token")}`}),await Ss(),dt({status:"success",title:"Document supprim"})}catch{const it=Kt.filter(Lt=>Lt.id!==B);Vs(it),ln(it),dt({status:"info",title:"Document supprim (local)"})}},Ds=async(B,ie)=>{try{const it=Or(`/api/finance/documents/${encodeURIComponent(B)}/status`),Lt=await vo(it,{status:ie},{Authorization:`Bearer ${localStorage.getItem("token")}`});ln(en=>en.map(Xn=>Xn.id===B?Lt:Xn));const Sn=B.type==="QUOTE"?{DRAFT:"Brouillon",SENT:"Envoy",ACCEPTED:"Accept",REFUSED:"Refus",REEDITED:"Rdit"}[ie]:{DRAFT:"Brouillon",SENT:"Envoy",ACCEPTED:"Accept",PENDING_PAYMENT:"En attente",PAID:"Pay",DEPOSIT_PAID:"Accompte"}[ie];dt({status:"success",title:"Statut mis  jour",description:` ${Sn}`}),await Ss()}catch(it){console.error("Erreur changement statut:",it),dt({status:"error",title:"Erreur",description:"Impossible de mettre  jour le statut"})}},Wc=B=>{Pn(B),vn({type:"QUOTE",number:`${B.number}-REV`,title:`${B.title} (Rvision)`,date:new Date().toISOString().split("T")[0],amount:B.amount,status:"DRAFT",eventId:B.eventId||""}),rl()},qh=async()=>{const B=r===2;if(!I.amount||!I.description||!I.nextDate||!B&&!I.type||!B&&!I.frequency){dt({status:"warning",title:"Champs requis",description:"Tous les champs sont obligatoires",duration:3e3,isClosable:!0});return}try{n(!0);const ie=await fetch(En("/api/finance/scheduled-operations"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...I,type:B?"SCHEDULED_PAYMENT":I.type,frequency:B?"MONTHLY":I.frequency,amount:parseFloat(I.amount),totalAmount:I.totalAmount!==""&&I.totalAmount!==null?parseFloat(I.totalAmount):void 0})});if(ie.ok)dt({status:"success",title:B?"chancier cr":"Opration programme",description:B?"L'chancier a t cr avec succs":"L'opration a t programme avec succs",duration:3e3,isClosable:!0}),V({type:"SCHEDULED_PAYMENT",amount:"",description:"",frequency:"MONTHLY",nextDate:new Date().toISOString().split("T")[0],totalAmount:""}),oi(),await Br();else{const it=await ie.json();dt({status:"error",title:"Erreur",description:it.message||"Impossible de programmer l'opration",duration:4e3,isClosable:!0})}}catch(ie){console.error(" Erreur programmation opration:",ie),dt({status:"error",title:"Erreur",description:"Impossible de programmer l'opration. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{n(!1)}},qc=async B=>{try{if(!confirm("Supprimer cette opration programme et tous ses paiements ?"))return;const ie=await fetch(En(`/api/finance/scheduled-operations/${B}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ie.ok)dt({status:"success",title:"Opration supprime"}),await Br();else{const it=await ie.json().catch(()=>({}));dt({status:"error",title:"Erreur",description:it.message||"Suppression impossible"})}}catch(ie){console.error(" Erreur suppression opration programme:",ie),dt({status:"error",title:"Erreur",description:"Suppression impossible"})}},Vl=B=>{ae(B),Se(B.amount||"");const ie=B.nextDate?new Date(B.nextDate):new Date,it=`${ie.getFullYear()}-${String(ie.getMonth()+1).padStart(2,"0")}`;re(it),de(null),ss()},Gh=async()=>{if($){if(!he||!/^\d{4}-\d{2}$/.test(he)){dt({status:"warning",title:"Priode invalide",description:"Format attendu: YYYY-MM"});return}if(!ce||isNaN(parseFloat(ce))){dt({status:"warning",title:"Montant invalide",description:"Veuillez saisir un montant valide"});return}try{n(!0);const B=new FormData;B.append("period",he),B.append("amount",String(parseFloat(ce))),je&&B.append("attachment",je);const ie=await fetch(En(`/api/finance/scheduled-operations/${$.id}/payments`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:B});if(ie.ok)dt({status:"success",title:"Mensualit dclare paye"}),go(),await Promise.all([Br(),Yt(),Xi()]);else{const it=await ie.json().catch(()=>({}));dt({status:"error",title:"Erreur",description:it.message||"Dclaration impossible"})}}catch(B){console.error(" Erreur dclaration paiement:",B),dt({status:"error",title:"Erreur",description:"Dclaration impossible"})}finally{n(!1)}}},nd=async B=>{ae(B),await Mn(B.id),js()};v.useEffect(()=>{(async()=>{await Ce(),await li(),await Us()})()},[]),v.useEffect(()=>{b.length>=0&&N.length>=0&&Be()},[b.length,N.length]);const Gc=async()=>{if(!Je.name||!Je.description){dt({status:"warning",title:"Champs requis",description:"Nom et description sont obligatoires",duration:3e3,isClosable:!0});return}try{n(!0);const B=await fetch(En("/api/finance/simulations"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(Je)});if(B.ok){const ie=await B.json();dt({status:"success",title:"Scnario cr",description:"Vous pouvez maintenant ajouter les recettes et dpenses",duration:4e3,isClosable:!0}),Ge({name:"",description:"",projectionMonths:12}),await _r(),Pr(),qt(ie.scenario),Ei()}else{const ie=await B.json();dt({status:"error",title:"Erreur",description:ie.message||"Impossible de crer le scnario",duration:4e3,isClosable:!0})}}catch(B){console.error(" Erreur cration scnario:",B),dt({status:"error",title:"Erreur",description:"Impossible de crer le scnario. Vrifiez votre connexion.",duration:4e3,isClosable:!0})}finally{n(!1)}},yo=async B=>{try{const ie=await fetch(En(`/api/finance/simulations/${B}`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ie.ok){const it=await ie.json();qt(it.scenario)}else dt({status:"error",title:"Erreur",description:"Impossible de charger les dtails du scnario",duration:4e3,isClosable:!0})}catch(ie){console.error(" Erreur chargement dtails scnario:",ie),dt({status:"error",title:"Erreur",description:"Impossible de charger les dtails du scnario",duration:4e3,isClosable:!0})}},rd=async()=>{if(!Ve.description||!Ve.amount){dt({status:"warning",title:"Champs requis",description:"Description et montant sont obligatoires",duration:3e3,isClosable:!0});return}try{const B=await fetch(En(`/api/finance/simulations/${Ue.id}/income`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...Ve,amount:parseFloat(Ve.amount)})});if(B.ok)dt({status:"success",title:"Recette ajoute",duration:2e3,isClosable:!0}),se({description:"",amount:"",category:"ADHESION",frequency:"MONTHLY"}),await yo(Ue.id);else{const ie=await B.json();dt({status:"error",title:"Erreur",description:ie.message||"Impossible d'ajouter la recette",duration:4e3,isClosable:!0})}}catch(B){console.error(" Erreur ajout recette:",B),dt({status:"error",title:"Erreur",description:"Impossible d'ajouter la recette",duration:4e3,isClosable:!0})}},sd=async()=>{if(!be.description||!be.amount){dt({status:"warning",title:"Champs requis",description:"Description et montant sont obligatoires",duration:3e3,isClosable:!0});return}try{const B=await fetch(En(`/api/finance/simulations/${Ue.id}/expense`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({...be,amount:parseFloat(be.amount)})});if(B.ok)dt({status:"success",title:"Dpense ajoute",duration:2e3,isClosable:!0}),at({description:"",amount:"",category:"MAINTENANCE",frequency:"MONTHLY"}),await yo(Ue.id);else{const ie=await B.json();dt({status:"error",title:"Erreur",description:ie.message||"Impossible d'ajouter la dpense",duration:4e3,isClosable:!0})}}catch(B){console.error(" Erreur ajout dpense:",B),dt({status:"error",title:"Erreur",description:"Impossible d'ajouter la dpense",duration:4e3,isClosable:!0})}},Ul=async B=>{try{(await fetch(En(`/api/finance/simulations/income/${B}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(dt({status:"success",title:"Recette supprime",duration:2e3,isClosable:!0}),await yo(Ue.id)):dt({status:"error",title:"Erreur",description:"Impossible de supprimer la recette",duration:4e3,isClosable:!0})}catch(ie){console.error(" Erreur suppression recette:",ie),dt({status:"error",title:"Erreur",description:"Impossible de supprimer la recette",duration:4e3,isClosable:!0})}},Xa=async B=>{try{(await fetch(En(`/api/finance/simulations/expense/${B}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(dt({status:"success",title:"Dpense supprime",duration:2e3,isClosable:!0}),await yo(Ue.id)):dt({status:"error",title:"Erreur",description:"Impossible de supprimer la dpense",duration:4e3,isClosable:!0})}catch(ie){console.error(" Erreur suppression dpense:",ie),dt({status:"error",title:"Erreur",description:"Impossible de supprimer la dpense",duration:4e3,isClosable:!0})}},Yc=async B=>{try{n(!0);const ie=await fetch(En(`/api/finance/simulations/${B}/run`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ie.ok){const it=await ie.json();vt(it.simulation),or()}else{const it=await ie.json();dt({status:"error",title:"Erreur",description:it.message||"Impossible d'excuter la simulation",duration:4e3,isClosable:!0})}}catch(ie){console.error(" Erreur excution simulation:",ie),dt({status:"error",title:"Erreur",description:"Impossible d'excuter la simulation",duration:4e3,isClosable:!0})}finally{n(!1)}},Ka=async B=>{try{(await fetch(En(`/api/finance/simulations/${B}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok?(dt({status:"success",title:"Scnario supprim",duration:2e3,isClosable:!0}),await _r()):dt({status:"error",title:"Erreur",description:"Impossible de supprimer le scnario",duration:4e3,isClosable:!0})}catch(ie){console.error(" Erreur suppression scnario:",ie),dt({status:"error",title:"Erreur",description:"Impossible de supprimer le scnario",duration:4e3,isClosable:!0})}},as=async(B,ie="simulation")=>{try{const it=await fetch(En(`/api/finance/simulations/${B}/report.pdf`),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!it.ok){dt({status:"error",title:"Export PDF",description:"chec de la gnration du PDF"});return}const Lt=await it.blob(),Sn=URL.createObjectURL(Lt),en=document.createElement("a");en.href=Sn;const Xn=(ie||"simulation").replace(/[^a-z0-9-_]+/gi,"_");en.download=`simulation-${Xn}.pdf`,document.body.appendChild(en),en.click(),document.body.removeChild(en),URL.revokeObjectURL(Sn),dt({status:"success",title:"Export PDF",description:"Tlchargement dmarr"})}catch(it){console.error(" Erreur export PDF:",it),dt({status:"error",title:"Export PDF",description:"Erreur lors du tlchargement"})}};return e.jsx(oe,{p:6,children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"lg",color:"blue.600",children:" Gestion Financire"}),e.jsxs(ee,{children:[e.jsx(xt,{icon:e.jsx(Fa,{}),onClick:li,isLoading:t,variant:"outline",size:"sm"}),e.jsx(xt,{icon:e.jsx(Qu,{}),onClick:Vi,variant:"outline",size:"sm",colorScheme:"purple"}),e.jsxs(Qe,{colorScheme:l>=0?"green":"red",fontSize:"lg",p:2,borderRadius:"md",cursor:"pointer",onClick:()=>me(!W),children:[f?e.jsx(Ko,{style:{marginRight:"0.5rem",display:"inline-block"}}):e.jsx(Wb,{style:{marginRight:"0.5rem",display:"inline-block"}}),"Solde: ",ct(l)]})]})]}),W&&e.jsxs(Ut,{status:"warning",borderRadius:"md",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"stretch",spacing:3,flex:1,children:[e.jsx(k,{fontWeight:"bold",children:"Configuration du solde (Code requis)"}),e.jsxs(ee,{children:[e.jsxs(ee,{children:[e.jsx(k,{fontSize:"sm",children:"Code:"}),e.jsx(ee,{children:e.jsxs(Ob,{value:F,onChange:fe,type:"number",children:[e.jsx(bl,{}),e.jsx(bl,{}),e.jsx(bl,{}),e.jsx(bl,{})]})})]}),e.jsxs(Ln,{value:te,onChange:R,precision:2,step:.01,width:"150px",children:[e.jsx(On,{placeholder:"Nouveau solde"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]}),e.jsx(ge,{value:Y,onChange:B=>q(B.target.value),placeholder:"Motif de rgularisation",width:"280px",size:"sm"}),e.jsx(Q,{size:"sm",colorScheme:"orange",onClick:zr,isLoading:t,leftIcon:e.jsx(Kp,{}),children:"Appliquer"}),e.jsx(Q,{size:"sm",variant:"ghost",onClick:()=>me(!1),leftIcon:e.jsx(qu,{}),children:"Annuler"})]})]})]}),e.jsxs(mt,{columns:{base:2,md:6},spacing:4,children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Solde Actuel"}),e.jsx(Dt,{color:l>=0?"green.600":"red.600",children:ct(l)}),d&&e.jsxs(Mi,{fontSize:"xs",children:["MAJ: ",dn(d)]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Recettes Total"}),e.jsx(Dt,{color:"green.600",children:ct(x.totalCredits)}),e.jsxs(Mi,{children:[e.jsx(eh,{type:"increase"}),"Entres"]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Dpenses Total"}),e.jsx(Dt,{color:"red.600",children:ct(x.totalDebits)}),e.jsxs(Mi,{children:[e.jsx(eh,{type:"decrease"}),"Sorties"]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Ce Mois"}),e.jsx(Dt,{color:x.monthlyBalance>=0?"green.600":"red.600",children:ct(x.monthlyBalance)}),e.jsxs(Mi,{children:[e.jsx(eh,{type:x.monthlyBalance>=0?"increase":"decrease"}),"Rsultat mensuel"]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Programm/Mois"}),e.jsx(Dt,{color:x.scheduledMonthlyImpact>=0?"green.600":"red.600",children:ct(x.scheduledMonthlyImpact)}),e.jsxs(Mi,{children:[x.scheduledCount," oprations"]})]})})})]}),e.jsxs(ga,{index:r,onChange:i,children:[e.jsxs(xa,{children:[e.jsx(hn,{children:" Transactions"}),e.jsx(hn,{children:" Devis & Factures"}),e.jsx(hn,{children:" chanciers"}),e.jsx(hn,{children:" Paiements programms"}),e.jsx(hn,{children:" Notes de frais"}),e.jsx(hn,{children:" Simulations"}),e.jsx(hn,{children:" Rapports"}),e.jsx(hn,{children:" Configuration"})]}),e.jsxs(va,{children:[e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Transactions"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:Ha,size:"sm",children:"Nouvelle transaction"})]}),t?e.jsxs(oe,{textAlign:"center",p:8,children:[e.jsx(pn,{size:"lg"}),e.jsx(k,{mt:2,children:"Chargement..."})]}):b.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucune transaction enregistre"]}):e.jsx(Pe,{children:e.jsx(ke,{p:0,children:e.jsxs(Fn,{variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Description"}),e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{children:"Document"}),e.jsx(_e,{children:"Type"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:b.map((B,ie)=>e.jsxs(bt,{children:[e.jsx(Ee,{children:dn(B.date||B.createdAt)}),e.jsx(Ee,{children:B.description}),e.jsx(Ee,{children:e.jsx(Qe,{size:"sm",variant:"outline",children:Ot(B.category)})}),e.jsx(Ee,{children:(()=>{const it=Kt.find(Lt=>Lt.id===B.documentId);return it?e.jsxs(ee,{spacing:2,children:[e.jsx(Qe,{colorScheme:it.type==="INVOICE"?"purple":"gray",children:it.type==="INVOICE"?"Facture":"Devis"}),e.jsx(k,{fontSize:"sm",children:it.number||it.title||it.id})]}):e.jsx(k,{fontSize:"sm",color:"gray.500",children:""})})()}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:B.type==="CREDIT"?"green":"red",size:"sm",children:B.type==="CREDIT"?"Recette":"Dpense"})}),e.jsx(Ee,{isNumeric:!0,children:e.jsxs(k,{color:B.type==="CREDIT"?"green.600":"red.600",fontWeight:"bold",children:[B.type==="CREDIT"?"+":"-",ct(Math.abs(B.amount))]})}),e.jsx(Ee,{children:e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(ph,{}),variant:"ghost",size:"sm"}),e.jsxs(Go,{children:[e.jsx(Dn,{icon:e.jsx(nh,{}),onClick:()=>il(B),children:"Modifier"}),e.jsx(Dn,{onClick:()=>Hc(B),children:"Lier  devis/facture"}),e.jsx(Dn,{icon:e.jsx(Qn,{}),color:"red.500",onClick:()=>Uh(B.id),children:"Supprimer"})]})]})})]},B.id||ie))})]})})})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Devis & Factures"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"purple",size:"sm",onClick:Wh,children:"Nouveau document"})]}),t?e.jsxs(oe,{textAlign:"center",p:8,children:[e.jsx(pn,{size:"lg"}),e.jsx(k,{mt:2,children:"Chargement"})]}):e.jsx(Pe,{children:e.jsx(ke,{p:0,children:e.jsxs(Fn,{variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Type"}),e.jsx(_e,{children:"Numro"}),e.jsx(_e,{children:"Titre"}),e.jsx(_e,{children:"Date"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{children:"vnement"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:Kt.map(B=>e.jsxs(bt,{children:[e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:B.type==="INVOICE"?"purple":"gray",children:B.type==="INVOICE"?"Facture":"Devis"})}),e.jsx(Ee,{children:B.number||""}),e.jsx(Ee,{children:B.title||""}),e.jsx(Ee,{children:dn(B.date)}),e.jsx(Ee,{isNumeric:!0,children:ct(Number(B.amount||0))}),e.jsx(Ee,{children:B.eventId?e.jsx(Qe,{children:B.eventId}):e.jsx(k,{fontSize:"sm",color:"gray.500",children:""})}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:B.type==="INVOICE"?{DRAFT:"gray",SENT:"blue",ACCEPTED:"cyan",PENDING_PAYMENT:"orange",PAID:"green",DEPOSIT_PAID:"yellow"}[B.invoiceStatus||"gray"]:{DRAFT:"gray",SENT:"blue",ACCEPTED:"green",REFUSED:"red",REEDITED:"orange"}[B.quoteStatus||"gray"],variant:"subtle",children:B.type==="INVOICE"?{DRAFT:"Brouillon",SENT:"Envoy",ACCEPTED:"Accept",PENDING_PAYMENT:"En attente de paiement",PAID:"Pay",DEPOSIT_PAID:"Accompte pay"}[B.invoiceStatus||"DRAFT"]:{DRAFT:"Brouillon",SENT:"Envoy",ACCEPTED:"Accept",REFUSED:"Refus",REEDITED:"Rdit"}[B.quoteStatus||"DRAFT"]})}),e.jsx(Ee,{children:e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(ph,{}),variant:"ghost",size:"sm"}),e.jsxs(Go,{children:[e.jsx(Dn,{icon:e.jsx(nh,{}),onClick:()=>ed(B),children:"Modifier"}),e.jsx(Vx,{}),e.jsx(ZP,{title:"Changer le statut",children:B.type==="QUOTE"?e.jsxs(e.Fragment,{children:[e.jsx(la,{onClick:()=>Ds(B.id,"DRAFT"),children:"Brouillon"}),e.jsx(la,{onClick:()=>Ds(B.id,"SENT"),children:"Envoy"}),e.jsx(la,{onClick:()=>Ds(B.id,"ACCEPTED"),children:"Accept"}),e.jsx(la,{onClick:()=>Ds(B.id,"REFUSED"),children:"Refus"}),e.jsx(la,{onClick:()=>Wc(B),children:"Rdit vers un nouveau"})]}):e.jsxs(e.Fragment,{children:[e.jsx(la,{onClick:()=>Ds(B.id,"DRAFT"),children:"Brouillon"}),e.jsx(la,{onClick:()=>Ds(B.id,"SENT"),children:"Envoy"}),e.jsx(la,{onClick:()=>Ds(B.id,"ACCEPTED"),children:"Accept"}),e.jsx(la,{onClick:()=>Ds(B.id,"PENDING_PAYMENT"),children:"En attente de paiement"}),e.jsx(la,{onClick:()=>Ds(B.id,"PAID"),children:"Pay"}),e.jsx(la,{onClick:()=>Ds(B.id,"DEPOSIT_PAID"),children:"Accompte pay"})]})}),e.jsx(Vx,{}),e.jsx(Dn,{icon:e.jsx(Qn,{}),color:"red.500",onClick:()=>td(B.id),children:"Supprimer"})]})]})})]},B.id))})]})})})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"chanciers"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"purple",onClick:Wa,size:"sm",children:"Nouvel chancier"})]}),t?e.jsxs(oe,{textAlign:"center",p:8,children:[e.jsx(pn,{size:"lg"}),e.jsx(k,{mt:2,children:"Chargement..."})]}):(()=>{const B=N.filter(ie=>ie.type==="SCHEDULED_PAYMENT"&&String(ie.frequency||"").toUpperCase()==="MONTHLY");return B.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucun chancier (mensualits) enregistr"]}):e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:4,children:B.map((ie,it)=>{const Lt=Number.isFinite(ie.totalAmount)&&ie.totalAmount>0,Sn=Lt?Math.max(ie.totalAmount-(ie.remainingTotalAmount||0),0):null,en=Number.isFinite(ie.plannedCountYear)&&ie.plannedCountYear>0,Xn=en?Math.max((ie.plannedCountYear||0)-(ie.remainingCountYear||0),0):null,_i=en?Math.max(0,Math.min(1,Xn/ie.plannedCountYear)):null,Cs=Lt?Math.max(0,Math.min(1,Sn/ie.totalAmount)):_i,$r=Cs==null?"gray.400":Cs>=.75?"red":Cs>=.4?"orange":"red";return e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"sm",noOfLines:2,children:ie.description}),e.jsxs(ee,{children:[e.jsx(Qe,{variant:"outline",children:"Mensuel"}),e.jsx(Qe,{colorScheme:"red",children:"DPENSE"})]})]})}),e.jsx(ke,{children:e.jsxs(ee,{align:"center",spacing:4,children:[e.jsx(oe,{minW:"120px",w:"120px",children:e.jsx(jt,{percent:Cs,color:$r})}),e.jsxs(J,{align:"start",spacing:1,flex:1,children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Prochaine date"}),e.jsx(k,{fontWeight:"medium",children:ie.nextDate?dn(ie.nextDate):""}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Mensualit"}),e.jsxs(k,{fontWeight:"bold",color:"red.600",children:["- ",ct(Math.abs(ie.amount))]}),e.jsxs(ee,{spacing:3,children:[e.jsxs(Qe,{variant:"subtle",colorScheme:"blue",children:["Payes: ",ie.paymentsCount??0]}),Lt&&e.jsxs(Qe,{variant:"subtle",children:["Restant total: ",ct(ie.remainingTotalAmount||0)]}),!Lt&&en&&e.jsxs(Qe,{variant:"subtle",colorScheme:"purple",children:["Payes cette anne: ",Xn]})]}),ie.monthsRemainingTotal&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Mensualits restantes: ",ie.monthsRemainingTotal]}),ie.estimatedEndDate&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Fin estime: ",dn(ie.estimatedEndDate)]})]})]})}),e.jsx(ke,{pt:0,children:e.jsxs(ee,{children:[e.jsx(Q,{size:"sm",onClick:()=>Vl(ie),children:"Dclarer pay"}),e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>nd(ie),children:"Voir paiements"}),e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(Qn,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>qc(ie.id)})]})})]},ie.id||it)})})})()]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Paiements programms (mensuels)"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"purple",onClick:Wa,size:"sm",children:"Ajouter un prlvement"})]}),t?e.jsxs(oe,{textAlign:"center",p:8,children:[e.jsx(pn,{size:"lg"}),e.jsx(k,{mt:2,children:"Chargement..."})]}):(()=>{const B=N.filter(ie=>ie.type==="SCHEDULED_PAYMENT"&&String(ie.frequency||"").toUpperCase()==="MONTHLY");return B.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucun paiement mensuel programm"]}):e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:4,children:B.map((ie,it)=>{const Lt=Number.isFinite(ie.totalAmount)&&ie.totalAmount>0,Sn=Lt?Math.max(ie.totalAmount-(ie.remainingTotalAmount||0),0):null,en=Number.isFinite(ie.plannedCountYear)&&ie.plannedCountYear>0,Xn=en?Math.max((ie.plannedCountYear||0)-(ie.remainingCountYear||0),0):null,_i=en?Math.max(0,Math.min(1,Xn/ie.plannedCountYear)):null,Cs=Lt?Math.max(0,Math.min(1,Sn/ie.totalAmount)):_i,$r=Cs==null?"gray.400":Cs>=.75?"red":Cs>=.4?"orange":"red";return e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"sm",noOfLines:2,children:ie.description}),e.jsxs(ee,{children:[e.jsx(Qe,{variant:"outline",children:"Mensuel"}),e.jsx(Qe,{colorScheme:"red",children:"DPENSE"})]})]})}),e.jsx(ke,{children:e.jsxs(ee,{align:"center",spacing:4,children:[e.jsx(oe,{minW:"120px",w:"120px",children:e.jsx(jt,{percent:Cs,color:$r})}),e.jsxs(J,{align:"start",spacing:1,flex:1,children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Prochaine date"}),e.jsx(k,{fontWeight:"medium",children:ie.nextDate?dn(ie.nextDate):""}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Mensualit"}),e.jsxs(k,{fontWeight:"bold",color:"red.600",children:["- ",ct(Math.abs(ie.amount))]}),e.jsxs(ee,{spacing:3,children:[e.jsxs(Qe,{variant:"subtle",colorScheme:"blue",children:["Payes: ",ie.paymentsCount??0]}),Lt&&e.jsxs(Qe,{variant:"subtle",children:["Restant total: ",ct(ie.remainingTotalAmount||0)]}),!Lt&&en&&e.jsxs(Qe,{variant:"subtle",colorScheme:"purple",children:["Payes cette anne: ",Xn]})]}),ie.estimatedEndDate&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Fin estime: ",dn(ie.estimatedEndDate)]})]})]})}),e.jsx(ke,{pt:0,children:e.jsxs(ee,{children:[e.jsx(Q,{size:"sm",onClick:()=>Vl(ie),children:"Dclarer pay"}),e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>nd(ie),children:"Voir paiements"}),e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(Qn,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>qc(ie.id)})]})})]},ie.id||it)})})})()]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsx(ee,{justify:"space-between",children:e.jsx(Te,{size:"md",children:"Notes de frais"})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(ee,{spacing:3,align:"end",children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:qe.description,onChange:B=>Me(ie=>({...ie,description:B.target.value})),placeholder:"Ex: Achat fournitures"})]}),e.jsxs(X,{isRequired:!0,width:"220px",children:[e.jsx(Z,{children:"Montant ()"}),e.jsxs(Ln,{value:qe.amount,onChange:B=>Me(ie=>({...ie,amount:B})),precision:2,step:.01,children:[e.jsx(On,{placeholder:"0.00"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsxs(X,{width:"220px",children:[e.jsx(Z,{children:"Date"}),e.jsx(ge,{type:"date",value:qe.date,onChange:B=>Me(ie=>({...ie,date:B.target.value}))})]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:is,children:"Ajouter"})]})})}),St.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucune note de frais pour le moment"]}):e.jsx(Pe,{children:e.jsx(ke,{p:0,children:e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Description"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{children:"Statut"}),ue&&e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:St.map(B=>e.jsxs(bt,{children:[e.jsx(Ee,{children:dn(B.date||B.createdAt)}),e.jsx(Ee,{children:B.description}),e.jsx(Ee,{isNumeric:!0,children:ct(B.amount)}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:B.status==="PAID"?"green":B.status==="APPROVED"?"blue":B.status==="REJECTED"?"red":"orange",children:B.status})}),ue&&e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(Q,{size:"xs",onClick:()=>Qi(B.id,"APPROVED"),leftIcon:e.jsx(Kp,{}),colorScheme:"blue",variant:"outline",children:"Approuver"}),e.jsx(Q,{size:"xs",onClick:()=>Qi(B.id,"PAID"),leftIcon:e.jsx(Hu,{}),colorScheme:"green",variant:"outline",children:"Pay"}),e.jsx(Q,{size:"xs",onClick:()=>Qi(B.id,"REJECTED"),leftIcon:e.jsx(qu,{}),colorScheme:"red",variant:"outline",children:"Rejeter"}),e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(Qn,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:()=>Ya(B.id)})]})})]},B.id))})]})})})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Simulations Financires"}),e.jsx(Q,{leftIcon:e.jsx(_l,{}),colorScheme:"teal",onClick:ar,size:"sm",children:"Nouveau scnario"})]}),pe.scenarios.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:2,children:[e.jsx(k,{fontWeight:"bold",children:"Aucun scnario de simulation"}),e.jsx(k,{fontSize:"sm",children:"Crez des scnarios pour simuler l'volution de votre trsorerie. tape 1: Crer le contexte, tape 2: Ajouter recettes/dpenses."})]})]}):e.jsx(mt,{columns:{base:1,md:2},spacing:4,children:pe.scenarios.map(B=>{const ie=B.itemsCount>0,it=B.totalMonthlyIncome-B.totalMonthlyExpenses;return e.jsxs(Pe,{borderWidth:2,borderColor:ie?"green.200":"orange.200",children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"sm",children:B.name}),e.jsxs(ee,{children:[e.jsx(Qe,{colorScheme:ie?"green":"orange",size:"sm",children:ie?"Complet":"Brouillon"}),e.jsxs(Qe,{variant:"outline",size:"sm",children:[B.itemsCount," lment(s)"]})]})]}),e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(ph,{}),variant:"ghost",size:"sm"}),e.jsxs(Go,{children:[e.jsx(Dn,{icon:e.jsx(nh,{}),onClick:async()=>{await yo(B.id),Ei()},children:"diter"}),e.jsx(Dn,{icon:e.jsx(_l,{}),onClick:()=>Yc(B.id),isDisabled:!ie,children:"Excuter"}),e.jsx(Dn,{icon:e.jsx(ua,{}),onClick:()=>as(B.id,B.name),isDisabled:!ie,children:"Exporter PDF"}),e.jsx(xn,{}),e.jsx(Dn,{icon:e.jsx(Qn,{}),color:"red.500",onClick:()=>{confirm("Supprimer ce scnario ?")&&Ka(B.id)},children:"Supprimer"})]})]})]})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsx(k,{fontSize:"sm",color:"gray.600",noOfLines:2,children:B.description}),ie?e.jsxs(mt,{columns:3,spacing:2,children:[e.jsxs(Rt,{size:"sm",children:[e.jsx(kt,{fontSize:"xs",children:"Revenus"}),e.jsx(Dt,{fontSize:"sm",color:"green.600",children:ct(B.totalMonthlyIncome)})]}),e.jsxs(Rt,{size:"sm",children:[e.jsx(kt,{fontSize:"xs",children:"Dpenses"}),e.jsx(Dt,{fontSize:"sm",color:"red.600",children:ct(B.totalMonthlyExpenses)})]}),e.jsxs(Rt,{size:"sm",children:[e.jsx(kt,{fontSize:"xs",children:"Rsultat"}),e.jsx(Dt,{fontSize:"sm",color:it>=0?"green.600":"red.600",children:ct(it)})]})]}):e.jsxs(Ut,{status:"warning",size:"sm",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"xs",children:"Ajoutez des recettes et dpenses pour complter le scnario"})]}),e.jsxs(ee,{children:[e.jsx(Q,{size:"xs",variant:"outline",leftIcon:e.jsx(nh,{}),onClick:async()=>{await yo(B.id),Ei()},children:"diter"}),e.jsx(Q,{size:"xs",colorScheme:"teal",leftIcon:e.jsx(_l,{}),onClick:()=>Yc(B.id),isDisabled:!ie,isLoading:t,children:"Simuler"})]})]})})]},B.id)})})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Rapports Financiers"}),e.jsxs(ee,{children:[e.jsxs(X,{width:"150px",children:[e.jsx(Z,{children:"Anne"}),e.jsx(ut,{value:wt,onChange:B=>Xe(parseInt(B.target.value,10)),children:[0,1,2,3,4].map(B=>{const ie=new Date().getFullYear()-B;return e.jsx("option",{value:ie,children:ie},ie)})})]}),e.jsx(Q,{leftIcon:e.jsx(Fa,{}),onClick:()=>ws(wt),isLoading:t,children:"Actualiser"}),e.jsx(Q,{leftIcon:e.jsx(ua,{}),colorScheme:"purple",onClick:ci,children:"Export PDF"})]})]}),pt?e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(mt,{columns:{base:1,md:4},spacing:4,children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total recettes (priode)"}),e.jsx(Dt,{color:"green.600",children:ct(pt?.totals?.credits||0)})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total dpenses (priode)"}),e.jsx(Dt,{color:"red.600",children:ct(pt?.totals?.debits||0)})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Net (priode)"}),e.jsx(Dt,{color:(pt?.totals?.net||0)>=0?"green.600":"red.600",children:ct(pt?.totals?.net||0)})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Solde actuel"}),e.jsx(Dt,{children:ct(l)})]})})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Soldes de priode"})}),e.jsx(ke,{children:e.jsxs(mt,{columns:{base:1,md:3},spacing:4,children:[e.jsxs(Rt,{children:[e.jsx(kt,{children:"Solde d'ouverture"}),e.jsx(Dt,{children:ct(pt?.balances?.opening||0)})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Solde de clture (calcul)"}),e.jsx(Dt,{children:ct(pt?.balances?.closing||0)})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Ouverture + Net"}),e.jsx(Dt,{children:ct(pt?.balances?.closingFromOpeningPlusNet||0)})]})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(Te,{size:"sm",children:["Par mois (",wt,")"]})}),e.jsx(ke,{p:0,children:e.jsxs(Fn,{size:"sm",variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Mois"}),e.jsx(_e,{isNumeric:!0,children:"Recettes"}),e.jsx(_e,{isNumeric:!0,children:"Dpenses"}),e.jsx(_e,{isNumeric:!0,children:"Net"})]})}),e.jsx(Wn,{children:(pt?.monthly||[]).map(B=>e.jsxs(bt,{children:[e.jsx(Ee,{children:String(B.month).padStart(2,"0")}),e.jsx(Ee,{isNumeric:!0,children:ct(B.credits)}),e.jsx(Ee,{isNumeric:!0,children:ct(B.debits)}),e.jsx(Ee,{isNumeric:!0,children:e.jsx(k,{color:(B.net||0)>=0?"green.600":"red.600",children:ct(B.net)})})]},B.month))})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Par catgorie"})}),e.jsx(ke,{p:0,children:e.jsxs(Fn,{size:"sm",variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{isNumeric:!0,children:"Recettes"}),e.jsx(_e,{isNumeric:!0,children:"Dpenses"}),e.jsx(_e,{isNumeric:!0,children:"Net"})]})}),e.jsx(Wn,{children:Object.entries(pt?.byCategory||{}).map(([B,ie])=>e.jsxs(bt,{children:[e.jsx(Ee,{children:B}),e.jsx(Ee,{isNumeric:!0,children:ct(ie.credits)}),e.jsx(Ee,{isNumeric:!0,children:ct(ie.debits)}),e.jsx(Ee,{isNumeric:!0,children:e.jsx(k,{color:(ie.net||0)>=0?"green.600":"red.600",children:ct(ie.net)})})]},B))})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Transactions rcentes (extrait)"})}),e.jsx(ke,{p:0,children:e.jsxs(Fn,{size:"sm",variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Description"}),e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{isNumeric:!0,children:"Montant"})]})}),e.jsx(Wn,{children:(pt?.sample||[]).map(B=>e.jsxs(bt,{children:[e.jsx(Ee,{children:dn(B.date)}),e.jsx(Ee,{children:B.description}),e.jsx(Ee,{children:(B.category||"AUTRE").toUpperCase()}),e.jsx(Ee,{isNumeric:!0,children:e.jsx(k,{color:String(B.type).toUpperCase()==="CREDIT"?"green.600":"red.600",children:ct(B.amount)})})]},`${B.id}-${B.date}`))})]})})]})]}):e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(k,{children:["Aucun rapport disponible pour ",wt,". Essayez d'actualiser."]})]})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsx(Te,{size:"md",children:"Configuration Avance"}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Historique des Modifications de Solde"})}),e.jsx(ke,{children:le.length===0?e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Aucune modification enregistre"}):e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Ancien solde"}),e.jsx(_e,{children:"Nouveau solde"}),e.jsx(_e,{children:"Diffrence"}),e.jsx(_e,{children:"Raison"})]})}),e.jsx(Wn,{children:le.slice(0,10).map((B,ie)=>e.jsxs(bt,{children:[e.jsx(Ee,{children:dn(B.date)}),e.jsx(Ee,{children:ct(B.oldBalance)}),e.jsx(Ee,{children:ct(B.newBalance)}),e.jsx(Ee,{children:e.jsxs(k,{color:B.newBalance-B.oldBalance>=0?"green.600":"red.600",children:[B.newBalance-B.oldBalance>=0?"+":"",ct(B.newBalance-B.oldBalance)]})}),e.jsx(Ee,{fontSize:"sm",children:B.reason})]},ie))})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Paramtres de Simulation"})}),e.jsx(ke,{children:e.jsxs(X,{children:[e.jsx(Z,{children:"Nombre de mois  projeter"}),e.jsxs(Ln,{value:pe.projectionMonths,onChange:B=>ye(ie=>({...ie,projectionMonths:parseInt(B)||12})),min:1,max:60,children:[e.jsx(On,{}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]}),e.jsxs(k,{fontSize:"xs",color:"gray.500",mt:1,children:["Entre 1 et 60 mois (actuellement: ",pe.projectionMonths," mois)"]})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Scurit"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(ee,{children:[e.jsx(Cn,{as:f?Ko:Wb,color:f?"red.500":"green.500"}),e.jsxs(k,{fontSize:"sm",children:["Solde ",f?"verrouill":"dverrouill"," -",f?" Code requis pour modification":" Modification libre"]})]}),e.jsxs(Ut,{status:"warning",size:"sm",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"xs",children:"Le code de scurit  4 chiffres est requis pour toute modification directe du solde. Contactez l'administrateur systme si vous avez oubli le code."})]})]})})]})]})})]})]}),e.jsxs(Et,{isOpen:Fl,onClose:Si,isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Modifier la transaction"}),e.jsx($t,{}),e.jsx(_t,{children:Dr&&e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:Dr.description||"",onChange:B=>us(ie=>({...ie,description:B.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Catgorie"}),e.jsxs(ut,{value:Dr.category||"ADHESION",onChange:B=>us(ie=>({...ie,category:B.target.value})),children:[e.jsx("option",{value:"ADHESION",children:"Adhsion"}),e.jsx("option",{value:"EVENEMENT",children:"vnement"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"CARBURANT",children:"Carburant"}),e.jsx("option",{value:"AUTRE",children:"Autre"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Type"}),e.jsxs(ut,{value:Dr.type||"CREDIT",onChange:B=>us(ie=>({...ie,type:B.target.value})),children:[e.jsx("option",{value:"CREDIT",children:"Recette"}),e.jsx("option",{value:"DEBIT",children:"Dpense"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Montant"}),e.jsxs(Ln,{value:Dr.amount,onChange:B=>us(ie=>({...ie,amount:B})),precision:2,step:.5,children:[e.jsx(On,{}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date"}),e.jsx(ge,{type:"date",value:(Dr.date||"").slice(0,10),onChange:B=>us(ie=>({...ie,date:B.target.value}))})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:Si,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:Vh,children:"Enregistrer"})]})]})]}),e.jsxs(Et,{isOpen:ys,onClose:ri,isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Lier  un devis/une facture"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsx(J,{spacing:3,align:"stretch",children:e.jsxs(X,{children:[e.jsx(Z,{children:"Document"}),e.jsx(ut,{placeholder:"Slectionner un document",value:mo,onChange:B=>si(B.target.value),children:Kt.map(B=>e.jsxs("option",{value:B.id,children:[B.type==="INVOICE"?"Facture":"Devis","  ",B.number||B.title||B.id,"  ",ct(Number(B.amount||0))]},B.id))})]})})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",onClick:ri,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:Hh,children:"Lier"})]})]})]}),e.jsxs(Et,{isOpen:ii,onClose:Rs,isCentered:!0,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:Zt?"Modifier le document":"Nouveau document"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"Type"}),e.jsxs(ut,{value:lt.type,onChange:B=>vn(ie=>({...ie,type:B.target.value})),children:[e.jsx("option",{value:"QUOTE",children:" Devis"}),e.jsx("option",{value:"INVOICE",children:" Facture"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"Date"}),e.jsx(ge,{type:"date",value:lt.date,onChange:B=>vn(ie=>({...ie,date:B.target.value}))})]}),lt.type==="INVOICE"&&e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"chance"}),e.jsx(ge,{type:"date",value:lt.dueDate||"",onChange:B=>vn(ie=>({...ie,dueDate:B.target.value}))})]})]}),e.jsxs(ee,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"Numro"}),e.jsx(ge,{value:lt.number,onChange:B=>vn(ie=>({...ie,number:B.target.value})),placeholder:lt.type==="QUOTE"?"ex: DV-2025-001":"ex: FA-2025-001"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"Titre"}),e.jsx(ge,{value:lt.title,onChange:B=>vn(ie=>({...ie,title:B.target.value})),placeholder:"Objet du document"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"Description"}),e.jsx(Xt,{value:lt.description||"",onChange:B=>vn(ie=>({...ie,description:B.target.value})),placeholder:"Dtails du document",rows:2})]}),e.jsx(oe,{bg:"blue.50",p:4,borderRadius:"md",borderLeft:"4px solid",borderColor:"blue.500",children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"sm",children:" Montant"}),e.jsx(k,{fontSize:"xs",color:"gray.600",children:" Association (exempte TVA)"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Montant total"}),e.jsxs(Ln,{value:lt.amount||"",onChange:B=>{vn(ie=>({...ie,amount:B,amountExcludingTax:B,taxRate:0,taxAmount:0}))},precision:2,step:10,children:[e.jsx(On,{placeholder:"0.00"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsx(oe,{p:3,bg:"green.100",borderRadius:"md",border:"1px solid",borderColor:"green.400",children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{fontSize:"sm",color:"green.700",fontWeight:"bold",children:"Montant TTC:"}),e.jsxs(k,{fontSize:"lg",color:"green.700",fontWeight:"bold",children:[parseFloat(lt.amount||0).toFixed(2)," "]})]})})]})}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"Statut"}),e.jsx(ut,{value:lt.status,onChange:B=>vn(ie=>({...ie,status:B.target.value})),children:lt.type==="QUOTE"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"DRAFT",children:" Brouillon"}),e.jsx("option",{value:"SENT",children:" Envoy"}),e.jsx("option",{value:"ACCEPTED",children:" Accept"}),e.jsx("option",{value:"REFUSED",children:" Refus"}),e.jsx("option",{value:"REEDITED",children:" Rdit"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"DRAFT",children:" Brouillon"}),e.jsx("option",{value:"SENT",children:" Envoy"}),e.jsx("option",{value:"ACCEPTED",children:" Accept"}),e.jsx("option",{value:"PENDING_PAYMENT",children:" En attente de paiement"}),e.jsx("option",{value:"PAID",children:" Pay"}),e.jsx("option",{value:"DEPOSIT_PAID",children:" Accompte pay"})]})})]}),lt.type==="INVOICE"&&e.jsx(oe,{bg:"purple.50",p:3,borderRadius:"md",borderLeft:"4px solid",borderColor:"purple.500",children:e.jsxs(J,{spacing:2,align:"stretch",children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Infos de paiement"}),e.jsxs(ee,{spacing:2,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Mode"}),e.jsx(ge,{size:"sm",value:lt.paymentMethod||"",onChange:B=>vn(ie=>({...ie,paymentMethod:B.target.value})),placeholder:"ex: Virement, Espces"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Date paiement"}),e.jsx(ge,{size:"sm",type:"date",value:lt.paymentDate||"",onChange:B=>vn(ie=>({...ie,paymentDate:B.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Montant pay"}),e.jsx(Ln,{value:lt.amountPaid||"",onChange:B=>vn(ie=>({...ie,amountPaid:B})),size:"sm",precision:2,children:e.jsx(On,{})})]})]})]})}),e.jsxs(ee,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"vnement (optionnel)"}),e.jsx(ge,{size:"sm",value:lt.eventId||"",onChange:B=>vn(ie=>({...ie,eventId:B.target.value})),placeholder:"ID d'vnement"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Membre (optionnel)"}),e.jsx(ge,{size:"sm",value:lt.memberId||"",onChange:B=>vn(ie=>({...ie,memberId:B.target.value})),placeholder:"ID de membre"})]})]}),e.jsxs(ee,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Destinataire - Nom"}),e.jsx(ge,{size:"sm",value:lt.destinataireName||"",onChange:B=>vn(ie=>({...ie,destinataireName:B.target.value})),placeholder:"Nom du destinataire (pour le template)"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Destinataire - Adresse"}),e.jsx(ge,{size:"sm",value:lt.destinataireAdresse||"",onChange:B=>vn(ie=>({...ie,destinataireAdresse:B.target.value})),placeholder:"Adresse (pour le template)"})]})]}),e.jsxs(ee,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Destinataire - Socit"}),e.jsx(ge,{size:"sm",value:lt.destinataireSociete||"",onChange:B=>vn(ie=>({...ie,destinataireSociete:B.target.value})),placeholder:"Socit (optionnel)"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Destinataire - Contacts"}),e.jsx(ge,{size:"sm",value:lt.destinataireContacts||"",onChange:B=>vn(ie=>({...ie,destinataireContacts:B.target.value})),placeholder:"Tlphone, email, etc."})]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Notes (visibles au client)"}),e.jsx(Xt,{size:"sm",value:lt.notes||"",onChange:B=>vn(ie=>({...ie,notes:B.target.value})),placeholder:"Remarques publiques",rows:1})]}),e.jsx(xn,{}),e.jsx(lz,{devisId:Zt?.id||"temp-"+Date.now(),onTotalChange:B=>{vn(ie=>({...ie,amount:B.toFixed(2)}))}}),e.jsx(oe,{bg:"amber.50",p:4,borderRadius:"md",borderLeft:"4px solid",borderColor:"amber.500",children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsx(ee,{justify:"space-between",children:e.jsx(Te,{size:"sm",children:" Gnrer le document"})}),e.jsxs(J,{spacing:2,align:"stretch",children:[$i.length>0?e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:" Slectionner un template"}),e.jsx(ut,{size:"sm",value:ns?.id||"",onChange:B=>{const ie=$i.find(it=>it.id===B.target.value);Bi(ie)},placeholder:"Choisir un template...",children:$i.map(B=>e.jsxs("option",{value:B.id,children:[B.name," ",B.isDefault?"":""]},B.id))}),ns&&e.jsxs(k,{fontSize:"xs",color:"gray.600",mt:1,children:[" ",ns.name]})]}):e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"xs",children:"Aucun template disponible. Crez-en un d'abord."})]}),ns&&e.jsx(Q,{colorScheme:"orange",size:"sm",onClick:ui,leftIcon:e.jsx(ua,{}),width:"100%",children:" Gnrer l'aperu & PDF"}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:2,children:" Remplissez tous les champs du formulaire (Numro, Titre, Montant, Destinataire) avant de gnrer"})]})]})})]})}),e.jsx(Vt,{children:e.jsxs(ee,{spacing:2,children:[e.jsx(Q,{variant:"ghost",onClick:Rs,children:"Annuler"}),e.jsx(Q,{colorScheme:"purple",onClick:ja,children:Zt?" Enregistrer les modifications":" Crer le document"})]})})]})]}),e.jsxs(Et,{isOpen:Uc,onClose:Ui,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Configuration Rapide"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"sm",children:"Configuration scurise du solde de base. Un code  4 chiffres est requis."})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Code de scurit (4 chiffres)"}),e.jsx(ee,{children:e.jsxs(Ob,{value:F,onChange:fe,type:"number",children:[e.jsx(bl,{}),e.jsx(bl,{}),e.jsx(bl,{}),e.jsx(bl,{})]})})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nouveau solde ()"}),e.jsxs(Ln,{value:te,onChange:R,precision:2,step:.01,children:[e.jsx(On,{placeholder:"Entrez le nouveau solde"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),te&&!isNaN(parseFloat(te))&&e.jsxs(Ut,{status:parseFloat(te)>=l?"success":"warning",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontSize:"sm",fontWeight:"bold",children:"Aperu de la modification"}),e.jsxs(k,{fontSize:"sm",children:["Solde actuel: ",ct(l)]}),e.jsxs(k,{fontSize:"sm",children:["Nouveau solde: ",ct(parseFloat(te))]}),e.jsxs(k,{fontSize:"sm",color:parseFloat(te)-l>=0?"green.600":"red.600",children:["Diffrence: ",parseFloat(te)-l>=0?"+":"",ct(parseFloat(te)-l)]})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:Ui,children:"Annuler"}),e.jsx(Q,{colorScheme:"orange",onClick:zr,isLoading:t,leftIcon:e.jsx(Il,{}),children:"Configurer le solde"})]})]})]}),e.jsxs(Et,{isOpen:Mr,onClose:go,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Dclarer une mensualit paye"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Priode"}),e.jsx(ge,{type:"month",value:he,onChange:B=>re(B.target.value)})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Montant ()"}),e.jsxs(Ln,{value:ce,onChange:B=>Se(B),precision:2,step:.01,children:[e.jsx(On,{}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Attestation / Photo"}),e.jsx(ge,{type:"file",accept:"image/*,application/pdf",onChange:B=>de(B.target.files?.[0]||null)}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Pice justificative obligatoire"})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:go,children:"Annuler"}),e.jsx(Q,{colorScheme:"green",onClick:Gh,isLoading:t,children:"Dclarer"})]})]})]}),e.jsxs(Et,{isOpen:Gi,onClose:dr,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsxs(Tt,{children:["Paiements  ",$?.description]}),e.jsx($t,{}),e.jsx(_t,{children:G.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucun paiement enregistr"]}):e.jsxs(Fn,{size:"sm",variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Priode"}),e.jsx(_e,{children:"Pay le"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{children:"Justificatif"})]})}),e.jsx(Wn,{children:G.map(B=>e.jsxs(bt,{children:[e.jsx(Ee,{children:B.period}),e.jsx(Ee,{children:dn(B.paidAt)}),e.jsx(Ee,{isNumeric:!0,children:ct(B.amount)}),e.jsx(Ee,{children:B.attachment?.dataUrl?e.jsx(O1,{href:B.attachment.dataUrl,target:"_blank",color:"blue.600",children:"Ouvrir"}):e.jsx(k,{fontSize:"xs",color:"gray.500",children:"N/A"})})]},B.id))})]})}),e.jsx(Vt,{children:e.jsx(Q,{onClick:dr,children:"Fermer"})})]})]}),e.jsxs(Et,{isOpen:ai,onClose:wi,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsx(Tt,{children:"Nouvelle Transaction"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:6,children:[e.jsxs(J,{spacing:4,width:"full",children:[e.jsx(Te,{size:"sm",children:"Informations de la transaction"}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Type"}),e.jsxs(ut,{value:C.type,onChange:B=>_(ie=>({...ie,type:B.target.value})),children:[e.jsx("option",{value:"CREDIT",children:"Recette"}),e.jsx("option",{value:"DEBIT",children:"Dpense"})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Montant ()"}),e.jsxs(Ln,{value:C.amount,onChange:B=>_(ie=>({...ie,amount:B})),precision:2,step:.01,children:[e.jsx(On,{placeholder:"0.00"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:C.description,onChange:B=>_(ie=>({...ie,description:B.target.value})),placeholder:"Description de la transaction"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date"}),e.jsx(ge,{type:"date",value:C.date,onChange:B=>_(ie=>({...ie,date:B.target.value}))})]})]}),e.jsx(xn,{}),e.jsxs(J,{spacing:3,width:"full",children:[e.jsx(Te,{size:"sm",children:"Allouer par catgorie"}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Vous pouvez diviser ce montant entre plusieurs catgories (ex: 100 gasoil + 13 assurance)"}),A.length>0&&e.jsxs(oe,{width:"full",children:[e.jsx(k,{fontSize:"sm",fontWeight:"bold",mb:2,children:"Allocations actuelles:"}),e.jsx(J,{spacing:2,align:"stretch",children:A.map((B,ie)=>e.jsxs(ee,{p:2,borderRadius:"md",bg:Tn("gray.100","gray.600"),justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:0,children:[e.jsxs(ee,{children:[e.jsx(oe,{w:3,h:3,borderRadius:"full",bg:B.category?.color}),e.jsx(k,{fontWeight:"bold",children:B.category?.name})]}),B.notes&&e.jsx(k,{fontSize:"xs",color:"gray.500",children:B.notes})]}),e.jsxs(ee,{children:[e.jsx(k,{fontWeight:"bold",children:ct(B.allocatedAmount)}),e.jsx(xt,{size:"sm",icon:e.jsx(Qn,{}),colorScheme:"red",variant:"ghost",onClick:()=>{D(A.filter((it,Lt)=>Lt!==ie))}})]})]},ie))}),e.jsxs(k,{fontSize:"xs",color:"gray.500",mt:2,children:["Total allou: ",ct(A.reduce((B,ie)=>B+(parseFloat(ie.allocatedAmount)||0),0))," / ",ct(parseFloat(C.amount)||0)]})]}),e.jsx(Pe,{width:"full",children:e.jsx(ke,{children:e.jsxs(J,{spacing:3,children:[e.jsx(Te,{size:"xs",children:"Ajouter une allocation"}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Catgorie"}),e.jsxs(ut,{value:P.categoryId,onChange:B=>M({...P,categoryId:B.target.value}),size:"sm",children:[e.jsx("option",{value:"",children:"Slectionner une catgorie"}),Ne.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Montant ()"}),e.jsxs(Ln,{value:P.allocatedAmount,onChange:B=>M({...P,allocatedAmount:B}),precision:2,step:.01,size:"sm",children:[e.jsx(On,{placeholder:"0.00"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Notes (optionnel)"}),e.jsx(Xt,{value:P.notes,onChange:B=>M({...P,notes:B.target.value}),placeholder:"ex: gasoil station Shell",rows:2,size:"sm"})]}),e.jsxs(Q,{colorScheme:"blue",width:"full",size:"sm",onClick:()=>{if(!P.categoryId||!P.allocatedAmount){dt({status:"error",title:"Remplissez catgorie et montant"});return}const B=Ne.find(ie=>ie.id===P.categoryId);D([...A,{categoryId:P.categoryId,category:B,allocatedAmount:parseFloat(P.allocatedAmount),notes:P.notes}]),M({categoryId:"",allocatedAmount:"",notes:""})},children:[e.jsx(Bn,{})," Ajouter l'allocation"]})]})})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:wi,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:()=>{if(!C.type||!C.amount||!C.description){dt({status:"error",title:"Remplissez les champs obligatoires"});return}Za()},isLoading:t,children:"Ajouter"})]})]})]}),e.jsxs(Et,{isOpen:Ci,onClose:oi,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:r===2?"Nouvel chancier":"Nouvelle Opration Programme"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[r!==2&&e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Type"}),e.jsxs(ut,{value:I.type,onChange:B=>V(ie=>({...ie,type:B.target.value})),children:[e.jsx("option",{value:"SCHEDULED_PAYMENT",children:"Paiement programm"}),e.jsx("option",{value:"SCHEDULED_CREDIT",children:"Crdit programm"})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:r===2?"Mensualit ( / mois)":"Montant ()"}),e.jsxs(Ln,{value:I.amount,onChange:B=>V(ie=>({...ie,amount:B})),precision:2,step:.01,children:[e.jsx(On,{placeholder:"0.00"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:I.description,onChange:B=>V(ie=>({...ie,description:B.target.value})),placeholder:"Description de l'opration"})]}),r!==2&&e.jsxs(X,{children:[e.jsx(Z,{children:"Frquence"}),e.jsxs(ut,{value:I.frequency,onChange:B=>V(ie=>({...ie,frequency:B.target.value})),children:[e.jsx("option",{value:"MONTHLY",children:"Mensuel"}),e.jsx("option",{value:"WEEKLY",children:"Hebdomadaire"}),e.jsx("option",{value:"QUARTERLY",children:"Trimestriel"}),e.jsx("option",{value:"YEARLY",children:"Annuel"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Prochaine excution"}),e.jsx(ge,{type:"date",value:I.nextDate,onChange:B=>V(ie=>({...ie,nextDate:B.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:r===2?"Montant total (optionnel)":"Total  amortir (optionnel)"}),e.jsxs(Ln,{value:I.totalAmount,onChange:B=>V(ie=>({...ie,totalAmount:B})),precision:2,step:.01,children:[e.jsx(On,{placeholder:"Ex: 4000.00"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:"Permet de calculer le nombre de mensualits restantes et la date de fin estime."})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:oi,children:"Annuler"}),e.jsx(Q,{colorScheme:"purple",onClick:qh,isLoading:t,children:r===2?"Crer lchancier":"Programmer"})]})]})]}),e.jsxs(Et,{isOpen:Rn,onClose:Pr,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Nouveau Scnario de Simulation"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontSize:"sm",fontWeight:"bold",children:"tape 1: Contexte du scnario"}),e.jsx(k,{fontSize:"xs",children:"Dfinissez le nom et la description. Vous pourrez ajouter les recettes et dpenses dans l'tape suivante."})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nom du scnario"}),e.jsx(ge,{value:Je.name,onChange:B=>Ge(ie=>({...ie,name:B.target.value})),placeholder:"ex: Scnario optimiste 2024"})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:Je.description,onChange:B=>Ge(ie=>({...ie,description:B.target.value})),placeholder:"Dcrivez les hypothses et le contexte de ce scnario...",rows:4})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Priode de projection (mois)"}),e.jsxs(Ln,{value:Je.projectionMonths,onChange:B=>Ge(ie=>({...ie,projectionMonths:parseInt(B)||12})),min:1,max:60,children:[e.jsx(On,{}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Entre 1 et 60 mois"})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:Pr,children:"Annuler"}),e.jsx(Q,{colorScheme:"teal",onClick:Gc,isLoading:t,leftIcon:e.jsx(_l,{}),children:"Crer le scnario"})]})]})]}),e.jsxs(Et,{isOpen:Hi,onClose:Wi,size:"6xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:e.jsxs(ee,{children:[e.jsxs(k,{children:["dition: ",Ue?.name]}),e.jsx(Qe,{colorScheme:"blue",variant:"outline",children:"tape 2: Recettes & Dpenses"})]})}),e.jsx($t,{}),e.jsxs(_t,{children:[Ue&&e.jsxs(ni,{templateColumns:"1fr 1fr",gap:6,children:[e.jsx(J,{align:"stretch",spacing:4,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(Te,{size:"sm",color:"green.600",children:[" Recettes (",Ue.incomeItems?.length||0,")"]})}),e.jsx(ke,{children:e.jsxs(J,{spacing:3,children:[e.jsxs(ee,{width:"100%",children:[e.jsx(ge,{placeholder:"Description",size:"sm",value:Ve.description,onChange:B=>se(ie=>({...ie,description:B.target.value}))}),e.jsx(Ln,{size:"sm",width:"120px",value:Ve.amount,onChange:B=>se(ie=>({...ie,amount:B})),children:e.jsx(On,{placeholder:"Montant"})}),e.jsxs(ut,{size:"sm",width:"120px",value:Ve.frequency,onChange:B=>se(ie=>({...ie,frequency:B.target.value})),children:[e.jsx("option",{value:"ONE_SHOT",children:"Ponctuel"}),e.jsx("option",{value:"SEMI_ANNUAL",children:"Semestriel (6 mois)"}),e.jsx("option",{value:"MONTHLY",children:"Mensuel"}),e.jsx("option",{value:"QUARTERLY",children:"Trimestriel"}),e.jsx("option",{value:"YEARLY",children:"Annuel"})]}),e.jsx(xt,{icon:e.jsx(Bn,{}),size:"sm",colorScheme:"green",onClick:rd})]}),e.jsx(J,{width:"100%",spacing:2,children:Ue.incomeItems?.map((B,ie)=>e.jsxs(ee,{width:"100%",justify:"space-between",p:2,bg:"green.50",borderRadius:"md",children:[e.jsxs(J,{align:"start",spacing:0,flex:1,children:[e.jsx(k,{fontSize:"sm",fontWeight:"bold",children:B.description}),e.jsxs(k,{fontSize:"xs",color:"gray.600",children:[ct(B.amount)," - ",mn(B.frequency)]})]}),e.jsx(xt,{icon:e.jsx(Qn,{}),size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>Ul(B.id)})]},B.id))}),e.jsx(oe,{width:"100%",p:2,bg:"green.100",borderRadius:"md",children:e.jsxs(k,{fontSize:"sm",fontWeight:"bold",color:"green.700",children:["Total mensuel: ",ct(Ue.totalMonthlyIncome||0)]})})]})})]})}),e.jsx(J,{align:"stretch",spacing:4,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(Te,{size:"sm",color:"red.600",children:[" Dpenses (",Ue.expenseItems?.length||0,")"]})}),e.jsx(ke,{children:e.jsxs(J,{spacing:3,children:[e.jsxs(ee,{width:"100%",children:[e.jsx(ge,{placeholder:"Description",size:"sm",value:be.description,onChange:B=>at(ie=>({...ie,description:B.target.value}))}),e.jsx(Ln,{size:"sm",width:"120px",value:be.amount,onChange:B=>at(ie=>({...ie,amount:B})),children:e.jsx(On,{placeholder:"Montant"})}),e.jsxs(ut,{size:"sm",width:"120px",value:be.frequency,onChange:B=>at(ie=>({...ie,frequency:B.target.value})),children:[e.jsx("option",{value:"ONE_SHOT",children:"Ponctuel"}),e.jsx("option",{value:"SEMI_ANNUAL",children:"Semestriel (6 mois)"}),e.jsx("option",{value:"MONTHLY",children:"Mensuel"}),e.jsx("option",{value:"QUARTERLY",children:"Trimestriel"}),e.jsx("option",{value:"YEARLY",children:"Annuel"})]}),e.jsx(xt,{icon:e.jsx(Bn,{}),size:"sm",colorScheme:"red",onClick:sd})]}),e.jsx(J,{width:"100%",spacing:2,children:Ue.expenseItems?.map((B,ie)=>e.jsxs(ee,{width:"100%",justify:"space-between",p:2,bg:"red.50",borderRadius:"md",children:[e.jsxs(J,{align:"start",spacing:0,flex:1,children:[e.jsx(k,{fontSize:"sm",fontWeight:"bold",children:B.description}),e.jsxs(k,{fontSize:"xs",color:"gray.600",children:[ct(B.amount)," - ",mn(B.frequency)]})]}),e.jsx(xt,{icon:e.jsx(Qn,{}),size:"xs",variant:"ghost",colorScheme:"red",onClick:()=>Xa(B.id)})]},B.id))}),e.jsx(oe,{width:"100%",p:2,bg:"red.100",borderRadius:"md",children:e.jsxs(k,{fontSize:"sm",fontWeight:"bold",color:"red.700",children:["Total mensuel: ",ct(Ue.totalMonthlyExpenses||0)]})})]})})]})})]}),Ue&&e.jsx(Pe,{mt:4,children:e.jsx(ke,{children:e.jsxs(mt,{columns:4,spacing:4,children:[e.jsxs(Rt,{children:[e.jsx(kt,{children:"Recettes/mois"}),e.jsx(Dt,{color:"green.600",children:ct(Ue.totalMonthlyIncome||0)})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Dpenses/mois"}),e.jsx(Dt,{color:"red.600",children:ct(Ue.totalMonthlyExpenses||0)})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Rsultat/mois"}),e.jsx(Dt,{color:Ue.monthlyNet>=0?"green.600":"red.600",children:ct(Ue.monthlyNet||0)})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"lments"}),e.jsx(Dt,{children:(Ue.incomeItems?.length||0)+(Ue.expenseItems?.length||0)})]})]})})}),e.jsxs(X,{children:[e.jsx(Z,{children:"Motif de rgularisation"}),e.jsx(ge,{value:Y,onChange:B=>q(B.target.value),placeholder:"Ex: Correction comptable, ajustement bancaire, etc."})]})]}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:Wi,children:"Fermer"}),e.jsx(Q,{colorScheme:"teal",onClick:()=>Yc(Ue?.id),isLoading:t,leftIcon:e.jsx(_l,{}),isDisabled:!Ue||Ue.itemsCount===0,children:"Excuter la simulation"})]})]})]}),e.jsxs(Et,{isOpen:cn,onClose:qi,size:"6xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:e.jsxs(ee,{children:[e.jsxs(k,{children:["Rsultats: ",rt?.scenarioName]}),e.jsx(Qe,{colorScheme:rt?.summary?.isPositive?"green":"red",children:rt?.summary?.isPositive?"Positif":"Dficitaire"})]})}),e.jsx($t,{}),e.jsx(_t,{children:rt&&e.jsxs(J,{spacing:6,children:[e.jsxs(mt,{columns:4,spacing:4,width:"100%",children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Solde initial"}),e.jsx(Dt,{children:ct(rt.startingBalance)})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Solde final"}),e.jsx(Dt,{color:rt.finalBalance>=0?"green.600":"red.600",children:ct(rt.finalBalance)})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"volution totale"}),e.jsxs(Dt,{color:rt.totalChange>=0?"green.600":"red.600",children:[e.jsx(eh,{type:rt.totalChange>=0?"increase":"decrease"}),ct(Math.abs(rt.totalChange))]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Rsultat/mois"}),e.jsx(Dt,{color:rt.monthlyNet>=0?"green.600":"red.600",children:ct(rt.monthlyNet)})]})})})]}),e.jsxs(Pe,{width:"100%",children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"volution mensuelle"})}),e.jsxs(ke,{children:[e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Mois"}),e.jsx(_e,{children:"Solde dbut"}),e.jsx(_e,{isNumeric:!0,children:"Recettes"}),e.jsx(_e,{isNumeric:!0,children:"Dpenses"}),e.jsx(_e,{isNumeric:!0,children:"Rsultat"}),e.jsx(_e,{isNumeric:!0,children:"Solde fin"})]})}),e.jsx(Wn,{children:rt.projection.slice(0,12).map(B=>e.jsxs(bt,{children:[e.jsxs(Ee,{children:["Mois ",B.month]}),e.jsx(Ee,{children:ct(B.startBalance)}),e.jsxs(Ee,{isNumeric:!0,color:"green.600",children:["+",ct(B.income)]}),e.jsxs(Ee,{isNumeric:!0,color:"red.600",children:["-",ct(B.expenses)]}),e.jsxs(Ee,{isNumeric:!0,color:B.net>=0?"green.600":"red.600",children:[B.net>=0?"+":"",ct(B.net)]}),e.jsx(Ee,{isNumeric:!0,fontWeight:"bold",color:B.endBalance>=0?"green.600":"red.600",children:ct(B.endBalance)})]},B.month))})]})}),rt.projection.length>12&&e.jsxs(k,{fontSize:"sm",color:"gray.500",mt:2,textAlign:"center",children:["... et ",rt.projection.length-12," mois supplmentaires"]})]})]}),rt.summary.breakEvenMonth&&e.jsxs(Ut,{status:"warning",width:"100%",children:[e.jsx(Ht,{}),e.jsxs(k,{children:["Attention: Le solde devient ngatif au mois ",rt.summary.breakEvenMonth]})]})]})}),e.jsx(Vt,{children:e.jsx(Q,{onClick:qi,children:"Fermer"})})]})]}),e.jsxs(Et,{isOpen:ya,onClose:Nt,size:"6xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsx(Tt,{children:e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{children:" Aperu du document"}),e.jsx(k,{fontSize:"sm",color:"gray.600",fontWeight:"normal",children:Er?.templateName})]})}),e.jsx($t,{}),e.jsx(_t,{children:Er&&ns&&e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(Ut,{status:"info",borderRadius:"md",children:[e.jsx(Ht,{}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",children:"Aperu du rendu final"}),e.jsxs(k,{fontSize:"sm",children:["Les variables ","{{PLACEHOLDERS}}"," ont t remplaces avec vos donnes. Vous pouvez imprimer ou exporter en PDF."]})]})]}),e.jsx(oe,{borderWidth:"1px",borderRadius:"md",bg:"white",boxShadow:"sm",children:e.jsx(lee,{template:ns,data:Er.data})})]})}),e.jsx(Vt,{children:e.jsxs(ee,{spacing:2,children:[e.jsx(Q,{variant:"ghost",onClick:Nt,children:"Fermer"}),e.jsx(Q,{colorScheme:"orange",leftIcon:e.jsx(ua,{}),onClick:()=>{window.print()},children:" Imprimer / Exporter en PDF"})]})})]})]})]})})},dee=t=>{const n=[];return t.type||n.push("Type de transaction requis (CREDIT ou DEBIT)"),(!t.amount||t.amount<=0)&&n.push("Montant doit tre > 0"),(!t.description||t.description.trim()==="")&&n.push("Description requise"),t.date||n.push("Date requise"),t.type==="CREDIT"&&t.category===void 0&&n.push("Catgorie requise pour credit"),{isValid:n.length===0,errors:n}},hee=t=>{const n=[];if(t.type||n.push("Type de document requis (QUOTE ou INVOICE)"),(!t.number||t.number.trim()==="")&&n.push("Numro de document requis"),(!t.amount||t.amount<=0)&&n.push("Montant doit tre > 0"),t.date||n.push("Date requise"),t.amountExcludingTax){const r=parseFloat(t.amountExcludingTax),i=parseFloat(t.taxRate||0),l=r*(1+i/100),u=parseFloat(t.amount);Math.abs(l-u)>.01&&n.push("Le montant TTC ne correspond pas  HT + TVA")}return{isValid:n.length===0,errors:n}},fee={ADHESION:"Adhsion",DONATION:"Donation",TRANSPORT:"Transport",MAINTENANCE:"Maintenance",FOURNITURES:"Fournitures",COTISATION:"Cotisation",FRAIS_EVENEMENT:"Frais vnement",ASSURANCE:"Assurance",AUTRE:"Autre"},pee=(t=[],n=[])=>{const r=t.filter(b=>b.type==="CREDIT").reduce((b,w)=>b+(parseFloat(w.amount)||0),0),i=t.filter(b=>b.type==="DEBIT").reduce((b,w)=>b+(parseFloat(w.amount)||0),0),l=new Date,u=l.getMonth(),d=l.getFullYear(),p=t.filter(b=>{const w=new Date(b.date);return w.getMonth()===u&&w.getFullYear()===d}),f=p.filter(b=>b.type==="CREDIT").reduce((b,w)=>b+(parseFloat(w.amount)||0),0),g=p.filter(b=>b.type==="DEBIT").reduce((b,w)=>b+(parseFloat(w.amount)||0),0),x=f-g,y=(n||[]).filter(b=>{const w=new Date(b.nextDate||b.date);return w.getMonth()===u&&w.getFullYear()===d}).reduce((b,w)=>{const C=w.type==="SCHEDULED_CREDIT"?parseFloat(w.amount)||0:-(parseFloat(w.amount)||0);return b+C},0);return{totalCredits:parseFloat(r.toFixed(2)),totalDebits:parseFloat(i.toFixed(2)),monthlyBalance:parseFloat(x.toFixed(2)),scheduledMonthlyImpact:parseFloat(y.toFixed(2)),scheduledCount:n?.length||0}},mee=(t,n=0)=>{const r=parseFloat(t)||0,i=parseFloat(n)||0,l=r*(i/100),u=r+l;return{taxAmount:parseFloat(l.toFixed(2)),totalAmount:parseFloat(u.toFixed(2))}},jA=t=>["ADMIN","PRESIDENT","TRESORIER"].includes(t),bA=t=>["ADMIN","PRESIDENT","TRESORIER"].includes(t),gee=(t=[],n)=>{const r=[];if(t.length===0)return{isValid:!0,errors:r};const i=t.reduce((l,u)=>l+(parseFloat(u.allocatedAmount)||0),0);return Math.abs(i-n)>.01&&r.push(`Total alloue (${i.toFixed(2)}EUR) doit egaler le montant (${n.toFixed(2)}EUR)`),t.forEach((l,u)=>{l.categoryId||r.push(`Allocation ${u+1}: Categorie requise`),(!l.allocatedAmount||parseFloat(l.allocatedAmount)<=0)&&r.push(`Allocation ${u+1}: Montant doit etre > 0`)}),{isValid:r.length===0,errors:r}},Wr="https://attractive-kindness-rbe-serveurs.up.railway.app",Ju=(t=null)=>{const n=on(),[r,i]=v.useState(!1),[l,u]=v.useState(()=>{try{const Ge=t||(()=>{const Ve=localStorage.getItem("user");return Ve?JSON.parse(Ve):null})();if(Ge&&typeof getPrimaryRole=="function")return getPrimaryRole(Ge);if(Ge?.roles&&Array.isArray(Ge.roles)&&Ge.roles.length>0)return Ge.roles[0];if(Ge?.role)return Ge.role}catch(Ge){console.warn("Erreur lecture userRole:",Ge.message)}return"MEMBER"}),[d,p]=v.useState([]),[f,g]=v.useState({type:"CREDIT",amount:"",description:"",category:"ADHESION",date:new Date().toISOString().split("T")[0]}),[x,y]=v.useState([]),[b,w]=v.useState(null),[C,_]=v.useState({type:"QUOTE",number:"",title:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",amountExcludingTax:"",taxRate:20,taxAmount:0,amount:"",status:"DRAFT",eventId:""}),[A,D]=v.useState([]),[P,M]=v.useState({type:"SCHEDULED_PAYMENT",amount:"",description:"",frequency:"MONTHLY",nextDate:new Date().toISOString().split("T")[0],totalAmount:""}),[N,z]=v.useState([]),[I,V]=v.useState({description:"",amount:"",date:new Date().toISOString().split("T")[0]}),[$,ae]=v.useState({scenarios:[],activeScenario:null,projectionMonths:12}),he=new Date().getFullYear(),[re,ce]=v.useState(he),[Se,je]=v.useState(null),[de,G]=v.useState(0),[U,W]=v.useState(!0),[me,F]=v.useState({totalCredits:0,totalDebits:0,monthlyBalance:0,scheduledMonthlyImpact:0,scheduledCount:0}),fe=v.useCallback(async()=>{try{i(!0);const Ge=localStorage.getItem("token");try{const Ve=await fetch(`${Wr}/api/finance/transactions`,{headers:{Authorization:`Bearer ${Ge}`}});if(Ve.ok){const se=await Ve.json();if(p(se.transactions||[]),se.transactions&&se.transactions.length>0){const be=pee(se.transactions,[]);F(be)}}}catch(Ve){console.warn(" Erreur chargement transactions:",Ve.message)}try{const Ve=await fetch(`${Wr}/api/finance/documents`,{headers:{Authorization:`Bearer ${Ge}`}});if(Ve.ok){const se=await Ve.json(),at=(Array.isArray(se)?se:se.documents||[]).map(St=>({...St,status:St.type==="QUOTE"?St.quoteStatus:St.invoiceStatus}));y(at)}}catch(Ve){console.warn(" Erreur chargement documents:",Ve.message)}try{const Ve=await fetch(`${Wr}/api/finance/scheduled-operations`,{headers:{Authorization:`Bearer ${Ge}`}});if(Ve.ok){const se=await Ve.json();D(se.operations||[])}}catch(Ve){console.warn(" Erreur chargement oprations programmes:",Ve.message)}try{const Ve=await fetch(`${Wr}/api/finance/expense-reports`,{headers:{Authorization:`Bearer ${Ge}`}});if(Ve.ok){const se=await Ve.json();z(se.reports||[])}}catch(Ve){console.warn(" Erreur chargement notes de frais:",Ve.message)}try{const Ve=await fetch(`${Wr}/api/finance/balance`,{headers:{Authorization:`Bearer ${Ge}`}});if(Ve.ok){const se=await Ve.json();G(se.balance||0)}}catch(Ve){console.warn(" Erreur chargement solde:",Ve.message)}}catch(Ge){console.error(" Erreur chargement donnes finance:",Ge),n({title:"Erreur",description:"Impossible de charger les donnes financires",status:"error",duration:5e3})}finally{i(!1)}},[n]),te=v.useCallback(async(Ge,Ve=[])=>{try{const se=dee(Ge);if(!se.isValid)return n({title:"Erreur de validation",description:se.errors.join(", "),status:"warning",duration:5e3}),null;if(Ve.length>0){const St=gee(Ve,parseFloat(Ge.amount));if(!St.isValid)return n({title:"Erreur allocation",description:St.errors.join(", "),status:"warning",duration:5e3}),null}i(!0);const be=await fetch(`${Wr}/api/finance/transactions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...Ge,amount:parseFloat(Ge.amount)})});if(!be.ok)throw new Error("Erreur creation transaction");const at=await be.json();if(Ve.length>0)try{await fetch(`${Wr}/api/finance/transactions/${at.id}/allocations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({allocations:Ve})})}catch(St){console.warn("Erreur sauvegarde allocations:",St)}return p([...d,at]),n({title:"Succes",description:Ve.length>0?`Transaction creee avec ${Ve.length} allocation(s)`:"Transaction creee",status:"success"}),await fe(),at}catch(se){return n({title:"Erreur",description:se.message,status:"error"}),null}finally{i(!1)}},[d,n]),R=v.useCallback(async Ge=>{try{if(!(await fetch(`${Wr}/api/finance/transactions/${Ge}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Erreur suppression");p(d.filter(se=>se.id!==Ge)),n({title:"Succs",description:"Transaction supprime",status:"success"}),await fe()}catch(Ve){n({title:"Erreur",description:Ve.message,status:"error"})}},[d,n]),Y=v.useCallback(async Ge=>{try{const Ve=hee(Ge);if(!Ve.isValid)return n({title:"Erreur de validation",description:Ve.errors.join(", "),status:"warning",duration:5e3}),null;let se={...Ge};if(Ge.amountExcludingTax){const{taxAmount:St,totalAmount:An}=mee(Ge.amountExcludingTax,Ge.taxRate);se={...se,taxAmount:St,amount:An}}i(!0);let be;if(Ge.id?be=await fetch(`${Wr}/api/finance/documents/${Ge.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(se)}):be=await fetch(`${Wr}/api/finance/documents`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(se)}),!be.ok)throw new Error("Erreur creation document");const at=await be.json();return n({title:"Succes",description:"Document cree",status:"success"}),await fe(),at}catch(Ve){return n({title:"Erreur",description:Ve.message,status:"error"}),null}finally{i(!1)}},[n]),q=v.useCallback(async Ge=>{try{if(!(await fetch(`${Wr}/api/finance/documents/${Ge}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Erreur suppression");y(x.filter(se=>se.id!==Ge)),n({title:"Succs",description:"Document supprim",status:"success"}),await fe()}catch(Ve){n({title:"Erreur",description:Ve.message,status:"error"})}},[x,n]);v.useEffect(()=>{fe()},[]);const le=v.useCallback(async(Ge,Ve="")=>{if(!jA(l))return n({title:"Permission refusee",description:"Vous n'avez pas le droit de modifier le solde",status:"error"}),!1;try{if(i(!0),!(await fetch(`${Wr}/api/finance/balance`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({balance:parseFloat(Ge),reason:Ve||"Modification manuelle"})})).ok)throw new Error("Erreur mise a jour solde");return G(parseFloat(Ge)),n({title:"Succes",description:"Solde mis a jour",status:"success"}),await fe(),!0}catch(se){return n({title:"Erreur",description:se.message,status:"error"}),!1}finally{i(!1)}},[l,n]),We=v.useCallback(async Ge=>{if(!bA(l))return n({title:"Permission refusee",description:"Vous n'avez pas le droit d'approuver",status:"error"}),!1;try{if(i(!0),!(await fetch(`${Wr}/api/finance/scheduled-operations/${Ge}/approve`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Erreur approbation");return D(A.map(se=>se.id===Ge?{...se,status:"APPROVED"}:se)),n({title:"Succes",description:"Operation approuvee",status:"success"}),await fe(),!0}catch(Ve){return n({title:"Erreur",description:Ve.message,status:"error"}),!1}finally{i(!1)}},[l,A,n]),pe=v.useCallback(async(Ge,Ve)=>{try{const se=await fetch(`${Wr}/api/finance/documents/${Ge}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:Ve})});if(!se.ok)throw new Error("Erreur mise  jour statut");const be=await se.json();return n({title:"Succs",description:"Statut mis  jour",status:"success"}),await fe(),be}catch(se){return n({title:"Erreur",description:se.message,status:"error"}),null}},[n]),ye=v.useCallback(async Ge=>{try{i(!0);const Ve=await fetch(`${Wr}/api/finance/expense-reports`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(Ge)});if(!Ve.ok)throw new Error("Erreur cration");const se=await Ve.json();return z([...N,se]),n({title:"Succs",description:"Note de frais cre",status:"success"}),se}catch(Ve){return n({title:"Erreur",description:Ve.message,status:"error"}),null}finally{i(!1)}},[N,n]),Ze=v.useCallback(async(Ge,Ve)=>{try{i(!0);const se=await fetch(`${Wr}/api/finance/expense-reports/${Ge}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(Ve)});if(!se.ok)throw new Error("Erreur mise  jour");const be=await se.json();return z(N.map(at=>at.id===Ge?be:at)),n({title:"Succs",description:"Note de frais mise  jour",status:"success"}),be}catch(se){return n({title:"Erreur",description:se.message,status:"error"}),null}finally{i(!1)}},[N,n]),ht=v.useCallback(async Ge=>{try{if(i(!0),!(await fetch(`${Wr}/api/finance/expense-reports/${Ge}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Erreur suppression");z(N.filter(se=>se.id!==Ge)),n({title:"Succs",description:"Note de frais supprime",status:"success"})}catch(Ve){n({title:"Erreur",description:Ve.message,status:"error"})}finally{i(!1)}},[N,n]),rt=v.useCallback(async Ge=>{try{i(!0);const Ve=await fetch(`${Wr}/api/finance/simulations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(Ge)});if(!Ve.ok)throw new Error("Erreur cration simulation");const se=await Ve.json();return ae({...$,scenarios:[...$.scenarios,se]}),n({title:"Succs",description:"Scnario de simulation cr",status:"success"}),se}catch(Ve){return n({title:"Erreur",description:Ve.message,status:"error"}),null}finally{i(!1)}},[$,n]),vt=v.useCallback(async Ge=>{try{i(!0);const Ve=await fetch(`${Wr}/api/finance/simulations/${Ge}/run`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ve.ok)throw new Error("Erreur simulation");const se=await Ve.json();return ae({...$,activeScenario:Ge}),se}catch(Ve){return n({title:"Erreur",description:Ve.message,status:"error"}),null}finally{i(!1)}},[$,n]),Ue=v.useCallback(async Ge=>{try{if(i(!0),!(await fetch(`${Wr}/api/finance/simulations/${Ge}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Erreur suppression");ae({...$,scenarios:$.scenarios.filter(se=>se.id!==Ge)}),n({title:"Succs",description:"Scnario supprim",status:"success"})}catch(Ve){n({title:"Erreur",description:Ve.message,status:"error"})}finally{i(!1)}},[$,n]),qt=v.useCallback(async Ge=>{try{i(!0);const Ve=await fetch(`${Wr}/api/finance/reports?year=${Ge}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ve.ok)throw new Error("Erreur chargement rapports");const se=await Ve.json();return je(se),se}catch(Ve){return n({title:"Erreur",description:Ve.message,status:"error"}),null}finally{i(!1)}},[n]),Je=v.useCallback(async Ge=>{try{i(!0);const Ve=await fetch(`${Wr}/api/finance/reports/${Ge}/export`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ve.ok)throw new Error("Erreur export");const se=await Ve.blob(),be=window.URL.createObjectURL(se),at=document.createElement("a");at.href=be,at.download=`rapport-finance-${Ge}.pdf`,at.click(),n({title:"Succs",description:"Rapport tlcharg",status:"success"})}catch(Ve){n({title:"Erreur",description:Ve.message,status:"error"})}finally{i(!1)}},[n]);return{loading:r,loadFinanceData:fe,transactions:d,setTransactions:p,newTransaction:f,setNewTransaction:g,addTransaction:te,deleteTransaction:R,documents:x,setDocuments:y,editingDocument:b,setEditingDocument:w,docForm:C,setDocForm:_,addDocument:Y,deleteDocument:q,updateDocumentStatus:pe,scheduledOperations:A,setScheduledOperations:D,newScheduled:P,setNewScheduled:M,approveScheduledOperation:We,expenseReports:N,setExpenseReports:z,newExpenseReport:I,setNewExpenseReport:V,createExpenseReport:ye,updateExpenseReport:Ze,deleteExpenseReport:ht,simulationData:$,setSimulationData:ae,createSimulationScenario:rt,runSimulation:vt,deleteSimulationScenario:Ue,reportYear:re,setReportYear:ce,reportData:Se,setReportData:je,loadReports:qt,exportReportPdf:Je,balance:de,setBalance:G,updateBalance:le,isBalanceLocked:U,setIsBalanceLocked:W,stats:me,setStats:F,userRole:l,canModifyBalance:jA(l),canApprovePayments:bA(l)}},xee=()=>{const{balance:t,transactions:n,scheduledOperations:r}=Ju(),i=Tn("white","gray.800"),l=Tn("gray.200","gray.700"),u=n?.filter(b=>b.type==="CREDIT").reduce((b,w)=>b+(w.amount||0),0)||0,d=n?.filter(b=>b.type==="DEBIT").reduce((b,w)=>b+(w.amount||0),0)||0,p=new Date().getMonth(),f=new Date().getFullYear(),g=n?.filter(b=>{const w=new Date(b.date);return w.getMonth()===p&&w.getFullYear()===f})||[],x=g.filter(b=>b.type==="CREDIT").reduce((b,w)=>b+(w.amount||0),0)-g.filter(b=>b.type==="DEBIT").reduce((b,w)=>b+(w.amount||0),0),y=(r||[]).reduce((b,w)=>b+(w.amount||0),0);return e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",children:"Tableau de Bord Finances"}),e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Vue d'ensemble de votre trsorerie"})]}),e.jsxs(mt,{columns:{base:2,md:4},spacing:4,children:[e.jsx(Pe,{bg:i,borderWidth:"1px",borderColor:l,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Solde actuel"}),e.jsxs(Dt,{fontSize:"2xl",color:"blue.500",children:[t.toFixed(2)," "]}),e.jsx(Mi,{children:"Trsorerie gnrale"})]})})}),e.jsx(Pe,{bg:i,borderWidth:"1px",borderColor:l,children:e.jsx(ke,{children:e.jsxs(ee,{spacing:3,mb:2,children:[e.jsx(Cn,{as:HM,color:"green.500",boxSize:5}),e.jsx(oe,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Crdits"}),e.jsxs(Dt,{fontSize:"xl",color:"green.500",children:["+",u.toFixed(2)," "]})]})})]})})}),e.jsx(Pe,{bg:i,borderWidth:"1px",borderColor:l,children:e.jsx(ke,{children:e.jsxs(ee,{spacing:3,mb:2,children:[e.jsx(Cn,{as:bJ,color:"red.500",boxSize:5}),e.jsx(oe,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Dbits"}),e.jsxs(Dt,{fontSize:"xl",color:"red.500",children:["-",Math.abs(d).toFixed(2)," "]})]})})]})})}),e.jsx(Pe,{bg:i,borderWidth:"1px",borderColor:l,children:e.jsx(ke,{children:e.jsxs(ee,{spacing:3,mb:2,children:[e.jsx(Cn,{as:Os,color:"purple.500",boxSize:5}),e.jsx(oe,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:" programmer"}),e.jsx(Dt,{fontSize:"xl",color:"purple.500",children:r?.length||0})]})})]})})})]}),e.jsxs(Pe,{bg:i,borderWidth:"1px",borderColor:l,children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Mois actuel"})}),e.jsx(ke,{children:e.jsxs(ni,{templateColumns:"repeat(2, 1fr)",gap:6,children:[e.jsx(Vu,{children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Balance mensuelle"}),e.jsxs(k,{fontSize:"2xl",fontWeight:"bold",color:x>=0?"green.500":"red.500",children:[x>=0?"+":"",x.toFixed(2)," "]})]})}),e.jsx(Vu,{children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Impact programm"}),e.jsxs(k,{fontSize:"2xl",fontWeight:"bold",color:y>=0?"green.500":"red.500",children:[y>=0?"+":"",y.toFixed(2)," "]})]})})]})})]}),e.jsxs(Pe,{bg:i,borderWidth:"1px",borderColor:l,children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Dernires transactions"})}),e.jsx(ke,{children:e.jsx(J,{align:"stretch",spacing:3,maxH:"300px",overflowY:"auto",children:(n||[]).slice(0,5).map(b=>e.jsxs(ee,{justify:"space-between",p:2,borderRadius:"md",_hover:{bg:"gray.100"},children:[e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontWeight:"500",children:b.description}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:new Date(b.date).toLocaleDateString()})]}),e.jsxs(k,{fontWeight:"bold",color:b.type==="CREDIT"?"green.500":"red.500",children:[b.type==="CREDIT"?"+":"-",Math.abs(b.amount).toFixed(2)," "]})]},b.id))})})]})]})},vee=()=>{const{transactions:t,addTransaction:n,deleteTransaction:r,loading:i}=Ju(),[l,u]=v.useState("Tous"),[d,p]=v.useState(""),[f,g]=v.useState(!1),[x,y]=v.useState([]),[b,w]=v.useState({type:"CREDIT",amount:"",description:"",category:"ADHESION",date:new Date().toISOString().split("T")[0]});on();const{isOpen:C,onOpen:_,onClose:A}=It(),D=["Tous",...Object.keys(fee)],P=(t||[]).filter(z=>{const I=(z.description||"").toLowerCase().includes(d.toLowerCase()),V=l==="Tous"||z.category===l;return I&&V}),M=async()=>{g(!0);try{await n(b,x)&&(w({type:"CREDIT",amount:"",description:"",category:"ADHESION",date:new Date().toISOString().split("T")[0]}),y([]),A())}finally{g(!1)}},N=async z=>{window.confirm("Confirmer la suppression ? Cette action est irreversible.")&&await r(z)};return e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",children:"Transactions"}),e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Historique des mouvements financiers"})]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:_,isLoading:i,children:"Nouvelle transaction"})]}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(ee,{spacing:4,children:[e.jsxs(zc,{flex:1,children:[e.jsx(Ic,{pointerEvents:"none",children:e.jsx(Cn,{as:ym,color:"gray.300"})}),e.jsx(ge,{placeholder:"Rechercher une transaction...",value:d,onChange:z=>p(z.target.value)})]}),e.jsx(ut,{w:"200px",value:l,onChange:z=>u(z.target.value),children:D.map(z=>e.jsx("option",{value:z,children:z},z))})]})})}),e.jsx(Pe,{overflowX:"auto",children:e.jsx(ke,{p:0,children:e.jsxs(Fn,{variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.50",children:[e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Description"}),e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:P.length>0?P.map(z=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{children:new Date(z.date).toLocaleDateString()}),e.jsx(Ee,{fontWeight:"500",children:z.description}),e.jsx(Ee,{children:z.category}),e.jsxs(Ee,{isNumeric:!0,fontWeight:"600",color:z.type==="CREDIT"?"green.500":"red.500",children:[z.type==="CREDIT"?"+":"-",Math.abs(z.amount).toFixed(2)," "]}),e.jsx(Ee,{children:e.jsx(Q,{size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>N(z.id),children:e.jsx(Cn,{as:Qn})})})]},z.id)):e.jsx(bt,{children:e.jsx(Ee,{colSpan:5,textAlign:"center",py:8,color:"gray.500",children:"Aucune transaction trouve"})})})]})})}),e.jsxs(Et,{isOpen:C,onClose:A,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Nouvelle Transaction"}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Type"}),e.jsxs(ut,{value:b.type,onChange:z=>w({...b,type:z.target.value}),children:[e.jsx("option",{value:"CREDIT",children:"Crdit (Entre)"}),e.jsx("option",{value:"DEBIT",children:"Dbit (Sortie)"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Montant ()"}),e.jsx(ge,{type:"number",step:"0.01",value:b.amount,onChange:z=>w({...b,amount:parseFloat(z.target.value)})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:b.description,onChange:z=>w({...b,description:z.target.value})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Catgorie"}),e.jsxs(ut,{value:b.category,onChange:z=>w({...b,category:z.target.value}),children:[e.jsx("option",{value:"ADHESION",children:"Adhsion"}),e.jsx("option",{value:"DONATION",children:"Donation"}),e.jsx("option",{value:"TRANSPORT",children:"Transport"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"FOURNITURES",children:"Fournitures"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date"}),e.jsx(ge,{type:"date",value:b.date,onChange:z=>w({...b,date:z.target.value})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:A,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:M,isLoading:f,children:"Crer"})]})]})]})]})},yee=()=>{const{scheduledOperations:t,setScheduledOperations:n,loading:r}=Ju(),[i,l]=v.useState(!1),[u,d]=v.useState({type:"SCHEDULED_PAYMENT",amount:"",description:"",frequency:"MONTHLY",nextDate:new Date().toISOString().split("T")[0],totalAmount:""}),p=on(),{isOpen:f,onOpen:g,onClose:x}=It(),y=async()=>{if(!u.amount||!u.description){p({title:"Erreur",description:"Remplissez tous les champs",status:"error"});return}l(!0);try{const _={id:Math.random(),...u,amount:parseFloat(u.amount),totalAmount:parseFloat(u.totalAmount)||parseFloat(u.amount),status:"PENDING"};n([...t,_]),p({title:"Succs",description:"Opration programme cre",status:"success"}),d({type:"SCHEDULED_PAYMENT",amount:"",description:"",frequency:"MONTHLY",nextDate:new Date().toISOString().split("T")[0],totalAmount:""}),x()}finally{l(!1)}},b=async _=>{n(t.map(A=>A.id===_?{...A,status:"APPROVED"}:A)),p({title:"Opration valide",status:"success"})},w=async _=>{n(t.filter(A=>A.id!==_)),p({title:"Opration rejete",status:"warning"})},C=(t||[]).filter(_=>_.status==="PENDING").length;return e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",children:"Oprations planifies"}),e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Gestion des paiements rcurrents et planifis"})]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:g,isLoading:r,children:"Nouvelle opration"})]}),C>0&&e.jsxs(Ut,{status:"warning",borderRadius:"md",children:[e.jsx(Ht,{}),e.jsx(oe,{children:e.jsxs(k,{fontWeight:"bold",children:[C," opration",C>1?"s":""," en attente de validation"]})})]}),e.jsx(Pe,{overflowX:"auto",children:e.jsx(ke,{p:0,children:e.jsxs(Fn,{variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.50",children:[e.jsx(_e,{children:"Description"}),e.jsx(_e,{children:"Frquence"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{children:"Prochaine date"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:(t||[]).length>0?t.map(_=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontWeight:"500",children:_.description}),e.jsx(Ee,{children:_.frequency}),e.jsxs(Ee,{isNumeric:!0,fontWeight:"600",children:[parseFloat(_.amount).toFixed(2)," "]}),e.jsx(Ee,{children:new Date(_.nextDate).toLocaleDateString()}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:_.status==="APPROVED"?"green":_.status==="PENDING"?"yellow":"gray",children:_.status==="APPROVED"?"Approuve":_.status==="PENDING"?"En attente":"Rejete"})}),e.jsxs(Ee,{children:[_.status==="PENDING"&&e.jsxs(ee,{spacing:2,children:[e.jsx(Q,{size:"sm",variant:"ghost",colorScheme:"green",onClick:()=>b(_.id),leftIcon:e.jsx(Kp,{}),children:"Valider"}),e.jsx(Q,{size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>w(_.id),leftIcon:e.jsx(qu,{}),children:"Rejeter"})]}),_.status==="APPROVED"&&e.jsx(Q,{size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>w(_.id),leftIcon:e.jsx(Qn,{}),children:"Supprimer"})]})]},_.id)):e.jsx(bt,{children:e.jsx(Ee,{colSpan:6,textAlign:"center",py:8,color:"gray.500",children:"Aucune opration programme"})})})]})})}),e.jsxs(Et,{isOpen:f,onClose:x,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Nouvelle Opration Programme"}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Type"}),e.jsxs(ut,{value:u.type,onChange:_=>d({...u,type:_.target.value}),children:[e.jsx("option",{value:"SCHEDULED_PAYMENT",children:"Paiement programm"}),e.jsx("option",{value:"RECURRING",children:"Opration rcurrente"}),e.jsx("option",{value:"INVOICE",children:"Facture programme"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:u.description,onChange:_=>d({...u,description:_.target.value})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Montant ()"}),e.jsx(ge,{type:"number",step:"0.01",value:u.amount,onChange:_=>d({...u,amount:_.target.value})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Frquence"}),e.jsxs(ut,{value:u.frequency,onChange:_=>d({...u,frequency:_.target.value}),children:[e.jsx("option",{value:"MONTHLY",children:"Mensuel"}),e.jsx("option",{value:"QUARTERLY",children:"Trimestriel"}),e.jsx("option",{value:"SEMI_ANNUAL",children:"Semestriel"}),e.jsx("option",{value:"ANNUAL",children:"Annuel"}),e.jsx("option",{value:"ONCE",children:"Une seule fois"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Prochaine date"}),e.jsx(ge,{type:"date",value:u.nextDate,onChange:_=>d({...u,nextDate:_.target.value})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:x,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:y,isLoading:i,children:"Crer"})]})]})]})]})},jee=()=>{const{documents:t,addDocument:n,deleteDocument:r,updateDocumentStatus:i,loading:l}=Ju(),[u,d]=v.useState(!1),[p,f]=v.useState(null),[g,x]=v.useState([]),[y,b]=v.useState(null),[w,C]=v.useState(null),[_,A]=v.useState([]),[D,P]=v.useState({type:"QUOTE",number:"",title:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",amountExcludingTax:"",taxRate:0,taxAmount:0,amount:"",status:"DRAFT",eventId:"",memberId:"",destinataireName:"",destinataireAdresse:"",destinataireSociete:"",destinataireContacts:"",notes:"",paymentMethod:"",paymentDate:"",amountPaid:""}),M=on(),{isOpen:N,onOpen:z,onClose:I}=It(),{isOpen:V,onOpen:$,onClose:ae}=It(),{isOpen:he,onOpen:re,onClose:ce}=It();v.useEffect(()=>{Se()},[]);const Se=async()=>{try{const pe=await fetch("https://attractive-kindness-rbe-serveurs.up.railway.app/api/quote-templates",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(pe.ok){const ye=await pe.json(),Ze=Array.isArray(ye)?ye:ye?.templates||[];x(Ze)}}catch(pe){console.warn(" Impossible de charger les templates:",pe),x([])}},je=()=>{f(null),P({type:"QUOTE",number:"",title:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",amountExcludingTax:"",taxRate:0,taxAmount:0,amount:"",status:"DRAFT",eventId:"",memberId:"",destinataireName:"",destinataireAdresse:"",destinataireSociete:"",destinataireContacts:"",notes:"",paymentMethod:"",paymentDate:"",amountPaid:""}),z()},de=pe=>{f(pe),P({type:pe.type||"QUOTE",number:pe.number||"",title:pe.title||"",description:pe.description||"",date:(pe.date||new Date().toISOString()).slice(0,10),dueDate:pe.dueDate?pe.dueDate.slice(0,10):"",amountExcludingTax:String(pe.amountExcludingTax??""),taxRate:pe.taxRate??0,taxAmount:pe.taxAmount??0,amount:String(pe.amount||""),status:pe.status||"DRAFT",eventId:pe.eventId||"",memberId:pe.memberId||"",destinataireName:pe.destinataireName||"",destinataireAdresse:pe.destinataireAdresse||"",destinataireSociete:pe.destinataireSociete||"",destinataireContacts:pe.destinataireContacts||"",notes:pe.notes||"",paymentMethod:pe.paymentMethod||"",paymentDate:pe.paymentDate?pe.paymentDate.slice(0,10):"",amountPaid:String(pe.amountPaid||"")}),z()},G=async()=>{if(!D.number){M({title:"Erreur",description:"Le numro du document est obligatoire",status:"error"});return}if(!D.title){M({title:"Erreur",description:"Le titre est obligatoire",status:"error"});return}if(!D.amount){M({title:"Erreur",description:"Le montant est obligatoire",status:"error"});return}d(!0);try{let pe;if(w){const Ze=new FileReader;pe=await new Promise((ht,rt)=>{Ze.onload=()=>{ht(Ze.result)},Ze.onerror=rt,Ze.readAsDataURL(w)})}const ye={...D,...p&&{id:p.id},...pe&&{documentUrl:pe}};await n(ye),M({title:"Succs",description:p?"Document modifi":"Document cr",status:"success"}),P({type:"QUOTE",number:"",title:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",amountExcludingTax:"",taxRate:0,taxAmount:0,amount:"",status:"DRAFT",eventId:"",memberId:"",destinataireName:"",destinataireAdresse:"",destinataireSociete:"",destinataireContacts:"",notes:"",paymentMethod:"",paymentDate:"",amountPaid:""}),C(null),f(null),I()}catch{M({title:"Erreur",description:"Impossible de sauvegarder le document",status:"error"})}finally{d(!1)}},U=async pe=>{if(window.confirm("Cette action est irrversible. Confirmer la suppression ?"))try{await r(pe),M({title:"Succs",description:"Document supprim",status:"success"})}catch{M({title:"Erreur",description:"Impossible de supprimer le document",status:"error"})}},W=async(pe,ye)=>{try{const Ze=t.find(ht=>ht.id===pe);await i(pe,ye),Ze?.type==="QUOTE"&&ye==="ACCEPTED"?(M({title:"Succs",description:"Statut mis  jour",status:"success"}),setTimeout(()=>{window.confirm(` Devis ${Ze.number} accept !

Voulez-vous crer une facture base sur ce devis pour gagner du temps ?`)&&(P({type:"INVOICE",number:`FACT-${Ze.number.split("-")[1]||Ze.number}`,title:Ze.title,description:Ze.description||"",date:new Date().toISOString().split("T")[0],dueDate:new Date(new Date().getTime()+720*60*60*1e3).toISOString().split("T")[0],amountExcludingTax:Ze.amountExcludingTax||"",taxRate:Ze.taxRate||0,taxAmount:Ze.taxAmount||0,amount:Ze.amount||"",status:"DRAFT",eventId:Ze.eventId||"",memberId:Ze.memberId||"",destinataireName:"",destinataireAdresse:"",destinataireSociete:"",destinataireContacts:"",notes:`Facture cre  partir du devis ${Ze.number}`,paymentMethod:"",paymentDate:"",amountPaid:""}),f(null),C(null),b(null),z())},500)):M({title:"Succs",description:"Statut mis  jour",status:"success"})}catch{M({title:"Erreur",description:"Impossible de modifier le statut",status:"error"})}},me=async pe=>{if(!pe.documentUrl&&!pe.htmlContent){M({title:"Aucun document",description:"Ce document n'a pas de fichier gnr ou import",status:"info"});return}if(pe.documentUrl)window.open(pe.documentUrl,"_blank");else if(pe.htmlContent){const ye=window.open("","_blank");ye.document.write(pe.htmlContent),ye.document.close()}},F=async()=>{if(!y){M({title:"Erreur",description:"Slectionnez un template",status:"warning"});return}if(!p?.id&&!D.number){M({title:"Erreur",description:"Enregistrez d'abord le document",status:"warning"});return}try{const pe=p?.id||"temp-"+Date.now();let ye="";try{const ht=await fetch(`https://attractive-kindness-rbe-serveurs.up.railway.app/api/devis-lines/${pe}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(ht.ok){const rt=await ht.json();Array.isArray(rt)&&rt.length>0&&(ye=rt.map(vt=>`
              <tr>
                <td class="num">${vt.quantity}</td>
                <td class="desc">${vt.description}</td>
                <td class="num">${vt.unitPrice.toFixed(2)} </td>
                <td class="num">${vt.totalPrice.toFixed(2)} </td>
              </tr>
            `).join(""))}}catch(ht){console.warn(" Impossible de charger les lignes:",ht.message)}const Ze={NUM_DEVIS:D.number,TITRE:D.title,OBJET:D.title,DESCRIPTION:D.description||"",MONTANT:parseFloat(D.amount||0).toFixed(2),PRIX_NET:parseFloat(D.amount||0).toFixed(2),DATE:new Date(D.date).toLocaleDateString("fr-FR"),DESTINATAIRE_NOM:D.destinataireName||"Destinataire",DESTINATAIRE_ADRESSE:D.destinataireAdresse||"",DESTINATAIRE_SOCIETE:D.destinataireSociete||"",DESTINATAIRE_CONTACTS:D.destinataireContacts||"",NOTES:D.notes||"",LOGO_BIG:y.logoBig||"",LOGO_SMALL:y.logoSmall||"",DEVIS_LINES_TR:ye};console.log(" Gnration du document avec donnes:",Ze),M({title:"Succs",description:"Document gnr. Prt  imprimer.",status:"success"})}catch(pe){console.error(" Erreur gnration:",pe),M({title:"Erreur",description:"Impossible de gnrer le document",status:"error"})}},fe=async pe=>{const ye=pe.target.files?.[0];if(ye){if(ye.type!=="application/pdf"){M({title:"Erreur",description:"Veuillez slectionner un fichier PDF",status:"warning"});return}C(ye),M({title:"PDF slectionn",description:`${ye.name} sera attach au document`,status:"info"})}},te={DRAFT:"gray",SENT:"blue",ACCEPTED:"green",REJECTED:"red",INVOICED:"purple",PENDING_PAYMENT:"orange",PAID:"green",DEPOSIT_PAID:"cyan",REEDITED:"yellow"},R={DRAFT:" Brouillon",SENT:" Envoy",ACCEPTED:" Accept",REJECTED:" Refus",INVOICED:" Factur",PENDING_PAYMENT:" En attente",PAID:" Pay",DEPOSIT_PAID:" Accompte pay",REEDITED:" Rdit"},Y=["DRAFT","SENT","ACCEPTED","REJECTED","REEDITED"],q=["DRAFT","SENT","PENDING_PAYMENT","DEPOSIT_PAID","PAID"],le=t.filter(pe=>pe.type==="QUOTE"),We=t.filter(pe=>pe.type==="INVOICE");return e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(ee,{justify:"space-between",wrap:"wrap",spacing:4,children:[e.jsxs(oe,{children:[e.jsx(Te,{size:{base:"md",md:"lg"},children:" Devis & Facturation"}),e.jsx(k,{color:"gray.500",fontSize:{base:"xs",md:"sm"},children:"Gestion complte des documents commerciaux"})]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:je,isLoading:l,size:{base:"sm",md:"md"},children:"Nouveau"})]}),e.jsxs(ga,{colorScheme:"blue",variant:"enclosed",children:[e.jsxs(xa,{children:[e.jsxs(hn,{children:[" Devis (",le.length,")"]}),e.jsxs(hn,{children:[" Factures (",We.length,")"]})]}),e.jsxs(va,{children:[e.jsx(fn,{children:le.length===0?e.jsx(Pe,{children:e.jsx(ke,{textAlign:"center",py:12,children:e.jsx(k,{color:"gray.500",children:"Aucun devis. Crez-en un pour commencer."})})}):e.jsx(oe,{overflowX:{base:"auto",md:"visible"},children:e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Fn,{size:{base:"sm",md:"md"},variant:"striped",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.50",children:[e.jsx(_e,{children:"N"}),e.jsx(_e,{children:"Titre"}),e.jsx(_e,{display:{base:"none",md:"table-cell"},children:"Date"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{display:{base:"none",sm:"table-cell"},children:"Statut"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:le.map(pe=>e.jsxs(bt,{children:[e.jsx(Ee,{fontWeight:"bold",fontSize:{base:"xs",md:"md"},children:pe.number}),e.jsx(Ee,{fontSize:{base:"xs",md:"md"},children:pe.title.substring(0,20)}),e.jsx(Ee,{display:{base:"none",md:"table-cell"},fontSize:"sm",children:new Date(pe.date).toLocaleDateString("fr-FR")}),e.jsxs(Ee,{isNumeric:!0,fontWeight:"bold",fontSize:{base:"xs",md:"md"},children:[parseFloat(pe.amount||0).toFixed(2)," "]}),e.jsx(Ee,{display:{base:"none",sm:"table-cell"},children:e.jsx(Qe,{colorScheme:te[pe.status],fontSize:"xs",children:R[pe.status]})}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:1,children:[e.jsx(xt,{size:{base:"xs",md:"sm"},icon:e.jsx(Rh,{}),variant:"ghost",onClick:()=>me(pe),title:"Voir"}),e.jsx(ut,{size:"xs",width:"auto",value:pe.status,onChange:ye=>W(pe.id,ye.target.value),cursor:"pointer",display:{base:"none",sm:"block"},children:Y.map(ye=>e.jsx("option",{value:ye,children:R[ye]},ye))}),e.jsx(xt,{size:{base:"xs",md:"sm"},icon:e.jsx(Vb,{}),variant:"ghost",colorScheme:"blue",onClick:()=>de(pe),title:"Modifier",display:{base:"none",sm:"block"}}),e.jsx(xt,{size:{base:"xs",md:"sm"},icon:e.jsx(Qn,{}),variant:"ghost",colorScheme:"red",onClick:()=>U(pe.id),title:"Supprimer",display:{base:"none",md:"block"}})]})})]},pe.id))})]})})})})}),e.jsx(fn,{children:We.length===0?e.jsx(Pe,{children:e.jsx(ke,{textAlign:"center",py:12,children:e.jsx(k,{color:"gray.500",children:"Aucune facture. Crez-en une pour commencer."})})}):e.jsx(oe,{overflowX:{base:"auto",md:"visible"},children:e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Fn,{size:{base:"sm",md:"md"},variant:"striped",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.50",children:[e.jsx(_e,{children:"N"}),e.jsx(_e,{children:"Titre"}),e.jsx(_e,{display:{base:"none",md:"table-cell"},children:"Date"}),e.jsx(_e,{display:{base:"none",lg:"table-cell"},children:"chance"}),e.jsx(_e,{isNumeric:!0,children:"Montant"}),e.jsx(_e,{display:{base:"none",sm:"table-cell"},isNumeric:!0,children:"Pay"}),e.jsx(_e,{display:{base:"none",sm:"table-cell"},children:"Statut"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:We.map(pe=>e.jsxs(bt,{children:[e.jsx(Ee,{fontWeight:"bold",fontSize:{base:"xs",md:"md"},children:pe.number}),e.jsx(Ee,{fontSize:{base:"xs",md:"md"},children:pe.title.substring(0,20)}),e.jsx(Ee,{display:{base:"none",md:"table-cell"},fontSize:"sm",children:new Date(pe.date).toLocaleDateString("fr-FR")}),e.jsx(Ee,{display:{base:"none",lg:"table-cell"},fontSize:"sm",children:pe.dueDate?new Date(pe.dueDate).toLocaleDateString("fr-FR"):"-"}),e.jsxs(Ee,{isNumeric:!0,fontWeight:"bold",fontSize:{base:"xs",md:"md"},children:[parseFloat(pe.amount||0).toFixed(2)," "]}),e.jsx(Ee,{display:{base:"none",sm:"table-cell"},isNumeric:!0,children:e.jsxs(Qe,{colorScheme:parseFloat(pe.amountPaid||0)>=parseFloat(pe.amount||0)?"green":"orange",fontSize:"xs",children:[parseFloat(pe.amountPaid||0).toFixed(2)," "]})}),e.jsx(Ee,{display:{base:"none",sm:"table-cell"},children:e.jsx(Qe,{colorScheme:te[pe.status],fontSize:"xs",children:R[pe.status]})}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:1,children:[e.jsx(xt,{size:{base:"xs",md:"sm"},icon:e.jsx(dA,{}),variant:"ghost",onClick:()=>me(pe),title:"Imprimer"}),e.jsx(ut,{size:"xs",width:"auto",value:pe.status,onChange:ye=>W(pe.id,ye.target.value),cursor:"pointer",display:{base:"none",sm:"block"},children:q.map(ye=>e.jsx("option",{value:ye,children:R[ye]},ye))}),e.jsx(xt,{size:{base:"xs",md:"sm"},icon:e.jsx(Vb,{}),variant:"ghost",colorScheme:"blue",onClick:()=>de(pe),title:"Modifier",display:{base:"none",sm:"block"}}),e.jsx(xt,{size:{base:"xs",md:"sm"},icon:e.jsx(Qn,{}),variant:"ghost",colorScheme:"red",onClick:()=>U(pe.id),title:"Supprimer",display:{base:"none",md:"block"}})]})})]},pe.id))})]})})})})})]})]}),e.jsxs(Et,{isOpen:N,onClose:I,size:{base:"full",md:"xl"},children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsxs(Tt,{children:[p?"Modifier le document":"Nouveau document","          "]}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ni,{templateColumns:{base:"1fr",md:"1fr 1fr 1fr"},gap:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",fontSize:"sm",children:"Type"}),e.jsxs(ut,{value:D.type,size:"sm",onChange:pe=>P(ye=>({...ye,type:pe.target.value})),children:[e.jsx("option",{value:"QUOTE",children:" Devis"}),e.jsx("option",{value:"INVOICE",children:" Facture"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",fontSize:"sm",children:"Date"}),e.jsx(ge,{type:"date",size:"sm",value:D.date,onChange:pe=>P(ye=>({...ye,date:pe.target.value}))})]}),D.type==="INVOICE"&&e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",fontSize:"sm",children:"chance"}),e.jsx(ge,{type:"date",size:"sm",value:D.dueDate||"",onChange:pe=>P(ye=>({...ye,dueDate:pe.target.value}))})]})]}),e.jsxs(ni,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",fontSize:"sm",children:"Numro"}),e.jsx(ge,{size:"sm",value:D.number,onChange:pe=>P(ye=>({...ye,number:pe.target.value})),placeholder:D.type==="QUOTE"?"ex: DV-2025-001":"ex: FA-2025-001"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",fontSize:"sm",children:"Titre"}),e.jsx(ge,{size:"sm",value:D.title,onChange:pe=>P(ye=>({...ye,title:pe.target.value})),placeholder:"Objet du document"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",fontSize:"sm",children:"Description"}),e.jsx(Xt,{value:D.description||"",onChange:pe=>P(ye=>({...ye,description:pe.target.value})),placeholder:"Dtails du document",rows:2,size:"sm"})]}),e.jsx(oe,{bg:"blue.50",p:4,borderRadius:"md",borderLeft:"4px solid",borderColor:"blue.500",children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"sm",children:" Montant"}),e.jsx(k,{fontSize:"xs",color:"gray.600",children:"Association (exempte TVA)"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Montant TTC"}),e.jsxs(Ln,{value:D.amount||"",onChange:pe=>{P(ye=>({...ye,amount:pe,amountExcludingTax:pe,taxRate:0,taxAmount:0}))},precision:2,step:10,children:[e.jsx(On,{placeholder:"0.00"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]})]}),e.jsx(oe,{p:3,bg:"green.100",borderRadius:"md",border:"1px solid",borderColor:"green.400",children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{fontSize:"sm",color:"green.700",fontWeight:"bold",children:"Total TTC:"}),e.jsxs(k,{fontSize:"lg",color:"green.700",fontWeight:"bold",children:[parseFloat(D.amount||0).toFixed(2)," "]})]})})]})}),D.type==="QUOTE"&&e.jsxs(e.Fragment,{children:[e.jsx(xn,{}),p?.id?e.jsxs(e.Fragment,{children:[e.jsxs(J,{spacing:3,align:"stretch",bg:"blue.50",p:4,borderRadius:"md",children:[e.jsx(ee,{justify:"space-between",align:"center",children:e.jsx(Te,{size:"sm",children:" Gnration de Document"})}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:"Template HTML"}),e.jsxs(ut,{size:"sm",value:y?.id||"",onChange:pe=>{const ye=g.find(Ze=>Ze.id===pe.target.value);b(ye)},children:[e.jsx("option",{value:"",children:"Slectionnez un template..."}),g.map(pe=>e.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),e.jsxs(ee,{spacing:2,width:"100%",children:[y&&e.jsx(Q,{size:"sm",colorScheme:"blue",leftIcon:e.jsx(dA,{}),onClick:F,flex:1,children:"Gnrer depuis template"}),e.jsx(Q,{size:"sm",colorScheme:"gray",leftIcon:e.jsx(WM,{}),onClick:()=>document.getElementById("pdf-upload")?.click(),flex:1,children:"Uploader un PDF"}),e.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",onChange:fe,style:{display:"none"}})]}),w&&e.jsxs(k,{fontSize:"xs",color:"green.600",fontWeight:"bold",children:[" PDF slectionn: ",w.name]})]}),e.jsx(xn,{}),e.jsx(oe,{bg:"orange.50",p:4,borderRadius:"md",borderLeft:"4px solid",borderColor:"orange.500",children:e.jsx(lz,{devisId:p.id,onTotalChange:pe=>{P(ye=>({...ye,amount:pe.toFixed(2)}))}})})]}):e.jsx(oe,{bg:"yellow.50",p:4,borderRadius:"md",borderLeft:"4px solid",borderColor:"yellow.500",children:e.jsxs(J,{spacing:2,align:"flex-start",children:[e.jsxs(ee,{children:[e.jsx(Cn,{as:FM,color:"yellow.600"}),e.jsx(k,{fontSize:"sm",color:"yellow.700",fontWeight:"bold",children:" Crez d'abord le devis pour grer les lignes"})]}),e.jsx(k,{fontSize:"xs",color:"yellow.600",children:'Remplissez le formulaire ci-dessus et cliquez sur "Crer" pour accder au gestionnaire de lignes.'})]})})]}),e.jsxs(X,{children:[e.jsx(Z,{fontWeight:"bold",children:"Statut"}),e.jsx(ut,{value:D.status,onChange:pe=>P(ye=>({...ye,status:pe.target.value})),children:D.type==="QUOTE"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"DRAFT",children:" Brouillon"}),e.jsx("option",{value:"SENT",children:" Envoy"}),e.jsx("option",{value:"ACCEPTED",children:" Accept"}),e.jsx("option",{value:"REJECTED",children:" Refus"}),e.jsx("option",{value:"REEDITED",children:" Rdit"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"DRAFT",children:" Brouillon"}),e.jsx("option",{value:"SENT",children:" Envoy"}),e.jsx("option",{value:"PENDING_PAYMENT",children:" En attente de paiement"}),e.jsx("option",{value:"DEPOSIT_PAID",children:" Accompte pay"}),e.jsx("option",{value:"PAID",children:" Pay"})]})})]}),D.type==="INVOICE"&&e.jsx(oe,{bg:"purple.50",p:3,borderRadius:"md",borderLeft:"4px solid",borderColor:"purple.500",children:e.jsxs(J,{spacing:2,align:"stretch",children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:" Infos de paiement"}),e.jsxs(ee,{spacing:2,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Mode de paiement"}),e.jsx(ge,{size:"sm",value:D.paymentMethod||"",onChange:pe=>P(ye=>({...ye,paymentMethod:pe.target.value})),placeholder:"ex: Virement, Espces, Chque"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Date de paiement"}),e.jsx(ge,{size:"sm",type:"date",value:D.paymentDate||"",onChange:pe=>P(ye=>({...ye,paymentDate:pe.target.value}))})]})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Montant pay"}),e.jsx(Ln,{value:D.amountPaid||"",onChange:pe=>P(ye=>({...ye,amountPaid:pe})),precision:2,children:e.jsx(On,{})})]})]})}),e.jsx(oe,{bg:"orange.50",p:3,borderRadius:"md",borderLeft:"4px solid",borderColor:"orange.500",children:e.jsxs(J,{spacing:2,align:"stretch",children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:" Destinataire (pour le template)"}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Nom"}),e.jsx(ge,{size:"sm",value:D.destinataireName||"",onChange:pe=>P(ye=>({...ye,destinataireName:pe.target.value})),placeholder:"Nom du destinataire"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Socit"}),e.jsx(ge,{size:"sm",value:D.destinataireSociete||"",onChange:pe=>P(ye=>({...ye,destinataireSociete:pe.target.value})),placeholder:"Nom de la socit"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Adresse"}),e.jsx(ge,{size:"sm",value:D.destinataireAdresse||"",onChange:pe=>P(ye=>({...ye,destinataireAdresse:pe.target.value})),placeholder:"Adresse complte"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Contacts (tlphone, email, etc)"}),e.jsx(ge,{size:"sm",value:D.destinataireContacts||"",onChange:pe=>P(ye=>({...ye,destinataireContacts:pe.target.value})),placeholder:"Coordonnes de contact"})]})]})}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",fontWeight:"bold",children:" Notes internes"}),e.jsx(Xt,{size:"sm",value:D.notes||"",onChange:pe=>P(ye=>({...ye,notes:pe.target.value})),placeholder:"Notes internes (non visibles sur le document)",rows:2})]}),e.jsxs(ee,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"ID vnement (optionnel)"}),e.jsx(ge,{size:"sm",value:D.eventId||"",onChange:pe=>P(ye=>({...ye,eventId:pe.target.value})),placeholder:"ID d'vnement"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"ID Membre (optionnel)"}),e.jsx(ge,{size:"sm",value:D.memberId||"",onChange:pe=>P(ye=>({...ye,memberId:pe.target.value})),placeholder:"ID de membre"})]})]})]})}),e.jsx(Vt,{children:e.jsxs(ee,{spacing:3,children:[e.jsx(Q,{variant:"ghost",onClick:I,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:G,isLoading:u,children:p?"Modifier":"Crer"})]})})]})]})]})},bee=()=>{const{transactions:t,reportYear:n,setReportYear:r}=Ju(),[i,l]=v.useState(new Date().getMonth()),{isOpen:u,onOpen:d,onClose:p}=It(),f=on(),g=new Date().getFullYear(),x=Array.from({length:5},(A,D)=>g-D),y=()=>{const A={};return(t||[]).forEach(D=>{A[D.category]||(A[D.category]={credits:0,debits:0}),D.type==="CREDIT"?A[D.category].credits+=D.amount||0:A[D.category].debits+=D.amount||0}),A},b=()=>{const A=Array(12).fill(null).map((D,P)=>({month:new Date(n,P,1).toLocaleDateString("fr-FR",{month:"long"}),credits:0,debits:0,balance:0}));return(t||[]).forEach(D=>{const P=new Date(D.date);if(P.getFullYear()===n){const M=P.getMonth();D.type==="CREDIT"?A[M].credits+=D.amount||0:A[M].debits+=D.amount||0}}),A.forEach((D,P)=>{D.balance=D.credits-D.debits}),A},w=y(),C=b(),_=()=>{f({title:"Rapport gnr",description:`Rapport ${n} tlcharg`,status:"success",duration:3e3})};return e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",children:"Rapports Financiers"}),e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Rapports d'analyse et exports"})]}),e.jsxs(ee,{children:[e.jsx(ut,{w:"150px",value:n,onChange:A=>r(parseInt(A.target.value)),children:x.map(A=>e.jsx("option",{value:A,children:A},A))}),e.jsx(Q,{leftIcon:e.jsx(ua,{}),colorScheme:"blue",onClick:_,children:"Tlcharger"})]})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(Te,{size:"md",children:["Rsum ",n]})}),e.jsx(ke,{children:e.jsxs(mt,{columns:[1,2,4],spacing:4,children:[e.jsx(oe,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total crdits"}),e.jsxs(Dt,{color:"green.500",children:["+",Object.values(w).reduce((A,D)=>A+D.credits,0).toFixed(2)," "]})]})}),e.jsx(oe,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total dbits"}),e.jsxs(Dt,{color:"red.500",children:["-",Object.values(w).reduce((A,D)=>A+D.debits,0).toFixed(2)," "]})]})}),e.jsx(oe,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Transactions"}),e.jsx(Dt,{children:(t||[]).length})]})}),e.jsx(oe,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Catgories"}),e.jsx(Dt,{children:Object.keys(w).length})]})})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Par catgorie"})}),e.jsx(ke,{overflowX:"auto",children:e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.50",children:[e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{isNumeric:!0,children:"Crdits"}),e.jsx(_e,{isNumeric:!0,children:"Dbits"}),e.jsx(_e,{isNumeric:!0,children:"Bilan"})]})}),e.jsx(Wn,{children:Object.entries(w).map(([A,D])=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontWeight:"500",children:A}),e.jsxs(Ee,{isNumeric:!0,color:"green.500",children:["+",D.credits.toFixed(2)," "]}),e.jsxs(Ee,{isNumeric:!0,color:"red.500",children:["-",D.debits.toFixed(2)," "]}),e.jsx(Ee,{isNumeric:!0,fontWeight:"600",children:e.jsxs(k,{color:D.credits-D.debits>=0?"green.500":"red.500",children:[D.credits-D.debits>=0?"+":"",(D.credits-D.debits).toFixed(2)," "]})})]},A))})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(Te,{size:"md",children:["volution mensuelle ",n]})}),e.jsx(ke,{overflowX:"auto",children:e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.50",children:[e.jsx(_e,{children:"Mois"}),e.jsx(_e,{isNumeric:!0,children:"Crdits"}),e.jsx(_e,{isNumeric:!0,children:"Dbits"}),e.jsx(_e,{isNumeric:!0,children:"Balance"})]})}),e.jsx(Wn,{children:C.map((A,D)=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontWeight:"500",children:A.month}),e.jsxs(Ee,{isNumeric:!0,color:"green.500",children:["+",A.credits.toFixed(2)," "]}),e.jsxs(Ee,{isNumeric:!0,color:"red.500",children:["-",A.debits.toFixed(2)," "]}),e.jsx(Ee,{isNumeric:!0,fontWeight:"600",children:e.jsxs(k,{color:A.balance>=0?"green.500":"red.500",children:[A.balance>=0?"+":"",A.balance.toFixed(2)," "]})})]},D))})]})})]})]})},See=()=>{const{balance:t,setBalance:n,isBalanceLocked:r,setIsBalanceLocked:i}=Ju(),[l,u]=v.useState(t),[d,p]=v.useState(!1),[f,g]=v.useState([{id:1,timestamp:new Date(Date.now()-864e5).toLocaleString(),user:"Admin",action:"Modification solde",oldValue:"12000.00",newValue:"12450.50",reason:"Correction suite audit"},{id:2,timestamp:new Date(Date.now()-1728e5).toLocaleString(),user:"Trsorier",action:"Synchronisation",oldValue:"12450.50",newValue:"12450.50",reason:"Sync avec banque"}]),x=on(),y=async()=>{if(l===t){x({title:"Aucune modification",status:"info"});return}p(!0);try{const w=t;n(parseFloat(l)),g([{id:f.length+1,timestamp:new Date().toLocaleString(),user:localStorage.getItem("userName")||"Utilisateur",action:"Modification solde",oldValue:w.toFixed(2),newValue:l,reason:"Mise  jour manuelle"},...f]),x({title:"Succs",description:"Solde mis  jour",status:"success"})}catch(w){x({title:"Erreur",description:w.message,status:"error"}),u(t)}finally{p(!1)}},b=()=>{i(!r),x({title:r?"Dverrouill":"Verrouill",description:`Le solde est ${r?"":"maintenant "}verrouill`,status:"success"})};return e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",children:"Paramtres Finances"}),e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Configuration et gestion du solde"})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Gestion du Solde"}),e.jsx(Q,{leftIcon:e.jsx(Ko,{}),size:"sm",variant:r?"solid":"outline",colorScheme:r?"red":"gray",onClick:b,children:r?"Verrouill":"Dverrouill"})]})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(Ut,{status:"info",borderRadius:"md",children:[e.jsx(Ht,{}),e.jsx(oe,{children:e.jsxs(k,{fontSize:"sm",children:["Le solde est ",e.jsx("strong",{children:r?"verrouill":"dverrouill"}),". Les modifications ",r?"ne ":"","seront enregistres dans l'historique d'audit."]})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Solde actuel"}),e.jsx(ge,{type:"number",step:"0.01",value:l,onChange:w=>u(w.target.value),isDisabled:r,fontSize:"lg",fontWeight:"bold",color:"blue.500"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Raison de la modification (optionnel)"}),e.jsx(ge,{placeholder:"Ex: Correction suite audit, Synchronisation manuelle...",isDisabled:r})]}),e.jsx(Q,{leftIcon:e.jsx(Il,{}),colorScheme:"blue",onClick:y,isLoading:d,isDisabled:r,w:"100%",children:"Enregistrer le solde"})]})})]}),e.jsx(xn,{}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Paramtres Gnraux"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(X,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Z,{mb:0,children:"Activer les notifications de solde bas"}),e.jsx(Jn,{defaultChecked:!0})]}),e.jsxs(X,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Z,{mb:0,children:"Afficher les graphiques mensuels"}),e.jsx(Jn,{defaultChecked:!0})]}),e.jsxs(X,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Z,{mb:0,children:"Exporter automatiquement les rapports"}),e.jsx(Jn,{defaultChecked:!1})]}),e.jsxs(X,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Z,{mb:0,children:"Mode strict (validation obligatoire)"}),e.jsx(Jn,{defaultChecked:!1})]})]})})]}),e.jsx(xn,{}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Historique d'Audit du Solde"})}),e.jsx(ke,{overflowX:"auto",children:e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.50",children:[e.jsx(_e,{children:"Date/Heure"}),e.jsx(_e,{children:"Utilisateur"}),e.jsx(_e,{children:"Action"}),e.jsx(_e,{children:"Ancien solde"}),e.jsx(_e,{children:"Nouveau solde"}),e.jsx(_e,{children:"Raison"})]})}),e.jsx(Wn,{children:f.map(w=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontSize:"xs",children:w.timestamp}),e.jsx(Ee,{fontWeight:"500",children:w.user}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:"blue",children:w.action})}),e.jsxs(Ee,{isNumeric:!0,fontSize:"sm",children:[w.oldValue," "]}),e.jsxs(Ee,{isNumeric:!0,fontSize:"sm",fontWeight:"600",children:[w.newValue," "]}),e.jsx(Ee,{fontSize:"sm",color:"gray.600",children:w.reason})]},w.id))})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Catgories de Transactions"})}),e.jsx(ke,{children:e.jsx(J,{align:"stretch",spacing:2,children:["ADHESION","DONATION","TRANSPORT","MAINTENANCE","FOURNITURES"].map(w=>e.jsxs(ee,{justify:"space-between",p:2,borderRadius:"md",bg:"gray.50",children:[e.jsx(k,{fontWeight:"500",children:w}),e.jsx(Qe,{colorScheme:"gray",children:"Active"})]},w))})})]})]})},wee=()=>{const{loadFinanceData:t}=Ju();v.useEffect(()=>{t()},[t]);const n=[{id:"dashboard",label:"Tableau de bord",icon:X1,render:()=>e.jsx(xee,{})},{id:"transactions",label:"Transactions",icon:Yx,render:()=>e.jsx(vee,{})},{id:"scheduled",label:"Oprations programmes",icon:Os,render:()=>e.jsx(yee,{})},{id:"invoicing",label:"Facturation",icon:Qp,render:()=>e.jsx(jee,{})},{id:"reports",label:"Rapports & KPI",icon:HM,render:()=>e.jsx(bee,{})},{id:"settings",label:"Paramtres",icon:Qu,render:()=>e.jsx(See,{})}];return e.jsx(Bh,{title:"Gestion financire",subtitle:"Recettes, dpenses, devis et factures",sections:n,defaultSectionId:"dashboard",sidebarTitle:"Finances",sidebarSubtitle:"Pilotage budgtaire",sidebarTitleIcon:Hu,versionLabel:"Finance v2"})},wj={public_open_access:{name:"Ouvert au Public",icon:fh,color:"green",defaults:{isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"none",status:"PUBLISHED"},description:"vnement ouvert au public, accs libre sans inscription"},public_with_registration:{name:"Public avec Inscription",icon:Va,color:"blue",defaults:{isVisible:!0,allowPublicRegistration:!0,requiresRegistration:!0,isFree:!1,adultPrice:15,childPrice:8,maxParticipants:100,registrationDeadline:"",registrationMethod:"internal",status:"PUBLISHED"},description:"vnement public avec inscription ouverte directement au public"},private_outing:{name:"Sortie Prive",icon:Ub,color:"yellow",defaults:{isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"none",status:"PUBLISHED"},description:"Sortie visible publiquement mais rserve (pas d'inscription possible)"},public_contact_required:{name:"Contact Association Requis",icon:Ub,color:"orange",defaults:{isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!0,isFree:!1,adultPrice:12,childPrice:6,maxParticipants:30,registrationDeadline:"",registrationMethod:"none",status:"PUBLISHED"},description:"Visible par tous mais inscription uniquement en contactant l'association"},members_only:{name:"Adhrents Seulement",icon:Ko,color:"purple",defaults:{isVisible:!1,allowPublicRegistration:!1,requiresRegistration:!0,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:50,registrationDeadline:"",registrationMethod:"internal",status:"PUBLISHED"},description:"Rserv aux adhrents, non visible sur le site public"},private_internal:{name:"vnement Interne",icon:Ko,color:"red",defaults:{isVisible:!1,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"none",status:"DRAFT"},description:"vnement interne, compltement priv"},public_pdf_form:{name:"Formulaire PDF Public",icon:ua,color:"teal",defaults:{isVisible:!0,allowPublicRegistration:!0,requiresRegistration:!0,isFree:!1,adultPrice:12,childPrice:6,maxParticipants:null,registrationDeadline:"",registrationMethod:"pdf",status:"PUBLISHED"},description:"vnement public avec formulaire PDF  tlcharger"},parade_classic_vehicles:{name:" Dfil Anciennes",icon:Wu,color:"red",defaults:{isVisible:!0,allowPublicRegistration:!0,requiresRegistration:!0,isFree:!0,adultPrice:null,childPrice:null,maxParticipants:null,registrationDeadline:"",registrationMethod:"internal",status:"PUBLISHED",registrationType:"parade_vehicles"},description:"Dfil de vhicules anciens - Inscription avec nom, vhicule et club"}},Cee=()=>{const[t,n]=v.useState([]),[r,i]=v.useState([]),[l,u]=v.useState(!1),[d,p]=v.useState(!1),[f,g]=v.useState("cards"),[x,y]=v.useState(""),b=on(),{isOpen:w,onOpen:C,onClose:_}=It(),[A,D]=v.useState(null),[P,M]=v.useState(null),[N,z]=v.useState({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),I=v.useCallback(async()=>{try{u(!0);const R=localStorage.getItem("token");if(!R){b({status:"warning",title:"Session expire",description:"Veuillez vous reconnecter."}),window.location.href="/login";return}try{const q=R.split(".");if(q.length!==3)throw new Error("Format de token invalide");const le=JSON.parse(atob(q[1])),We=Math.floor(Date.now()/1e3);if(le.exp&&le.exp<We)throw new Error("Token expir")}catch(q){console.error("Token invalide:",q),localStorage.removeItem("token"),localStorage.removeItem("user"),b({status:"error",title:"Session invalide",description:"Veuillez vous reconnecter."}),window.location.href="/login";return}const Y=await za.getAll();n(Array.isArray(Y)?Y:[])}catch(R){if(console.error("Erreur events API:",R),R.message.includes("401")){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login";return}R.message.includes("400")?b({status:"error",title:"Erreur 400 - Bad Request",description:"Problme avec la requte. Cliquez sur 'Tester API' pour diagnostiquer."}):b({status:"error",title:"Erreur de chargement",description:"Impossible de charger les vnements."}),n([])}finally{u(!1)}},[b]),V=v.useCallback(async()=>{try{const R=await Ap.getAll();i(Array.isArray(R)?R:[])}catch(R){console.error(R),i([])}},[]);v.useEffect(()=>{I(),V()},[I,V]);const $=()=>{z({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),y("")},ae=R=>{const Y=wj[R];Y&&(z(q=>({...q,...Y.defaults,eventType:R,title:q.title,date:q.date,time:q.time,location:q.location,description:q.description,vehicleId:q.vehicleId})),y(R),b({status:"info",title:"Template appliqu",description:Y.description}))},he=()=>{D(null),$(),C()},re=R=>{D(R);let Y={};try{Y=R.extras?JSON.parse(R.extras):{}}catch(q){console.log("Impossible de parser extras:",q)}z({title:R.title||"",date:R.date||"",time:R.time||"",location:R.location||"",description:R.description||"",adultPrice:R.adultPrice||"",childPrice:R.childPrice||"",helloAssoUrl:R.helloAssoUrl||"",vehicleId:R.vehicleId||"",status:R.status||"DRAFT",isVisible:Y.isVisible!==!1,allowPublicRegistration:Y.allowPublicRegistration||!1,requiresRegistration:Y.requiresRegistration||!!R.helloAssoUrl,isFree:Y.isFree!==!1,maxParticipants:Y.maxParticipants||"",registrationDeadline:Y.registrationDeadline||"",registrationMethod:Y.registrationMethod||(R.helloAssoUrl?"helloasso":"none"),pdfUrl:Y.pdfUrl||"",eventType:Y.eventType||"public_info_only"}),y(Y.eventType||""),C()},ce=(R,Y)=>{const q=R.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,30),le=Y.replace(/-/g,""),We=Math.random().toString(36).substring(2,6);return`${q}-${le}-${We}`},Se=async()=>{if(!N.title.trim()){b({status:"warning",title:"Le titre est requis"});return}if(!N.date){b({status:"warning",title:"La date est requise"});return}try{p(!0);const R={title:N.title.trim(),date:N.date,time:N.time||null,location:N.location.trim()||null,description:N.description.trim()||null,adultPrice:N.adultPrice?parseFloat(N.adultPrice):null,childPrice:N.childPrice?parseFloat(N.childPrice):null,helloAssoUrl:N.helloAssoUrl.trim()||null,vehicleId:N.vehicleId||null,status:N.status,extras:{isVisible:N.isVisible,allowPublicRegistration:N.allowPublicRegistration,requiresRegistration:N.requiresRegistration,isFree:N.isFree,maxParticipants:N.maxParticipants?parseInt(N.maxParticipants):null,registrationDeadline:N.registrationDeadline||null,registrationMethod:N.registrationMethod,pdfUrl:N.pdfUrl||null,eventType:N.eventType}};A||(R.id=ce(N.title,N.date),console.log(" Generated ID:",R.id)),console.log(" Saving event data:",R),A?(await za.update(A.id,R),b({status:"success",title:"vnement modifi avec succs"})):(await za.create(R),b({status:"success",title:"vnement cr avec succs"})),await I(),_(),$()}catch(R){console.error("Save error:",R),R.message.includes("409")||R.message.includes("ID dj utilis")?b({status:"error",title:"ID dj utilis",description:"Un vnement avec ce nom et cette date existe dj. Modifiez le titre ou la date."}):R.message.includes("400")?(console.log("Dtails erreur 400 - Data envoye:",eventData),b({status:"error",title:"Erreur 400 - Donnes invalides",description:"Vrifiez la console pour voir les donnes envoyes."})):b({status:"error",title:"Erreur lors de la sauvegarde",description:R.message})}finally{p(!1)}},je=async R=>{if(confirm(`tes-vous sr de vouloir supprimer l'vnement "${R.title}" ?`))try{await za.delete(R.id),b({status:"success",title:"vnement supprim"}),await I()}catch(Y){b({status:"error",title:"Erreur lors de la suppression",description:Y.message})}},de=async R=>{const Y=R.status==="PUBLISHED"?"DRAFT":"PUBLISHED";try{console.log(" Toggling status from",R.status,"to",Y),await za.update(R.id,{status:Y}),b({status:"success",title:`vnement ${Y==="PUBLISHED"?"publi":"dpubli"}`}),await I()}catch(q){console.error("Erreur toggle publish:",q),b({status:"error",title:"Erreur lors de la publication",description:q.message})}},G=R=>R==="PUBLISHED"?e.jsx(Qe,{colorScheme:"green",children:"Publi"}):e.jsx(Qe,{colorScheme:"gray",children:"Brouillon"}),U=R=>{try{const q=(R.extras?JSON.parse(R.extras):{}).eventType||"public_info_only",le=wj[q];if(le)return e.jsxs(Qe,{colorScheme:le.color,variant:"subtle",children:[e.jsx(Cn,{as:le.icon,mr:1}),le.name]})}catch(Y){console.log("Error parsing event extras:",Y)}return e.jsx(Qe,{colorScheme:"gray",children:"Standard"})},W=R=>{try{const Y=R.extras?JSON.parse(R.extras):{};return console.log(` Internal - Event "${R.title}" extras:`,Y),Y.isVisible?Y.requiresRegistration?Y.requiresRegistration&&!Y.allowPublicRegistration?e.jsx(Q,{size:"sm",leftIcon:e.jsx(Ub,{}),colorScheme:"orange",variant:"outline",isDisabled:!0,children:"Contact requis"}):Y.requiresRegistration&&Y.allowPublicRegistration?e.jsx(Q,{size:"sm",leftIcon:e.jsx(Va,{}),colorScheme:"blue",variant:"solid",isDisabled:!0,children:"Inscription publique"}):e.jsx(Q,{size:"sm",leftIcon:e.jsx(fh,{}),colorScheme:"gray",variant:"outline",isDisabled:!0,children:"Indtermin"}):e.jsx(Q,{size:"sm",leftIcon:e.jsx(fh,{}),colorScheme:"green",variant:"outline",isDisabled:!0,children:"Ouvert au public"}):e.jsx(Q,{size:"sm",leftIcon:e.jsx(Ko,{}),colorScheme:"red",variant:"solid",isDisabled:!0,children:"Priv/Interne"})}catch(Y){return console.log(`Error parsing extras for ${R.title}:`,Y),e.jsx(Q,{size:"sm",leftIcon:e.jsx(fh,{}),colorScheme:"green",variant:"outline",isDisabled:!0,children:"Legacy (ouvert)"})}},me=R=>{const Y=r.find(q=>q.parc===R);return Y?`${Y.parc} - ${Y.modele}`:"Aucun vhicule"},F=t.find(R=>R.id===P);F&&r.find(R=>R.parc===F.vehicleId);const fe=()=>e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:6,children:t.map(R=>e.jsxs(Pe,{shadow:"md",position:"relative",children:[e.jsx(zt,{pb:2,children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsxs(ee,{justify:"space-between",w:"100%",children:[e.jsx(Te,{size:"md",noOfLines:2,flex:1,children:R.title}),W(R)]}),e.jsxs(ee,{spacing:2,wrap:"wrap",children:[G(R.status),U(R)]})]})}),e.jsx(ke,{pt:0,children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsxs(ee,{children:[e.jsx(Os,{}),e.jsxs(k,{fontSize:"sm",children:[R.date," ",R.time&&` ${R.time}`]})]}),R.location&&e.jsxs(ee,{children:[e.jsx(kc,{}),e.jsx(k,{fontSize:"sm",children:R.location})]}),R.vehicleId&&e.jsxs(k,{fontSize:"sm",children:[" ",me(R.vehicleId)]}),R.description&&e.jsx(k,{fontSize:"sm",color:"gray.600",noOfLines:3,children:R.description}),(R.adultPrice||R.childPrice)&&e.jsxs(ee,{spacing:4,children:[R.adultPrice&&e.jsxs(k,{fontSize:"sm",fontWeight:"bold",color:"green.600",children:["Adulte: ",R.adultPrice,""]}),R.childPrice&&e.jsxs(k,{fontSize:"sm",fontWeight:"bold",color:"green.600",children:["Enfant: ",R.childPrice,""]})]}),e.jsxs(ee,{spacing:2,pt:4,w:"100%",wrap:"wrap",children:[e.jsx(Q,{leftIcon:e.jsx(Bs,{}),size:"sm",onClick:()=>re(R),children:"Modifier"}),e.jsx(Q,{leftIcon:e.jsx(Rh,{}),size:"sm",colorScheme:R.status==="PUBLISHED"?"red":"green",onClick:()=>de(R),children:R.status==="PUBLISHED"?"Dpublier":"Publier"}),e.jsx(Q,{leftIcon:e.jsx(Qn,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:()=>je(R),children:"Supprimer"})]})]})})]},R.id))}),te=()=>e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Titre"}),e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Type"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:t.map(R=>e.jsxs(bt,{bg:R.id===P?"blue.50":void 0,cursor:"pointer",onClick:()=>M(R.id===P?null:R.id),_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontWeight:"semibold",children:R.title}),e.jsxs(Ee,{children:[R.date," ",R.time&&` ${R.time}`]}),e.jsx(Ee,{children:U(R)}),e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:1,children:[G(R.status),W(R)]})}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:1,children:[e.jsx(Q,{size:"sm",onClick:Y=>{Y.stopPropagation(),re(R)},children:"diter"}),e.jsx(Q,{size:"sm",colorScheme:R.status==="PUBLISHED"?"red":"green",onClick:Y=>{Y.stopPropagation(),de(R)},children:R.status==="PUBLISHED"?"Dpublier":"Publier"}),e.jsx(Q,{size:"sm",colorScheme:"red",variant:"outline",onClick:Y=>{Y.stopPropagation(),je(R)},children:"Supprimer"})]})})]},R.id))})]})});return e.jsxs(oe,{p:6,children:[e.jsxs(sr,{justify:"space-between",align:"center",mb:6,children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{children:" Cration des vnements"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Crez et configurez de nouveaux vnements pour l'association"})]}),e.jsxs(ee,{spacing:3,children:[e.jsx(Q,{leftIcon:f==="cards"?e.jsx(VM,{}):e.jsx(ew,{}),size:"sm",variant:"outline",onClick:()=>g(f==="cards"?"table":"cards"),children:f==="cards"?"Vue tableau":"Vue cartes"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:he,children:"Nouvel vnement"})]})]}),l?e.jsx(yn,{py:20,children:e.jsx(pn,{size:"xl"})}):t.length===0?e.jsx(yn,{py:20,children:e.jsxs(J,{spacing:4,children:[e.jsx(k,{color:"gray.500",fontSize:"lg",children:"Aucun vnement trouv"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:he,children:"Crer le premier vnement"})]})}):f==="cards"?e.jsx(fe,{}):e.jsx(te,{}),e.jsxs(Et,{isOpen:w,onClose:_,size:"6xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsx(Tt,{children:A?"Modifier l'vnement":"Nouvel vnement"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(ga,{children:[e.jsxs(xa,{children:[e.jsx(hn,{children:" Informations de base"}),e.jsx(hn,{children:" Configuration"}),e.jsx(hn,{children:" Templates"})]}),e.jsxs(va,{children:[e.jsx(fn,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{value:N.title,onChange:R=>z(Y=>({...Y,title:R.target.value})),placeholder:"Nom de l'vnement"})]}),e.jsxs(ee,{w:"100%",spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Date"}),e.jsx(ge,{type:"date",value:N.date,onChange:R=>z(Y=>({...Y,date:R.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Heure"}),e.jsx(ge,{type:"time",value:N.time,onChange:R=>z(Y=>({...Y,time:R.target.value}))})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Lieu"}),e.jsx(ge,{value:N.location,onChange:R=>z(Y=>({...Y,location:R.target.value})),placeholder:"Lieu de l'vnement"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Vhicule participant"}),e.jsx(ut,{value:N.vehicleId,onChange:R=>z(Y=>({...Y,vehicleId:R.target.value})),placeholder:"Slectionner un vhicule (optionnel)",children:r.map(R=>e.jsxs("option",{value:R.parc,children:[R.parc," - ",R.modele," (",R.marque,")"]},R.parc))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:N.description,onChange:R=>z(Y=>({...Y,description:R.target.value})),placeholder:"Description de l'vnement",rows:4})]})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:6,children:[e.jsxs(oe,{w:"100%",p:4,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:[e.jsx(Te,{size:"sm",mb:3,children:" Visibilit"}),e.jsxs(X,{children:[e.jsxs(ee,{children:[e.jsx(Jn,{isChecked:N.isVisible,onChange:R=>z(Y=>({...Y,isVisible:R.target.checked}))}),e.jsx(Z,{mb:0,children:"Visible sur le site public"})]}),e.jsxs(Ut,{status:N.isVisible?"success":"warning",mt:2,borderRadius:"md",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"sm",children:N.isVisible?" L'vnement apparatra sur la page Events du site externe":" vnement priv, visible seulement dans l'interface interne"})]})]})]}),e.jsxs(oe,{w:"100%",p:4,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:[e.jsx(Te,{size:"sm",mb:3,children:" Gestion des inscriptions"}),e.jsxs(J,{spacing:4,align:"start",children:[e.jsxs(X,{children:[e.jsxs(ee,{children:[e.jsx(Jn,{isChecked:N.requiresRegistration,onChange:R=>z(Y=>({...Y,requiresRegistration:R.target.checked}))}),e.jsx(Z,{mb:0,children:"Inscription requise pour participer"})]}),e.jsxs(Ut,{status:N.requiresRegistration?"info":"success",mt:2,borderRadius:"md",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"sm",children:N.requiresRegistration?" Une inscription sera ncessaire pour participer  cet vnement":" Bouton 'Ouvert au public' - Aucune inscription ncessaire"})]})]}),N.requiresRegistration&&e.jsxs(X,{children:[e.jsxs(ee,{children:[e.jsx(Jn,{isChecked:N.allowPublicRegistration,onChange:R=>z(Y=>({...Y,allowPublicRegistration:R.target.checked}))}),e.jsx(Z,{mb:0,children:"Le public peut s'inscrire directement"})]}),e.jsxs(Ut,{status:N.allowPublicRegistration?"success":"warning",mt:2,borderRadius:"md",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"sm",children:N.allowPublicRegistration?" Bouton d'inscription disponible sur le site externe":" Bouton 'Contacter l'association' - Inscription via contact uniquement"})]})]})]})]}),e.jsxs(oe,{w:"100%",p:4,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:[e.jsx(Te,{size:"sm",mb:3,children:" Tarification"}),e.jsxs(J,{spacing:3,align:"start",children:[e.jsx(X,{children:e.jsxs(ee,{children:[e.jsx(Jn,{isChecked:N.isFree,onChange:R=>z(Y=>({...Y,isFree:R.target.checked,adultPrice:R.target.checked?"":Y.adultPrice,childPrice:R.target.checked?"":Y.childPrice}))}),e.jsx(Z,{mb:0,children:"vnement gratuit"})]})}),!N.isFree&&e.jsxs(ee,{w:"100%",spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Prix adulte ()"}),e.jsx(ge,{type:"number",step:"0.01",value:N.adultPrice,onChange:R=>z(Y=>({...Y,adultPrice:R.target.value})),placeholder:"15.00"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Prix enfant ()"}),e.jsx(ge,{type:"number",step:"0.01",value:N.childPrice,onChange:R=>z(Y=>({...Y,childPrice:R.target.value})),placeholder:"8.00"})]})]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Statut de publication"}),e.jsxs(ut,{value:N.status,onChange:R=>z(Y=>({...Y,status:R.target.value})),children:[e.jsx("option",{value:"DRAFT",children:"Brouillon"}),e.jsx("option",{value:"PUBLISHED",children:"Publi"})]})]})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,children:[e.jsx(k,{fontSize:"lg",fontWeight:"bold",mb:4,children:" Choisissez un template pour configurer rapidement votre vnement"}),e.jsx(mt,{columns:{base:1,md:2},spacing:4,w:"100%",children:Object.entries(wj).map(([R,Y])=>e.jsx(Pe,{cursor:"pointer",onClick:()=>ae(R),bg:x===R?`${Y.color}.50`:"white",borderColor:x===R?`${Y.color}.200`:"gray.200",borderWidth:"2px",_hover:{borderColor:`${Y.color}.300`},children:e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsxs(ee,{children:[e.jsx(Cn,{as:Y.icon,color:`${Y.color}.500`}),e.jsx(k,{fontWeight:"bold",color:`${Y.color}.700`,children:Y.name})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:Y.description}),x===R&&e.jsx(Qe,{colorScheme:Y.color,children:"Slectionn"})]})})},R))}),x&&e.jsxs(Ut,{status:"info",borderRadius:"md",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"bold",children:"Template appliqu"}),e.jsx(k,{fontSize:"sm",children:`Vous pouvez maintenant personnaliser les paramtres dans l'onglet "Configuration"`})]})]})]})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:()=>{_(),$()},children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:Se,isLoading:d,children:A?"Modifier":"Crer"})]})]})]})]})},Eee=t=>{const n={DRAFT:{cs:"gray",label:"Brouillon"},PUBLISHED:{cs:"green",label:"Publi"},ARCHIVED:{cs:"orange",label:"Archiv"}},r=n[t]??n.DRAFT;return e.jsx(Qe,{colorScheme:r.cs,children:r.label})},_ee=t=>{if(!t)return"Date non dfinie";try{return new Date(t).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}catch{return"Date invalide"}};function Tee(){const t=on(),[n,r]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(""),[p,f]=v.useState("ALL"),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,C]=v.useState([]),[_,A]=v.useState({revenue:0,expenses:0,profit:0,capacity:0,occupancy:0,rate:0,breakdown:null}),[D,P]=v.useState({url:"",org:"",event:""}),{isOpen:M,onOpen:N,onClose:z}=It(),[I,V]=v.useState(!1);v.useEffect(()=>{(async()=>{l(!0);try{const q=await za.getAll();r(Array.isArray(q)?q:[])}catch{t({status:"error",title:"Erreur",description:"Impossible de charger les vnements"})}finally{l(!1)}})()},[t]);const $=v.useMemo(()=>{const q=u.trim().toLowerCase();return(n||[]).filter(le=>{const We=le.title?.toLowerCase().includes(q)||le.location?.toLowerCase().includes(q),pe=p==="ALL"||le.status===p;return We&&pe})},[n,u,p]),ae=v.useMemo(()=>{const q=n.length,le=n.filter(pe=>pe.status==="PUBLISHED").length,We=n.filter(pe=>pe.status==="PUBLISHED"&&new Date(pe.date)>new Date).length;return{total:q,published:le,upcoming:We,totalParticipants:0,totalRevenue:0}},[n]),he=q=>{x(q),b([]),C([{id:1,name:"Trajet principal",vehicle:q.vehicleId||"Bus",capacity:45,stops:[{name:"Dpart",time:"09:00",address:""},{name:q.location||"Arrive",time:"10:00",address:q.location||""}]}]),P({url:q.helloAssoUrl||"",org:q.helloAssoOrg||"",event:q.helloAssoEvent||""}),N()},re=q=>{if(!q?.name||!q?.email){t({status:"warning",title:"Nom et email requis"});return}const le=w.reduce((pe,ye)=>pe+(ye.capacity||0),0),We=y.filter(pe=>pe.status==="confirmed").length;if(q.status==="confirmed"&&We>=le){t({status:"error",title:"Capacit atteinte"});return}b(pe=>[...pe,{id:Date.now(),type:"adult",status:"pending",...q}])},ce=(q,le)=>{b(We=>We.map(pe=>pe.id===q?{...pe,...le}:pe))},Se=q=>b(le=>le.filter(We=>We.id!==q)),je=()=>{C(q=>[...q,{id:Date.now(),name:"Nouveau trajet",vehicle:"",capacity:0,stops:[]}])},de=(q,le)=>{const We=parseInt(le||0,10);C(pe=>pe.map(ye=>ye.id===q?{...ye,capacity:We}:ye))},G=v.useMemo(()=>{if(!g)return null;const q=parseFloat(g.adultPrice||0),le=parseFloat(g.childPrice||0),We=y.filter(Je=>Je.status==="confirmed"),pe=We.filter(Je=>Je.type==="adult").length,ye=We.filter(Je=>Je.type==="child").length,Ze=Math.round(pe*q+ye*le),ht=w.reduce((Je,Ge)=>Je+(Ge.capacity||0),0),rt=We.length,vt=ht>0?Math.round(rt/ht*100):0,Ue=Math.round(Ze*.25+ht*2+rt*3),qt=Ze-Ue;return{revenue:Ze,expenses:Ue,profit:qt,capacity:ht,occupancy:rt,rate:vt,breakdown:{adult:{price:q,count:pe,total:q*pe},child:{price:le,count:ye,total:le*ye},expenseLines:[{label:"Base (25%)",amount:Math.round(Ze*.25)},{label:`Capacit (${ht})`,amount:Math.round(ht*2)},{label:`Participants (${rt})`,amount:Math.round(rt*3)}]}}},[g,y,w]);v.useEffect(()=>{G&&A(G)},[G]);const U=async()=>{V(!0);try{t({status:"success",title:"Modifications sauvegardes"})}catch{t({status:"error",title:"Erreur de sauvegarde"})}finally{V(!1)}},[W,me]=v.useState({type:"recette",description:"",amount:0,category:""}),[F,fe]=v.useState(!1),[te,R]=v.useState([]),Y=async()=>{if(g){fe(!0);try{const q={id:Date.now(),...W,date:new Date};R(le=>[...le,q]),me({type:"recette",description:"",amount:0,category:""}),t({status:"success",title:"Transaction ajoute"})}catch{t({status:"error",title:"Erreur d'ajout de transaction"})}finally{fe(!1)}}};return e.jsxs(ei,{maxW:"7xl",py:6,children:[e.jsxs(J,{align:"start",spacing:6,mb:8,children:[e.jsxs(ee,{w:"100%",justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"lg",children:" Gestion des vnements"}),e.jsx(k,{color:"gray.600",children:"Administration des vnements, participants et finances"})]}),e.jsxs(ee,{children:[e.jsx(Q,{as:mr,to:"/dashboard/evenements",leftIcon:e.jsx(Bn,{}),colorScheme:"blue",variant:"outline",children:"Crer un vnement"}),e.jsx(Q,{leftIcon:e.jsx(Fa,{}),onClick:()=>window.location.reload(),variant:"outline",children:"Actualiser"})]})]}),e.jsxs(mt,{columns:{base:2,md:5},spacing:4,w:"100%",children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total"}),e.jsx(Dt,{color:"blue.500",children:ae.total})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Publis"}),e.jsx(Dt,{color:"green.500",children:ae.published})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:" venir"}),e.jsx(Dt,{color:"orange.500",children:ae.upcoming})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Participants"}),e.jsx(Dt,{color:"purple.500",children:ae.totalParticipants})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Revenus"}),e.jsxs(Dt,{color:"green.600",children:[ae.totalRevenue,""]})]})})})]})]}),e.jsx(Pe,{mb:6,children:e.jsx(ke,{children:e.jsxs(ee,{spacing:4,children:[e.jsxs(zc,{maxW:"320px",children:[e.jsx(Ic,{pointerEvents:"none",children:e.jsx(ym,{})}),e.jsx(ge,{placeholder:"Rechercher un vnement...",value:u,onChange:q=>d(q.target.value)})]}),e.jsxs(ut,{maxW:"220px",value:p,onChange:q=>f(q.target.value),children:[e.jsx("option",{value:"ALL",children:"Tous les statuts"}),e.jsx("option",{value:"PUBLISHED",children:"Publis"}),e.jsx("option",{value:"DRAFT",children:"Brouillons"}),e.jsx("option",{value:"ARCHIVED",children:"Archivs"})]})]})})}),i?e.jsx(yn,{py:20,children:e.jsx(pn,{size:"xl"})}):$.length===0?e.jsx(Pe,{children:e.jsx(ke,{children:e.jsx(yn,{py:16,children:e.jsxs(J,{spacing:4,children:[e.jsx(k,{color:"gray.500",children:"Aucun vnement trouv"}),e.jsx(Q,{as:mr,to:"/dashboard/evenements",leftIcon:e.jsx(Bn,{}),colorScheme:"blue",children:"Crer le premier"})]})})})}):e.jsx(Pe,{children:e.jsx(ke,{p:0,children:e.jsxs(Fn,{variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"vnement"}),e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:$.map(q=>e.jsxs(bt,{children:[e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"semibold",children:q.title}),q.location&&e.jsxs(ee,{fontSize:"sm",color:"gray.600",children:[e.jsx(kc,{}),e.jsx(k,{children:q.location})]}),q.vehicleId&&e.jsxs(ee,{fontSize:"sm",color:"blue.600",children:[e.jsx(Wu,{}),e.jsx(k,{children:q.vehicleId})]})]})}),e.jsxs(Ee,{children:[_ee(q.date),q.time?e.jsx(k,{fontSize:"sm",color:"gray.600",children:q.time}):null]}),e.jsx(Ee,{children:Eee(q.status)}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:1,children:[e.jsx(ti,{label:"Gestion complte",children:e.jsx(xt,{"aria-label":"Grer",icon:e.jsx(Rh,{}),size:"sm",variant:"ghost",onClick:()=>he(q)})}),e.jsx(ti,{label:"Modifier l'vnement",children:e.jsx(xt,{as:mr,to:"/dashboard/evenements","aria-label":"Modifier",icon:e.jsx(Bs,{}),size:"sm",variant:"ghost"})}),e.jsx(ti,{label:"Exporter ( venir)",children:e.jsx(xt,{"aria-label":"Exporter",icon:e.jsx(ua,{}),size:"sm",variant:"ghost",onClick:()=>t({status:"info",title:"Bientt disponible"})})})]})})]},q.id))})]})})}),e.jsxs(Et,{isOpen:M,onClose:z,size:"6xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",children:[e.jsx(Tt,{children:e.jsxs(ee,{children:[e.jsx(Rh,{}),e.jsxs(k,{ml:2,children:["Gestion : ",g?.title]})]})}),e.jsx($t,{}),e.jsx(_t,{overflow:"auto",children:e.jsxs(ga,{children:[e.jsxs(xa,{children:[e.jsx(hn,{children:" Participants"}),e.jsx(hn,{children:" Trajets"}),e.jsx(hn,{children:" Finances"}),e.jsx(hn,{children:" HelloAsso"})]}),e.jsxs(va,{children:[e.jsx(fn,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(Te,{size:"md",children:["Participants (",y.length,")"]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",size:"sm",onClick:()=>re({name:"Nouveau participant",email:`user${Date.now()}@mail.com`,type:"adult",status:"pending"}),children:"Ajouter vite (dmo)"})]}),y.length===0?e.jsx(yn,{py:8,children:e.jsx(k,{color:"gray.500",children:"Aucun participant"})}):e.jsxs(Fn,{size:"sm",variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Nom"}),e.jsx(_e,{children:"Email"}),e.jsx(_e,{children:"Type"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{})]})}),e.jsx(Wn,{children:y.map(q=>e.jsxs(bt,{children:[e.jsx(Ee,{fontWeight:"bold",children:q.name}),e.jsx(Ee,{children:q.email}),e.jsx(Ee,{children:e.jsxs(ut,{size:"sm",value:q.type,onChange:le=>ce(q.id,{type:le.target.value}),children:[e.jsx("option",{value:"adult",children:"Adulte"}),e.jsx("option",{value:"child",children:"Enfant"})]})}),e.jsx(Ee,{children:e.jsxs(ut,{size:"sm",value:q.status,onChange:le=>ce(q.id,{status:le.target.value}),children:[e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"confirmed",children:"Confirm"}),e.jsx("option",{value:"cancelled",children:"Annul"})]})}),e.jsx(Ee,{isNumeric:!0,children:e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(Qn,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>Se(q.id)})})]},q.id))})]})]})}),e.jsx(fn,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Trajets"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),size:"sm",colorScheme:"blue",onClick:je,children:"Ajouter un trajet"})]}),e.jsx(Pe,{bg:"blue.50",borderLeft:"4px solid",borderLeftColor:"blue.400",children:e.jsx(ke,{children:e.jsxs(ee,{spacing:8,children:[e.jsxs(Rt,{children:[e.jsx(kt,{children:"Capacit totale"}),e.jsxs(Dt,{color:"blue.600",children:[_.capacity," places"]})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Confirms"}),e.jsx(Dt,{color:"green.600",children:_.occupancy})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Taux d'occupation"}),e.jsxs(Dt,{color:"purple.600",children:[_.rate,"%"]})]})]})})}),e.jsx(mt,{columns:{base:1,lg:2},spacing:4,children:w.map(q=>e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"sm",children:q.name}),q.vehicle&&e.jsx(Qe,{colorScheme:"blue",children:q.vehicle})]})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(ee,{children:[e.jsx(Va,{}),e.jsx(k,{fontSize:"sm",children:"Capacit:"}),e.jsxs(Ln,{size:"sm",min:0,max:200,value:q.capacity||0,onChange:le=>de(q.id,le),w:"90px",children:[e.jsx(On,{}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"places"})]}),e.jsxs(ee,{spacing:3,children:[e.jsxs(k,{fontSize:"sm",fontWeight:"bold",children:[_.occupancy," / ",q.capacity||0]}),e.jsx(Rc,{value:(q.capacity||0)>0?Math.min(100,Math.round(_.occupancy/q.capacity*100)):0,size:"sm",colorScheme:(q.capacity||0)>0&&_.occupancy/(q.capacity||1)>.9?"red":(q.capacity||0)>0&&_.occupancy/(q.capacity||1)>.75?"orange":"green",flex:1})]}),e.jsx(oe,{fontSize:"sm",color:"gray.600",children:q.stops?.length?e.jsx("ul",{style:{marginLeft:"1rem"},children:q.stops.map((le,We)=>e.jsxs("li",{children:[le.time?`${le.time}  `:"",le.name]},We))}):e.jsx(k,{children:"Aucun arrt"})})]})})]},q.id))})]})}),e.jsx(fn,{children:e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsx(Te,{size:"md",children:"Finances"}),e.jsxs(mt,{columns:{base:1,md:4},spacing:4,children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Revenus"}),e.jsxs(Dt,{color:"green.500",children:[_.revenue,""]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Dpenses"}),e.jsxs(Dt,{color:"red.500",children:[_.expenses,""]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Bnfice"}),e.jsxs(Dt,{color:_.profit>=0?"green.500":"red.500",children:[_.profit,""]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Taux d'occupation"}),e.jsxs(Dt,{color:"blue.500",children:[_.rate,"%"]}),e.jsxs(k,{fontSize:"xs",color:"gray.600",children:[_.occupancy," / ",_.capacity," places"]})]})})})]}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Revenus"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(k,{children:["Adulte (",_.breakdown?.adult.count,")"]}),e.jsxs(k,{fontWeight:"bold",children:[Math.round(_.breakdown?.adult.total||0),""]})]}),e.jsxs(ee,{justify:"space-between",children:[e.jsxs(k,{children:["Enfant (",_.breakdown?.child.count,")"]}),e.jsxs(k,{fontWeight:"bold",children:[Math.round(_.breakdown?.child.total||0),""]})]}),e.jsx(xn,{}),e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{fontWeight:"bold",children:"Total"}),e.jsxs(k,{fontWeight:"bold",color:"green.500",children:[_.revenue,""]})]})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Dpenses"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[_.breakdown?.expenseLines?.map((q,le)=>e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{fontSize:"sm",children:q.label}),e.jsxs(k,{fontWeight:"bold",children:[q.amount,""]})]},le)),e.jsx(xn,{}),e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{fontWeight:"bold",children:"Total"}),e.jsxs(k,{fontWeight:"bold",color:"red.500",children:[_.expenses,""]})]})]})})]})]})]})}),e.jsx(fn,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:"Configuration HelloAsso"}),e.jsxs(X,{children:[e.jsx(Z,{children:"URL de l'vnement"}),e.jsx(ge,{placeholder:"https://www.helloasso.com/associations/.../evenements/...",value:D.url,onChange:q=>P(le=>({...le,url:q.target.value}))}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Optionnel : on peut parser plus tard"})]}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Organisation"}),e.jsx(ge,{value:D.org,onChange:q=>P(le=>({...le,org:q.target.value})),placeholder:"nom-organisation"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"vnement"}),e.jsx(ge,{value:D.event,onChange:q=>P(le=>({...le,event:q.target.value})),placeholder:"nom-evenement"})]})]}),e.jsx(Q,{leftIcon:e.jsx(Il,{}),onClick:()=>t({status:"success",title:"Paramtres enregistrs"}),colorScheme:"blue",children:"Sauvegarder"}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"sm",children:"Participants HelloAsso"}),e.jsx(Qe,{colorScheme:"gray",children:"Non synchronis"})]})}),e.jsxs(ke,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"La synchronisation sera ajoute ultrieurement."}),e.jsxs(oe,{mt:3,children:[e.jsxs(wh,{fontSize:"xs",children:["org: ",D.org||"-"]}),"  ",e.jsxs(wh,{fontSize:"xs",children:["event: ",D.event||"-"]})]})]})]})]})}),e.jsx(fn,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(Te,{size:"md",children:"Transactions lies  lvnement"}),e.jsxs(ee,{children:[e.jsxs(ut,{maxW:"160px",value:W.type,onChange:q=>me(le=>({...le,type:q.target.value})),children:[e.jsx("option",{value:"recette",children:"Recette"}),e.jsx("option",{value:"depense",children:"Dpense"})]}),e.jsx(ge,{placeholder:"Description",value:W.description,onChange:q=>me(le=>({...le,description:q.target.value}))}),e.jsxs(Ln,{maxW:"160px",value:W.amount,min:0,precision:2,step:1,onChange:(q,le)=>me(We=>({...We,amount:Number.isFinite(le)?le:0})),children:[e.jsx(On,{placeholder:"Montant"}),e.jsxs(Zs,{children:[e.jsx(Ks,{}),e.jsx(Xs,{})]})]}),e.jsxs(ut,{maxW:"220px",placeholder:"Catgorie",value:W.category,onChange:q=>me(le=>({...le,category:q.target.value})),children:[e.jsx("option",{value:"evenements",children:"vnements"}),e.jsx("option",{value:"carburant",children:"Carburant"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"materiel",children:"Matriel"}),e.jsx("option",{value:"autres",children:"Autres"})]}),e.jsx(Q,{leftIcon:e.jsx(Il,{}),colorScheme:"blue",onClick:Y,children:"Ajouter"})]}),e.jsx(Pe,{children:e.jsx(ke,{p:0,children:F?e.jsx(yn,{py:8,children:e.jsx(pn,{})}):te.length===0?e.jsx(yn,{py:10,children:e.jsx(k,{color:"gray.500",children:"Aucune transaction lie"})}):e.jsxs(Fn,{size:"sm",variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Type"}),e.jsx(_e,{children:"Description"}),e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{isNumeric:!0,children:"Montant"})]})}),e.jsx(Wn,{children:te.map(q=>e.jsxs(bt,{children:[e.jsx(Ee,{children:q.date?new Date(q.date).toLocaleDateString("fr-FR"):"-"}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:q.type==="recette"?"green":"red",children:q.type==="recette"?"Recette":"Dpense"})}),e.jsx(Ee,{children:q.description}),e.jsx(Ee,{children:e.jsx(Qe,{variant:"subtle",children:q.category||"-"})}),e.jsx(Ee,{isNumeric:!0,children:e.jsx(k,{fontWeight:"bold",color:q.type==="recette"?"green.500":"red.500",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(q.amount||0)})})]},q.id))})]})})})]})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:z,children:"Fermer"}),e.jsx(Q,{colorScheme:"blue",leftIcon:e.jsx(Il,{}),onClick:U,isLoading:I,children:"Sauvegarder"})]})]})]})]})}function cz(t,n){const r=v.useRef(n);v.useEffect(function(){n!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),n!=null&&t.attributionControl.addAttribution(n)),r.current=n},[t,n])}const Aee=1;function Ree(t){return Object.freeze({__version:Aee,map:t})}function uz(t,n){return Object.freeze({...t,...n})}const tw=v.createContext(null);function Mv(){const t=v.use(tw);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function dz(t){function n(r,i){const{instance:l,context:u}=t(r).current;v.useImperativeHandle(i,()=>l);const{children:d}=r;return d==null?null:wn.createElement(tw,{value:u},d)}return v.forwardRef(n)}function kee(t){function n(r,i){const[l,u]=v.useState(!1),{instance:d}=t(r,u).current;v.useImperativeHandle(i,()=>d),v.useEffect(function(){l&&d.update()},[d,l,r.children]);const p=d._contentNode;return p?dS.createPortal(r.children,p):null}return v.forwardRef(n)}function Dee(t){function n(r,i){const{instance:l}=t(r).current;return v.useImperativeHandle(i,()=>l),null}return v.forwardRef(n)}function nw(t,n){const r=v.useRef(void 0);v.useEffect(function(){return n!=null&&t.instance.on(n),r.current=n,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,n])}function zv(t,n){const r=t.pane??n.pane;return r?{...t,pane:r}:t}function Pee(t,n){return function(i,l){const u=Mv(),d=t(zv(i,u),u);return cz(u.map,i.attribution),nw(d.current,i.eventHandlers),n(d.current,u,i,l),d}}var dp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Mee=dp.exports,SA;function zee(){return SA||(SA=1,(function(t,n){(function(r,i){i(n)})(Mee,(function(r){var i="1.9.4";function l(o){var h,j,T,O;for(j=1,T=arguments.length;j<T;j++){O=arguments[j];for(h in O)o[h]=O[h]}return o}var u=Object.create||(function(){function o(){}return function(h){return o.prototype=h,new o}})();function d(o,h){var j=Array.prototype.slice;if(o.bind)return o.bind.apply(o,j.call(arguments,1));var T=j.call(arguments,2);return function(){return o.apply(h,T.length?T.concat(j.call(arguments)):arguments)}}var p=0;function f(o){return"_leaflet_id"in o||(o._leaflet_id=++p),o._leaflet_id}function g(o,h,j){var T,O,K,xe;return xe=function(){T=!1,O&&(K.apply(j,O),O=!1)},K=function(){T?O=arguments:(o.apply(j,arguments),setTimeout(xe,h),T=!0)},K}function x(o,h,j){var T=h[1],O=h[0],K=T-O;return o===T&&j?o:((o-O)%K+K)%K+O}function y(){return!1}function b(o,h){if(h===!1)return o;var j=Math.pow(10,h===void 0?6:h);return Math.round(o*j)/j}function w(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function C(o){return w(o).split(/\s+/)}function _(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?u(o.options):{});for(var j in h)o.options[j]=h[j];return o.options}function A(o,h,j){var T=[];for(var O in o)T.push(encodeURIComponent(j?O.toUpperCase():O)+"="+encodeURIComponent(o[O]));return(!h||h.indexOf("?")===-1?"?":"&")+T.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function P(o,h){return o.replace(D,function(j,T){var O=h[T];if(O===void 0)throw new Error("No value provided for variable "+j);return typeof O=="function"&&(O=O(h)),O})}var M=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function N(o,h){for(var j=0;j<o.length;j++)if(o[j]===h)return j;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var V=0;function $(o){var h=+new Date,j=Math.max(0,16-(h-V));return V=h+j,window.setTimeout(o,j)}var ae=window.requestAnimationFrame||I("RequestAnimationFrame")||$,he=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function re(o,h,j){if(j&&ae===$)o.call(h);else return ae.call(window,d(o,h))}function ce(o){o&&he.call(window,o)}var Se={__proto__:null,extend:l,create:u,bind:d,get lastId(){return p},stamp:f,throttle:g,wrapNum:x,falseFn:y,formatNum:b,trim:w,splitWords:C,setOptions:_,getParamString:A,template:P,isArray:M,indexOf:N,emptyImageUrl:z,requestFn:ae,cancelFn:he,requestAnimFrame:re,cancelAnimFrame:ce};function je(){}je.extend=function(o){var h=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},j=h.__super__=this.prototype,T=u(j);T.constructor=h,h.prototype=T;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(h[O]=this[O]);return o.statics&&l(h,o.statics),o.includes&&(de(o.includes),l.apply(null,[T].concat(o.includes))),l(T,o),delete T.statics,delete T.includes,T.options&&(T.options=j.options?u(j.options):{},l(T.options,o.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){j.callInitHooks&&j.callInitHooks.call(this),this._initHooksCalled=!0;for(var K=0,xe=T._initHooks.length;K<xe;K++)T._initHooks[K].call(this)}},h},je.include=function(o){var h=this.prototype.options;return l(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},je.mergeOptions=function(o){return l(this.prototype.options,o),this},je.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),j=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(j),this};function de(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=M(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(o,h,j){if(typeof o=="object")for(var T in o)this._on(T,o[T],h);else{o=C(o);for(var O=0,K=o.length;O<K;O++)this._on(o[O],h,j)}return this},off:function(o,h,j){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var T in o)this._off(T,o[T],h);else{o=C(o);for(var O=arguments.length===1,K=0,xe=o.length;K<xe;K++)O?this._off(o[K]):this._off(o[K],h,j)}return this},_on:function(o,h,j,T){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,j)===!1){j===this&&(j=void 0);var O={fn:h,ctx:j};T&&(O.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(O)}},_off:function(o,h,j){var T,O,K;if(this._events&&(T=this._events[o],!!T)){if(arguments.length===1){if(this._firingCount)for(O=0,K=T.length;O<K;O++)T[O].fn=y;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var xe=this._listens(o,h,j);if(xe!==!1){var ze=T[xe];this._firingCount&&(ze.fn=y,this._events[o]=T=T.slice()),T.splice(xe,1)}}},fire:function(o,h,j){if(!this.listens(o,j))return this;var T=l({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var O=this._events[o];if(O){this._firingCount=this._firingCount+1||1;for(var K=0,xe=O.length;K<xe;K++){var ze=O[K],Fe=ze.fn;ze.once&&this.off(o,Fe,ze.ctx),Fe.call(ze.ctx||this,T)}this._firingCount--}}return j&&this._propagateEvent(T),this},listens:function(o,h,j,T){typeof o!="string"&&console.warn('"string" type argument expected');var O=h;typeof h!="function"&&(T=!!h,O=void 0,j=void 0);var K=this._events&&this._events[o];if(K&&K.length&&this._listens(o,O,j)!==!1)return!0;if(T){for(var xe in this._eventParents)if(this._eventParents[xe].listens(o,h,j,T))return!0}return!1},_listens:function(o,h,j){if(!this._events)return!1;var T=this._events[o]||[];if(!h)return!!T.length;j===this&&(j=void 0);for(var O=0,K=T.length;O<K;O++)if(T[O].fn===h&&T[O].ctx===j)return O;return!1},once:function(o,h,j){if(typeof o=="object")for(var T in o)this._on(T,o[T],h,!0);else{o=C(o);for(var O=0,K=o.length;O<K;O++)this._on(o[O],h,j,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[f(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[f(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,l({layer:o.target,propagatedFrom:o.target},o),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var U=je.extend(G);function W(o,h,j){this.x=j?Math.round(o):o,this.y=j?Math.round(h):h}var me=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(o){return this.clone()._add(F(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(F(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new W(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new W(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(o){o=F(o);var h=o.x-this.x,j=o.y-this.y;return Math.sqrt(h*h+j*j)},equals:function(o){return o=F(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=F(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function F(o,h,j){return o instanceof W?o:M(o)?new W(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new W(o.x,o.y):new W(o,h,j)}function fe(o,h){if(o)for(var j=h?[o,h]:o,T=0,O=j.length;T<O;T++)this.extend(j[T])}fe.prototype={extend:function(o){var h,j;if(!o)return this;if(o instanceof W||typeof o[0]=="number"||"x"in o)h=j=F(o);else if(o=te(o),h=o.min,j=o.max,!h||!j)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=j.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(j.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(j.y,this.max.y)),this},getCenter:function(o){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,j;return typeof o[0]=="number"||o instanceof W?o=F(o):o=te(o),o instanceof fe?(h=o.min,j=o.max):h=j=o,h.x>=this.min.x&&j.x<=this.max.x&&h.y>=this.min.y&&j.y<=this.max.y},intersects:function(o){o=te(o);var h=this.min,j=this.max,T=o.min,O=o.max,K=O.x>=h.x&&T.x<=j.x,xe=O.y>=h.y&&T.y<=j.y;return K&&xe},overlaps:function(o){o=te(o);var h=this.min,j=this.max,T=o.min,O=o.max,K=O.x>h.x&&T.x<j.x,xe=O.y>h.y&&T.y<j.y;return K&&xe},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,j=this.max,T=Math.abs(h.x-j.x)*o,O=Math.abs(h.y-j.y)*o;return te(F(h.x-T,h.y-O),F(j.x+T,j.y+O))},equals:function(o){return o?(o=te(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function te(o,h){return!o||o instanceof fe?o:new fe(o,h)}function R(o,h){if(o)for(var j=h?[o,h]:o,T=0,O=j.length;T<O;T++)this.extend(j[T])}R.prototype={extend:function(o){var h=this._southWest,j=this._northEast,T,O;if(o instanceof q)T=o,O=o;else if(o instanceof R){if(T=o._southWest,O=o._northEast,!T||!O)return this}else return o?this.extend(le(o)||Y(o)):this;return!h&&!j?(this._southWest=new q(T.lat,T.lng),this._northEast=new q(O.lat,O.lng)):(h.lat=Math.min(T.lat,h.lat),h.lng=Math.min(T.lng,h.lng),j.lat=Math.max(O.lat,j.lat),j.lng=Math.max(O.lng,j.lng)),this},pad:function(o){var h=this._southWest,j=this._northEast,T=Math.abs(h.lat-j.lat)*o,O=Math.abs(h.lng-j.lng)*o;return new R(new q(h.lat-T,h.lng-O),new q(j.lat+T,j.lng+O))},getCenter:function(){return new q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new q(this.getNorth(),this.getWest())},getSouthEast:function(){return new q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof q||"lat"in o?o=le(o):o=Y(o);var h=this._southWest,j=this._northEast,T,O;return o instanceof R?(T=o.getSouthWest(),O=o.getNorthEast()):T=O=o,T.lat>=h.lat&&O.lat<=j.lat&&T.lng>=h.lng&&O.lng<=j.lng},intersects:function(o){o=Y(o);var h=this._southWest,j=this._northEast,T=o.getSouthWest(),O=o.getNorthEast(),K=O.lat>=h.lat&&T.lat<=j.lat,xe=O.lng>=h.lng&&T.lng<=j.lng;return K&&xe},overlaps:function(o){o=Y(o);var h=this._southWest,j=this._northEast,T=o.getSouthWest(),O=o.getNorthEast(),K=O.lat>h.lat&&T.lat<j.lat,xe=O.lng>h.lng&&T.lng<j.lng;return K&&xe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=Y(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Y(o,h){return o instanceof R?o:new R(o,h)}function q(o,h,j){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,j!==void 0&&(this.alt=+j)}q.prototype={equals:function(o,h){if(!o)return!1;o=le(o);var j=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return j<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+b(this.lat,o)+", "+b(this.lng,o)+")"},distanceTo:function(o){return pe.distance(this,le(o))},wrap:function(){return pe.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,j=h/Math.cos(Math.PI/180*this.lat);return Y([this.lat-h,this.lng-j],[this.lat+h,this.lng+j])},clone:function(){return new q(this.lat,this.lng,this.alt)}};function le(o,h,j){return o instanceof q?o:M(o)&&typeof o[0]!="object"?o.length===3?new q(o[0],o[1],o[2]):o.length===2?new q(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new q(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new q(o,h,j)}var We={latLngToPoint:function(o,h){var j=this.projection.project(o),T=this.scale(h);return this.transformation._transform(j,T)},pointToLatLng:function(o,h){var j=this.scale(h),T=this.transformation.untransform(o,j);return this.projection.unproject(T)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,j=this.scale(o),T=this.transformation.transform(h.min,j),O=this.transformation.transform(h.max,j);return new fe(T,O)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?x(o.lng,this.wrapLng,!0):o.lng,j=this.wrapLat?x(o.lat,this.wrapLat,!0):o.lat,T=o.alt;return new q(j,h,T)},wrapLatLngBounds:function(o){var h=o.getCenter(),j=this.wrapLatLng(h),T=h.lat-j.lat,O=h.lng-j.lng;if(T===0&&O===0)return o;var K=o.getSouthWest(),xe=o.getNorthEast(),ze=new q(K.lat-T,K.lng-O),Fe=new q(xe.lat-T,xe.lng-O);return new R(ze,Fe)}},pe=l({},We,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var j=Math.PI/180,T=o.lat*j,O=h.lat*j,K=Math.sin((h.lat-o.lat)*j/2),xe=Math.sin((h.lng-o.lng)*j/2),ze=K*K+Math.cos(T)*Math.cos(O)*xe*xe,Fe=2*Math.atan2(Math.sqrt(ze),Math.sqrt(1-ze));return this.R*Fe}}),ye=6378137,Ze={R:ye,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,j=this.MAX_LATITUDE,T=Math.max(Math.min(j,o.lat),-j),O=Math.sin(T*h);return new W(this.R*o.lng*h,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(o){var h=180/Math.PI;return new q((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:(function(){var o=ye*Math.PI;return new fe([-o,-o],[o,o])})()};function ht(o,h,j,T){if(M(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=j,this._d=T}ht.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new W((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function rt(o,h,j,T){return new ht(o,h,j,T)}var vt=l({},pe,{code:"EPSG:3857",projection:Ze,transformation:(function(){var o=.5/(Math.PI*Ze.R);return rt(o,.5,-o,.5)})()}),Ue=l({},vt,{code:"EPSG:900913"});function qt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Je(o,h){var j="",T,O,K,xe,ze,Fe;for(T=0,K=o.length;T<K;T++){for(ze=o[T],O=0,xe=ze.length;O<xe;O++)Fe=ze[O],j+=(O?"L":"M")+Fe.x+" "+Fe.y;j+=h?Nt.svg?"z":"x":""}return j||"M0 0"}var Ge=document.documentElement.style,Ve="ActiveXObject"in window,se=Ve&&!document.addEventListener,be="msLaunchUri"in navigator&&!("documentMode"in document),at=vs("webkit"),St=vs("android"),An=vs("android 2")||vs("android 3"),qe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Me=St&&vs("Google")&&qe<537&&!("AudioNode"in window),nt=!!window.opera,wt=!be&&vs("chrome"),Xe=vs("gecko")&&!at&&!nt&&!Ve,pt=!wt&&vs("safari"),ot=vs("phantom"),Ne="OTransition"in Ge,Mt=navigator.platform.indexOf("Win")===0,Kt=Ve&&"transition"in Ge,ln="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!An,Zt="MozPerspective"in Ge,Pn=!window.L_DISABLE_3D&&(Kt||ln||Zt)&&!Ne&&!ot,lt=typeof orientation<"u"||vs("mobile"),vn=lt&&at,Sr=lt&&ln,ts=!window.PointerEvent&&window.MSPointerEvent,Zn=!!(window.PointerEvent||ts),Oi="ontouchstart"in window||!!window.TouchEvent,bi=!window.L_NO_TOUCH&&(Oi||Zn),el=lt&&nt,ns=lt&&Xe,Bi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,$i=(function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",y,h),window.removeEventListener("testPassiveEventSupport",y,h)}catch{}return o})(),po=(function(){return!!document.createElement("canvas").getContext})(),$s=!!(document.createElementNS&&qt("svg").createSVGRect),Fi=!!$s&&(function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Er=!$s&&(function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}})(),rs=navigator.platform.indexOf("Mac")===0,ya=navigator.platform.indexOf("Linux")===0;function vs(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Nt={ie:Ve,ielt9:se,edge:be,webkit:at,android:St,android23:An,androidStock:Me,opera:nt,chrome:wt,gecko:Xe,safari:pt,phantom:ot,opera12:Ne,win:Mt,ie3d:Kt,webkit3d:ln,gecko3d:Zt,any3d:Pn,mobile:lt,mobileWebkit:vn,mobileWebkit3d:Sr,msPointer:ts,pointer:Zn,touch:bi,touchNative:Oi,mobileOpera:el,mobileGecko:ns,retina:Bi,passiveEvents:$i,canvas:po,svg:$s,vml:Er,inlineSvg:Fi,mac:rs,linux:ya},Fl=Nt.msPointer?"MSPointerDown":"pointerdown",tl=Nt.msPointer?"MSPointerMove":"pointermove",Si=Nt.msPointer?"MSPointerUp":"pointerup",Dr=Nt.msPointer?"MSPointerCancel":"pointercancel",us={touchstart:Fl,touchmove:tl,touchend:Si,touchcancel:Dr},ys={touchstart:dt,touchmove:Rs,touchend:Rs,touchcancel:Rs},Fs={},ri=!1;function xr(o,h,j){return h==="touchstart"&&rl(),ys[h]?(j=ys[h].bind(this,j),o.addEventListener(us[h],j,!1),j):(console.warn("wrong event specified:",h),y)}function nl(o,h,j){if(!us[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(us[h],j,!1)}function mo(o){Fs[o.pointerId]=o}function si(o){Fs[o.pointerId]&&(Fs[o.pointerId]=o)}function ii(o){delete Fs[o.pointerId]}function rl(){ri||(document.addEventListener(Fl,mo,!0),document.addEventListener(tl,si,!0),document.addEventListener(Si,ii,!0),document.addEventListener(Dr,ii,!0),ri=!0)}function Rs(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var j in Fs)h.touches.push(Fs[j]);h.changedTouches=[h],o(h)}}function dt(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&vr(h),Rs(o,h)}function Uc(o){var h={},j,T;for(T in o)j=o[T],h[T]=j&&j.bind?j.bind(o):j;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Vi=200;function Ui(o,h){o.addEventListener("dblclick",h);var j=0,T;function O(K){if(K.detail!==1){T=K.detail;return}if(!(K.pointerType==="mouse"||K.sourceCapabilities&&!K.sourceCapabilities.firesTouchEvents)){var xe=sl(K);if(!(xe.some(function(Fe){return Fe instanceof HTMLLabelElement&&Fe.attributes.for})&&!xe.some(function(Fe){return Fe instanceof HTMLInputElement||Fe instanceof HTMLSelectElement}))){var ze=Date.now();ze-j<=Vi?(T++,T===2&&h(Uc(K))):T=1,j=ze}}}return o.addEventListener("click",O),{dblclick:h,simDblclick:O}}function ai(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Ha=Gi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wi=Gi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ci=wi==="webkitTransition"||wi==="OTransition"?wi+"End":"transitionend";function Wa(o){return typeof o=="string"?document.getElementById(o):o}function oi(o,h){var j=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!j||j==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(o,null);j=T?T[h]:null}return j==="auto"?null:j}function Rn(o,h,j){var T=document.createElement(o);return T.className=h||"",j&&j.appendChild(T),T}function ar(o){var h=o.parentNode;h&&h.removeChild(o)}function Pr(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Hi(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function Ei(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function Wi(o,h){if(o.classList!==void 0)return o.classList.contains(h);var j=Mr(o);return j.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(j)}function cn(o,h){if(o.classList!==void 0)for(var j=C(h),T=0,O=j.length;T<O;T++)o.classList.add(j[T]);else if(!Wi(o,h)){var K=Mr(o);qi(o,(K?K+" ":"")+h)}}function or(o,h){o.classList!==void 0?o.classList.remove(h):qi(o,w((" "+Mr(o)+" ").replace(" "+h+" "," ")))}function qi(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function Mr(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function ss(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&go(o,h)}function go(o,h){var j=!1,T="DXImageTransform.Microsoft.Alpha";try{j=o.filters.item(T)}catch{if(h===1)return}h=Math.round(h*100),j?(j.Enabled=h!==100,j.Opacity=h):o.style.filter+=" progid:"+T+"(opacity="+h+")"}function Gi(o){for(var h=document.documentElement.style,j=0;j<o.length;j++)if(o[j]in h)return o[j];return!1}function js(o,h,j){var T=h||new W(0,0);o.style[Ha]=(Nt.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(j?" scale("+j+")":"")}function dr(o,h){o._leaflet_pos=h,Nt.any3d?js(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function Yi(o){return o._leaflet_pos||new W(0,0)}var ks,qa,En;if("onselectstart"in document)ks=function(){Yt(window,"selectstart",vr)},qa=function(){Mn(window,"selectstart",vr)};else{var Or=Gi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ks=function(){if(Or){var o=document.documentElement.style;En=o[Or],o[Or]="none"}},qa=function(){Or&&(document.documentElement.style[Or]=En,En=void 0)}}function bs(){Yt(window,"dragstart",vr)}function xo(){Mn(window,"dragstart",vr)}var vo,Zi;function Vs(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(li(),vo=o,Zi=o.style.outlineStyle,o.style.outlineStyle="none",Yt(window,"keydown",li))}function li(){vo&&(vo.style.outlineStyle=Zi,vo=void 0,Zi=void 0,Mn(window,"keydown",li))}function Ss(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Us(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var Xi={__proto__:null,TRANSFORM:Ha,TRANSITION:wi,TRANSITION_END:Ci,get:Wa,getStyle:oi,create:Rn,remove:ar,empty:Pr,toFront:Hi,toBack:Ei,hasClass:Wi,addClass:cn,removeClass:or,setClass:qi,getClass:Mr,setOpacity:ss,testProp:Gi,setTransform:js,setPosition:dr,getPosition:Yi,get disableTextSelection(){return ks},get enableTextSelection(){return qa},disableImageDrag:bs,enableImageDrag:xo,preventOutline:Vs,restoreOutline:li,getSizedParentNode:Ss,getScale:Us};function Yt(o,h,j,T){if(h&&typeof h=="object")for(var O in h)Ws(o,O,h[O],j);else{h=C(h);for(var K=0,xe=h.length;K<xe;K++)Ws(o,h[K],j,T)}return this}var Br="_leaflet_events";function Mn(o,h,j,T){if(arguments.length===1)_r(o),delete o[Br];else if(h&&typeof h=="object")for(var O in h)ws(o,O,h[O],j);else if(h=C(h),arguments.length===2)_r(o,function(ze){return N(h,ze)!==-1});else for(var K=0,xe=h.length;K<xe;K++)ws(o,h[K],j,T);return this}function _r(o,h){for(var j in o[Br]){var T=j.split(/\d/)[0];(!h||h(T))&&ws(o,T,null,null,j)}}var Hs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ws(o,h,j,T){var O=h+f(j)+(T?"_"+f(T):"");if(o[Br]&&o[Br][O])return this;var K=function(ze){return j.call(T||o,ze||window.event)},xe=K;!Nt.touchNative&&Nt.pointer&&h.indexOf("touch")===0?K=xr(o,h,K):Nt.touch&&h==="dblclick"?K=Ui(o,K):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(Hs[h]||h,K,Nt.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(K=function(ze){ze=ze||window.event,jt(o,ze)&&xe(ze)},o.addEventListener(Hs[h],K,!1)):o.addEventListener(h,xe,!1):o.attachEvent("on"+h,K),o[Br]=o[Br]||{},o[Br][O]=K}function ws(o,h,j,T,O){O=O||h+f(j)+(T?"_"+f(T):"");var K=o[Br]&&o[Br][O];if(!K)return this;!Nt.touchNative&&Nt.pointer&&h.indexOf("touch")===0?nl(o,h,K):Nt.touch&&h==="dblclick"?ai(o,K):"removeEventListener"in o?o.removeEventListener(Hs[h]||h,K,!1):o.detachEvent("on"+h,K),o[Br][O]=null}function ci(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Ki(o){return Ws(o,"wheel",ci),this}function Ga(o){return Yt(o,"mousedown touchstart dblclick contextmenu",ci),o._leaflet_disable_click=!0,this}function vr(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function ds(o){return vr(o),ci(o),this}function sl(o){if(o.composedPath)return o.composedPath();for(var h=[],j=o.target;j;)h.push(j),j=j.parentNode;return h}function ue(o,h){if(!h)return new W(o.clientX,o.clientY);var j=Us(h),T=j.boundingClientRect;return new W((o.clientX-T.left)/j.x-h.clientLeft,(o.clientY-T.top)/j.y-h.clientTop)}var Ce=Nt.linux&&Nt.chrome?window.devicePixelRatio:Nt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Be(o){return Nt.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Ce:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function jt(o,h){var j=h.relatedTarget;if(!j)return!0;try{for(;j&&j!==o;)j=j.parentNode}catch{return!1}return j!==o}var ct={__proto__:null,on:Yt,off:Mn,stopPropagation:ci,disableScrollPropagation:Ki,disableClickPropagation:Ga,preventDefault:vr,stop:ds,getPropagationPath:sl,getMousePosition:ue,getWheelDelta:Be,isExternalTarget:jt,addListener:Yt,removeListener:Mn},dn=U.extend({run:function(o,h,j,T){this.stop(),this._el=o,this._inProgress=!0,this._duration=j||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=Yi(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=re(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,j=this._duration*1e3;h<j?this._runFrame(this._easeOut(h/j),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var j=this._startPos.add(this._offset.multiplyBy(o));h&&j._round(),dr(this._el,j),this.fire("step")},_complete:function(){ce(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Ot=U.extend({options:{crs:vt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=_(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(le(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wi&&Nt.any3d&&!Nt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Yt(this._proxy,Ci,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,j){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(le(o),h,this.options.maxBounds),j=j||{},this._stop(),this._loaded&&!j.reset&&j!==!0){j.animate!==void 0&&(j.zoom=l({animate:j.animate},j.zoom),j.pan=l({animate:j.animate,duration:j.duration},j.pan));var T=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,j.zoom):this._tryAnimatedPan(o,j.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,j.pan&&j.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,j){var T=this.getZoomScale(h),O=this.getSize().divideBy(2),K=o instanceof W?o:this.latLngToContainerPoint(o),xe=K.subtract(O).multiplyBy(1-1/T),ze=this.containerPointToLatLng(O.add(xe));return this.setView(ze,h,{zoom:j})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():Y(o);var j=F(h.paddingTopLeft||h.padding||[0,0]),T=F(h.paddingBottomRight||h.padding||[0,0]),O=this.getBoundsZoom(o,!1,j.add(T));if(O=typeof h.maxZoom=="number"?Math.min(h.maxZoom,O):O,O===1/0)return{center:o.getCenter(),zoom:O};var K=T.subtract(j).divideBy(2),xe=this.project(o.getSouthWest(),O),ze=this.project(o.getNorthEast(),O),Fe=this.unproject(xe.add(ze).divideBy(2).add(K),O);return{center:Fe,zoom:O}},fitBounds:function(o,h){if(o=Y(o),!o.isValid())throw new Error("Bounds are not valid.");var j=this._getBoundsCenterZoom(o,h);return this.setView(j.center,j.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=F(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new dn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){cn(this._mapPane,"leaflet-pan-anim");var j=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,j,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,j){if(j=j||{},j.animate===!1||!Nt.any3d)return this.setView(o,h,j);this._stop();var T=this.project(this.getCenter()),O=this.project(o),K=this.getSize(),xe=this._zoom;o=le(o),h=h===void 0?xe:h;var ze=Math.max(K.x,K.y),Fe=ze*this.getZoomScale(xe,h),st=O.distanceTo(T)||1,Ct=1.42,Bt=Ct*Ct;function Wt(Tr){var Ca=Tr?-1:1,eo=Tr?Fe:ze,Co=Fe*Fe-ze*ze+Ca*Bt*Bt*st*st,to=2*eo*Bt*st,iu=Co/to,fd=Math.sqrt(iu*iu+1)-iu,au=fd<1e-9?-18:Math.log(fd);return au}function un(Tr){return(Math.exp(Tr)-Math.exp(-Tr))/2}function yr(Tr){return(Math.exp(Tr)+Math.exp(-Tr))/2}function Ir(Tr){return un(Tr)/yr(Tr)}var Es=Wt(0);function Ti(Tr){return ze*(yr(Es)/yr(Es+Ct*Tr))}function Am(Tr){return ze*(yr(Es)*Ir(Es+Ct*Tr)-un(Es))/Bt}function Rm(Tr){return 1-Math.pow(1-Tr,1.5)}var su=Date.now(),Ql=(Wt(1)-Es)/Ct,km=j.duration?1e3*j.duration:1e3*Ql*.8;function Jl(){var Tr=(Date.now()-su)/km,Ca=Rm(Tr)*Ql;Tr<=1?(this._flyToFrame=re(Jl,this),this._move(this.unproject(T.add(O.subtract(T).multiplyBy(Am(Ca)/st)),xe),this.getScaleZoom(ze/Ti(Ca),xe),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,j.noMoveStart),Jl.call(this),this},flyToBounds:function(o,h){var j=this._getBoundsCenterZoom(o,h);return this.flyTo(j.center,j.zoom,h)},setMaxBounds:function(o){return o=Y(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var j=this.getCenter(),T=this._limitCenter(j,this._zoom,Y(o));return j.equals(T)||this.panTo(T,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var j=F(h.paddingTopLeft||h.padding||[0,0]),T=F(h.paddingBottomRight||h.padding||[0,0]),O=this.project(this.getCenter()),K=this.project(o),xe=this.getPixelBounds(),ze=te([xe.min.add(j),xe.max.subtract(T)]),Fe=ze.getSize();if(!ze.contains(K)){this._enforcingBounds=!0;var st=K.subtract(ze.getCenter()),Ct=ze.extend(K).getSize().subtract(Fe);O.x+=st.x<0?-Ct.x:Ct.x,O.y+=st.y<0?-Ct.y:Ct.y,this.panTo(this.unproject(O),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=l({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var j=this.getSize(),T=h.divideBy(2).round(),O=j.divideBy(2).round(),K=T.subtract(O);return!K.x&&!K.y?this:(o.animate&&o.pan?this.panBy(K):(o.pan&&this._rawPanBy(K),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:j}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=l({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=d(this._handleGeolocationResponse,this),j=d(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,j,o):navigator.geolocation.getCurrentPosition(h,j,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,j=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+j+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,j=o.coords.longitude,T=new q(h,j),O=T.toBounds(o.coords.accuracy*2),K=this._locateOptions;if(K.setView){var xe=this.getBoundsZoom(O);this.setView(T,K.maxZoom?Math.min(xe,K.maxZoom):xe)}var ze={latlng:T,bounds:O,timestamp:o.timestamp};for(var Fe in o.coords)typeof o.coords[Fe]=="number"&&(ze[Fe]=o.coords[Fe]);this.fire("locationfound",ze)}},addHandler:function(o,h){if(!h)return this;var j=this[o]=new h(this);return this._handlers.push(j),this.options[o]&&j.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ar(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ce(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)ar(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var j="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),T=Rn("div",j,h||this._mapPane);return o&&(this._panes[o]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),j=this.unproject(o.getTopRight());return new R(h,j)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,j){o=Y(o),j=F(j||[0,0]);var T=this.getZoom()||0,O=this.getMinZoom(),K=this.getMaxZoom(),xe=o.getNorthWest(),ze=o.getSouthEast(),Fe=this.getSize().subtract(j),st=te(this.project(ze,T),this.project(xe,T)).getSize(),Ct=Nt.any3d?this.options.zoomSnap:1,Bt=Fe.x/st.x,Wt=Fe.y/st.y,un=h?Math.max(Bt,Wt):Math.min(Bt,Wt);return T=this.getScaleZoom(un,T),Ct&&(T=Math.round(T/(Ct/100))*(Ct/100),T=h?Math.ceil(T/Ct)*Ct:Math.floor(T/Ct)*Ct),Math.max(O,Math.min(K,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var j=this._getTopLeftPoint(o,h);return new fe(j,j.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var j=this.options.crs;return h=h===void 0?this._zoom:h,j.scale(o)/j.scale(h)},getScaleZoom:function(o,h){var j=this.options.crs;h=h===void 0?this._zoom:h;var T=j.zoom(o*j.scale(h));return isNaN(T)?1/0:T},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(le(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(F(o),h)},layerPointToLatLng:function(o){var h=F(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(le(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(le(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Y(o))},distance:function(o,h){return this.options.crs.distance(le(o),le(h))},containerPointToLayerPoint:function(o){return F(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return F(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(F(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(o)))},mouseEventToContainerPoint:function(o){return ue(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Wa(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Yt(h,"scroll",this._onScroll,this),this._containerId=f(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Nt.any3d,cn(o,"leaflet-container"+(Nt.touch?" leaflet-touch":"")+(Nt.retina?" leaflet-retina":"")+(Nt.ielt9?" leaflet-oldie":"")+(Nt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=oi(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),dr(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(cn(o.markerPane,"leaflet-zoom-hide"),cn(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,j){dr(this._mapPane,new W(0,0));var T=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var O=this._zoom!==h;this._moveStart(O,j)._move(o,h)._moveEnd(O),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,j,T){h===void 0&&(h=this._zoom);var O=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),T?j&&j.pinch&&this.fire("zoom",j):((O||j&&j.pinch)&&this.fire("zoom",j),this.fire("move",j)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ce(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){dr(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[f(this._container)]=this;var h=o?Mn:Yt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Nt.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ce(this._resizeRequest),this._resizeRequest=re(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var j=[],T,O=h==="mouseout"||h==="mouseover",K=o.target||o.srcElement,xe=!1;K;){if(T=this._targets[f(K)],T&&(h==="click"||h==="preclick")&&this._draggableMoved(T)){xe=!0;break}if(T&&T.listens(h,!0)&&(O&&!jt(K,o)||(j.push(T),O))||K===this._container)break;K=K.parentNode}return!j.length&&!xe&&!O&&this.listens(h,!0)&&(j=[this]),j},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var j=o.type;j==="mousedown"&&Vs(h),this._fireDOMEvent(o,j)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,j){if(o.type==="click"){var T=l({},o);T.type="preclick",this._fireDOMEvent(T,T.type,j)}var O=this._findEventTargets(o,h);if(j){for(var K=[],xe=0;xe<j.length;xe++)j[xe].listens(h,!0)&&K.push(j[xe]);O=K.concat(O)}if(O.length){h==="contextmenu"&&vr(o);var ze=O[0],Fe={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var st=ze.getLatLng&&(!ze._radius||ze._radius<=10);Fe.containerPoint=st?this.latLngToContainerPoint(ze.getLatLng()):this.mouseEventToContainerPoint(o),Fe.layerPoint=this.containerPointToLayerPoint(Fe.containerPoint),Fe.latlng=st?ze.getLatLng():this.layerPointToLatLng(Fe.layerPoint)}for(xe=0;xe<O.length;xe++)if(O[xe].fire(h,Fe,!0),Fe.originalEvent._stopped||O[xe].options.bubblingMouseEvents===!1&&N(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return Yi(this._mapPane)||new W(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var j=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return j.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var j=this.getSize()._divideBy(2);return this.project(o,h)._subtract(j)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,j){var T=this._getNewPixelOrigin(j,h);return this.project(o,h)._subtract(T)},_latLngBoundsToNewLayerBounds:function(o,h,j){var T=this._getNewPixelOrigin(j,h);return te([this.project(o.getSouthWest(),h)._subtract(T),this.project(o.getNorthWest(),h)._subtract(T),this.project(o.getSouthEast(),h)._subtract(T),this.project(o.getNorthEast(),h)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,j){if(!j)return o;var T=this.project(o,h),O=this.getSize().divideBy(2),K=new fe(T.subtract(O),T.add(O)),xe=this._getBoundsOffset(K,j,h);return Math.abs(xe.x)<=1&&Math.abs(xe.y)<=1?o:this.unproject(T.add(xe),h)},_limitOffset:function(o,h){if(!h)return o;var j=this.getPixelBounds(),T=new fe(j.min.add(o),j.max.add(o));return o.add(this._getBoundsOffset(T,h))},_getBoundsOffset:function(o,h,j){var T=te(this.project(h.getNorthEast(),j),this.project(h.getSouthWest(),j)),O=T.min.subtract(o.min),K=T.max.subtract(o.max),xe=this._rebound(O.x,-K.x),ze=this._rebound(O.y,-K.y);return new W(xe,ze)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),j=this.getMaxZoom(),T=Nt.any3d?this.options.zoomSnap:1;return T&&(o=Math.round(o/T)*T),Math.max(h,Math.min(j,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){or(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var j=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(j)?!1:(this.panBy(j,h),!0)},_createAnimProxy:function(){var o=this._proxy=Rn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var j=Ha,T=this._proxy.style[j];js(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),T===this._proxy.style[j]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ar(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();js(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,j){if(this._animatingZoom)return!0;if(j=j||{},!this._zoomAnimated||j.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(h),O=this._getCenterOffset(o)._divideBy(1-1/T);return j.animate!==!0&&!this.getSize().contains(O)?!1:(re(function(){this._moveStart(!0,j.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,j,T){this._mapPane&&(j&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&or(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jn(o,h){return new Ot(o,h)}var mn=je.extend({options:{position:"topright"},initialize:function(o){_(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),j=this.getPosition(),T=o._controlCorners[j];return cn(h,"leaflet-control"),j.indexOf("bottom")!==-1?T.insertBefore(h,T.firstChild):T.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ar(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),zr=function(o){return new mn(o)};Ot.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",j=this._controlContainer=Rn("div",h+"control-container",this._container);function T(O,K){var xe=h+O+" "+h+K;o[O+K]=Rn("div",xe,j)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)ar(this._controlCorners[o]);ar(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var is=mn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,j,T){return j<T?-1:T<j?1:0}},initialize:function(o,h,j){_(this,j),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in o)this._addLayer(o[T],T);for(T in h)this._addLayer(h[T],T,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return mn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(f(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):or(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return or(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=Rn("div",o),j=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Ga(h),Ki(h);var T=this._section=Rn("section",o+"-list");j&&(this._map.on("click",this.collapse,this),Yt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=Rn("a",o+"-toggle",h);O.href="#",O.title="Layers",O.setAttribute("role","button"),Yt(O,{keydown:function(K){K.keyCode===13&&this._expandSafely()},click:function(K){vr(K),this._expandSafely()}},this),j||this.expand(),this._baseLayersList=Rn("div",o+"-base",T),this._separator=Rn("div",o+"-separator",T),this._overlaysList=Rn("div",o+"-overlays",T),h.appendChild(T)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&f(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,j){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:j}),this.options.sortLayers&&this._layers.sort(d(function(T,O){return this.options.sortFunction(T.layer,O.layer,T.name,O.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Pr(this._baseLayersList),Pr(this._overlaysList),this._layerControlInputs=[];var o,h,j,T,O=0;for(j=0;j<this._layers.length;j++)T=this._layers[j],this._addItem(T),h=h||T.overlay,o=o||!T.overlay,O+=T.overlay?0:1;return this.options.hideSingleBase&&(o=o&&O>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(f(o.target)),j=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;j&&this._map.fire(j,h)},_createRadioElement:function(o,h){var j='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=j,T.firstChild},_addItem:function(o){var h=document.createElement("label"),j=this._map.hasLayer(o.layer),T;o.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=j):T=this._createRadioElement("leaflet-base-layers_"+f(this),j),this._layerControlInputs.push(T),T.layerId=f(o.layer),Yt(T,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+o.name;var K=document.createElement("span");h.appendChild(K),K.appendChild(T),K.appendChild(O);var xe=o.overlay?this._overlaysList:this._baseLayersList;return xe.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,j,T=[],O=[];this._handlingClick=!0;for(var K=o.length-1;K>=0;K--)h=o[K],j=this._getLayer(h.layerId).layer,h.checked?T.push(j):h.checked||O.push(j);for(K=0;K<O.length;K++)this._map.hasLayer(O[K])&&this._map.removeLayer(O[K]);for(K=0;K<T.length;K++)this._map.hasLayer(T[K])||this._map.addLayer(T[K]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,j,T=this._map.getZoom(),O=o.length-1;O>=0;O--)h=o[O],j=this._getLayer(h.layerId).layer,h.disabled=j.options.minZoom!==void 0&&T<j.options.minZoom||j.options.maxZoom!==void 0&&T>j.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Yt(o,"click",vr),this.expand();var h=this;setTimeout(function(){Mn(o,"click",vr),h._preventClick=!1})}}),Qi=function(o,h,j){return new is(o,h,j)},Ya=mn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",j=Rn("div",h+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,h+"-in",j,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,h+"-out",j,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),j},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,j,T,O){var K=Rn("a",j,T);return K.innerHTML=o,K.href="#",K.title=h,K.setAttribute("role","button"),K.setAttribute("aria-label",h),Ga(K),Yt(K,"click",ds),Yt(K,"click",O,this),Yt(K,"click",this._refocusOnMap,this),K},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";or(this._zoomInButton,h),or(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(cn(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(cn(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ot.mergeOptions({zoomControl:!0}),Ot.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ya,this.addControl(this.zoomControl))});var Za=function(o){return new Ya(o)},il=mn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",j=Rn("div",h),T=this.options;return this._addScales(T,h+"-line",j),o.on(T.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),j},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,j){o.metric&&(this._mScale=Rn("div",h,j)),o.imperial&&(this._iScale=Rn("div",h,j))},_update:function(){var o=this._map,h=o.getSize().y/2,j=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(j)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),j=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,j,h/o)},_updateImperial:function(o){var h=o*3.2808399,j,T,O;h>5280?(j=h/5280,T=this._getRoundNum(j),this._updateScale(this._iScale,T+" mi",T/j)):(O=this._getRoundNum(h),this._updateScale(this._iScale,O+" ft",O/h))},_updateScale:function(o,h,j){o.style.width=Math.round(this.options.maxWidth*j)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),j=o/h;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:1,h*j}}),Vh=function(o){return new il(o)},Uh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hc=mn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Nt.inlineSvg?Uh+" ":"")+"Leaflet</a>"},initialize:function(o){_(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Rn("div","leaflet-control-attribution"),Ga(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var j=[];this.options.prefix&&j.push(this.options.prefix),o.length&&j.push(o.join(", ")),this._container.innerHTML=j.join(' <span aria-hidden="true">|</span> ')}}});Ot.mergeOptions({attributionControl:!0}),Ot.addInitHook(function(){this.options.attributionControl&&new Hc().addTo(this)});var Hh=function(o){return new Hc(o)};mn.Layers=is,mn.Zoom=Ya,mn.Scale=il,mn.Attribution=Hc,zr.layers=Qi,zr.zoom=Za,zr.scale=Vh,zr.attribution=Hh;var ui=je.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ui.addTo=function(o,h){return o.addHandler(h,this),this};var Wh={Events:G},ed=Nt.touch?"touchstart mousedown":"mousedown",ja=U.extend({options:{clickTolerance:3},initialize:function(o,h,j,T){_(this,T),this._element=o,this._dragStartTarget=h||o,this._preventOutline=j},enable:function(){this._enabled||(Yt(this._dragStartTarget,ed,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ja._dragging===this&&this.finishDrag(!0),Mn(this._dragStartTarget,ed,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Wi(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ja._dragging===this&&this.finishDrag();return}if(!(ja._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ja._dragging=this,this._preventOutline&&Vs(this._element),bs(),ks(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,j=Ss(this._element);this._startPoint=new W(h.clientX,h.clientY),this._startPos=Yi(this._element),this._parentScale=Us(j);var T=o.type==="mousedown";Yt(document,T?"mousemove":"touchmove",this._onMove,this),Yt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,j=new W(h.clientX,h.clientY)._subtract(this._startPoint);!j.x&&!j.y||Math.abs(j.x)+Math.abs(j.y)<this.options.clickTolerance||(j.x/=this._parentScale.x,j.y/=this._parentScale.y,vr(o),this._moved||(this.fire("dragstart"),this._moved=!0,cn(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(j),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),dr(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){or(document.body,"leaflet-dragging"),this._lastTarget&&(or(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Mn(document,"mousemove touchmove",this._onMove,this),Mn(document,"mouseup touchend touchcancel",this._onUp,this),xo(),qa();var h=this._moved&&this._moving;this._moving=!1,ja._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function td(o,h,j){var T,O=[1,4,2,8],K,xe,ze,Fe,st,Ct,Bt,Wt;for(K=0,Ct=o.length;K<Ct;K++)o[K]._code=Xa(o[K],h);for(ze=0;ze<4;ze++){for(Bt=O[ze],T=[],K=0,Ct=o.length,xe=Ct-1;K<Ct;xe=K++)Fe=o[K],st=o[xe],Fe._code&Bt?st._code&Bt||(Wt=Ul(st,Fe,Bt,h,j),Wt._code=Xa(Wt,h),T.push(Wt)):(st._code&Bt&&(Wt=Ul(st,Fe,Bt,h,j),Wt._code=Xa(Wt,h),T.push(Wt)),T.push(Fe));o=T}return o}function Ds(o,h){var j,T,O,K,xe,ze,Fe,st,Ct;if(!o||o.length===0)throw new Error("latlngs not passed");as(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Bt=le([0,0]),Wt=Y(o),un=Wt.getNorthWest().distanceTo(Wt.getSouthWest())*Wt.getNorthEast().distanceTo(Wt.getNorthWest());un<1700&&(Bt=Wc(o));var yr=o.length,Ir=[];for(j=0;j<yr;j++){var Es=le(o[j]);Ir.push(h.project(le([Es.lat-Bt.lat,Es.lng-Bt.lng])))}for(ze=Fe=st=0,j=0,T=yr-1;j<yr;T=j++)O=Ir[j],K=Ir[T],xe=O.y*K.x-K.y*O.x,Fe+=(O.x+K.x)*xe,st+=(O.y+K.y)*xe,ze+=xe*3;ze===0?Ct=Ir[0]:Ct=[Fe/ze,st/ze];var Ti=h.unproject(F(Ct));return le([Ti.lat+Bt.lat,Ti.lng+Bt.lng])}function Wc(o){for(var h=0,j=0,T=0,O=0;O<o.length;O++){var K=le(o[O]);h+=K.lat,j+=K.lng,T++}return le([h/T,j/T])}var qh={__proto__:null,clipPolygon:td,polygonCenter:Ds,centroid:Wc};function qc(o,h){if(!h||!o.length)return o.slice();var j=h*h;return o=yo(o,j),o=nd(o,j),o}function Vl(o,h,j){return Math.sqrt(Ka(o,h,j,!0))}function Gh(o,h,j){return Ka(o,h,j)}function nd(o,h){var j=o.length,T=typeof Uint8Array<"u"?Uint8Array:Array,O=new T(j);O[0]=O[j-1]=1,Gc(o,O,h,0,j-1);var K,xe=[];for(K=0;K<j;K++)O[K]&&xe.push(o[K]);return xe}function Gc(o,h,j,T,O){var K=0,xe,ze,Fe;for(ze=T+1;ze<=O-1;ze++)Fe=Ka(o[ze],o[T],o[O],!0),Fe>K&&(xe=ze,K=Fe);K>j&&(h[xe]=1,Gc(o,h,j,T,xe),Gc(o,h,j,xe,O))}function yo(o,h){for(var j=[o[0]],T=1,O=0,K=o.length;T<K;T++)Yc(o[T],o[O])>h&&(j.push(o[T]),O=T);return O<K-1&&j.push(o[K-1]),j}var rd;function sd(o,h,j,T,O){var K=T?rd:Xa(o,j),xe=Xa(h,j),ze,Fe,st;for(rd=xe;;){if(!(K|xe))return[o,h];if(K&xe)return!1;ze=K||xe,Fe=Ul(o,h,ze,j,O),st=Xa(Fe,j),ze===K?(o=Fe,K=st):(h=Fe,xe=st)}}function Ul(o,h,j,T,O){var K=h.x-o.x,xe=h.y-o.y,ze=T.min,Fe=T.max,st,Ct;return j&8?(st=o.x+K*(Fe.y-o.y)/xe,Ct=Fe.y):j&4?(st=o.x+K*(ze.y-o.y)/xe,Ct=ze.y):j&2?(st=Fe.x,Ct=o.y+xe*(Fe.x-o.x)/K):j&1&&(st=ze.x,Ct=o.y+xe*(ze.x-o.x)/K),new W(st,Ct,O)}function Xa(o,h){var j=0;return o.x<h.min.x?j|=1:o.x>h.max.x&&(j|=2),o.y<h.min.y?j|=4:o.y>h.max.y&&(j|=8),j}function Yc(o,h){var j=h.x-o.x,T=h.y-o.y;return j*j+T*T}function Ka(o,h,j,T){var O=h.x,K=h.y,xe=j.x-O,ze=j.y-K,Fe=xe*xe+ze*ze,st;return Fe>0&&(st=((o.x-O)*xe+(o.y-K)*ze)/Fe,st>1?(O=j.x,K=j.y):st>0&&(O+=xe*st,K+=ze*st)),xe=o.x-O,ze=o.y-K,T?xe*xe+ze*ze:new W(O,K)}function as(o){return!M(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function B(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),as(o)}function ie(o,h){var j,T,O,K,xe,ze,Fe,st;if(!o||o.length===0)throw new Error("latlngs not passed");as(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ct=le([0,0]),Bt=Y(o),Wt=Bt.getNorthWest().distanceTo(Bt.getSouthWest())*Bt.getNorthEast().distanceTo(Bt.getNorthWest());Wt<1700&&(Ct=Wc(o));var un=o.length,yr=[];for(j=0;j<un;j++){var Ir=le(o[j]);yr.push(h.project(le([Ir.lat-Ct.lat,Ir.lng-Ct.lng])))}for(j=0,T=0;j<un-1;j++)T+=yr[j].distanceTo(yr[j+1])/2;if(T===0)st=yr[0];else for(j=0,K=0;j<un-1;j++)if(xe=yr[j],ze=yr[j+1],O=xe.distanceTo(ze),K+=O,K>T){Fe=(K-T)/O,st=[ze.x-Fe*(ze.x-xe.x),ze.y-Fe*(ze.y-xe.y)];break}var Es=h.unproject(F(st));return le([Es.lat+Ct.lat,Es.lng+Ct.lng])}var it={__proto__:null,simplify:qc,pointToSegmentDistance:Vl,closestPointOnSegment:Gh,clipSegment:sd,_getEdgeIntersection:Ul,_getBitCode:Xa,_sqClosestPointOnSegment:Ka,isFlat:as,_flat:B,polylineCenter:ie},Lt={project:function(o){return new W(o.lng,o.lat)},unproject:function(o){return new q(o.y,o.x)},bounds:new fe([-180,-90],[180,90])},Sn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,j=this.R,T=o.lat*h,O=this.R_MINOR/j,K=Math.sqrt(1-O*O),xe=K*Math.sin(T),ze=Math.tan(Math.PI/4-T/2)/Math.pow((1-xe)/(1+xe),K/2);return T=-j*Math.log(Math.max(ze,1e-10)),new W(o.lng*h*j,T)},unproject:function(o){for(var h=180/Math.PI,j=this.R,T=this.R_MINOR/j,O=Math.sqrt(1-T*T),K=Math.exp(-o.y/j),xe=Math.PI/2-2*Math.atan(K),ze=0,Fe=.1,st;ze<15&&Math.abs(Fe)>1e-7;ze++)st=O*Math.sin(xe),st=Math.pow((1-st)/(1+st),O/2),Fe=Math.PI/2-2*Math.atan(K*st)-xe,xe+=Fe;return new q(xe*h,o.x*h/j)}},en={__proto__:null,LonLat:Lt,Mercator:Sn,SphericalMercator:Ze},Xn=l({},pe,{code:"EPSG:3395",projection:Sn,transformation:(function(){var o=.5/(Math.PI*Sn.R);return rt(o,.5,-o,.5)})()}),_i=l({},pe,{code:"EPSG:4326",projection:Lt,transformation:rt(1/180,1,-1/180,.5)}),Cs=l({},We,{projection:Lt,transformation:rt(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var j=h.lng-o.lng,T=h.lat-o.lat;return Math.sqrt(j*j+T*T)},infinite:!0});We.Earth=pe,We.EPSG3395=Xn,We.EPSG3857=vt,We.EPSG900913=Ue,We.EPSG4326=_i,We.Simple=Cs;var $r=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[f(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[f(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var j=this.getEvents();h.on(j,this),this.once("remove",function(){h.off(j,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Ot.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=f(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=f(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return f(o)in this._layers},eachLayer:function(o,h){for(var j in this._layers)o.call(h,this._layers[j]);return this},_addLayers:function(o){o=o?M(o)?o:[o]:[];for(var h=0,j=o.length;h<j;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[f(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=f(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,j=this._getZoomSpan();for(var T in this._zoomBoundLayers){var O=this._zoomBoundLayers[T].options;o=O.minZoom===void 0?o:Math.min(o,O.minZoom),h=O.maxZoom===void 0?h:Math.max(h,O.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,j!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $n=$r.extend({initialize:function(o,h){_(this,h),this._layers={};var j,T;if(o)for(j=0,T=o.length;j<T;j++)this.addLayer(o[j])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),j,T;for(j in this._layers)T=this._layers[j],T[o]&&T[o].apply(T,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var j in this._layers)o.call(h,this._layers[j]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return f(o)}}),Fr=function(o,h){return new $n(o,h)},hs=$n.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),$n.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),$n.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new R;for(var h in this._layers){var j=this._layers[h];o.extend(j.getBounds?j.getBounds():j.getLatLng())}return o}}),ba=function(o,h){return new hs(o,h)},jo=je.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){_(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var j=this._getIconUrl(o);if(!j){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(j,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(T,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(o,h){var j=this.options,T=j[h+"Size"];typeof T=="number"&&(T=[T,T]);var O=F(T),K=F(h==="shadow"&&j.shadowAnchor||j.iconAnchor||O&&O.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(j.className||""),K&&(o.style.marginLeft=-K.x+"px",o.style.marginTop=-K.y+"px"),O&&(o.style.width=O.x+"px",o.style.height=O.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Nt.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function id(o){return new jo(o)}var Hl=jo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Hl.imagePath!="string"&&(Hl.imagePath=this._detectIconPath()),(this.options.imagePath||Hl.imagePath)+jo.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(j,T,O){var K=T.exec(j);return K&&K[O]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Rn("div","leaflet-default-icon-path",document.body),h=oi(o,"background-image")||oi(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var j=document.querySelector('link[href$="leaflet.css"]');return j?j.href.substring(0,j.href.length-11-1):""}}),Yh=ui.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ja(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),cn(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&or(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,j=h._map,T=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,K=Yi(h._icon),xe=j.getPixelBounds(),ze=j.getPixelOrigin(),Fe=te(xe.min._subtract(ze).add(O),xe.max._subtract(ze).subtract(O));if(!Fe.contains(K)){var st=F((Math.max(Fe.max.x,K.x)-Fe.max.x)/(xe.max.x-Fe.max.x)-(Math.min(Fe.min.x,K.x)-Fe.min.x)/(xe.min.x-Fe.min.x),(Math.max(Fe.max.y,K.y)-Fe.max.y)/(xe.max.y-Fe.max.y)-(Math.min(Fe.min.y,K.y)-Fe.min.y)/(xe.min.y-Fe.min.y)).multiplyBy(T);j.panBy(st,{animate:!1}),this._draggable._newPos._add(st),this._draggable._startPos._add(st),dr(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=re(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(ce(this._panRequest),this._panRequest=re(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,j=h._shadow,T=Yi(h._icon),O=h._map.layerPointToLatLng(T);j&&dr(j,T),h._latlng=O,o.latlng=O,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){ce(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Wl=$r.extend({options:{icon:new Hl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){_(this,h),this._latlng=le(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=le(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),j=o.icon.createIcon(this._icon),T=!1;j!==this._icon&&(this._icon&&this._removeIcon(),T=!0,o.title&&(j.title=o.title),j.tagName==="IMG"&&(j.alt=o.alt||"")),cn(j,h),o.keyboard&&(j.tabIndex="0",j.setAttribute("role","button")),this._icon=j,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yt(j,"focus",this._panOnFocus,this);var O=o.icon.createShadow(this._shadow),K=!1;O!==this._shadow&&(this._removeShadow(),K=!0),O&&(cn(O,h),O.alt=""),this._shadow=O,o.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&K&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mn(this._icon,"focus",this._panOnFocus,this),ar(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ar(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&dr(this._icon,o),this._shadow&&dr(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yh)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yh(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&ss(this._icon,o),this._shadow&&ss(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,j=h.iconSize?F(h.iconSize):F(0,0),T=h.iconAnchor?F(h.iconAnchor):F(0,0);o.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:j.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Zh(o,h){return new Wl(o,h)}var Qa=$r.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return _(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zc=Qa.extend({options:{fill:!0,radius:10},initialize:function(o,h){_(this,h),this._latlng=le(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=le(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return Qa.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,j=this._clickTolerance(),T=[o+j,h+j];this._pxBounds=new fe(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sm(o,h){return new Zc(o,h)}var Xh=Zc.extend({initialize:function(o,h,j){if(typeof h=="number"&&(h=l({},j,{radius:h})),_(this,h),this._latlng=le(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Qa.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,j=this._map,T=j.options.crs;if(T.distance===pe.distance){var O=Math.PI/180,K=this._mRadius/pe.R/O,xe=j.project([h+K,o]),ze=j.project([h-K,o]),Fe=xe.add(ze).divideBy(2),st=j.unproject(Fe).lat,Ct=Math.acos((Math.cos(K*O)-Math.sin(h*O)*Math.sin(st*O))/(Math.cos(h*O)*Math.cos(st*O)))/O;(isNaN(Ct)||Ct===0)&&(Ct=K/Math.cos(Math.PI/180*h)),this._point=Fe.subtract(j.getPixelOrigin()),this._radius=isNaN(Ct)?0:Fe.x-j.project([st,o-Ct]).x,this._radiusY=Fe.y-xe.y}else{var Bt=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=j.latLngToLayerPoint(this._latlng),this._radius=this._point.x-j.latLngToLayerPoint(Bt).x}this._updateBounds()}});function Lv(o,h,j){return new Xh(o,h,j)}var Ja=Qa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){_(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,j=null,T=Ka,O,K,xe=0,ze=this._parts.length;xe<ze;xe++)for(var Fe=this._parts[xe],st=1,Ct=Fe.length;st<Ct;st++){O=Fe[st-1],K=Fe[st];var Bt=T(o,O,K,!0);Bt<h&&(h=Bt,j=T(o,O,K))}return j&&(j.distance=Math.sqrt(h)),j},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ie(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=le(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new R,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return as(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],j=as(o),T=0,O=o.length;T<O;T++)j?(h[T]=le(o[T]),this._bounds.extend(h[T])):h[T]=this._convertLatLngs(o[T]);return h},_project:function(){var o=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new W(o,o);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,j){var T=o[0]instanceof q,O=o.length,K,xe;if(T){for(xe=[],K=0;K<O;K++)xe[K]=this._map.latLngToLayerPoint(o[K]),j.extend(xe[K]);h.push(xe)}else for(K=0;K<O;K++)this._projectLatlngs(o[K],h,j)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,j,T,O,K,xe,ze,Fe;for(j=0,O=0,K=this._rings.length;j<K;j++)for(Fe=this._rings[j],T=0,xe=Fe.length;T<xe-1;T++)ze=sd(Fe[T],Fe[T+1],o,T,!0),ze&&(h[O]=h[O]||[],h[O].push(ze[0]),(ze[1]!==Fe[T+1]||T===xe-2)&&(h[O].push(ze[1]),O++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,j=0,T=o.length;j<T;j++)o[j]=qc(o[j],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var j,T,O,K,xe,ze,Fe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(j=0,K=this._parts.length;j<K;j++)for(ze=this._parts[j],T=0,xe=ze.length,O=xe-1;T<xe;O=T++)if(!(!h&&T===0)&&Vl(o,ze[O],ze[T])<=Fe)return!0;return!1}});function Ov(o,h){return new Ja(o,h)}Ja._flat=B;var ql=Ja.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ds(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=Ja.prototype._convertLatLngs.call(this,o),j=h.length;return j>=2&&h[0]instanceof q&&h[0].equals(h[j-1])&&h.pop(),h},_setLatLngs:function(o){Ja.prototype._setLatLngs.call(this,o),as(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return as(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,j=new W(h,h);if(o=new fe(o.min.subtract(j),o.max.add(j)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,O=this._rings.length,K;T<O;T++)K=td(this._rings[T],o,!0),K.length&&this._parts.push(K)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,j,T,O,K,xe,ze,Fe,st;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(K=0,Fe=this._parts.length;K<Fe;K++)for(j=this._parts[K],xe=0,st=j.length,ze=st-1;xe<st;ze=xe++)T=j[xe],O=j[ze],T.y>o.y!=O.y>o.y&&o.x<(O.x-T.x)*(o.y-T.y)/(O.y-T.y)+T.x&&(h=!h);return h||Ja.prototype._containsPoint.call(this,o,!0)}});function di(o,h){return new ql(o,h)}var hi=hs.extend({initialize:function(o,h){_(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=M(o)?o:o.features,j,T,O;if(h){for(j=0,T=h.length;j<T;j++)O=h[j],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var K=this.options;if(K.filter&&!K.filter(o))return this;var xe=Xc(o,K);return xe?(xe.feature=Gl(o),xe.defaultOptions=xe.options,this.resetStyle(xe),K.onEachFeature&&K.onEachFeature(o,xe),this.addLayer(xe)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=l({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function Xc(o,h){var j=o.type==="Feature"?o.geometry:o,T=j?j.coordinates:null,O=[],K=h&&h.pointToLayer,xe=h&&h.coordsToLatLng||ad,ze,Fe,st,Ct;if(!T&&!j)return null;switch(j.type){case"Point":return ze=xe(T),Kh(K,o,ze,h);case"MultiPoint":for(st=0,Ct=T.length;st<Ct;st++)ze=xe(T[st]),O.push(Kh(K,o,ze,h));return new hs(O);case"LineString":case"MultiLineString":return Fe=Kc(T,j.type==="LineString"?0:1,xe),new Ja(Fe,h);case"Polygon":case"MultiPolygon":return Fe=Kc(T,j.type==="Polygon"?1:2,xe),new ql(Fe,h);case"GeometryCollection":for(st=0,Ct=j.geometries.length;st<Ct;st++){var Bt=Xc({geometry:j.geometries[st],type:"Feature",properties:o.properties},h);Bt&&O.push(Bt)}return new hs(O);case"FeatureCollection":for(st=0,Ct=j.features.length;st<Ct;st++){var Wt=Xc(j.features[st],h);Wt&&O.push(Wt)}return new hs(O);default:throw new Error("Invalid GeoJSON object.")}}function Kh(o,h,j,T){return o?o(h,j):new Wl(j,T&&T.markersInheritOptions&&T)}function ad(o){return new q(o[1],o[0],o[2])}function Kc(o,h,j){for(var T=[],O=0,K=o.length,xe;O<K;O++)xe=h?Kc(o[O],h-1,j):(j||ad)(o[O]),T.push(xe);return T}function Qc(o,h){return o=le(o),o.alt!==void 0?[b(o.lng,h),b(o.lat,h),b(o.alt,h)]:[b(o.lng,h),b(o.lat,h)]}function od(o,h,j,T){for(var O=[],K=0,xe=o.length;K<xe;K++)O.push(h?od(o[K],as(o[K])?0:h-1,j,T):Qc(o[K],T));return!h&&j&&O.length>0&&O.push(O[0].slice()),O}function Ji(o,h){return o.feature?l({},o.feature,{geometry:h}):Gl(h)}function Gl(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var al={toGeoJSON:function(o){return Ji(this,{type:"Point",coordinates:Qc(this.getLatLng(),o)})}};Wl.include(al),Xh.include(al),Zc.include(al),Ja.include({toGeoJSON:function(o){var h=!as(this._latlngs),j=od(this._latlngs,h?1:0,!1,o);return Ji(this,{type:(h?"Multi":"")+"LineString",coordinates:j})}}),ql.include({toGeoJSON:function(o){var h=!as(this._latlngs),j=h&&!as(this._latlngs[0]),T=od(this._latlngs,j?2:h?1:0,!0,o);return h||(T=[T]),Ji(this,{type:(j?"Multi":"")+"Polygon",coordinates:T})}}),$n.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(j){h.push(j.toGeoJSON(o).geometry.coordinates)}),Ji(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var j=h==="GeometryCollection",T=[];return this.eachLayer(function(O){if(O.toGeoJSON){var K=O.toGeoJSON(o);if(j)T.push(K.geometry);else{var xe=Gl(K);xe.type==="FeatureCollection"?T.push.apply(T,xe.features):T.push(xe)}}}),j?Ji(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function ld(o,h){return new hi(o,h)}var wm=ld,Sa=$r.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,j){this._url=o,this._bounds=Y(h),_(this,j)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ar(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Hi(this._image),this},bringToBack:function(){return this._map&&Ei(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Y(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:Rn("img");if(cn(h,"leaflet-image-layer"),this._zoomAnimated&&cn(h,"leaflet-zoom-animated"),this.options.className&&cn(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onload=d(this.fire,this,"load"),h.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),j=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;js(this._image,j,h)},_reset:function(){var o=this._image,h=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),j=h.getSize();dr(o,h.min),o.style.width=j.x+"px",o.style.height=j.y+"px"},_updateOpacity:function(){ss(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Yl=function(o,h,j){return new Sa(o,h,j)},cd=Sa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:Rn("video");if(cn(h,"leaflet-image-layer"),this._zoomAnimated&&cn(h,"leaflet-zoom-animated"),this.options.className&&cn(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onloadeddata=d(this.fire,this,"load"),o){for(var j=h.getElementsByTagName("source"),T=[],O=0;O<j.length;O++)T.push(j[O].src);this._url=j.length>0?T:[h.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var K=0;K<this._url.length;K++){var xe=Rn("source");xe.src=this._url[K],h.appendChild(xe)}}});function Cm(o,h,j){return new cd(o,h,j)}var bo=Sa.extend({_initImage:function(){var o=this._image=this._url;cn(o,"leaflet-image-layer"),this._zoomAnimated&&cn(o,"leaflet-zoom-animated"),this.options.className&&cn(o,this.options.className),o.onselectstart=y,o.onmousemove=y}});function Em(o,h,j){return new bo(o,h,j)}var ea=$r.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof q||M(o))?(this._latlng=le(o),_(this,h)):(_(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&ss(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&ss(this._container,1),this.bringToFront(),this.options.interactive&&(cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(ss(this._container,0),this._removeTimeout=setTimeout(d(ar,void 0,this._container),200)):ar(this._container),this.options.interactive&&(or(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=le(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Hi(this._container),this},bringToBack:function(){return this._map&&Ei(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof hs){h=null;var j=this._source._layers;for(var T in j)if(j[T]._map){h=j[T];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=F(this.options.offset),j=this._getAnchor();this._zoomAnimated?dr(this._container,o.add(j)):h=h.add(o).add(j);var T=this._containerBottom=-h.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=T+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});Ot.include({_initOverlay:function(o,h,j,T){var O=h;return O instanceof o||(O=new o(T).setContent(h)),j&&O.setLatLng(j),O}}),$r.include({_initOverlay:function(o,h,j,T){var O=j;return O instanceof o?(_(O,T),O._source=this):(O=h&&!T?h:new o(T,this),O.setContent(j)),O}});var Jc=ea.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,ea.prototype.openOn.call(this,o)},onAdd:function(o){ea.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qa||this._source.on("preclick",ci))},onRemove:function(o){ea.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qa||this._source.off("preclick",ci))},getEvents:function(){var o=ea.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=Rn("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),j=this._wrapper=Rn("div",o+"-content-wrapper",h);if(this._contentNode=Rn("div",o+"-content",j),Ga(h),Ki(this._contentNode),Yt(h,"contextmenu",ci),this._tipContainer=Rn("div",o+"-tip-container",h),this._tip=Rn("div",o+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=Rn("a",o+"-close-button",h);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Yt(T,"click",function(O){vr(O),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var j=o.offsetWidth;j=Math.min(j,this.options.maxWidth),j=Math.max(j,this.options.minWidth),h.width=j+1+"px",h.whiteSpace="",h.height="";var T=o.offsetHeight,O=this.options.maxHeight,K="leaflet-popup-scrolled";O&&T>O?(h.height=O+"px",cn(o,K)):or(o,K),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),j=this._getAnchor();dr(this._container,h.add(j))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(oi(this._container,"marginBottom"),10)||0,j=this._container.offsetHeight+h,T=this._containerWidth,O=new W(this._containerLeft,-j-this._containerBottom);O._add(Yi(this._container));var K=o.layerPointToContainerPoint(O),xe=F(this.options.autoPanPadding),ze=F(this.options.autoPanPaddingTopLeft||xe),Fe=F(this.options.autoPanPaddingBottomRight||xe),st=o.getSize(),Ct=0,Bt=0;K.x+T+Fe.x>st.x&&(Ct=K.x+T-st.x+Fe.x),K.x-Ct-ze.x<0&&(Ct=K.x-ze.x),K.y+j+Fe.y>st.y&&(Bt=K.y+j-st.y+Fe.y),K.y-Bt-ze.y<0&&(Bt=K.y-ze.y),(Ct||Bt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ct,Bt]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bv=function(o,h){return new Jc(o,h)};Ot.mergeOptions({closePopupOnClick:!0}),Ot.include({openPopup:function(o,h,j){return this._initOverlay(Jc,o,h,j).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),$r.include({bindPopup:function(o,h){return this._popup=this._initOverlay(Jc,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof hs||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){ds(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof Qa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var ud=ea.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){ea.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){ea.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=ea.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rn("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,j,T=this._map,O=this._container,K=T.latLngToContainerPoint(T.getCenter()),xe=T.layerPointToContainerPoint(o),ze=this.options.direction,Fe=O.offsetWidth,st=O.offsetHeight,Ct=F(this.options.offset),Bt=this._getAnchor();ze==="top"?(h=Fe/2,j=st):ze==="bottom"?(h=Fe/2,j=0):ze==="center"?(h=Fe/2,j=st/2):ze==="right"?(h=0,j=st/2):ze==="left"?(h=Fe,j=st/2):xe.x<K.x?(ze="right",h=0,j=st/2):(ze="left",h=Fe+(Ct.x+Bt.x)*2,j=st/2),o=o.subtract(F(h,j,!0)).add(Ct).add(Bt),or(O,"leaflet-tooltip-right"),or(O,"leaflet-tooltip-left"),or(O,"leaflet-tooltip-top"),or(O,"leaflet-tooltip-bottom"),cn(O,"leaflet-tooltip-"+ze),dr(O,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&ss(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),$v=function(o,h){return new ud(o,h)};Ot.include({openTooltip:function(o,h,j){return this._initOverlay(ud,o,h,j).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),$r.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ud,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",j={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?j.add=this._openTooltip:(j.mouseover=this._openTooltip,j.mouseout=this.closeTooltip,j.click=this._openTooltip,this._map?this._addFocusListeners():j.add=this._addFocusListeners),this._tooltip.options.sticky&&(j.mousemove=this._moveTooltip),this[h](j),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof hs||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(Yt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Yt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,j,T;this._tooltip.options.sticky&&o.originalEvent&&(j=this._map.mouseEventToContainerPoint(o.originalEvent),T=this._map.containerPointToLayerPoint(j),h=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(h)}});var Qh=jo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),j=this.options;if(j.html instanceof Element?(Pr(h),h.appendChild(j.html)):h.innerHTML=j.html!==!1?j.html:"",j.bgPos){var T=F(j.bgPos);h.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function _m(o){return new Qh(o)}jo.Default=Hl;var ol=$r.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Nt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){_(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),ar(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Hi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ei(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof W?o:new W(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,j=-o(-1/0,1/0),T=0,O=h.length,K;T<O;T++)K=h[T].style.zIndex,h[T]!==this._container&&K&&(j=o(j,+K));isFinite(j)&&(this.options.zIndex=j+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Nt.ielt9){ss(this._container,this.options.opacity);var o=+new Date,h=!1,j=!1;for(var T in this._tiles){var O=this._tiles[T];if(!(!O.current||!O.loaded)){var K=Math.min(1,(o-O.loaded)/200);ss(O.el,K),K<1?h=!0:(O.active?j=!0:this._onOpaqueTile(O),O.active=!0)}}j&&!this._noPrune&&this._pruneTiles(),h&&(ce(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Rn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var j in this._levels)j=Number(j),this._levels[j].el.children.length||j===o?(this._levels[j].el.style.zIndex=h-Math.abs(o-j),this._onUpdateLevel(j)):(ar(this._levels[j].el),this._removeTilesAtZoom(j),this._onRemoveLevel(j),delete this._levels[j]);var T=this._levels[o],O=this._map;return T||(T=this._levels[o]={},T.el=Rn("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=h,T.origin=O.project(O.unproject(O.getPixelOrigin()),o).round(),T.zoom=o,this._setZoomTransform(T,O.getCenter(),O.getZoom()),y(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var o,h,j=this._map.getZoom();if(j>this.options.maxZoom||j<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var T=h.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)ar(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,j,T){var O=Math.floor(o/2),K=Math.floor(h/2),xe=j-1,ze=new W(+O,+K);ze.z=+xe;var Fe=this._tileCoordsToKey(ze),st=this._tiles[Fe];return st&&st.active?(st.retain=!0,!0):(st&&st.loaded&&(st.retain=!0),xe>T?this._retainParent(O,K,xe,T):!1)},_retainChildren:function(o,h,j,T){for(var O=2*o;O<2*o+2;O++)for(var K=2*h;K<2*h+2;K++){var xe=new W(O,K);xe.z=j+1;var ze=this._tileCoordsToKey(xe),Fe=this._tiles[ze];if(Fe&&Fe.active){Fe.retain=!0;continue}else Fe&&Fe.loaded&&(Fe.retain=!0);j+1<T&&this._retainChildren(O,K,j+1,T)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,j,T){var O=Math.round(h);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var K=this.options.updateWhenZooming&&O!==this._tileZoom;(!T||K)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(o),j||this._pruneTiles(),this._noPrune=!!j),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var j in this._levels)this._setZoomTransform(this._levels[j],o,h)},_setZoomTransform:function(o,h,j){var T=this._map.getZoomScale(j,o.zoom),O=o.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(h,j)).round();Nt.any3d?js(o.el,O,T):dr(o.el,O)},_resetGrid:function(){var o=this._map,h=o.options.crs,j=this._tileSize=this.getTileSize(),T=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],T).x/j.x),Math.ceil(o.project([0,h.wrapLng[1]],T).x/j.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],T).y/j.x),Math.ceil(o.project([h.wrapLat[1],0],T).y/j.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,j=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),T=h.getZoomScale(j,this._tileZoom),O=h.project(o,this._tileZoom).floor(),K=h.getSize().divideBy(T*2);return new fe(O.subtract(K),O.add(K))},_update:function(o){var h=this._map;if(h){var j=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(o),O=this._pxBoundsToTileRange(T),K=O.getCenter(),xe=[],ze=this.options.keepBuffer,Fe=new fe(O.getBottomLeft().subtract([ze,-ze]),O.getTopRight().add([ze,-ze]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var st in this._tiles){var Ct=this._tiles[st].coords;(Ct.z!==this._tileZoom||!Fe.contains(new W(Ct.x,Ct.y)))&&(this._tiles[st].current=!1)}if(Math.abs(j-this._tileZoom)>1){this._setView(o,j);return}for(var Bt=O.min.y;Bt<=O.max.y;Bt++)for(var Wt=O.min.x;Wt<=O.max.x;Wt++){var un=new W(Wt,Bt);if(un.z=this._tileZoom,!!this._isValidTile(un)){var yr=this._tiles[this._tileCoordsToKey(un)];yr?yr.current=!0:xe.push(un)}}if(xe.sort(function(Es,Ti){return Es.distanceTo(K)-Ti.distanceTo(K)}),xe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ir=document.createDocumentFragment();for(Wt=0;Wt<xe.length;Wt++)this._addTile(xe[Wt],Ir);this._level.el.appendChild(Ir)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var j=this._globalTileRange;if(!h.wrapLng&&(o.x<j.min.x||o.x>j.max.x)||!h.wrapLat&&(o.y<j.min.y||o.y>j.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(o);return Y(this.options.bounds).overlaps(T)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,j=this.getTileSize(),T=o.scaleBy(j),O=T.add(j),K=h.unproject(T,o.z),xe=h.unproject(O,o.z);return[K,xe]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),j=new R(h[0],h[1]);return this.options.noWrap||(j=this._map.wrapLatLngBounds(j)),j},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),j=new W(+h[0],+h[1]);return j.z=+h[2],j},_removeTile:function(o){var h=this._tiles[o];h&&(ar(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){cn(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=y,o.onmousemove=y,Nt.ielt9&&this.options.opacity<1&&ss(o,this.options.opacity)},_addTile:function(o,h){var j=this._getTilePos(o),T=this._tileCoordsToKey(o),O=this.createTile(this._wrapCoords(o),d(this._tileReady,this,o));this._initTile(O),this.createTile.length<2&&re(d(this._tileReady,this,o,null,O)),dr(O,j),this._tiles[T]={el:O,coords:o,current:!0},h.appendChild(O),this.fire("tileloadstart",{tile:O,coords:o})},_tileReady:function(o,h,j){h&&this.fire("tileerror",{error:h,tile:j,coords:o});var T=this._tileCoordsToKey(o);j=this._tiles[T],j&&(j.loaded=+new Date,this._map._fadeAnimated?(ss(j.el,0),ce(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this)):(j.active=!0,this._pruneTiles()),h||(cn(j.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:j.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Nt.ielt9||!this._map._fadeAnimated?re(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new W(this._wrapX?x(o.x,this._wrapX):o.x,this._wrapY?x(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new fe(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function ta(o){return new ol(o)}var ll=ol.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=_(this,h),h.detectRetina&&Nt.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var j=document.createElement("img");return Yt(j,"load",d(this._tileOnLoad,this,h,j)),Yt(j,"error",d(this._tileOnError,this,h,j)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(j.referrerPolicy=this.options.referrerPolicy),j.alt="",j.src=this.getTileUrl(o),j},getTileUrl:function(o){var h={r:Nt.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var j=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=j),h["-y"]=j}return P(this._url,l(h,this.options))},_tileOnLoad:function(o,h){Nt.ielt9?setTimeout(d(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,j){var T=this.options.errorTileUrl;T&&h.getAttribute("src")!==T&&(h.src=T),o(j,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,j=this.options.zoomReverse,T=this.options.zoomOffset;return j&&(o=h-o),o+T},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=y,h.onerror=y,!h.complete)){h.src=z;var j=this._tiles[o].coords;ar(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:j})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",z),ol.prototype._removeTile.call(this,o)},_tileReady:function(o,h,j){if(!(!this._map||j&&j.getAttribute("src")===z))return ol.prototype._tileReady.call(this,o,h,j)}});function fi(o,h){return new ll(o,h)}var pi=ll.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var j=l({},this.defaultWmsParams);for(var T in h)T in this.options||(j[T]=h[T]);h=_(this,h);var O=h.detectRetina&&Nt.retina?2:1,K=this.getTileSize();j.width=K.x*O,j.height=K.y*O,this.wmsParams=j},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,ll.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),j=this._crs,T=te(j.project(h[0]),j.project(h[1])),O=T.min,K=T.max,xe=(this._wmsVersion>=1.3&&this._crs===_i?[O.y,O.x,K.y,K.x]:[O.x,O.y,K.x,K.y]).join(","),ze=ll.prototype.getTileUrl.call(this,o);return ze+A(this.wmsParams,ze,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+xe},setParams:function(o,h){return l(this.wmsParams,o),h||this.redraw(),this}});function Zl(o,h){return new pi(o,h)}ll.WMS=pi,fi.wms=Zl;var na=$r.extend({options:{padding:.1},initialize:function(o){_(this,o),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var j=this._map.getZoomScale(h,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,h),K=T.multiplyBy(-j).add(O).subtract(this._map._getNewPixelOrigin(o,h));Nt.any3d?js(this._container,K,j):dr(this._container,K)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),j=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new fe(j,j.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),eu=na.extend({options:{tolerance:0},getEvents:function(){var o=na.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){na.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Yt(o,"mousemove",this._onMouseMove,this),Yt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Yt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){ce(this._redrawRequest),delete this._ctx,ar(this._container),Mn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){na.prototype._update.call(this);var o=this._bounds,h=this._container,j=o.getSize(),T=Nt.retina?2:1;dr(h,o.min),h.width=T*j.x,h.height=T*j.y,h.style.width=j.x+"px",h.style.height=j.y+"px",Nt.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){na.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[f(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,j=h.next,T=h.prev;j?j.prev=T:this._drawLast=T,T?T.next=j:this._drawFirst=j,delete o._order,delete this._layers[f(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),j=[],T,O;for(O=0;O<h.length;O++){if(T=Number(h[O]),isNaN(T))return;j.push(T)}o.options._dashArray=j}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||re(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var j=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,j.x,j.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)o=T.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var j,T,O,K,xe=o._parts,ze=xe.length,Fe=this._ctx;if(ze){for(Fe.beginPath(),j=0;j<ze;j++){for(T=0,O=xe[j].length;T<O;T++)K=xe[j][T],Fe[T?"lineTo":"moveTo"](K.x,K.y);h&&Fe.closePath()}this._fillStroke(Fe,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,j=this._ctx,T=Math.max(Math.round(o._radius),1),O=(Math.max(Math.round(o._radiusY),1)||T)/T;O!==1&&(j.save(),j.scale(1,O)),j.beginPath(),j.arc(h.x,h.y/O,T,0,Math.PI*2,!1),O!==1&&j.restore(),this._fillStroke(j,o)}},_fillStroke:function(o,h){var j=h.options;j.fill&&(o.globalAlpha=j.fillOpacity,o.fillStyle=j.fillColor||j.color,o.fill(j.fillRule||"evenodd")),j.stroke&&j.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=j.opacity,o.lineWidth=j.weight,o.strokeStyle=j.color,o.lineCap=j.lineCap,o.lineJoin=j.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),j,T,O=this._drawFirst;O;O=O.next)j=O.layer,j.options.interactive&&j._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(j))&&(T=j);this._fireEvent(T?[T]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(or(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var j,T,O=this._drawFirst;O;O=O.next)j=O.layer,j.options.interactive&&j._containsPoint(h)&&(T=j);T!==this._hoveredLayer&&(this._handleMouseOut(o),T&&(cn(this._container,"leaflet-interactive"),this._fireEvent([T],o,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,j){this._map._fireDOMEvent(h,j||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var j=h.next,T=h.prev;if(j)j.prev=T;else return;T?T.next=j:j&&(this._drawFirst=j),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var j=h.next,T=h.prev;if(T)T.next=j;else return;j?j.prev=T:T&&(this._drawLast=T),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function tu(o){return Nt.canvas?new eu(o):null}var cl=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Xl={_initContainer:function(){this._container=Rn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(na.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=cl("shape");cn(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=cl("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[f(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;ar(h),o.removeInteractiveTarget(h),delete this._layers[f(o)]},_updateStyle:function(o){var h=o._stroke,j=o._fill,T=o.options,O=o._container;O.stroked=!!T.stroke,O.filled=!!T.fill,T.stroke?(h||(h=o._stroke=cl("stroke")),O.appendChild(h),h.weight=T.weight+"px",h.color=T.color,h.opacity=T.opacity,T.dashArray?h.dashStyle=M(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=T.lineCap.replace("butt","flat"),h.joinstyle=T.lineJoin):h&&(O.removeChild(h),o._stroke=null),T.fill?(j||(j=o._fill=cl("fill")),O.appendChild(j),j.color=T.fillColor||T.color,j.opacity=T.fillOpacity):j&&(O.removeChild(j),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),j=Math.round(o._radius),T=Math.round(o._radiusY||j);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+j+","+T+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){Hi(o._container)},_bringToBack:function(o){Ei(o._container)}},nu=Nt.vml?cl:qt,So=na.extend({_initContainer:function(){this._container=nu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ar(this._container),Mn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){na.prototype._update.call(this);var o=this._bounds,h=o.getSize(),j=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,j.setAttribute("width",h.x),j.setAttribute("height",h.y)),dr(j,o.min),j.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=nu("path");o.options.className&&cn(h,o.options.className),o.options.interactive&&cn(h,"leaflet-interactive"),this._updateStyle(o),this._layers[f(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){ar(o._path),o.removeInteractiveTarget(o._path),delete this._layers[f(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,j=o.options;h&&(j.stroke?(h.setAttribute("stroke",j.color),h.setAttribute("stroke-opacity",j.opacity),h.setAttribute("stroke-width",j.weight),h.setAttribute("stroke-linecap",j.lineCap),h.setAttribute("stroke-linejoin",j.lineJoin),j.dashArray?h.setAttribute("stroke-dasharray",j.dashArray):h.removeAttribute("stroke-dasharray"),j.dashOffset?h.setAttribute("stroke-dashoffset",j.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),j.fill?(h.setAttribute("fill",j.fillColor||j.color),h.setAttribute("fill-opacity",j.fillOpacity),h.setAttribute("fill-rule",j.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Je(o._parts,h))},_updateCircle:function(o){var h=o._point,j=Math.max(Math.round(o._radius),1),T=Math.max(Math.round(o._radiusY),1)||j,O="a"+j+","+T+" 0 1,0 ",K=o._empty()?"M0 0":"M"+(h.x-j)+","+h.y+O+j*2+",0 "+O+-j*2+",0 ";this._setPath(o,K)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){Hi(o._path)},_bringToBack:function(o){Ei(o._path)}});Nt.vml&&So.include(Xl);function ul(o){return Nt.svg||Nt.vml?new So(o):null}Ot.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&tu(o)||ul(o)}});var Tm=ql.extend({initialize:function(o,h){ql.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Y(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function mi(o,h){return new Tm(o,h)}So.create=nu,So.pointsToPath=Je,hi.geometryToLayer=Xc,hi.coordsToLatLng=ad,hi.coordsToLatLngs=Kc,hi.latLngToCoords=Qc,hi.latLngsToCoords=od,hi.getFeature=Ji,hi.asFeature=Gl,Ot.mergeOptions({boxZoom:!0});var dd=ui.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Mn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ar(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ks(),bs(),this._startPoint=this._map.mouseEventToContainerPoint(o),Yt(document,{contextmenu:ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Rn("div","leaflet-zoom-box",this._container),cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new fe(this._point,this._startPoint),j=h.getSize();dr(this._box,h.min),this._box.style.width=j.x+"px",this._box.style.height=j.y+"px"},_finish:function(){this._moved&&(ar(this._box),or(this._container,"leaflet-crosshair")),qa(),xo(),Mn(document,{contextmenu:ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var h=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ot.addInitHook("addHandler","boxZoom",dd),Ot.mergeOptions({doubleClickZoom:!0});var wa=ui.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,j=h.getZoom(),T=h.options.zoomDelta,O=o.originalEvent.shiftKey?j-T:j+T;h.options.doubleClickZoom==="center"?h.setZoom(O):h.setZoomAround(o.containerPoint,O)}});Ot.addInitHook("addHandler","doubleClickZoom",wa),Ot.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Jh=ui.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ja(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){or(this._map._container,"leaflet-grab"),or(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Y(this._map.options.maxBounds);this._offsetLimit=te(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,j=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(j),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),j=this._initialWorldOffset,T=this._draggable._newPos.x,O=(T-h+j)%o+h-j,K=(T+h+j)%o-h-j,xe=Math.abs(O+j)<Math.abs(K+j)?O:K;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=xe},_onDragEnd:function(o){var h=this._map,j=h.options,T=!j.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),T)h.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),K=(this._lastTime-this._times[0])/1e3,xe=j.easeLinearity,ze=O.multiplyBy(xe/K),Fe=ze.distanceTo([0,0]),st=Math.min(j.inertiaMaxSpeed,Fe),Ct=ze.multiplyBy(st/Fe),Bt=st/(j.inertiaDeceleration*xe),Wt=Ct.multiplyBy(-Bt/2).round();!Wt.x&&!Wt.y?h.fire("moveend"):(Wt=h._limitOffset(Wt,h.options.maxBounds),re(function(){h.panBy(Wt,{duration:Bt,easeLinearity:xe,noMoveStart:!0,animate:!0})}))}}});Ot.addInitHook("addHandler","dragging",Jh),Ot.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ru=ui.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Yt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Mn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,j=o.scrollTop||h.scrollTop,T=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(T,j)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},j=this.keyCodes,T,O;for(T=0,O=j.left.length;T<O;T++)h[j.left[T]]=[-1*o,0];for(T=0,O=j.right.length;T<O;T++)h[j.right[T]]=[o,0];for(T=0,O=j.down.length;T<O;T++)h[j.down[T]]=[0,o];for(T=0,O=j.up.length;T<O;T++)h[j.up[T]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},j=this.keyCodes,T,O;for(T=0,O=j.zoomIn.length;T<O;T++)h[j.zoomIn[T]]=o;for(T=0,O=j.zoomOut.length;T<O;T++)h[j.zoomOut[T]]=-o},_addHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Mn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,j=this._map,T;if(h in this._panKeys){if(!j._panAnim||!j._panAnim._inProgress)if(T=this._panKeys[h],o.shiftKey&&(T=F(T).multiplyBy(3)),j.options.maxBounds&&(T=j._limitOffset(F(T),j.options.maxBounds)),j.options.worldCopyJump){var O=j.wrapLatLng(j.unproject(j.project(j.getCenter()).add(T)));j.panTo(O)}else j.panBy(T)}else if(h in this._zoomKeys)j.setZoom(j.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&j._popup&&j._popup.options.closeOnEscapeKey)j.closePopup();else return;ds(o)}}});Ot.addInitHook("addHandler","keyboard",ru),Ot.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wo=ui.extend({addHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Mn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Be(o),j=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var T=Math.max(j-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),T),ds(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),j=this._map.options.zoomSnap||0;o._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,K=j?Math.ceil(O/j)*j:O,xe=o._limitZoom(h+(this._delta>0?K:-K))-h;this._delta=0,this._startTime=null,xe&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+xe):o.setZoomAround(this._lastMousePos,h+xe))}});Ot.addInitHook("addHandler","scrollWheelZoom",wo);var ef=600;Ot.mergeOptions({tapHold:Nt.touchNative&&Nt.safari&&Nt.mobile,tapTolerance:15});var hd=ui.extend({addHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Mn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new W(h.clientX,h.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Yt(document,"touchend",vr),Yt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),ef),Yt(document,"touchend touchcancel contextmenu",this._cancel,this),Yt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Mn(document,"touchend",vr),Mn(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Mn(document,"touchend touchcancel contextmenu",this._cancel,this),Mn(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new W(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var j=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});j._simulated=!0,h.target.dispatchEvent(j)}});Ot.addInitHook("addHandler","tapHold",hd),Ot.mergeOptions({touchZoom:Nt.touch,bounceAtZoomLimits:!0});var dl=ui.extend({addHooks:function(){cn(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){or(this._map._container,"leaflet-touch-zoom"),Mn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var j=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(j.add(T)._divideBy(2))),this._startDist=j.distanceTo(T),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend touchcancel",this._onTouchEnd,this),vr(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,j=h.mouseEventToContainerPoint(o.touches[0]),T=h.mouseEventToContainerPoint(o.touches[1]),O=j.distanceTo(T)/this._startDist;if(this._zoom=h.getScaleZoom(O,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&O<1||this._zoom>h.getMaxZoom()&&O>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var K=j._add(T)._divideBy(2)._subtract(this._centerPoint);if(O===1&&K.x===0&&K.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(K),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),ce(this._animRequest);var xe=d(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=re(xe,this,!0),vr(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ce(this._animRequest),Mn(document,"touchmove",this._onTouchMove,this),Mn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ot.addInitHook("addHandler","touchZoom",dl),Ot.BoxZoom=dd,Ot.DoubleClickZoom=wa,Ot.Drag=Jh,Ot.Keyboard=ru,Ot.ScrollWheelZoom=wo,Ot.TapHold=hd,Ot.TouchZoom=dl,r.Bounds=fe,r.Browser=Nt,r.CRS=We,r.Canvas=eu,r.Circle=Xh,r.CircleMarker=Zc,r.Class=je,r.Control=mn,r.DivIcon=Qh,r.DivOverlay=ea,r.DomEvent=ct,r.DomUtil=Xi,r.Draggable=ja,r.Evented=U,r.FeatureGroup=hs,r.GeoJSON=hi,r.GridLayer=ol,r.Handler=ui,r.Icon=jo,r.ImageOverlay=Sa,r.LatLng=q,r.LatLngBounds=R,r.Layer=$r,r.LayerGroup=$n,r.LineUtil=it,r.Map=Ot,r.Marker=Wl,r.Mixin=Wh,r.Path=Qa,r.Point=W,r.PolyUtil=qh,r.Polygon=ql,r.Polyline=Ja,r.Popup=Jc,r.PosAnimation=dn,r.Projection=en,r.Rectangle=Tm,r.Renderer=na,r.SVG=So,r.SVGOverlay=bo,r.TileLayer=ll,r.Tooltip=ud,r.Transformation=ht,r.Util=Se,r.VideoOverlay=cd,r.bind=d,r.bounds=te,r.canvas=tu,r.circle=Lv,r.circleMarker=Sm,r.control=zr,r.divIcon=_m,r.extend=l,r.featureGroup=ba,r.geoJSON=ld,r.geoJson=wm,r.gridLayer=ta,r.icon=id,r.imageOverlay=Yl,r.latLng=le,r.latLngBounds=Y,r.layerGroup=Fr,r.map=jn,r.marker=Zh,r.point=F,r.polygon=di,r.polyline=Ov,r.popup=Bv,r.rectangle=mi,r.setOptions=_,r.stamp=f,r.svg=ul,r.svgOverlay=Em,r.tileLayer=fi,r.tooltip=$v,r.transformation=rt,r.version=i,r.videoOverlay=Cm;var Kl=window.L;r.noConflict=function(){return window.L=Kl,this},window.L=r}))})(dp,dp.exports)),dp.exports}var $h=zee();const Fh=Jp($h);function Iv(t,n,r){return Object.freeze({instance:t,context:n,container:r})}function Nv(t,n){return n==null?function(i,l){const u=v.useRef(void 0);return u.current||(u.current=t(i,l)),u}:function(i,l){const u=v.useRef(void 0);u.current||(u.current=t(i,l));const d=v.useRef(i),{instance:p}=u.current;return v.useEffect(function(){d.current!==i&&(n(p,i,d.current),d.current=i)},[p,i,n]),u}}function hz(t,n){v.useEffect(function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){n.layerContainer?.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function fz(t){return function(r){const i=Mv(),l=t(zv(r,i),i);return cz(i.map,r.attribution),nw(l.current,r.eventHandlers),hz(l.current,i),l}}function Iee(t,n){const r=v.useRef(void 0);v.useEffect(function(){if(n.pathOptions!==r.current){const l=n.pathOptions??{};t.instance.setStyle(l),r.current=l}},[t,n])}function Nee(t){return function(r){const i=Mv(),l=t(zv(r,i),i);return nw(l.current,r.eventHandlers),hz(l.current,i),Iee(l.current,r),l}}function Lee(t,n){const r=Nv(t,n),i=fz(r);return dz(i)}function Oee(t,n){const r=Nv(t),i=Pee(r,n);return kee(i)}function Bee(t,n){const r=Nv(t,n),i=Nee(r);return dz(i)}function $ee(t,n){const r=Nv(t,n),i=fz(r);return Dee(i)}function Fee(t,n,r){const{opacity:i,zIndex:l}=n;i!=null&&i!==r.opacity&&t.setOpacity(i),l!=null&&l!==r.zIndex&&t.setZIndex(l)}function Vee(){return Mv().map}function Uee({bounds:t,boundsOptions:n,center:r,children:i,className:l,id:u,placeholder:d,style:p,whenReady:f,zoom:g,...x},y){const[b]=v.useState({className:l,id:u,style:p}),[w,C]=v.useState(null),_=v.useRef(void 0);v.useImperativeHandle(y,()=>w?.map??null,[w]);const A=v.useCallback(P=>{if(P!==null&&!_.current){const M=new $h.Map(P,x);_.current=M,r!=null&&g!=null?M.setView(r,g):t!=null&&M.fitBounds(t,n),f!=null&&M.whenReady(f),C(Ree(M))}},[]);v.useEffect(()=>()=>{w?.map.remove()},[w]);const D=w?wn.createElement(tw,{value:w},i):d??null;return wn.createElement("div",{...b,ref:A},D)}const Hee=v.forwardRef(Uee),Wee=Lee(function({position:n,...r},i){const l=new $h.Marker(n,r);return Iv(l,uz(i,{overlayContainer:l}))},function(n,r,i){r.position!==i.position&&n.setLatLng(r.position),r.icon!=null&&r.icon!==i.icon&&n.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==i.zIndexOffset&&n.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==i.opacity&&n.setOpacity(r.opacity),n.dragging!=null&&r.draggable!==i.draggable&&(r.draggable===!0?n.dragging.enable():n.dragging.disable())}),wA=Bee(function({positions:n,...r},i){const l=new $h.Polyline(n,r);return Iv(l,uz(i,{overlayContainer:l}))},function(n,r,i){r.positions!==i.positions&&n.setLatLngs(r.positions)}),qee=Oee(function(n,r){const i=new $h.Popup(n,r.overlayContainer);return Iv(i,r)},function(n,r,{position:i},l){v.useEffect(function(){const{instance:d}=n;function p(g){g.popup===d&&(d.update(),l(!0))}function f(g){g.popup===d&&l(!1)}return r.map.on({popupopen:p,popupclose:f}),r.overlayContainer==null?(i!=null&&d.setLatLng(i),d.openOn(r.map)):r.overlayContainer.bindPopup(d),function(){r.map.off({popupopen:p,popupclose:f}),r.overlayContainer?.unbindPopup(),r.map.removeLayer(d)}},[n,r,l,i])}),Gee=$ee(function({url:n,...r},i){const l=new $h.TileLayer(n,zv(r,i));return Iv(l,i)},function(n,r,i){Fee(n,r,i);const{url:l}=r;l!=null&&l!==i.url&&n.setUrl(l)});delete Fh.Icon.Default.prototype._getIconUrl;Fh.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const Yee=Fh.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),Zee=Fh.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),Xee=Fh.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});function Kee({waypoints:t}){const n=Vee();return v.useEffect(()=>{if(t&&t.length>0){const r=t.map(l=>[l.lat,l.lng]),i=Fh.latLngBounds(r);n.fitBounds(i,{padding:[50,50]})}},[t,n]),null}function Qee({route:t}){const[n,r]=v.useState(null),[i,l]=v.useState(!0),[u,d]=v.useState(null);if(!t||!t.waypoints||t.waypoints.length===0)return e.jsx(oe,{p:4,bg:"gray.50",borderRadius:"md",textAlign:"center",color:"gray.500",children:"Pas de waypoints  afficher"});const p=t.waypoints.sort((f,g)=>f.order-g.order);return v.useEffect(()=>{(async()=>{try{l(!0);const x=p.map(C=>[C.lng,C.lat]).map(C=>C.join(",")).join(";"),b=await fetch(`https://router.project-osrm.org/route/v1/driving/${x}?overview=full&geometries=geojson`,{method:"GET",headers:{Accept:"application/json"}});if(!b.ok)throw new Error("Erreur calcul route");const w=await b.json();if(w.routes&&w.routes.length>0){const _=w.routes[0].geometry.coordinates.map(A=>[A[1],A[0]]);r(_)}}catch(g){console.error("Route calculation error:",g),d(g.message),r(p.map(x=>[x.lat,x.lng]))}finally{l(!1)}})()},[p]),e.jsxs(oe,{borderRadius:"md",overflow:"hidden",boxShadow:"md",h:"500px",position:"relative",children:[i&&e.jsx(yn,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"rgba(255,255,255,0.8)",zIndex:1e3,children:e.jsxs(J,{spacing:2,children:[e.jsx(pn,{color:"purple.500",size:"lg"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Calcul de l'itinraire rel..."})]})}),e.jsxs(Hee,{center:[p[0].lat,p[0].lng],zoom:10,style:{height:"100%",width:"100%"},children:[e.jsx(Gee,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n&&!u&&e.jsx(wA,{positions:n,color:"purple",weight:5,opacity:.9,dashArray:"0"}),u&&e.jsx(wA,{positions:p.map(f=>[f.lat,f.lng]),color:"red",weight:3,opacity:.6,dashArray:"5, 5"}),p.map((f,g)=>e.jsx(Wee,{position:[f.lat,f.lng],icon:g===0?Yee:g===p.length-1?Zee:Xee,children:e.jsx(qee,{children:e.jsxs("div",{style:{fontSize:"12px",minWidth:"180px"},children:[e.jsx("strong",{children:f.name}),e.jsx("br",{}),"Lat: ",f.lat.toFixed(4),", Lng: ",f.lng.toFixed(4),e.jsx("br",{}),f.stopTime>0&&e.jsxs("span",{children:["Arrt: ",f.stopTime," min",e.jsx("br",{})]}),e.jsxs("small",{children:["Point ",g+1,"/",p.length]}),t.maxLength&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #ccc"},children:[e.jsx("strong",{children:"Restrictions:"}),e.jsx("br",{}),t.maxLength&&e.jsxs("small",{children:["Long: ",t.maxLength,"m"]}),t.maxHeight&&e.jsxs("small",{children:[" | H: ",t.maxHeight,"m"]}),t.maxWeight&&e.jsxs("small",{children:[" | P: ",t.maxWeight,"t"]})]})]})})},f.order)),e.jsx(Kee,{waypoints:p})]})]})}function Jee(){const{isOpen:t,onOpen:n,onClose:r}=It(),i=on(),[l,u]=v.useState([]),[d,p]=v.useState(!1),[f,g]=v.useState("routes"),[x,y]=v.useState(null),[b,w]=v.useState({name:"",description:"",waypoints:[],difficulty:"NORMAL",season:"SUMMER",maxLength:null,maxHeight:null,maxWeight:null}),[C,_]=v.useState({name:"",lat:"",lng:"",stopTime:0}),A="https://attractive-kindness-rbe-serveurs.up.railway.app";v.useEffect(()=>{t&&D()},[t]);const D=async()=>{p(!0);try{const V=await fetch(`${A}/routes`);if(!V.ok)throw new Error("Erreur chargement");const $=await V.json();u($)}catch(V){i({title:"Erreur",description:V.message,status:"error"})}finally{p(!1)}},P=()=>{if(!C.name||!C.lat||!C.lng){i({title:"Erreur",description:"Remplissez tous les champs",status:"error"});return}w(V=>({...V,waypoints:[...V.waypoints,{...C,lat:parseFloat(C.lat),lng:parseFloat(C.lng),stopTime:parseInt(C.stopTime||0),order:V.waypoints.length}]})),_({name:"",lat:"",lng:"",stopTime:0})},M=V=>{w($=>({...$,waypoints:$.waypoints.filter((ae,he)=>he!==V)}))},N=async()=>{if(!b.name||b.waypoints.length<2){i({title:"Erreur",description:"Nom + 2+ waypoints requis",status:"error"});return}try{if(!(await fetch(`${A}/routes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw new Error("Erreur cration");i({title:"Succs",description:"Itinraire cr!",status:"success"}),w({name:"",description:"",waypoints:[],difficulty:"NORMAL",season:"SUMMER",maxLength:null,maxHeight:null,maxWeight:null}),g("routes"),D()}catch(V){i({title:"Erreur",description:V.message,status:"error"})}},z=async V=>{if(window.confirm("Confirmer suppression?"))try{if(!(await fetch(`${A}/routes/${V}`,{method:"DELETE"})).ok)throw new Error("Erreur");i({title:"Supprime",status:"success"}),D()}catch($){i({title:"Erreur",description:$.message,status:"error"})}},I=V=>{const $=V.totalDistance||0,ae=V.estimatedTime||0,he=Math.floor(ae/60),re=ae%60;return{distance:$,time:`${he}h${re}m`}};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{onClick:n,leftIcon:e.jsx(kc,{}),colorScheme:"purple",size:"md",w:"100%",children:" RtroGPS - Traage d'itinraires"}),e.jsxs(Et,{isOpen:t,onClose:r,size:"5xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",display:"flex",flexDirection:"column",children:[e.jsx(Tt,{children:e.jsxs(ee,{spacing:3,children:[e.jsx(Cn,{as:kc,color:"purple.500",boxSize:6}),e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",children:"RtroGPS - Gestion des itinraires"}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Crez et tracez les tournes"})]})]})}),e.jsx($t,{}),e.jsx(_t,{overflow:"auto",flex:1,pb:4,children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{spacing:0,borderBottom:"2px solid",borderColor:"gray.200",children:[e.jsxs(Q,{variant:f==="routes"?"solid":"ghost",colorScheme:f==="routes"?"purple":"gray",onClick:()=>g("routes"),leftIcon:e.jsx(kc,{}),children:["Itinraires (",l.length,")"]}),e.jsx(Q,{variant:f==="create"?"solid":"ghost",colorScheme:f==="create"?"green":"gray",onClick:()=>g("create"),leftIcon:e.jsx(Bn,{}),children:"Crer"})]}),f==="routes"&&e.jsx(J,{spacing:4,align:"stretch",children:d?e.jsx(yn,{p:8,children:e.jsx(pn,{})}):l.length===0?e.jsx(yn,{p:8,bg:"gray.50",borderRadius:"md",children:e.jsx(k,{color:"gray.500",children:"Aucun itinraire cr"})}):e.jsxs(Fn,{size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.100",children:[e.jsx(_e,{children:"Nom"}),e.jsx(_e,{children:"Distance"}),e.jsx(_e,{children:"Temps"}),e.jsx(_e,{children:"Points"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:l.map(V=>{const $=I(V);return e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontWeight:"bold",children:V.name}),e.jsxs(Ee,{children:[$.distance," km"]}),e.jsx(Ee,{children:$.time}),e.jsx(Ee,{textAlign:"center",children:V.waypoints?.length||0}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:1,children:[e.jsx(ti,{label:"Dtails",children:e.jsx(xt,{icon:e.jsx(_l,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>y(V)})}),e.jsx(ti,{label:"Supprimer",children:e.jsx(xt,{icon:e.jsx(Qn,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>z(V.id)})})]})})]},V.id)})})]})}),f==="create"&&e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Nom de l'itinraire"}),e.jsx(ge,{placeholder:"ex: Tourne Essonne Sud",value:b.name,onChange:V=>w($=>({...$,name:V.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{placeholder:"Dtails du parcours...",value:b.description,onChange:V=>w($=>({...$,description:V.target.value})),rows:2})]}),e.jsxs(mt,{columns:3,gap:3,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Longueur max (m)"}),e.jsx(Ln,{value:b.maxLength||"",onChange:V=>w($=>({...$,maxLength:V?parseFloat(V):null})),children:e.jsx(On,{placeholder:"12.5"})})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Hauteur max (m)"}),e.jsx(Ln,{value:b.maxHeight||"",onChange:V=>w($=>({...$,maxHeight:V?parseFloat(V):null})),children:e.jsx(On,{placeholder:"3.8"})})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Poids max (t)"}),e.jsx(Ln,{value:b.maxWeight||"",onChange:V=>w($=>({...$,maxWeight:V?parseFloat(V):null})),children:e.jsx(On,{placeholder:"13"})})]})]}),e.jsx(xn,{}),e.jsx(Te,{size:"sm",children:" Points de passage"}),e.jsxs(ee,{spacing:2,align:"flex-end",children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Nom"}),e.jsx(ge,{placeholder:"ex: Dpart",value:C.name,onChange:V=>_($=>({...$,name:V.target.value})),size:"sm"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Lat"}),e.jsx(ge,{placeholder:"48.8566",value:C.lat,onChange:V=>_($=>({...$,lat:V.target.value})),size:"sm"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Lng"}),e.jsx(ge,{placeholder:"2.3522",value:C.lng,onChange:V=>_($=>({...$,lng:V.target.value})),size:"sm"})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"sm",children:"Arrt (min)"}),e.jsx(Ln,{value:C.stopTime,onChange:V=>_($=>({...$,stopTime:V})),size:"sm",children:e.jsx(On,{})})]}),e.jsx(Q,{onClick:P,colorScheme:"green",size:"sm",leftIcon:e.jsx(Bn,{}),children:"Ajouter"})]}),b.waypoints.length>0&&e.jsxs(oe,{p:3,bg:"gray.50",borderRadius:"md",maxH:"200px",overflow:"auto",children:[e.jsxs(k,{fontWeight:"bold",mb:2,children:["Waypoints (",b.waypoints.length,"):"]}),b.waypoints.map((V,$)=>e.jsxs(ee,{p:2,bg:"white",borderRadius:"md",mb:1,justify:"space-between",children:[e.jsxs(k,{fontSize:"sm",children:[$+1,". ",e.jsx("strong",{children:V.name})," - ",V.lat.toFixed(4),", ",V.lng.toFixed(4)," (+",V.stopTime,"min)"]}),e.jsx(Q,{size:"xs",colorScheme:"red",variant:"ghost",onClick:()=>M($),children:""})]},$))]}),e.jsx(Q,{colorScheme:"purple",size:"lg",w:"100%",onClick:N,isDisabled:!b.name||b.waypoints.length<2,children:" Crer l'itinraire"})]}),x&&e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(oe,{p:4,bg:"blue.50",borderRadius:"lg",borderLeft:"4px solid",borderColor:"blue.500",children:[e.jsxs(ee,{justify:"space-between",mb:3,children:[e.jsx(Te,{size:"md",children:x.name}),e.jsx(Q,{size:"sm",variant:"ghost",onClick:()=>y(null),children:""})]}),e.jsxs(J,{align:"start",spacing:2,fontSize:"sm",children:[e.jsxs(k,{children:[e.jsx("strong",{children:"Description:"})," ",x.description||"N/A"]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Points:"})," ",x.waypoints?.length||0]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Distance:"})," ",I(x).distance," km"]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Temps:"})," ",I(x).time]}),x.maxLength&&e.jsxs(Qe,{children:["L max: ",x.maxLength,"m"]}),x.maxHeight&&e.jsxs(Qe,{children:["H max: ",x.maxHeight,"m"]}),x.maxWeight&&e.jsxs(Qe,{children:["P max: ",x.maxWeight,"t"]})]})]}),e.jsxs(oe,{children:[e.jsxs(ee,{spacing:2,mb:3,children:[e.jsx(Cn,{as:dJ,color:"purple.500"}),e.jsx(Te,{size:"sm",children:"Visualisation de l'itinraire"})]}),e.jsx(Qee,{route:x})]}),e.jsx(Q,{colorScheme:"gray",size:"sm",w:"100%",onClick:()=>y(null),children:"Fermer la vue dtails"})]})]})}),e.jsx(Vt,{children:e.jsx(Q,{colorScheme:"gray",variant:"outline",onClick:r,children:"Fermer"})})]})]})]})}function ete(){const[t,n]=v.useState(0);Tn("gray.50","gray.900");const r=()=>e.jsx(oe,{children:e.jsxs(ga,{index:t,onChange:n,variant:"enclosed",colorScheme:"green",children:[e.jsxs(xa,{borderBottom:"2px solid",borderColor:"green.200",children:[e.jsx(hn,{_selected:{color:"white",bg:"green.500"},children:e.jsxs(ee,{spacing:2,children:[e.jsx(Os,{}),e.jsx("span",{children:"Gestion des vnements"})]})}),e.jsx(hn,{_selected:{color:"white",bg:"teal.500"},children:e.jsxs(ee,{spacing:2,children:[e.jsx(Eu,{}),e.jsx("span",{children:"Planification"})]})}),e.jsx(hn,{_selected:{color:"white",bg:"purple.500"},children:e.jsxs(ee,{spacing:2,children:[e.jsx(kc,{}),e.jsx("span",{children:"RtroGPS"})]})})]}),e.jsxs(va,{children:[e.jsx(fn,{p:0,pt:6,children:e.jsx(Tee,{})}),e.jsx(fn,{children:e.jsx(J,{spacing:6,align:"stretch",children:e.jsxs(oe,{p:6,bg:"teal.50",borderRadius:"lg",borderLeft:"4px solid",borderColor:"teal.500",children:[e.jsx(Te,{size:"md",mb:2,children:" Vue Calendrier"}),e.jsx("p",{children:"Bientt disponible : calendrier interactif de vos tournes et vnements."})]})})}),e.jsx(fn,{children:e.jsx(J,{spacing:6,align:"stretch",children:e.jsx(Jee,{})})})]})]})});return e.jsx(Bh,{title:"Gestion des vnements",subtitle:"Crez, planifiez et suivez les tournes RtroBus",sections:[{id:"events",label:"vnements",icon:Os,render:r}],defaultSectionId:"events",sidebarTitle:"vnements",sidebarSubtitle:"Organisation & planning",sidebarTitleIcon:Os,versionLabel:"Events v2"})}const tte=({value:t,onChange:n,isRequired:r=!1})=>{const[i,l]=v.useState([]),[u,d]=v.useState(!0);v.useEffect(()=>{(async()=>{try{const g=localStorage.getItem("token"),x=await fetch("https://refreshing-adaptation-rbe-serveurs.up.railway.app/vehicles",{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(x.ok){const y=await x.json();l(y)}}catch(g){console.error("Erreur lors du chargement des vhicules:",g)}finally{d(!1)}})()},[]);const p=i.find(f=>f.parc===t);return e.jsxs(oe,{children:[e.jsxs(Z,{children:["Vhicule participant ",r&&e.jsx(k,{as:"span",color:"red.500",children:"*"})]}),u?e.jsxs(sr,{align:"center",justify:"center",py:4,children:[e.jsx(pn,{size:"sm",mr:2}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Chargement des vhicules..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{placeholder:"Slectionner un vhicule (optionnel)",value:t,onChange:f=>n(f.target.value),bg:"white",children:i.map(f=>e.jsxs("option",{value:f.parc,children:[f.marque," ",f.modele," - ",f.parc,f.immat&&` (${f.immat})`]},f.parc))}),p&&e.jsxs(oe,{mt:3,p:3,bg:"blue.50",borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:[e.jsxs(sr,{align:"center",children:[p.gallery&&p.gallery[0]&&e.jsx(Li,{src:`https://refreshing-adaptation-rbe-serveurs.up.railway.app${p.gallery[0]}`,alt:`${p.marque} ${p.modele}`,boxSize:"60px",objectFit:"cover",borderRadius:"md",mr:3}),e.jsxs(oe,{flex:1,children:[e.jsxs(k,{fontWeight:"bold",color:"blue.700",children:[p.marque," ",p.modele]}),e.jsxs(ee,{spacing:2,mt:1,children:[e.jsx(Qe,{colorScheme:"blue",fontSize:"xs",children:p.parc}),p.immat&&e.jsx(Qe,{colorScheme:"green",fontSize:"xs",children:p.immat}),p.miseEnCirculation&&e.jsx(Qe,{colorScheme:"orange",fontSize:"xs",children:new Date(p.miseEnCirculation).getFullYear()})]}),p.subtitle&&e.jsx(k,{fontSize:"sm",color:"gray.600",mt:1,children:p.subtitle})]})]}),e.jsxs(J,{spacing:2,align:"start",mt:3,children:[e.jsx(k,{fontSize:"xs",color:"blue.600",fontStyle:"italic",fontWeight:"semibold",children:" Ce vhicule sera mis en avant sur sa page individuelle avec une banderole spciale pour cet vnement"}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:"Les visiteurs verront une banderole thmatique adapte au type d'vnement sur la page de ce vhicule."})]})]})]}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:2,children:"Slectionnez un vhicule pour qu'il soit associ  cet vnement. Une banderole apparatra sur sa page pour informer les visiteurs de sa participation."})]})},Cj={public_info_only:{name:"Information publique",color:"blue",description:"vnement d'information sans inscription",defaults:{isVisible:!0,requiresRegistration:!1,allowPublicRegistration:!1,isFree:!0,registrationMethod:"none",eventType:"public_info_only"}},paid_event:{name:"vnement payant",color:"green",description:"vnement avec tarifs et inscription",defaults:{isVisible:!0,requiresRegistration:!0,allowPublicRegistration:!0,isFree:!1,registrationMethod:"helloasso",eventType:"paid_event"}},free_registration:{name:"Inscription gratuite",color:"purple",description:"vnement gratuit avec inscription",defaults:{isVisible:!0,requiresRegistration:!0,allowPublicRegistration:!0,isFree:!0,registrationMethod:"internal",eventType:"free_registration"}},internal_only:{name:"vnement interne",color:"orange",description:"vnement rserv aux membres",defaults:{isVisible:!1,requiresRegistration:!1,allowPublicRegistration:!1,isFree:!0,registrationMethod:"none",eventType:"internal_only"}},maintenance:{name:"Maintenance/Atelier",color:"red",description:"Activit de maintenance ou atelier technique",defaults:{isVisible:!1,requiresRegistration:!1,allowPublicRegistration:!1,isFree:!0,registrationMethod:"none",eventType:"maintenance"}}};function nte(){const[t,n]=v.useState([]),[r,i]=v.useState([]),[l,u]=v.useState(!0),[d,p]=v.useState(!1),[f,g]=v.useState("cards"),[x,y]=v.useState(""),{isOpen:b,onOpen:w,onClose:C}=It(),[_,A]=v.useState(null),[D,P]=v.useState({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),M=on(),N=v.useCallback(async()=>{try{u(!0);const de=await za.getAll();n(Array.isArray(de)?de:[])}catch(de){console.error(de),M({status:"error",title:"Erreur de chargement",description:"Impossible de charger les vnements"}),n([])}finally{u(!1)}},[M]),z=v.useCallback(async()=>{try{const de=await Ap.getAll();i(Array.isArray(de)?de:[])}catch(de){console.error(de),i([])}},[]);v.useEffect(()=>{N(),z()},[N,z]);const I=()=>{P({title:"",date:"",time:"",location:"",description:"",adultPrice:"",childPrice:"",helloAssoUrl:"",vehicleId:"",status:"DRAFT",isVisible:!0,allowPublicRegistration:!1,requiresRegistration:!1,isFree:!0,maxParticipants:"",registrationDeadline:"",registrationMethod:"none",pdfUrl:"",eventType:"public_info_only"}),y(""),A(null)},V=de=>{const G=Cj[de];G&&(P(U=>({...U,...G.defaults,eventType:de})),y(de),M({status:"info",title:"Template appliqu",description:G.description}))},$=()=>{A(null),I(),w()},ae=de=>{A(de);let G={};try{G=de.extras?JSON.parse(de.extras):{}}catch(U){console.log("Impossible de parser extras:",U)}P({title:de.title||"",date:de.date?de.date.split("T")[0]:"",time:de.time||"",location:de.location||"",description:de.description||"",adultPrice:de.adultPrice?de.adultPrice.toString():"",childPrice:de.childPrice?de.childPrice.toString():"",helloAssoUrl:de.helloAssoUrl||"",vehicleId:de.vehicleId||"",status:de.status||"DRAFT",isVisible:G.isVisible!==void 0?G.isVisible:!0,allowPublicRegistration:G.allowPublicRegistration||!1,requiresRegistration:G.requiresRegistration||!1,isFree:G.isFree!==void 0?G.isFree:!0,maxParticipants:G.maxParticipants?G.maxParticipants.toString():"",registrationDeadline:G.registrationDeadline||"",registrationMethod:G.registrationMethod||"none",pdfUrl:G.pdfUrl||"",eventType:G.eventType||"public_info_only"}),y(G.eventType||""),w()},he=async()=>{if(!D.title.trim()||!D.date){M({status:"error",title:"Champs requis",description:"Le titre et la date sont obligatoires"});return}try{p(!0);const de={title:D.title.trim(),date:D.date,time:D.time||null,location:D.location.trim()||null,description:D.description.trim()||null,adultPrice:D.adultPrice?parseFloat(D.adultPrice):null,childPrice:D.childPrice?parseFloat(D.childPrice):null,helloAssoUrl:D.helloAssoUrl.trim()||null,vehicleId:D.vehicleId||null,status:D.status,extras:JSON.stringify({isVisible:D.isVisible,allowPublicRegistration:D.allowPublicRegistration,requiresRegistration:D.requiresRegistration,isFree:D.isFree,maxParticipants:D.maxParticipants?parseInt(D.maxParticipants):null,registrationDeadline:D.registrationDeadline||null,registrationMethod:D.registrationMethod,pdfUrl:D.pdfUrl||null,eventType:D.eventType})};if(_)await za.update(_.id,de),M({status:"success",title:"vnement modifi",description:"Les modifications ont t sauvegardes"});else{const G=D.title.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"").substring(0,20)+new Date().getFullYear();await za.create({id:G,...de}),M({status:"success",title:"vnement cr",description:"Le nouvel vnement a t cr avec succs"})}N(),C(),I()}catch(de){console.error(de),M({status:"error",title:"Erreur de sauvegarde",description:"Impossible de sauvegarder l'vnement"})}finally{p(!1)}},re=async()=>{const de=localStorage.getItem("token");if(console.log(" Testing API connection..."),!de){M({status:"error",title:"Pas de token",description:"Veuillez vous reconnecter"});return}try{const G=await fetch("https://refreshing-adaptation-rbe-serveurs.up.railway.app/events",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${de}`}});G.ok?M({status:"success",title:"API fonctionnelle",description:"La connexion API fonctionne"}):M({status:"error",title:"Erreur API",description:`Status: ${G.status}`})}catch(G){M({status:"error",title:"Erreur rseau",description:G.message})}},ce=de=>{const G={DRAFT:{colorScheme:"gray",label:"Brouillon"},PUBLISHED:{colorScheme:"green",label:"Publi"},ARCHIVED:{colorScheme:"orange",label:"Archiv"}},U=G[de]||G.DRAFT;return e.jsx(Qe,{colorScheme:U.colorScheme,children:U.label})},Se=de=>{const G=typeof de.extras=="string"?JSON.parse(de.extras||"{}"):de.extras||{},U=Cj[G.eventType];return U?e.jsx(Qe,{colorScheme:U.color,variant:"outline",children:U.name}):null},je=de=>{const G=r.find(U=>U.parc===de);return G?`${G.parc} - ${G.modele}`:"Aucun vhicule"};return e.jsxs(oe,{p:6,children:[e.jsxs(sr,{justify:"space-between",align:"center",mb:6,children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{children:" Cration des vnements"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Crez et configurez de nouveaux vnements pour l'association"})]}),e.jsxs(ee,{spacing:3,children:[e.jsx(Q,{leftIcon:e.jsx(Bs,{}),size:"sm",colorScheme:"purple",variant:"outline",onClick:re,children:"Tester API"}),e.jsx(Q,{leftIcon:f==="cards"?e.jsx(VM,{}):e.jsx(ew,{}),size:"sm",variant:"outline",onClick:()=>g(f==="cards"?"table":"cards"),children:f==="cards"?"Vue tableau":"Vue cartes"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:$,children:"Nouvel vnement"})]})]}),l?e.jsx(yn,{py:20,children:e.jsx(pn,{size:"xl"})}):t.length===0?e.jsx(yn,{py:20,children:e.jsxs(J,{spacing:4,children:[e.jsx(k,{color:"gray.500",fontSize:"lg",children:"Aucun vnement trouv"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:$,children:"Crer le premier vnement"})]})}):e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:6,children:t.map(de=>e.jsxs(Pe,{shadow:"md",position:"relative",children:[e.jsx(zt,{pb:2,children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsx(ee,{justify:"space-between",w:"100%",children:e.jsx(Te,{size:"md",noOfLines:2,flex:1,children:de.title})}),e.jsxs(ee,{spacing:2,wrap:"wrap",children:[ce(de.status),Se(de)]})]})}),e.jsx(ke,{pt:0,children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsxs(ee,{children:[e.jsx(Os,{}),e.jsxs(k,{fontSize:"sm",children:[de.date," ",de.time&&` ${de.time}`]})]}),de.location&&e.jsxs(ee,{children:[e.jsx(kc,{}),e.jsx(k,{fontSize:"sm",children:de.location})]}),de.vehicleId&&e.jsxs(ee,{children:[e.jsx(k,{fontSize:"sm",children:""}),e.jsx(k,{fontSize:"sm",fontWeight:"semibold",color:"blue.600",children:je(de.vehicleId)})]}),de.description&&e.jsx(k,{fontSize:"sm",color:"gray.600",noOfLines:3,children:de.description}),e.jsx(Q,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>ae(de),w:"100%",children:"Modifier"})]})})]},de.id))}),e.jsxs(Et,{isOpen:b,onClose:C,size:"6xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:_?"Modifier l'vnement":"Crer un nouvel vnement"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(ga,{children:[e.jsxs(xa,{children:[e.jsx(hn,{children:"Informations de base"}),e.jsx(hn,{children:"Configuration"}),e.jsx(hn,{children:"Inscription & Prix"})]}),e.jsxs(va,{children:[e.jsx(fn,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:2,children:"Dmarrage rapide :"}),e.jsx(ee,{spacing:2,wrap:"wrap",children:Object.entries(Cj).map(([de,G])=>e.jsx(Q,{size:"sm",colorScheme:G.color,variant:x===de?"solid":"outline",onClick:()=>V(de),children:G.name},de))})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{value:D.title,onChange:de=>P(G=>({...G,title:de.target.value})),placeholder:"Nom de l'vnement"})]}),e.jsxs(ee,{w:"100%",spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Date"}),e.jsx(ge,{type:"date",value:D.date,onChange:de=>P(G=>({...G,date:de.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Heure"}),e.jsx(ge,{type:"time",value:D.time,onChange:de=>P(G=>({...G,time:de.target.value}))})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Lieu"}),e.jsx(ge,{value:D.location,onChange:de=>P(G=>({...G,location:de.target.value})),placeholder:"Lieu de l'vnement"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Vhicule assign"}),e.jsx(tte,{vehicles:r,value:D.vehicleId,onChange:de=>P(G=>({...G,vehicleId:de}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:D.description,onChange:de=>P(G=>({...G,description:de.target.value})),placeholder:"Description de l'vnement",rows:4})]})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Statut"}),e.jsxs(ut,{value:D.status,onChange:de=>P(G=>({...G,status:de.target.value})),children:[e.jsx("option",{value:"DRAFT",children:"Brouillon"}),e.jsx("option",{value:"PUBLISHED",children:"Publi"}),e.jsx("option",{value:"ARCHIVED",children:"Archiv"})]})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:"0",children:"Visible sur le site public"}),e.jsx(Jn,{isChecked:D.isVisible,onChange:de=>P(G=>({...G,isVisible:de.target.checked}))})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:"0",children:"Inscription requise"}),e.jsx(Jn,{isChecked:D.requiresRegistration,onChange:de=>P(G=>({...G,requiresRegistration:de.target.checked}))})]}),D.requiresRegistration&&e.jsxs(X,{children:[e.jsx(Z,{children:"Mthode d'inscription"}),e.jsxs(ut,{value:D.registrationMethod,onChange:de=>P(G=>({...G,registrationMethod:de.target.value})),children:[e.jsx("option",{value:"none",children:"Aucune"}),e.jsx("option",{value:"helloasso",children:"HelloAsso"}),e.jsx("option",{value:"pdf",children:"Formulaire PDF"}),e.jsx("option",{value:"internal",children:"Systme interne"})]})]})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:"0",children:"vnement gratuit"}),e.jsx(Jn,{isChecked:D.isFree,onChange:de=>P(G=>({...G,isFree:de.target.checked}))})]}),!D.isFree&&e.jsxs(ee,{w:"100%",spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Prix adulte ()"}),e.jsx(ge,{type:"number",step:"0.01",value:D.adultPrice,onChange:de=>P(G=>({...G,adultPrice:de.target.value})),placeholder:"0.00"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Prix enfant ()"}),e.jsx(ge,{type:"number",step:"0.01",value:D.childPrice,onChange:de=>P(G=>({...G,childPrice:de.target.value})),placeholder:"0.00"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Nombre maximum de participants"}),e.jsx(ge,{type:"number",value:D.maxParticipants,onChange:de=>P(G=>({...G,maxParticipants:de.target.value})),placeholder:"Illimit"})]}),D.registrationMethod==="helloasso"&&e.jsxs(X,{children:[e.jsx(Z,{children:"URL HelloAsso"}),e.jsx(ge,{value:D.helloAssoUrl,onChange:de=>P(G=>({...G,helloAssoUrl:de.target.value})),placeholder:"https://www.helloasso.com/..."})]}),D.registrationMethod==="pdf"&&e.jsxs(X,{children:[e.jsx(Z,{children:"URL du formulaire PDF"}),e.jsx(ge,{value:D.pdfUrl,onChange:de=>P(G=>({...G,pdfUrl:de.target.value})),placeholder:"https://exemple.com/formulaire.pdf"})]})]})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:()=>{C(),I()},children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:he,isLoading:d,children:_?"Modifier":"Crer"})]})]})]})]})}function rte(){return e.jsxs(oe,{p:6,bg:"green.100",minH:"100vh",children:[e.jsx(Te,{color:"green.800",mb:4,children:" TEST - Gestion des vnements"}),e.jsx(k,{color:"green.700",mb:4,children:"Si vous voyez cette page, la redirection depuis MyRBE fonctionne !"}),e.jsx(Q,{as:mr,to:"/dashboard/myrbe",colorScheme:"green",children:"Retour  MyRBE"})]})}function Ej(t){return ft({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(t)}function ste(t){return ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function ite(t){return ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function pz(t){return ft({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function CA(t){return ft({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function EA(t){return ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(t)}function ate(t){return ft({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function _A(t){return ft({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function ote(t){return ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function mz(t){return ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function gz(t){return ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function rw(t,{preferUpperLast:n=!0}={}){if(!t)return"Utilisateur";const r=t.firstName||t.prenom||t.given_name||"",i=t.lastName||t.nom||t.family_name||"",l=t.username||t.matricule||"",u=t.email||"",d=[];return n&&i&&d.push(String(i).toUpperCase()),r&&d.push(r),d.length?d.join(" ").trim():i||r?[r,i].filter(Boolean).join(" ").trim():l||u||"Utilisateur"}function sw(t){if(!t)return"Adhrent";const n=t.firstName||"",r=t.lastName||"",i=t.memberNumber||"",l=t.email||"",d=[r?String(r).toUpperCase():"",n].filter(Boolean).join(" ").trim()||l||i||"Adhrent";return i?`${d} - #${i}`:d}const hp={async getAll(t){const n=await fetch("/api/email-templates",{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error(`Failed to fetch templates: ${n.statusText}`);return n.json()},async getById(t,n){const r=await fetch(`/api/email-templates/${t}`,{headers:{Authorization:`Bearer ${n}`}});if(!r.ok)throw new Error(`Failed to fetch template: ${r.statusText}`);return r.json()},async create(t,n){const r=await fetch("/api/email-templates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to create template")}return r.json()},async update(t,n,r){const i=await fetch(`/api/email-templates/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(n)});if(!i.ok){const l=await i.json();throw new Error(l.error||"Failed to update template")}return i.json()},async delete(t,n){const r=await fetch(`/api/email-templates/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to delete template")}return r.json()},async preview(t,n,r){const i=await fetch(`/api/email-templates/preview/${t}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(n)});if(!i.ok){const l=await i.json();throw new Error(l.error||"Failed to preview template")}return i.json()}};function lte({isOpen:t,onClose:n,template:r,onSave:i,isLoading:l}){const[u,d]=v.useState({name:"",subject:"",body:"",description:"",variables:"",active:!0});v.useEffect(()=>{d(r||{name:"",subject:"",body:"",description:"",variables:"",active:!0})},[r,t]);const p=g=>{const{name:x,value:y,checked:b,type:w}=g.target;d(C=>({...C,[x]:w==="checkbox"?b:y}))},f=()=>{if(!u.name.trim()||!u.subject.trim()||!u.body.trim()){alert("Name, subject, and body are required");return}i(u)};return e.jsxs(Et,{isOpen:t,onClose:n,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:r?.id?"Edit Template":"Create New Template"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(fo,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Template Name (unique, lowercase)"}),e.jsx(ge,{name:"name",value:u.name,onChange:p,placeholder:"e.g., ticket_created",isDisabled:!!r?.id}),e.jsx(jx,{children:"Use lowercase letters, numbers, and underscores. Cannot be changed after creation."})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Subject (supports variables)"}),e.jsx(ge,{name:"subject",value:u.subject,onChange:p,placeholder:"New ticket: {{ticket.id}}"}),e.jsx(jx,{children:"Use double curly braces for variables, e.g.: ticket.id, creator.name"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Body (supports variables)"}),e.jsx(Xt,{name:"body",value:u.body,onChange:p,placeholder:"Enter email body...",minH:"200px"}),e.jsx(jx,{children:"Use double curly braces for variables. Supports plain text."})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{name:"description",value:u.description,onChange:p,placeholder:"Describe when and how this template is used...",minH:"80px"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Available Variables (comma-separated, for documentation)"}),e.jsx(Xt,{name:"variables",value:u.variables,onChange:p,placeholder:"ticket.id, ticket.title, creator.name, creator.email",minH:"60px"})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{htmlFor:"active",mb:"0",children:"Active"}),e.jsx(Jn,{id:"active",name:"active",isChecked:u.active,onChange:p,ml:4})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:n,children:"Cancel"}),e.jsxs(Q,{colorScheme:"blue",onClick:f,isLoading:l,children:[r?.id?"Update":"Create"," Template"]})]})]})]})}function cte({isOpen:t,onClose:n,template:r,token:i}){const[l,u]=v.useState(`{
  "ticket": {
    "id": "T-001",
    "title": "Test ticket"
  },
  "creator": {
    "name": "John Doe",
    "email": "john@example.com"
  }
}`),[d,p]=v.useState(null),[f,g]=v.useState(!1),[x,y]=v.useState(null),b=on(),w=async()=>{try{g(!0),y(null);const C=JSON.parse(l),_=await hp.preview(r.name,C,i);p(_.preview)}catch(C){y(C.message),b({title:"Error",description:C.message,status:"error",duration:3})}finally{g(!1)}};return e.jsxs(Et,{isOpen:t,onClose:n,size:"2xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsxs(Tt,{children:["Preview Template: ",r?.name]}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(fo,{spacing:4,children:[e.jsxs(oe,{children:[e.jsx(Z,{children:"Test Data (JSON)"}),e.jsx(Xt,{value:l,onChange:C=>u(C.target.value),fontFamily:"monospace",fontSize:"xs",minH:"150px"})]}),e.jsx(Q,{onClick:w,colorScheme:"blue",isLoading:f,children:"Generate Preview"}),x&&e.jsxs(oe,{p:3,bg:"red.50",borderRadius:"md",color:"red.800",children:["Error: ",x]}),d&&e.jsxs(J,{align:"start",spacing:3,p:3,bg:"gray.50",borderRadius:"md",children:[e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",color:"gray.600",children:"Subject:"}),e.jsx(k,{fontFamily:"monospace",fontSize:"sm",children:d.subject})]}),e.jsx(xn,{}),e.jsxs(oe,{w:"100%",children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",color:"gray.600",children:"Body:"}),e.jsx(oe,{p:3,bg:"white",borderRadius:"md",border:"1px solid",borderColor:"gray.200",fontSize:"sm",whiteSpace:"pre-wrap",fontFamily:"monospace",children:d.body})]})]})]})}),e.jsx(Vt,{children:e.jsx(Q,{colorScheme:"blue",onClick:n,children:"Close"})})]})]})}function ute({token:t}){const[n,r]=v.useState([]),[i,l]=v.useState(!1),[u,d]=v.useState(null),[p,f]=v.useState(null),[g,x]=v.useState(null),{isOpen:y,onOpen:b,onClose:w}=It(),{isOpen:C,onOpen:_,onClose:A}=It(),D=on();v.useEffect(()=>{P()},[t]);const P=async()=>{try{l(!0),d(null);const $=await hp.getAll(t);r($.templates||[])}catch($){d($.message),D({title:"Error loading templates",description:$.message,status:"error",duration:3})}finally{l(!1)}},M=()=>{f(null),b()},N=$=>{f($),b()},z=$=>{x($),_()},I=async $=>{if(confirm(`Are you sure you want to delete template "${$.name}"?`))try{await hp.delete($.id,t),D({title:"Template deleted",status:"success",duration:2}),P()}catch(ae){D({title:"Error deleting template",description:ae.message,status:"error",duration:3})}},V=async $=>{try{p?.id?(await hp.update(p.id,$,t),D({title:"Template updated",status:"success",duration:2})):(await hp.create($,t),D({title:"Template created",status:"success",duration:2})),w(),P()}catch(ae){D({title:"Error saving template",description:ae.message,status:"error",duration:3})}};return e.jsxs(oe,{p:6,children:[e.jsxs(sr,{justify:"space-between",align:"center",mb:6,children:[e.jsx(Te,{size:"lg",children:"Email Templates"}),e.jsx(Q,{leftIcon:e.jsx(kM,{}),colorScheme:"green",onClick:M,children:"Create Template"})]}),u&&e.jsx(oe,{p:4,mb:6,bg:"red.50",borderRadius:"md",color:"red.800",children:u}),i?e.jsx(sr,{justify:"center",py:12,children:e.jsx(pn,{size:"lg"})}):n.length===0?e.jsx(Pe,{children:e.jsx(ke,{textAlign:"center",py:12,children:e.jsx(k,{color:"gray.500",children:"No templates yet. Create your first one!"})})}):e.jsx(ni,{templateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:4,children:n.map($=>e.jsxs(Pe,{children:[e.jsx(zt,{pb:2,children:e.jsx(sr,{justify:"space-between",align:"start",children:e.jsxs(J,{align:"start",spacing:1,flex:1,children:[e.jsx(Te,{size:"md",children:$.name}),e.jsx(Qe,{colorScheme:$.active?"green":"gray",children:$.active?"Active":"Inactive"})]})})}),e.jsx(xn,{}),e.jsx(ke,{children:e.jsxs(fo,{spacing:3,children:[e.jsxs(oe,{children:[e.jsx(k,{fontSize:"xs",color:"gray.600",fontWeight:"bold",children:"Subject:"}),e.jsx(k,{fontSize:"sm",noOfLines:2,children:$.subject})]}),$.description&&e.jsxs(oe,{children:[e.jsx(k,{fontSize:"xs",color:"gray.600",fontWeight:"bold",children:"Description:"}),e.jsx(k,{fontSize:"sm",noOfLines:2,children:$.description})]}),e.jsxs(ee,{spacing:2,pt:2,children:[e.jsx(ti,{label:"Preview",children:e.jsx(Q,{size:"sm",variant:"outline",colorScheme:"blue",onClick:()=>z($),children:e.jsx(Zp,{})})}),e.jsx(ti,{label:"Edit",children:e.jsx(Q,{size:"sm",variant:"outline",colorScheme:"orange",onClick:()=>N($),children:e.jsx(Hx,{})})}),e.jsx(ti,{label:"Delete",children:e.jsx(Q,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>I($),children:e.jsx(Xp,{})})})]})]})})]},$.id))}),e.jsx(lte,{isOpen:y,onClose:w,template:p,onSave:V,isLoading:i}),g&&e.jsx(cte,{isOpen:C,onClose:A,template:g,token:t})]})}const dte=()=>{const[t,n]=v.useState([]),[r,i]=v.useState(!0),[l,u]=v.useState(null),[d,p]=v.useState(""),[f,g]=v.useState(""),x=on(),y=It(),b=It(),w=It(),[C,_]=v.useState({name:"",description:"",htmlContent:"",logoSmall:"",logoBig:"",isDefault:!1});v.useEffect(()=>{A()},[]);const A=async()=>{try{i(!0);const $=localStorage.getItem("token"),ae=await fetch("/api/document-templates",{headers:$?{Authorization:`Bearer ${$}`}:{}});if(!ae.ok)throw new Error("Failed to load templates");const he=await ae.json();n(he),g("")}catch($){g($.message),x({title:"Erreur",description:$.message,status:"error"})}finally{i(!1)}},D=async()=>{try{if(!C.name||!C.htmlContent){x({title:"Erreur",description:"Nom et contenu HTML requis",status:"warning"});return}const $=localStorage.getItem("token");if(!$){x({title:"Erreur",description:"Authentification requise",status:"error"});return}if(!(await fetch("/api/document-templates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify({...C,createdBy:"admin"})})).ok)throw new Error("Failed to create template");x({title:"Succs",description:"Template cr avec succs",status:"success"}),A(),I(),y.onClose()}catch($){x({title:"Erreur",description:$.message,status:"error"})}},P=async()=>{try{if(!C.name||!C.htmlContent){x({title:"Erreur",description:"Nom et contenu HTML requis",status:"warning"});return}const $=localStorage.getItem("token");if(!$){x({title:"Erreur",description:"Authentification requise",status:"error"});return}const ae={name:C.name,description:C.description,htmlContent:C.htmlContent,isDefault:C.isDefault,...C.logoSmall&&C.logoSmall.length<5e5?{logoSmall:C.logoSmall}:{},...C.logoBig&&C.logoBig.length<5e5?{logoBig:C.logoBig}:{}},he=await fetch(`/api/document-templates/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify(ae)});if(!he.ok){const re=await he.text();throw new Error(`Failed to update template: ${re||he.statusText}`)}x({title:"Succs",description:"Template mis  jour",status:"success"}),A(),I(),b.onClose()}catch($){console.error("Error updating template:",$),x({title:"Erreur",description:$.message,status:"error"})}},M=async $=>{if(window.confirm("tes-vous sr de vouloir supprimer ce template?"))try{const ae=localStorage.getItem("token");if(!ae){x({title:"Erreur",description:"Authentification requise",status:"error"});return}if(!(await fetch(`/api/document-templates/${$}`,{method:"DELETE",headers:{Authorization:`Bearer ${ae}`}})).ok)throw new Error("Failed to delete template");x({title:"Succs",description:"Template supprim",status:"success"}),A()}catch(ae){x({title:"Erreur",description:ae.message,status:"error"})}},N=async $=>{try{const ae=localStorage.getItem("token");if(!ae){x({title:"Erreur",description:"Authentification requise",status:"error"});return}const he=await fetch(`/api/document-templates/${$.id}/preview`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`}});if(!he.ok)throw new Error("Failed to generate preview");const re=await he.json();p(re.html),u($),w.onOpen()}catch(ae){x({title:"Erreur",description:ae.message,status:"error"})}},z=$=>{u($),_({name:$.name,description:$.description||"",htmlContent:$.htmlContent,logoSmall:$.logoSmall||"",logoBig:$.logoBig||"",isDefault:$.isDefault}),b.onOpen()},I=()=>{_({name:"",description:"",htmlContent:"",logoSmall:"",logoBig:"",isDefault:!1}),u(null)},V=()=>{I(),y.onOpen()};return e.jsxs(oe,{p:6,children:[e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(oe,{children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",children:"Gestion des Templates de Documents"}),e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Crez et personnalisez les templates HTML pour vos devis et factures"})]}),e.jsx(Q,{colorScheme:"blue",onClick:V,children:"+ Nouveau Template"})]}),e.jsx(xn,{}),r?e.jsx(k,{children:"Chargement..."}):t.length===0?e.jsxs(oe,{p:8,textAlign:"center",bg:"gray.50",borderRadius:"md",children:[e.jsx(k,{color:"gray.500",children:"Aucun template disponible"}),e.jsx(Q,{colorScheme:"blue",mt:4,onClick:V,children:"Crer le premier template"})]}):e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{bg:"gray.100",children:[e.jsx(_e,{children:"Nom"}),e.jsx(_e,{children:"Description"}),e.jsx(_e,{children:"Dfaut"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:t.map($=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontWeight:"600",children:$.name}),e.jsx(Ee,{fontSize:"sm",children:$.description||"-"}),e.jsx(Ee,{children:$.isDefault&&e.jsx(Qe,{colorScheme:"yellow",children:"Dfaut"})}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:2,children:[e.jsx(xt,{icon:e.jsx(Zp,{}),size:"sm",variant:"ghost",onClick:()=>N($),title:"Aperu"}),e.jsx(xt,{icon:e.jsx(Hx,{}),size:"sm",variant:"ghost",onClick:()=>z($),title:"Modifier"}),e.jsx(xt,{icon:e.jsx(Xp,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>M($.id),title:"Supprimer"})]})})]},$.id))})]})})]}),e.jsxs(Et,{isOpen:y.isOpen,onClose:y.onClose,size:"2xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsx(Tt,{children:"Crer un nouveau template de devis"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsx(ge,{placeholder:"Nom du template",value:C.name,onChange:$=>_({...C,name:$.target.value})}),e.jsx(Xt,{placeholder:"Description (optionnel)",value:C.description,onChange:$=>_({...C,description:$.target.value})}),e.jsxs(oe,{w:"full",children:[e.jsx(k,{fontSize:"sm",fontWeight:"600",mb:2,children:"Contenu HTML *"}),e.jsx(Xt,{placeholder:"Exemple: <h1>{{TITRE}}</h1><p>Montant: {{MONTANT}} </p>",value:C.htmlContent,onChange:$=>_({...C,htmlContent:$.target.value}),minH:"150px",fontFamily:"mono",fontSize:"xs"})]}),e.jsxs(oe,{w:"full",children:[e.jsx(k,{fontSize:"sm",fontWeight:"600",mb:2,children:"Logo Petit (optionnel)"}),e.jsx(ge,{type:"file",accept:"image/*",onChange:async $=>{const ae=$.target.files[0];if(ae){const he=new FileReader;he.onload=re=>{_({...C,logoSmall:re.target.result})},he.readAsDataURL(ae)}}}),C.logoSmall&&e.jsx(oe,{mt:2,children:e.jsx("img",{src:C.logoSmall,alt:"Logo petit",style:{maxHeight:"50px"}})})]}),e.jsxs(oe,{w:"full",children:[e.jsx(k,{fontSize:"sm",fontWeight:"600",mb:2,children:"Logo Grand (optionnel)"}),e.jsx(ge,{type:"file",accept:"image/*",onChange:async $=>{const ae=$.target.files[0];if(ae){const he=new FileReader;he.onload=re=>{_({...C,logoBig:re.target.result})},he.readAsDataURL(ae)}}}),C.logoBig&&e.jsx(oe,{mt:2,children:e.jsx("img",{src:C.logoBig,alt:"Logo grand",style:{maxHeight:"100px"}})})]}),e.jsx(ee,{children:e.jsx(Na,{isChecked:C.isDefault,onChange:$=>_({...C,isDefault:$.target.checked}),children:"Dfinir comme template par dfaut"})}),e.jsxs(oe,{p:3,bg:"blue.50",borderRadius:"md",w:"full",children:[e.jsx(k,{fontSize:"xs",fontWeight:"600",mb:2,children:"Variables disponibles:"}),e.jsx(k,{fontSize:"xs",fontFamily:"mono",children:"{{NUM_DEVIS}}, {{TITRE}}, {{MONTANT}}, {{DATE}}, {{DESCRIPTION}}, {{DESTINATAIRE_NOM}}, {{DESTINATAIRE_ADRESSE}}, {{NOTES}}, {{LOGO_BIG}}, {{LOGO_SMALL}}"})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:y.onClose,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:D,children:"Crer"})]})]})]}),e.jsxs(Et,{isOpen:b.isOpen,onClose:b.onClose,size:"2xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsx(Tt,{children:"Modifier le template"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsx(ge,{placeholder:"Nom du template",value:C.name,onChange:$=>_({...C,name:$.target.value})}),e.jsx(Xt,{placeholder:"Description (optionnel)",value:C.description,onChange:$=>_({...C,description:$.target.value})}),e.jsxs(oe,{w:"full",children:[e.jsx(k,{fontSize:"sm",fontWeight:"600",mb:2,children:"Contenu HTML *"}),e.jsx(Xt,{placeholder:"Exemple: <h1>{{TITRE}}</h1><p>Montant: {{MONTANT}} </p>",value:C.htmlContent,onChange:$=>_({...C,htmlContent:$.target.value}),minH:"150px",fontFamily:"mono",fontSize:"xs"})]}),e.jsxs(oe,{w:"full",children:[e.jsx(k,{fontSize:"sm",fontWeight:"600",mb:2,children:"Logo Petit (optionnel)"}),e.jsx(ge,{type:"file",accept:"image/*",onChange:async $=>{const ae=$.target.files[0];if(ae){const he=new FileReader;he.onload=re=>{_({...C,logoSmall:re.target.result})},he.readAsDataURL(ae)}}}),C.logoSmall&&e.jsx(oe,{mt:2,children:e.jsx("img",{src:C.logoSmall,alt:"Logo petit",style:{maxHeight:"50px"}})})]}),e.jsxs(oe,{w:"full",children:[e.jsx(k,{fontSize:"sm",fontWeight:"600",mb:2,children:"Logo Grand (optionnel)"}),e.jsx(ge,{type:"file",accept:"image/*",onChange:async $=>{const ae=$.target.files[0];if(ae){const he=new FileReader;he.onload=re=>{_({...C,logoBig:re.target.result})},he.readAsDataURL(ae)}}}),C.logoBig&&e.jsx(oe,{mt:2,children:e.jsx("img",{src:C.logoBig,alt:"Logo grand",style:{maxHeight:"100px"}})})]}),e.jsx(ee,{children:e.jsx(Na,{isChecked:C.isDefault,onChange:$=>_({...C,isDefault:$.target.checked}),children:"Dfinir comme template par dfaut"})}),e.jsxs(oe,{p:3,bg:"blue.50",borderRadius:"md",w:"full",children:[e.jsx(k,{fontSize:"xs",fontWeight:"600",mb:2,children:"Variables disponibles:"}),e.jsx(k,{fontSize:"xs",fontFamily:"mono",children:"{{NUM_DEVIS}}, {{TITRE}}, {{MONTANT}}, {{DATE}}, {{DESCRIPTION}}, {{DESTINATAIRE_NOM}}, {{DESTINATAIRE_ADRESSE}}, {{NOTES}}, {{LOGO_BIG}}, {{LOGO_SMALL}}"})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:b.onClose,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:P,children:"Mettre  jour"})]})]})]}),e.jsxs(Et,{isOpen:w.isOpen,onClose:w.onClose,size:"4xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",children:[e.jsxs(Tt,{children:["Aperu du template: ",l?.name]}),e.jsx($t,{}),e.jsx(_t,{children:e.jsx(oe,{p:6,bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",dangerouslySetInnerHTML:{__html:d},overflowY:"auto",maxH:"60vh"})}),e.jsx(Vt,{children:e.jsx(Q,{onClick:w.onClose,children:"Fermer"})})]})]})]})},gi={siteUsers:["api/site-users","site-users"],members:["api/members","members"],siteConfig:["api/site-config","site-config"],changelog:["api/changelog","changelog"],retroNews:["api/retro-news","retro-news"],notifications:["api/notifications","notifications"]},_u=()=>"api/site-users",Kb=()=>"api/members",Zg=()=>"api/site-config",Tu=()=>"https://attractive-kindness-rbe-serveurs.up.railway.app",Qb=()=>"https://attractive-kindness-rbe-serveurs.up.railway.app",Xg=()=>"https://attractive-kindness-rbe-serveurs.up.railway.app",hte=()=>"https://attractive-kindness-rbe-serveurs.up.railway.app",Rp=t=>String(t||"").trim().replace(/^\/+|\/+$/g,""),fte=()=>Rp(""),xi=(t,n,r="",i)=>{const l=Rp(r),u=fte(),d=new Set;typeof window<"u"&&window.location?.origin&&window.location.origin.replace(/\/+$/,"");const p=g=>{const x=[Rp(g)];l&&x.push(l);const y=x.filter(Boolean).join("/");y&&d.add(y)},f=g=>{if(!u)return;const x=Rp(g);x.startsWith(`${u}/`)||p(`${u}/${x}`)};return n&&p(n),t.forEach(g=>f(g)),t.forEach(g=>p(g)),Array.from(d)},bm=async(t,n,r)=>{Array.isArray(t)||(t=[t]);const i=[];for(const l of t)try{const u=Rp(l);if(!u)continue;const d=u.startsWith("/")?u:`/${u}`;let p;return n==="GET"?p=await yt.get(d):n==="POST"?p=await yt.post(d,r):n==="PUT"?p=await yt.put(d,r):n==="PATCH"?p=await yt.patch(d,r):n==="DELETE"&&(p=await yt.delete(d)),console.log(` Success with URL: ${d}`),{data:p,headers:{},url:d}}catch(u){i.push(`${l}: ${u.message}`),console.log(` Failed URL ${l}: ${u.message}`)}throw new Error(`All URLs failed: ${i.join(" | ")}`)},Ac=async t=>bm(t,"GET"),xz=async(t,n)=>bm(t,"POST",n),Jb=async(t,n)=>bm(t,"PUT",n),pte=async(t,n)=>bm(t,"PATCH",n),mte=async t=>bm(t,"DELETE");function gte(){const[t,n]=v.useState([]),[r,i]=v.useState([]),[l,u]=v.useState(!0),[d,p]=v.useState(""),[f,g]=v.useState("ALL"),[x,y]=v.useState("ALL"),[b,w]=v.useState(null),[C,_]=v.useState({}),[A,D]=v.useState([]),[P,M]=v.useState(0),{isOpen:N,onOpen:z,onClose:I}=It(),{isOpen:V,onOpen:$,onClose:ae}=It(),he=on(),re=Tn("white","gray.800");v.useEffect(()=>{ce(),Se(),je(),de()},[]);const ce=async()=>{try{u(!0);const Y=(await Ac(xi(gi.siteUsers,_u(),"",Tu()))).data;n(Array.isArray(Y)?Y:Y?.users||[])}catch(R){console.error("Erreur chargement utilisateurs:",R),he({title:"Erreur API",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3})}finally{u(!1)}},Se=async()=>{try{const Y=(await Ac(xi(gi.members,Kb(),"",Qb()),{params:{status:"ACTIVE"}})).data;i(Array.isArray(Y)?Y:Y?.members||[])}catch(R){console.error("Erreur chargement membres:",R),he({title:"Erreur API",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3})}},je=async()=>{try{const R=await Ac(xi(gi.siteUsers,_u(),"stats",Tu()));_(R.data||{})}catch(R){if(console.error("Erreur chargement stats:",R),Array.isArray(t)&&t.length>0){const Y=t.length,q=t.filter(ye=>ye.isActive).length,le=t.filter(ye=>!!ye.linkedMember).length,We=Date.now()-1440*60*1e3,pe=t.filter(ye=>ye.lastLoginAt&&new Date(ye.lastLoginAt).getTime()>=We).length;_({totalUsers:Y,activeUsers:q,linkedUsers:le,recentLogins:pe}),he({title:"Stats calcules localement",description:"Endpoint /site-users/stats indisponible, valeurs estimes  partir des utilisateurs chargs.",status:"info",duration:4e3})}else he({title:"Erreur API",description:`${R.message}${R.urlsTried?`  Test: ${R.urlsTried.join(", ")}`:""}`,status:"error",duration:5e3})}},de=async()=>{try{const Y=(await Ac(xi(gi.retroNews,"","",hte()))).data||[];D(Array.isArray(Y)?Y:[])}catch(R){console.error("Erreur chargement RtroNews:",R),D([])}},G=()=>{ce(),Se(),je()},U=t.filter(R=>{const Y=R.username?.toLowerCase().includes(d.toLowerCase())||R.email?.toLowerCase().includes(d.toLowerCase())||R.firstName?.toLowerCase().includes(d.toLowerCase())||R.lastName?.toLowerCase().includes(d.toLowerCase()),q=f==="ALL"||R.role===f,le=x==="ALL"||x==="ACTIVE"&&R.isActive||x==="INACTIVE"&&!R.isActive;return Y&&q&&le});return e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"md",children:" Gestion des Accs Sites"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Gestion des comptes d'accs aux sites interne et externe"})]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:z,children:"Crer un accs"})]}),e.jsxs(mt,{columns:{base:2,md:3},spacing:4,children:[e.jsx(Pe,{bg:re,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total accs"}),e.jsx(Dt,{color:"blue.500",children:C.totalUsers||0})]})})}),e.jsx(Pe,{bg:re,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Lis aux adhsions"}),e.jsx(Dt,{color:"purple.500",children:C.linkedUsers||0})]})})}),e.jsx(Pe,{bg:re,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Connexions 24h"}),e.jsx(Dt,{color:"orange.500",children:C.recentLogins||0})]})})})]}),A.length>0&&e.jsxs(Pe,{bg:re,children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"sm",children:" RtroNews"}),e.jsxs(ee,{spacing:2,children:[e.jsx(xt,{icon:e.jsx(BM,{}),size:"sm",onClick:()=>M(R=>R===0?A.length-1:R-1),"aria-label":"News prcdente",isDisabled:A.length<=1}),e.jsxs(k,{fontSize:"xs",color:"gray.500",children:[P+1," / ",A.length]}),e.jsx(xt,{icon:e.jsx(Gx,{}),size:"sm",onClick:()=>M(R=>(R+1)%A.length),"aria-label":"News suivante",isDisabled:A.length<=1})]})]})}),e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsx(Te,{size:"md",children:A[P]?.title||"Sans titre"}),A[P]?.date&&e.jsx(k,{fontSize:"sm",color:"gray.500",children:new Date(A[P].date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}),e.jsx(k,{children:A[P]?.content||""}),A[P]?.imageUrl&&e.jsx(Li,{src:A[P].imageUrl,alt:A[P]?.title,maxH:"200px",objectFit:"cover",borderRadius:"md"})]})})]}),e.jsx(Pe,{bg:re,children:e.jsx(ke,{children:e.jsxs(ee,{spacing:4,children:[e.jsxs(zc,{flex:1,children:[e.jsx(Ic,{children:e.jsx(ym,{})}),e.jsx(ge,{placeholder:"Rechercher par nom, email ou identifiant...",value:d,onChange:R=>p(R.target.value)})]}),e.jsxs(ut,{value:f,onChange:R=>g(R.target.value),maxW:"220px",children:[e.jsx("option",{value:"ALL",children:"Tous rles"}),e.jsx("option",{value:"PRESIDENT",children:"Prsident"}),e.jsx("option",{value:"VICE_PRESIDENT",children:"Vice-Prsident"}),e.jsx("option",{value:"TRESORIER",children:"Trsorier"}),e.jsx("option",{value:"SECRETAIRE_GENERAL",children:"Secrtaire Gnral"}),e.jsx("option",{value:"MEMBER",children:"Membre"}),e.jsx("option",{value:"PRESTATAIRE",children:"Prestataire"})]}),e.jsxs(ut,{value:x,onChange:R=>y(R.target.value),maxW:"150px",children:[e.jsx("option",{value:"ALL",children:"Tous statuts"}),e.jsx("option",{value:"ACTIVE",children:"Actif"}),e.jsx("option",{value:"INACTIVE",children:"Inactif"})]}),e.jsx(Q,{leftIcon:e.jsx(Fa,{}),onClick:ce,size:"sm",children:"Actualiser"})]})})}),l?e.jsx(yn,{py:8,children:e.jsxs(J,{spacing:4,children:[e.jsx(pn,{size:"lg"}),e.jsx(k,{children:"Chargement des accs..."})]})}):e.jsx(Pe,{bg:re,children:e.jsxs(ke,{children:[e.jsxs(Fn,{size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Utilisateur"}),e.jsx(_e,{children:"Matricule"}),e.jsx(_e,{children:"Rle"}),e.jsx(_e,{children:"Accs"}),e.jsx(_e,{children:"Adhsion lie"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Dernire connexion"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:U.map(R=>e.jsx(xte,{user:R,onEdit:()=>W(R),onToggleStatus:()=>me(R),onLink:()=>F(R),onViewLogs:()=>fe(R),onDelete:()=>te(R)},R.id))})]}),U.length===0&&e.jsxs(Ut,{status:"info",mt:4,children:[e.jsx(Ht,{}),"Aucun utilisateur trouv avec ces critres"]})]})}),e.jsx(vte,{isOpen:N,onClose:()=>{I(),w(null)},members:r,user:b,onUserSaved:G}),e.jsx(yte,{isOpen:V,onClose:ae,user:b,members:r,onLinked:G})]});function W(R){w(R),z()}async function me(R){try{await pte(xi(gi.siteUsers,_u(),`${R.id}`,Tu()),{isActive:!R.isActive}),he({title:"Succs",description:`Accs ${R.isActive?"dsactiv":"activ"}`,status:"success",duration:3e3}),G()}catch(Y){console.error(Y),he({title:"Erreur",description:`${Y.message}${Y.urlsTried?`  Test: ${Y.urlsTried.join(", ")}`:""}`,status:"error",duration:4e3})}}function F(R){w(R),$()}function fe(R){he({title:"Info",description:`Affichage des logs pour ${R.username}  venir`,status:"info",duration:3e3})}async function te(R){if(window.confirm(`Supprimer dfinitivement l'accs de ${rw(R)} (${R.username}) ?`))try{await mte(xi(gi.siteUsers,_u(),`${R.id}`,Tu())),he({title:"Accs supprim",description:`L'utilisateur ${R.username} a t supprim`,status:"success",duration:3e3}),G()}catch(Y){console.error(Y),he({title:"Erreur",description:`${Y.message}${Y.urlsTried?`  Test: ${Y.urlsTried.join(", ")}`:""}`,status:"error",duration:4e3})}}}function xte({user:t,onEdit:n,onToggleStatus:r,onLink:i,onViewLogs:l,onDelete:u}){const d={PRESIDENT:"Prsident",VICE_PRESIDENT:"Vice-Prsident",TRESORIER:"Trsorier",SECRETAIRE_GENERAL:"Secrtaire Gnral",MEMBER:"Membre"},p=f=>({PRESIDENT:"red",VICE_PRESIDENT:"pink",TRESORIER:"green",SECRETAIRE_GENERAL:"purple",MEMBER:"blue"})[f]||"gray";return e.jsxs(bt,{children:[e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontWeight:"medium",fontSize:"sm",children:rw(t)}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:t.email})]})}),e.jsx(Ee,{children:e.jsx(k,{fontFamily:"mono",fontSize:"sm",children:t.username})}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:p(t.role),size:"sm",children:d[t.role]||t.role})}),e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:1,children:[t.hasInternalAccess&&e.jsx(Qe,{colorScheme:"blue",size:"xs",children:"Interne"}),t.hasExternalAccess&&e.jsx(Qe,{colorScheme:"green",size:"xs",children:"Externe"})]})}),e.jsx(Ee,{children:t.linkedMember?e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontSize:"sm",color:"green.600",children:sw(t.linkedMember)}),t.linkedMember.memberNumber&&e.jsxs(k,{fontSize:"xs",color:"gray.500",children:["#",t.linkedMember.memberNumber]})]}):e.jsxs(Q,{size:"xs",variant:"outline",onClick:i,children:[e.jsx(uJ,{style:{marginRight:"4px"}}),"Fusionner"]})}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:t.isActive?"green":"red",size:"sm",children:t.isActive?"Actif":"Inactif"})}),e.jsx(Ee,{children:e.jsx(k,{fontSize:"xs",children:t.lastLoginAt?new Date(t.lastLoginAt).toLocaleDateString("fr-FR"):"Jamais"})}),e.jsx(Ee,{children:e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(Qu,{}),size:"sm",variant:"ghost"}),e.jsxs(Go,{children:[e.jsx(Dn,{icon:e.jsx(Bs,{}),onClick:n,children:"Modifier"}),e.jsx(Dn,{icon:e.jsx(_l,{}),onClick:l,children:"Logs de connexion"}),e.jsx(Dn,{icon:t.isActive?e.jsx(Ko,{}):e.jsx(Wb,{}),onClick:r,color:t.isActive?"red.500":"green.500",children:t.isActive?"Dsactiver":"Activer"}),e.jsx(Dn,{icon:e.jsx(Qn,{}),onClick:u,color:"red.600",children:"Supprimer"})]})]})})]})}function vte({isOpen:t,onClose:n,members:r,onUserSaved:i,user:l}){const u=!!l,d="access_form_draft",[p,f]=v.useState({username:"",firstName:"",lastName:"",email:"",role:"MEMBER",hasInternalAccess:!0,hasExternalAccess:!1,linkedMemberId:"",generatePassword:!0,customPassword:""}),[g,x]=v.useState(!1),[y,b]=v.useState(!1),w=on(),C=D=>{const P={...p,...D};f(P),b(!0),localStorage.setItem(d,JSON.stringify(P))};v.useEffect(()=>{if(u){const D={username:l?.username||"",firstName:l?.firstName||"",lastName:l?.lastName||"",email:l?.email||"",role:l?.role||"MEMBER",hasInternalAccess:!!l?.hasInternalAccess,hasExternalAccess:!!l?.hasExternalAccess,linkedMemberId:l?.linkedMember?.id||"",generatePassword:!1,customPassword:""};f(D),localStorage.removeItem(d),b(!1)}else if(t){const D=localStorage.getItem(d);if(D)try{const P=JSON.parse(D);f(P),b(!1)}catch(P){console.error("Erreur lors de la restauration des donnes:",P),_()}else _()}},[u,l,t]);const _=()=>{f({username:"",firstName:"",lastName:"",email:"",role:"MEMBER",hasInternalAccess:!0,hasExternalAccess:!1,linkedMemberId:"",generatePassword:!0,customPassword:""}),b(!1),localStorage.removeItem(d)},A=async()=>{try{x(!0);const D={username:p.username,firstName:p.firstName,lastName:p.lastName,email:p.email,role:p.role,hasInternalAccess:p.hasInternalAccess,hasExternalAccess:p.hasExternalAccess,linkedMemberId:p.linkedMemberId||null};if(u)p.customPassword?.trim()&&(D.password=p.customPassword.trim()),await Jb(xi(gi.siteUsers,_u(),`${l.id}`,Tu()),D),w({title:"Accs mis  jour",description:"L'utilisateur a t mis  jour avec succs",status:"success",duration:3e3});else{D.generatePassword=!!p.generatePassword,!p.generatePassword&&p.customPassword&&(D.customPassword=p.customPassword);const M=(await xz(xi(gi.siteUsers,_u(),"",Tu()),D)).data;w({title:"Accs cr",description:M?.temporaryPassword?`Mot de passe temporaire: ${M.temporaryPassword}`:"L'utilisateur a t cr avec succs",status:"success",duration:M?.temporaryPassword?1e4:5e3,isClosable:!0})}localStorage.removeItem(d),_(),i?.(),n()}catch(D){console.error(D),w({title:"Erreur",description:`${D?.response?.data?.message||D.message}${D.urlsTried?`  Test: ${D.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}finally{x(!1)}};return e.jsxs(Et,{isOpen:t,onClose:n,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:u?" Modifier un accs aux sites":" Crer un accs aux sites"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"sm",children:u?"Mettez  jour le profil d'accs. Le matricule est l'identifiant utilis sur le site.":"Crez un compte d'accs aux sites. Le matricule est l'identifiant utilis sur le site."})]}),e.jsxs(mt,{columns:2,spacing:4,w:"full",children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Prnom"}),e.jsx(ge,{value:p.firstName,onChange:D=>C({firstName:D.target.value}),placeholder:"Prnom"})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nom"}),e.jsx(ge,{value:p.lastName,onChange:D=>C({lastName:D.target.value}),placeholder:"Nom"})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Matricule (identifiant de connexion)"}),e.jsx(ge,{value:p.username,onChange:D=>f(P=>({...P,username:D.target.value})),placeholder:"Ex: w.belaidi"}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:"Format recommand: premire lettre du prnom + point + nom"})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Email"}),e.jsx(ge,{type:"email",value:p.email,onChange:D=>f(P=>({...P,email:D.target.value})),placeholder:"email@example.com"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Rle Mtier"}),e.jsxs(ut,{value:p.role,onChange:D=>C({role:D.target.value}),children:[e.jsx("option",{value:"PRESIDENT",children:"Prsident"}),e.jsx("option",{value:"VICE_PRESIDENT",children:"Vice-Prsident"}),e.jsx("option",{value:"TRESORIER",children:"Trsorier"}),e.jsx("option",{value:"SECRETAIRE_GENERAL",children:"Secrtaire Gnral"}),e.jsx("option",{value:"MEMBER",children:"Membre"}),e.jsx("option",{value:"PRESTATAIRE",children:"Prestataire"}),e.jsx("option",{value:"CLIENT",children:"Client"})]}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Le rle mtier est  titre informatif. Les permissions d'accs aux modules sont gres individuellement ci-dessous."})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Lier  une adhsion existante (optionnel)"}),e.jsxs(ut,{value:p.linkedMemberId,onChange:D=>C({linkedMemberId:D.target.value}),children:[e.jsx("option",{value:"",children:"Aucune liaison"}),r.map(D=>e.jsx("option",{value:D.id,children:sw(D)},D.id))]})]}),e.jsx(xn,{}),e.jsxs(J,{align:"start",spacing:3,w:"full",children:[e.jsx(k,{fontWeight:"medium",children:"Autorisations d'accs"}),e.jsxs(ee,{w:"full",justify:"space-between",children:[e.jsx(k,{fontSize:"sm",children:"Accs site interne"}),e.jsx(Jn,{isChecked:p.hasInternalAccess,onChange:D=>f(P=>({...P,hasInternalAccess:D.target.checked}))})]}),e.jsxs(ee,{w:"full",justify:"space-between",children:[e.jsx(k,{fontSize:"sm",children:"Accs site externe"}),e.jsx(Jn,{isChecked:p.hasExternalAccess,onChange:D=>f(P=>({...P,hasExternalAccess:D.target.checked}))})]})]}),!u&&e.jsxs(e.Fragment,{children:[e.jsx(xn,{}),e.jsxs(J,{align:"start",spacing:3,w:"full",children:[e.jsx(k,{fontWeight:"medium",children:"Mot de passe"}),e.jsxs(ee,{w:"full",justify:"space-between",children:[e.jsx(k,{fontSize:"sm",children:"Gnrer automatiquement"}),e.jsx(Jn,{isChecked:p.generatePassword,onChange:D=>f(P=>({...P,generatePassword:D.target.checked}))})]}),!p.generatePassword&&e.jsxs(X,{children:[e.jsx(Z,{children:"Mot de passe personnalis"}),e.jsx(ge,{type:"password",value:p.customPassword,onChange:D=>f(P=>({...P,customPassword:D.target.value})),placeholder:"Minimum 6 caractres"})]})]})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx(xn,{}),e.jsxs(J,{align:"start",spacing:3,w:"full",children:[e.jsx(k,{fontWeight:"medium",children:"Changer le mot de passe (optionnel)"}),e.jsxs(X,{children:[e.jsx(Z,{children:"Nouveau mot de passe"}),e.jsx(ge,{type:"password",value:p.customPassword,onChange:D=>f(P=>({...P,customPassword:D.target.value})),placeholder:"Laissez vide pour ne pas changer"})]})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:n,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:A,isLoading:g,loadingText:u?"Enregistrement...":"Cration...",children:u?"Enregistrer":"Crer l'accs"})]})]})]})}function yte({isOpen:t,onClose:n,user:r,members:i,onLinked:l}){const[u,d]=v.useState(""),[p,f]=v.useState(!1),[g,x]=v.useState(i||[]),y=on();v.useEffect(()=>{t&&(async()=>{try{const _=(await Ac(xi(gi.members,Kb(),"",Qb()))).data,A=Array.isArray(_)?_:_?.members||[];x(A)}catch{console.warn("Chargement membres (fusion) chou, utilisation des props existantes"),x(i||[])}})()},[t]);const b=async()=>{if(!u){y({title:"Erreur",description:"Veuillez slectionner un membre",status:"error",duration:3e3});return}try{f(!0),await xz(xi(gi.siteUsers,_u(),`${r.id}/link-member`,Tu()),{memberId:u}),y({title:"Liaison cre",description:"Accs li  l'adhsion. L'utilisateur verra la page Mon Adhsion aprs actualisation ou reconnexion.",status:"success",duration:5e3}),l?.(),n(),d("")}catch(w){y({title:"Erreur",description:`${w?.response?.data?.message||w.message}${w.urlsTried?`  Test: ${w.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}finally{f(!1)}};return e.jsxs(Et,{isOpen:t,onClose:n,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Fusionner avec une adhsion"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(k,{fontSize:"sm",children:["Fusionner l'accs de ",e.jsx("strong",{children:rw(r)})," avec une adhsion existante."]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Slectionner une adhsion"}),e.jsx(ut,{value:u,onChange:w=>d(w.target.value),placeholder:"Choisir un membre...",children:(g||[]).filter(w=>!w.hasLinkedAccess).map(w=>e.jsxs("option",{value:w.id,children:[sw(w),w.email?` (${w.email})`:""]},w.id))}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:2,children:"Seuls les membres sans accs dj li sont affichs"})]}),e.jsx(ee,{w:"full",justify:"flex-end",children:e.jsx(Q,{size:"sm",variant:"outline",onClick:async()=>{try{const C=(await Ac(xi(gi.members,Kb(),"",Qb()))).data;x(Array.isArray(C)?C:C?.members||[]),y({title:"Liste mise  jour",status:"success",duration:2e3})}catch(w){y({title:"Erreur rafrachissement",description:w.message,status:"error",duration:3e3})}},children:"Actualiser"})})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:n,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:b,isLoading:p,loadingText:"Fusion...",children:"Fusionner"})]})]})]})}function jte(){const{user:t,roles:n}=es(),r=Tn("white","gray.800"),[i,l]=v.useState([]),[u,d]=v.useState(!0),[p,f]=v.useState(null),[g,x]=v.useState({title:"",content:"",excerpt:"",imageUrl:"",author:"",published:!1,featured:!1,showOnExternal:!1}),[y,b]=v.useState(localStorage.getItem("rbe_site_helloasso_url")||"https://www.helloasso.com/associations/retrobus-essonne"),[w,C]=v.useState({title:"",content:"",destinationUrl:""}),{isOpen:_,onOpen:A,onClose:D}=It(),{isOpen:P,onOpen:M,onClose:N}=It(),{isOpen:z,onOpen:I,onClose:V}=It(),{isOpen:$,onOpen:ae,onClose:he}=It(),re=on(),ce=async()=>{try{d(!0);const q=await yt.get("/api/retro-news/admin/all"),le=Array.isArray(q.data)?q.data:[];l(le)}catch(q){console.error("Erreur lors du chargement des RetroNews:",q),l([]),re({title:"Erreur",description:"Impossible de charger les actualits",status:"error",duration:5e3,isClosable:!0})}finally{d(!1)}};v.useEffect(()=>{ce()},[]);const[Se,je]=v.useState({headerBgFocalX:50,headerBgFocalY:50,headerBgSize:"cover",logoWidth:44}),de=async()=>{try{const le=(await Ac(xi(gi.siteConfig,Zg(),"",Xg())))?.data||{};je(We=>({...We,headerBgFocalX:Number.isFinite(le.headerBgFocalX)?le.headerBgFocalX:We.headerBgFocalX,headerBgFocalY:Number.isFinite(le.headerBgFocalY)?le.headerBgFocalY:We.headerBgFocalY,headerBgSize:le.headerBgSize||We.headerBgSize,logoWidth:Number.isFinite(le.logoWidth)?le.logoWidth:We.logoWidth}))}catch(q){console.warn("Chargement site-config (header) chou:",q?.message||q)}};v.useEffect(()=>{P&&de()},[P]);const G=async()=>{try{const q={headerBgFocalX:Se.headerBgFocalX,headerBgFocalY:Se.headerBgFocalY,headerBgSize:Se.headerBgSize,logoWidth:Se.logoWidth};await Jb(xi(gi.siteConfig,Zg(),"",Xg()),q),re({title:"Configuration du header mise  jour",status:"success",duration:2500}),N()}catch(q){re({title:"Erreur sauvegarde Header",description:`${q.message}${q.urlsTried?`  Test: ${q.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}},U=async()=>{try{if(!y||!/^https?:\/\//i.test(y)){re({title:"Lien invalide",description:"Fournissez une URL complte commenant par http(s)://",status:"error",duration:3e3});return}localStorage.setItem("rbe_site_helloasso_url",y);const q=xi(gi.siteConfig,Zg(),"",Xg()),le=await Jb(q,{helloAssoUrl:y});return re({title:"Lien mis  jour",description:'Le bouton "Soutenir" utilisera le nouveau lien.',status:"success",duration:3e3}),le}catch(q){console.error("Erreur sauvegarde HelloAsso:",q),re({title:"Erreur",description:`${q.message}${q.urlsTried?`  Test: ${q.urlsTried.join(", ")}`:""}`,status:"error",duration:6e3})}},W=async()=>{try{const q=xi(gi.siteConfig,Zg(),"",Xg()),We=(await Ac(q))?.data||{};re({title:"Config dtecte",description:`helloAssoUrl=${We.helloAssoUrl||"non dfini"}`,status:"success",duration:3e3})}catch(q){re({title:"Config indisponible",description:`${q.message}${q.urlsTried?`  Test: ${q.urlsTried.join(", ")}`:""}`,status:"warning",duration:5e3})}},me=async()=>{try{if(!w.title.trim()||!w.content.trim()){re({title:"Erreur de validation",description:"Le titre et le contenu sont requis",status:"error",duration:3e3,isClosable:!0});return}if(navigator.share)await navigator.share({title:w.title,text:w.content,url:w.destinationUrl||window.location.href});else{const q=`${w.title}

${w.content}

${w.destinationUrl||""}`,le=encodeURIComponent(q),We=encodeURIComponent(`RtroActus: ${w.title}`);window.location.href=`mailto:?subject=${We}&body=${le}`}re({title:"Succs",description:"RtroActus diffuse avec succs",status:"success",duration:3e3,isClosable:!0}),C({title:"",content:"",destinationUrl:""}),he()}catch(q){console.error("Erreur diffusion:",q),re({title:"Erreur",description:"Impossible de diffuser la RtroActus",status:"error",duration:3e3,isClosable:!0})}},F=()=>{x({title:"",content:"",excerpt:"",imageUrl:"",author:"",published:!1,featured:!1,showOnExternal:!1}),f(null)},fe=()=>{F(),A()},te=q=>{f(q),x({title:q.title||"",content:q.content||"",excerpt:q.excerpt||"",imageUrl:q.imageUrl||"",author:q.author||"",published:!!q.published,featured:!!q.featured,showOnExternal:!!q.showOnExternal}),A()},R=async()=>{try{if(!g.title.trim()||!g.content.trim()){re({title:"Erreur de validation",description:"Le titre et le contenu sont requis",status:"error",duration:3e3,isClosable:!0});return}const q={title:g.title.trim(),content:g.content.trim(),excerpt:g.excerpt?g.excerpt.trim():null,imageUrl:g.imageUrl||null,author:g.author||t?.name||t?.email||"Admin",published:g.published,featured:g.featured,showOnExternal:g.showOnExternal};p?(await yt.put(`/api/retro-news/${p.id}`,q),re({title:"Succs",description:"Actualit mise  jour avec succs",status:"success",duration:3e3,isClosable:!0})):(await yt.post("/api/retro-news",q),re({title:"Succs",description:"Actualit cre avec succs",status:"success",duration:3e3,isClosable:!0})),ce(),D()}catch(q){console.error("Erreur lors de la sauvegarde:",q),re({title:"Erreur",description:q.response?.data?.error||q.message||"Impossible de sauvegarder",status:"error",duration:5e3,isClosable:!0})}},Y=async q=>{if(window.confirm("tes-vous sr de vouloir supprimer cette actualit ?"))try{await yt.delete(`/api/retro-news/${q}`),re({title:"Succs",description:"Actualit supprime avec succs",status:"success",duration:3e3,isClosable:!0}),ce()}catch(le){console.error("Erreur lors de la suppression:",le),re({title:"Erreur",description:le.response?.data?.error||le.message||"Impossible de supprimer",status:"error",duration:5e3,isClosable:!0})}};return u?e.jsx(yn,{minH:"400px",children:e.jsxs(J,{children:[e.jsx(pn,{size:"xl",color:"var(--rbe-red)"}),e.jsx(k,{children:"Chargement des actualits..."})]})}):e.jsx(ei,{maxW:"container.xl",py:8,children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(Te,{size:"xl",display:"flex",alignItems:"center",children:[e.jsx(fh,{style:{marginRight:"12px"}}),"Gestion du Site Web"]}),e.jsxs(ga,{variant:"enclosed",colorScheme:"blue",children:[e.jsxs(xa,{children:[e.jsx(hn,{children:" Accs aux Sites"}),e.jsx(hn,{children:" RtroNews"}),e.jsx(hn,{children:" Configuration"}),e.jsx(hn,{children:" Modles de Documents"})]}),e.jsxs(va,{children:[e.jsx(fn,{children:e.jsx(gte,{})}),e.jsxs(fn,{children:[e.jsxs(sr,{mb:6,align:"center",children:[e.jsx(Te,{size:"lg",children:" Crer des Actualits"}),e.jsx(G1,{}),e.jsx(Q,{leftIcon:e.jsx(mz,{}),colorScheme:"blue",onClick:fe,children:"Nouvelle actualit"})]}),e.jsxs(Ut,{status:"info",mb:6,children:[e.jsx(Ht,{}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",children:" Comment a marche ?"}),e.jsxs(k,{fontSize:"sm",children:["Crez vos actualits ici. Elles s'afficheront ensuite dans la modale ",e.jsx("strong",{children:"RtroActus"})," sur le Dashboard pour tre partages."]})]})]}),e.jsx(J,{spacing:4,align:"stretch",children:i.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucune actualit. Crez la premire !"]}):i.map(q=>e.jsxs(Pe,{variant:"outline",children:[e.jsx(zt,{pb:2,children:e.jsxs(sr,{align:"start",justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:1,flex:1,children:[e.jsx(Te,{size:"sm",children:q.title}),e.jsxs(ee,{spacing:2,fontSize:"xs",children:[q.published?e.jsx(Qe,{colorScheme:"green",children:" Publi"}):e.jsx(Qe,{colorScheme:"gray",children:" Brouillon"}),q.featured&&e.jsx(Qe,{colorScheme:"purple",children:" Vedette"}),q.showOnExternal&&e.jsx(Qe,{colorScheme:"blue",children:" Externe"})]})]}),e.jsxs(ee,{spacing:1,children:[e.jsx(xt,{icon:e.jsx(pz,{}),size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>te(q),"aria-label":"Modifier"}),e.jsx(xt,{icon:e.jsx(gz,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:()=>Y(q.id),"aria-label":"Supprimer"})]})]})}),e.jsxs(ke,{pt:0,children:[q.excerpt&&e.jsxs(k,{fontSize:"sm",color:"gray.600",mb:2,children:[e.jsx("strong",{children:"Rsum:"})," ",q.excerpt]}),e.jsx(k,{fontSize:"sm",noOfLines:2,color:"gray.700",children:q.content})]})]},q.id))})]}),e.jsx(fn,{children:e.jsxs(mt,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(Pe,{bg:r,children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:" Pages et contenu"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsx(Q,{leftIcon:e.jsx(Bs,{}),size:"sm",variant:"outline",onClick:M,children:"Modifier le Header"}),e.jsx(Q,{leftIcon:e.jsx(Bs,{}),size:"sm",variant:"outline",children:"Grer les vnements"}),e.jsx(Q,{leftIcon:e.jsx(Bs,{}),size:"sm",variant:"outline",children:'Mettre  jour " propos"'}),e.jsx(xn,{my:2}),e.jsx(Te,{size:"xs",children:`Bouton "Soutenir l'association" (Navbar externe)`}),e.jsx(k,{fontSize:"xs",color:"gray.600",children:"Configure le lien HelloAsso utilis sur la navbar du site public."}),e.jsxs(ee,{children:[e.jsx(ge,{value:y,onChange:q=>b(q.target.value),placeholder:"https://www.helloasso.com/associations/retrobus-essonne"}),e.jsx(Q,{size:"sm",colorScheme:"blue",onClick:U,children:"Enregistrer"}),e.jsx(Q,{size:"sm",variant:"outline",onClick:W,children:"Tester"})]})]})})]}),e.jsxs(Pe,{bg:r,children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:" Configuration"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsx(Q,{leftIcon:e.jsx(iJ,{}),size:"sm",variant:"outline",children:"Notifications Flash"}),e.jsx(Q,{leftIcon:e.jsx($l,{}),size:"sm",variant:"outline",children:"Configuration Newsletter"}),e.jsx(Q,{leftIcon:e.jsx(Qu,{}),size:"sm",variant:"outline",children:"Paramtres gnraux"}),e.jsx(xn,{my:2}),e.jsx(Q,{leftIcon:e.jsx($l,{}),size:"sm",variant:"outline",colorScheme:"purple",onClick:I,children:" Grer les templates d'email"})]})})]}),e.jsxs(Pe,{bg:r,children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:" Diffusion RtroActus"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsx(k,{fontSize:"xs",color:"gray.600",children:"Partagez une actualit sur le site externe"}),e.jsx(Q,{leftIcon:e.jsx(tJ,{}),size:"sm",variant:"outline",colorScheme:"orange",onClick:ae,children:" Diffuser une RtroActus"})]})})]})]})}),e.jsx(fn,{children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",mb:2,children:" Gestion des Modles de Documents"}),e.jsx(k,{color:"gray.600",children:"Crez et grez les templates HTML pour vos devis et factures avec variables personnalisables"})]}),e.jsx(bte,{})]})})]})]}),e.jsxs(Et,{isOpen:z,onClose:V,size:"4xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Gestion des Templates d'Email"}),e.jsx($t,{}),e.jsx(_t,{maxH:"80vh",overflowY:"auto",children:e.jsx(ute,{token:localStorage.getItem("token")})})]})]}),e.jsxs(Et,{isOpen:P,onClose:N,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Modifier le Header"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Image de fond"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(Ut,{status:"info",fontSize:"sm",children:[e.jsx(Ht,{}),"Pour modifier l'image : ditez manuellement ",e.jsx("strong",{children:"externe/public/assets/header.jpg"})]}),e.jsx(ee,{children:e.jsxs(X,{maxW:"220px",children:[e.jsx(Z,{children:"Taille d'affichage"}),e.jsxs(ut,{value:Se.headerBgSize,onChange:q=>je(le=>({...le,headerBgSize:q.target.value})),children:[e.jsx("option",{value:"cover",children:"Cover (remplit tout)"}),e.jsx("option",{value:"contain",children:"Contain (contient tout)"})]})]})}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:2,children:"Point focal (cliquez/glissez pour ajuster)"}),e.jsx(oe,{position:"relative",borderRadius:"md",overflow:"hidden",border:"1px solid",borderColor:"gray.200",w:"100%",h:"180px",style:{backgroundImage:`url(/assets/header.jpg?t=${Date.now()})`,backgroundSize:Se.headerBgSize||"cover",backgroundPosition:`${Se.headerBgFocalX}% ${Se.headerBgFocalY}%`},onMouseDown:q=>{const le=q.currentTarget.getBoundingClientRect(),We=(q.clientX-le.left)/le.width*100,pe=(q.clientY-le.top)/le.height*100;je(ye=>({...ye,headerBgFocalX:Math.round(We),headerBgFocalY:Math.round(pe)}))},onMouseMove:q=>{if(q.buttons!==1)return;const le=q.currentTarget.getBoundingClientRect(),We=(q.clientX-le.left)/le.width*100,pe=(q.clientY-le.top)/le.height*100;je(ye=>({...ye,headerBgFocalX:Math.round(Math.max(0,Math.min(100,We))),headerBgFocalY:Math.round(Math.max(0,Math.min(100,pe)))}))},children:e.jsx(oe,{position:"absolute",left:`calc(${Se.headerBgFocalX}% - 6px)`,top:`calc(${Se.headerBgFocalY}% - 6px)`,w:"12px",h:"12px",borderRadius:"full",bg:"var(--rbe-red)",border:"2px solid white",boxShadow:"sm",pointerEvents:"none"})}),e.jsx(ee,{mt:2,fontSize:"xs",color:"gray.500",children:e.jsxs(k,{children:["Position: ",Se.headerBgFocalX,"% , ",Se.headerBgFocalY,"%"]})})]})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Logo"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(Ut,{status:"info",fontSize:"sm",children:[e.jsx(Ht,{}),"Pour modifier le logo : ditez manuellement les fichiers dans ",e.jsx("strong",{children:"externe/src/assets/"})]}),e.jsx(ee,{children:e.jsxs(X,{maxW:"240px",children:[e.jsx(Z,{children:"Hauteur du logo (px)"}),e.jsx(ge,{type:"number",min:24,max:240,value:Se.logoWidth,onChange:q=>je(le=>({...le,logoWidth:parseInt(q.target.value||"44",10)}))})]})})]})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:N,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:G,children:"Enregistrer"})]})]})]}),e.jsxs(Et,{isOpen:_,onClose:D,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:p?" Modifier l'actualit":" Nouvelle actualit"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{value:g.title,onChange:q=>x(le=>({...le,title:q.target.value})),placeholder:"Titre de l'actualit"})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Contenu"}),e.jsx(Xt,{value:g.content,onChange:q=>x(le=>({...le,content:q.target.value})),placeholder:"Contenu dtaill...",minH:"150px"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Rsum court (pour affichage liste)"}),e.jsx(Xt,{value:g.excerpt,onChange:q=>x(le=>({...le,excerpt:q.target.value})),placeholder:"Courte description",minH:"60px"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Auteur"}),e.jsx(ge,{value:g.author,onChange:q=>x(le=>({...le,author:q.target.value})),placeholder:"Nom de l'auteur"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"URL image (optionnel)"}),e.jsx(ge,{value:g.imageUrl,onChange:q=>x(le=>({...le,imageUrl:q.target.value})),placeholder:"https://...",type:"url"})]}),e.jsxs(J,{align:"stretch",spacing:3,borderTop:"1px solid",borderColor:"gray.200",pt:4,children:[e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:"0",flex:1,children:"Publier"}),e.jsx(Jn,{isChecked:g.published,onChange:q=>x(le=>({...le,published:q.target.checked}))})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:"0",flex:1,children:"Vedette (priorit d'affichage)"}),e.jsx(Jn,{isChecked:g.featured,onChange:q=>x(le=>({...le,featured:q.target.checked}))})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:"0",flex:1,children:"Afficher sur site externe"}),e.jsx(Jn,{isChecked:g.showOnExternal,onChange:q=>x(le=>({...le,showOnExternal:q.target.checked}))})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:D,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:R,children:"Enregistrer"})]})]})]}),e.jsxs(Et,{isOpen:$,onClose:he,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Diffuser une RtroActus"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{placeholder:"Titre de l'actualit...",value:w.title,onChange:q=>C(le=>({...le,title:q.target.value}))})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Contenu"}),e.jsx(Xt,{placeholder:"Contenu  partager...",value:w.content,onChange:q=>C(le=>({...le,content:q.target.value})),rows:6})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"URL de destination (optionnelle)"}),e.jsx(ge,{type:"url",placeholder:"https://...",value:w.destinationUrl,onChange:q=>C(le=>({...le,destinationUrl:q.target.value}))})]}),e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsx(k,{fontSize:"sm",children:"Votre RtroActus sera partage via email ou les fonctions de partage disponibles"})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:he,children:"Annuler"}),e.jsx(Q,{colorScheme:"orange",onClick:me,children:" Diffuser"})]})]})]})]})})}const bte=()=>e.jsx(dte,{}),_j={getByMember:t=>yt.get(`/api/documents/member/${t}`),delete:t=>yt.delete(`/api/documents/${t}`),updateStatus:(t,n)=>yt.put(`/api/documents/${t}/status`,n),getExpiring:(t=60)=>yt.get(`/api/documents/expiring?days=${t}`)},Kg={getAll:()=>yt.get("/newsletter"),create:t=>yt.post("/newsletter",t),delete:t=>yt.delete(`/newsletter/${t}`),updateStatus:(t,n)=>yt.put(`/newsletter/${t}/status`,{status:n}),getStats:()=>yt.get("/newsletter/stats"),export:(t="csv")=>yt.get(`/newsletter/export?format=${t}`),campaigns:{getAll:t=>yt.get("/newsletter/campaigns",{params:t}),getById:t=>yt.get(`/newsletter/campaigns/${t}`),create:t=>yt.post("/newsletter/campaigns",t),update:(t,n)=>yt.put(`/newsletter/campaigns/${t}`,n),delete:t=>yt.delete(`/newsletter/campaigns/${t}`),preview:t=>yt.get(`/newsletter/campaigns/${t}/preview`),sendTest:(t,n)=>yt.post(`/newsletter/campaigns/${t}/test`,{email:n}),prepare:t=>yt.post(`/newsletter/campaigns/${t}/prepare`),send:t=>yt.post(`/newsletter/campaigns/${t}/send`),getStats:t=>yt.get(`/newsletter/campaigns/${t}/stats`)}},Tj={PIECES_DETACHEES:"Pices dtaches",CONSOMMABLES:"Consommables",OUTILLAGE:"Outillage",EQUIPEMENT:"quipement",DOCUMENTATION:"Documentation",MERCHANDISING:"Merchandising",FOURNITURES:"Fournitures",SECURITE:"Scurit",GENERAL:"Gnral"},Aj={PIECE:"Pice",KG:"Kg",LITRE:"Litre",METRE:"Mtre",PAQUET:"Paquet",BOITE:"Bote",ROULEAU:"Rouleau",SET:"Set",AUTRE:"Autre"},TA={AVAILABLE:"Disponible",LOW_STOCK:"Stock bas",OUT_OF_STOCK:"Rupture",DISCONTINUED:"Discontinu",RESERVED:"Rserv"},Ste={AVAILABLE:"green",LOW_STOCK:"orange",OUT_OF_STOCK:"red",DISCONTINUED:"gray",RESERVED:"blue"};function wte(){const[t,n]=v.useState([]),[r,i]=v.useState({}),[l,u]=v.useState(!0),[d,p]=v.useState({search:"",category:"ALL",status:"ALL",lowStock:!1}),[f,g]=v.useState(null),[x,y]=v.useState({reference:"",name:"",description:"",category:"GENERAL",subcategory:"",quantity:0,minQuantity:0,unit:"PIECE",location:"",supplier:"",purchasePrice:"",salePrice:"",notes:""}),[b,w]=v.useState({type:"IN",quantity:1,reason:"",notes:""}),[C,_]=v.useState(null),A=on(),{isOpen:D,onOpen:P,onClose:M}=It(),{isOpen:N,onOpen:z,onClose:I}=It(),{isOpen:V,onOpen:$,onClose:ae}=It(),he=v.useRef();v.useEffect(()=>{re(),ce()},[d]);const re=async()=>{try{u(!0);const te=new URLSearchParams;d.search&&te.append("search",d.search),d.category!=="ALL"&&te.append("category",d.category),d.status!=="ALL"&&te.append("status",d.status),d.lowStock&&te.append("lowStock","true");const R=await yt.get(`/api/stocks?${te.toString()}`),Y=R?.stocks??(Array.isArray(R)?R:[]);n(Y)}catch(te){console.error("Erreur lors du chargement des stocks:",te),n([]),A({title:"Stocks indisponibles",description:"LAPI des stocks nest pas encore prte ou a renvoy une erreur",status:"warning",duration:3e3})}finally{u(!1)}},ce=async()=>{try{const te=await yt.get("/api/stocks/stats");i(te||{})}catch(te){console.error("Erreur lors du chargement des statistiques:",te),i({})}},Se=()=>{g(null),y({reference:"",name:"",description:"",category:"GENERAL",subcategory:"",quantity:0,minQuantity:0,unit:"PIECE",location:"",supplier:"",purchasePrice:"",salePrice:"",notes:""}),P()},je=te=>{g(te),y({reference:te.reference||"",name:te.name||"",description:te.description||"",category:te.category||"GENERAL",subcategory:te.subcategory||"",quantity:te.quantity||0,minQuantity:te.minQuantity||0,unit:te.unit||"PIECE",location:te.location||"",supplier:te.supplier||"",purchasePrice:te.purchasePrice||"",salePrice:te.salePrice||"",notes:te.notes||""}),P()},de=async()=>{try{const te=f?"put":"post",R=f?`/api/stocks/${f.id}`:"/api/stocks";await yt[te](R,x),A({title:"Succs",description:`Article ${f?"modifi":"cr"} avec succs`,status:"success",duration:3e3}),M(),re(),ce()}catch(te){console.error("Erreur lors de la sauvegarde:",te),A({title:"Erreur",description:"Impossible de sauvegarder l'article",status:"error",duration:3e3})}},G=async()=>{if(C)try{await yt.delete(`/api/stocks/${C.id}`),A({title:"Succs",description:"Article supprim avec succs",status:"success",duration:3e3}),ae(),_(null),re(),ce()}catch(te){console.error("Erreur lors de la suppression:",te),A({title:"Erreur",description:"Impossible de supprimer l'article",status:"error",duration:3e3})}},U=async()=>{if(C)try{await yt.post(`/api/stocks/${C.id}/movement`,b),A({title:"Succs",description:"Mouvement enregistr avec succs",status:"success",duration:3e3}),I(),w({type:"IN",quantity:1,reason:"",notes:""}),re(),ce()}catch(te){console.error("Erreur lors du mouvement:",te),A({title:"Erreur",description:te.response?.data?.error||"Impossible d'enregistrer le mouvement",status:"error",duration:3e3})}},W=te=>{_(te),w({type:"IN",quantity:1,reason:"",notes:""}),z()},me=te=>{_(te),$()},F={totalItems:r.totalItems||0,totalQuantity:r.totalQuantity||0,lowStockCount:r.lowStockCount||0,outOfStockCount:r.outOfStockCount||0},fe=()=>e.jsxs(oe,{children:[e.jsxs(mt,{columns:{base:1,md:4},spacing:4,mb:6,children:[e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Articles totaux"}),e.jsx(Dt,{children:F.totalItems}),e.jsxs(Mi,{children:[e.jsx(mh,{style:{display:"inline",marginRight:"4px"}}),"Articles rfrencs"]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Quantit totale"}),e.jsx(Dt,{children:F.totalQuantity}),e.jsxs(Mi,{children:[e.jsx(X1,{style:{display:"inline",marginRight:"4px"}}),"Units en stock"]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Stock bas"}),e.jsx(Dt,{color:"orange.500",children:F.lowStockCount}),e.jsxs(Mi,{children:[e.jsx(th,{style:{display:"inline",marginRight:"4px"}})," rapprovisionner"]})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Ruptures"}),e.jsx(Dt,{color:"red.500",children:F.outOfStockCount}),e.jsxs(Mi,{children:[e.jsx(Fa,{style:{display:"inline",marginRight:"4px"}}),"Stock puis"]})]})})})]}),e.jsx(Pe,{mb:6,children:e.jsx(ke,{children:e.jsxs(ee,{spacing:4,wrap:"wrap",children:[e.jsx(ge,{placeholder:"Rechercher...",value:d.search,onChange:te=>p(R=>({...R,search:te.target.value})),maxW:"300px"}),e.jsxs(ut,{value:d.category,onChange:te=>p(R=>({...R,category:te.target.value})),maxW:"200px",children:[e.jsx("option",{value:"ALL",children:"Toutes catgories"}),Object.entries(Tj).map(([te,R])=>e.jsx("option",{value:te,children:R},te))]}),e.jsxs(ut,{value:d.status,onChange:te=>p(R=>({...R,status:te.target.value})),maxW:"200px",children:[e.jsx("option",{value:"ALL",children:"Tous statuts"}),Object.entries(TA).map(([te,R])=>e.jsx("option",{value:te,children:R},te))]}),e.jsx(Q,{variant:d.lowStock?"solid":"outline",colorScheme:"orange",onClick:()=>p(te=>({...te,lowStock:!te.lowStock})),children:"Stock bas uniquement"})]})})}),e.jsx(Pe,{children:e.jsx(ke,{children:e.jsxs(Fn,{variant:"simple",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Rfrence"}),e.jsx(_e,{children:"Nom"}),e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{children:"Quantit"}),e.jsx(_e,{children:"Unit"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Emplacement"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:l?e.jsx(bt,{children:e.jsx(Ee,{colSpan:8,textAlign:"center",children:"Chargement..."})}):t.length===0?e.jsx(bt,{children:e.jsx(Ee,{colSpan:8,textAlign:"center",children:"Aucun article trouv"})}):t.map(te=>e.jsxs(bt,{children:[e.jsx(Ee,{children:te.reference||"-"}),e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"medium",children:te.name}),te.description&&e.jsx(k,{fontSize:"sm",color:"gray.600",noOfLines:1,children:te.description})]})}),e.jsx(Ee,{children:Tj[te.category]}),e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{color:te.quantity<=te.minQuantity?"red.500":"inherit",fontWeight:te.quantity<=te.minQuantity?"bold":"normal",children:te.quantity}),te.minQuantity>0&&e.jsxs(k,{fontSize:"xs",color:"gray.500",children:["Min: ",te.minQuantity]})]})}),e.jsx(Ee,{children:Aj[te.unit]}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:Ste[te.status],children:TA[te.status]})}),e.jsx(Ee,{children:te.location||"-"}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:2,children:[e.jsx(xt,{icon:e.jsx(Vb,{}),size:"sm",variant:"outline",onClick:()=>je(te),"aria-label":"Modifier"}),e.jsx(xt,{icon:e.jsx(nJ,{}),size:"sm",colorScheme:"green",variant:"outline",onClick:()=>W(te),"aria-label":"Mouvement de stock"}),e.jsx(xt,{icon:e.jsx(Qn,{}),size:"sm",colorScheme:"red",variant:"outline",onClick:()=>me(te),"aria-label":"Supprimer"})]})})]},te.id))})]})})}),e.jsxs(Et,{isOpen:D,onClose:M,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:f?"Modifier l'article":"Nouvel article"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(ee,{spacing:4,w:"full",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Rfrence"}),e.jsx(ge,{value:x.reference,onChange:te=>y(R=>({...R,reference:te.target.value})),placeholder:"REF-001"})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nom"}),e.jsx(ge,{value:x.name,onChange:te=>y(R=>({...R,name:te.target.value})),placeholder:"Nom de l'article"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:x.description,onChange:te=>y(R=>({...R,description:te.target.value})),placeholder:"Description dtaille"})]}),e.jsxs(ee,{spacing:4,w:"full",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Catgorie"}),e.jsx(ut,{value:x.category,onChange:te=>y(R=>({...R,category:te.target.value})),children:Object.entries(Tj).map(([te,R])=>e.jsx("option",{value:te,children:R},te))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Sous-catgorie"}),e.jsx(ge,{value:x.subcategory,onChange:te=>y(R=>({...R,subcategory:te.target.value})),placeholder:"Sous-catgorie"})]})]}),e.jsxs(ee,{spacing:4,w:"full",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Quantit"}),e.jsx(Ln,{value:x.quantity,onChange:te=>y(R=>({...R,quantity:parseInt(te)||0})),children:e.jsx(On,{})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Quantit minimale"}),e.jsx(Ln,{value:x.minQuantity,onChange:te=>y(R=>({...R,minQuantity:parseInt(te)||0})),children:e.jsx(On,{})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Unit"}),e.jsx(ut,{value:x.unit,onChange:te=>y(R=>({...R,unit:te.target.value})),children:Object.entries(Aj).map(([te,R])=>e.jsx("option",{value:te,children:R},te))})]})]}),e.jsxs(ee,{spacing:4,w:"full",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Emplacement"}),e.jsx(ge,{value:x.location,onChange:te=>y(R=>({...R,location:te.target.value})),placeholder:"tagre A1, Atelier..."})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Fournisseur"}),e.jsx(ge,{value:x.supplier,onChange:te=>y(R=>({...R,supplier:te.target.value})),placeholder:"Nom du fournisseur"})]})]}),e.jsxs(ee,{spacing:4,w:"full",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Prix d'achat ()"}),e.jsx(Ln,{value:x.purchasePrice,onChange:te=>y(R=>({...R,purchasePrice:te})),precision:2,children:e.jsx(On,{})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Prix de vente ()"}),e.jsx(Ln,{value:x.salePrice,onChange:te=>y(R=>({...R,salePrice:te})),precision:2,children:e.jsx(On,{})})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Notes"}),e.jsx(Xt,{value:x.notes,onChange:te=>y(R=>({...R,notes:te.target.value})),placeholder:"Notes diverses"})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:M,children:"Annuler"}),e.jsx(Q,{colorScheme:"teal",onClick:de,children:f?"Modifier":"Crer"})]})]})]}),e.jsxs(Et,{isOpen:N,onClose:I,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsxs(Tt,{children:["Mouvement de stock - ",C?.name]}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Type de mouvement"}),e.jsxs(ut,{value:b.type,onChange:te=>w(R=>({...R,type:te.target.value})),children:[e.jsx("option",{value:"IN",children:"Entre (IN)"}),e.jsx("option",{value:"OUT",children:"Sortie (OUT)"}),e.jsx("option",{value:"ADJUSTMENT",children:"Correction (ADJUSTMENT)"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Quantit"}),e.jsx(Ln,{value:b.quantity,onChange:te=>w(R=>({...R,quantity:parseInt(te)||1})),children:e.jsx(On,{})}),C&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Stock actuel: ",C.quantity," ",Aj[C.unit]]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Raison"}),e.jsx(ge,{value:b.reason,onChange:te=>w(R=>({...R,reason:te.target.value})),placeholder:"Achat, utilisation, correction..."})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Notes"}),e.jsx(Xt,{value:b.notes,onChange:te=>w(R=>({...R,notes:te.target.value})),placeholder:"Notes sur ce mouvement"})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:I,children:"Annuler"}),e.jsx(Q,{colorScheme:"teal",onClick:U,children:"Enregistrer"})]})]})]}),e.jsx(OX,{isOpen:V,onClose:ae,leastDestructiveRef:he,children:e.jsx(At,{children:e.jsxs(BX,{children:[e.jsx(Tt,{children:"Confirmer la suppression"}),e.jsxs(_t,{children:[`tes-vous sr de vouloir supprimer l'article "`,C?.name,'" ? Cette action est irrversible.']}),e.jsxs(Vt,{children:[e.jsx(Q,{ref:he,onClick:ae,children:"Annuler"}),e.jsx(Q,{colorScheme:"red",onClick:G,ml:3,children:"Supprimer"})]})]})})})]});return e.jsx(Bh,{title:"Gestion des stocks",subtitle:"Inventaire et matriel de l'association",sections:[{id:"inventory",label:"Inventaire",icon:mh,render:fe}],defaultSectionId:"inventory",sidebarTitle:"Stocks",sidebarSubtitle:"Pilotage des ressources",sidebarTitleIcon:mh,versionLabel:"Stocks v2",headerActions:[e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"teal",onClick:Se,children:"Nouvel article"},"create")]})}const Rj={info:{label:"Information",color:"blue",icon:ote},warning:{label:"Attention",color:"orange",icon:CA},success:{label:"Succs",color:"green",icon:ste},error:{label:"Erreur",color:"red",icon:CA}};function Cte(){const[t,n]=v.useState([]),[r,i]=v.useState(!0),[l,u]=v.useState(null),[d,p]=v.useState({content:"",type:"info",active:!0,showOnExternal:!1,expiresAt:""}),{isOpen:f,onOpen:g,onClose:x}=It(),y=on(),b=Tn("white","gray.700"),w=Tn("gray.200","gray.600"),C=async()=>{try{i(!0);const I=await yt.get("/flashes");I.data&&Array.isArray(I.data)?n(I.data):(console.warn("Rponse inattendue de l'API:",I.data),n([]))}catch(I){console.error("Erreur lors du chargement des flashs:",I),n([]),y({title:"Erreur",description:"Impossible de charger les flashs",status:"error",duration:3e3,isClosable:!0})}finally{i(!1)}};v.useEffect(()=>{C()},[]);const _=()=>{p({content:"",type:"info",active:!0,showOnExternal:!1,expiresAt:""}),u(null)},A=()=>{_(),g()},D=I=>{u(I),p({content:I.content||"",type:I.type||"info",active:I.active!==void 0?I.active:!0,showOnExternal:I.showOnExternal||!1,expiresAt:I.expiresAt?new Date(I.expiresAt).toISOString().slice(0,16):""}),g()},P=async()=>{try{if(!d.content.trim()){y({title:"Erreur de validation",description:"Le contenu du flash est requis",status:"error",duration:3e3,isClosable:!0});return}const I={...d,expiresAt:d.expiresAt||null};l?(await yt.put(`/flashes/${l.id}`,I),y({title:"Succs",description:"Flash mis  jour avec succs",status:"success",duration:3e3,isClosable:!0})):(await yt.post("/flashes",I),y({title:"Succs",description:"Flash cr avec succs",status:"success",duration:3e3,isClosable:!0})),C(),x()}catch(I){console.error("Erreur lors de la sauvegarde:",I),y({title:"Erreur",description:"Impossible de sauvegarder le flash",status:"error",duration:3e3,isClosable:!0})}},M=async I=>{try{await yt.patch(`/flashes/${I.id}/toggle`),y({title:"Succs",description:`Flash ${I.active?"dsactiv":"activ"}`,status:"success",duration:2e3,isClosable:!0}),C()}catch(V){console.error("Erreur lors du toggle:",V),y({title:"Erreur",description:"Impossible de modifier le statut",status:"error",duration:3e3,isClosable:!0})}},N=async I=>{if(window.confirm("tes-vous sr de vouloir supprimer ce flash ?"))try{await yt.delete(`/flashes/${I}`),y({title:"Succs",description:"Flash supprim avec succs",status:"success",duration:3e3,isClosable:!0}),C()}catch(V){console.error("Erreur lors de la suppression:",V),y({title:"Erreur",description:"Impossible de supprimer le flash",status:"error",duration:3e3,isClosable:!0})}},z=I=>I.expiresAt?new Date(I.expiresAt)<new Date:!1;return r?e.jsx(yn,{minH:"400px",children:e.jsxs(J,{children:[e.jsx(pn,{size:"xl",color:"var(--rbe-red)"}),e.jsx(k,{children:"Chargement des flashs..."})]})}):e.jsxs(oe,{p:6,children:[e.jsxs(sr,{mb:6,align:"center",children:[e.jsxs(ee,{spacing:3,children:[e.jsx(Ej,{color:"var(--rbe-red)",size:24}),e.jsx(Te,{size:"lg",children:"Gestion des Flashs Info"})]}),e.jsx(G1,{}),e.jsx(Q,{leftIcon:e.jsx(mz,{}),colorScheme:"blue",onClick:A,children:"Nouveau Flash"})]}),e.jsxs(ni,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:4,mb:6,children:[e.jsx(Pe,{bg:b,borderWidth:1,borderColor:w,children:e.jsx(ke,{children:e.jsxs(ee,{children:[e.jsx(Ej,{color:"blue"}),e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Total"}),e.jsx(k,{fontSize:"2xl",fontWeight:"bold",children:t.length})]})]})})}),e.jsx(Pe,{bg:b,borderWidth:1,borderColor:w,children:e.jsx(ke,{children:e.jsxs(ee,{children:[e.jsx(_A,{color:"green"}),e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Actifs"}),e.jsx(k,{fontSize:"2xl",fontWeight:"bold",color:"green.500",children:t.filter(I=>I.active&&!z(I)).length})]})]})})}),e.jsx(Pe,{bg:b,borderWidth:1,borderColor:w,children:e.jsx(ke,{children:e.jsxs(ee,{children:[e.jsx(EA,{color:"purple"}),e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Sur l'externe"}),e.jsx(k,{fontSize:"2xl",fontWeight:"bold",color:"purple.500",children:t.filter(I=>I.showOnExternal&&I.active&&!z(I)).length})]})]})})}),e.jsx(Pe,{bg:b,borderWidth:1,borderColor:w,children:e.jsx(ke,{children:e.jsxs(ee,{children:[e.jsx(ite,{color:"orange"}),e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Expirs"}),e.jsx(k,{fontSize:"2xl",fontWeight:"bold",color:"orange.500",children:t.filter(I=>z(I)).length})]})]})})})]}),e.jsx(J,{spacing:4,align:"stretch",children:t.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucun flash trouv. Crez le premier !"]}):t.map(I=>{const V=Rj[I.type]||Rj.info,$=V.icon,ae=z(I);return e.jsxs(Pe,{bg:b,borderWidth:1,borderColor:I.active&&!ae?`${V.color}.200`:"gray.300",opacity:I.active&&!ae?1:.6,children:[e.jsx(zt,{children:e.jsxs(sr,{align:"center",children:[e.jsxs(ee,{spacing:3,flex:1,children:[e.jsx($,{color:`var(--chakra-colors-${V.color}-500)`}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsxs(ee,{spacing:2,children:[e.jsx(Qe,{colorScheme:V.color,children:V.label}),I.active?e.jsx(Qe,{colorScheme:"green",children:"Actif"}):e.jsx(Qe,{colorScheme:"gray",children:"Inactif"}),I.showOnExternal&&e.jsx(Qe,{colorScheme:"purple",leftIcon:e.jsx(EA,{}),children:"Externe"}),ae&&e.jsx(Qe,{colorScheme:"red",children:"Expir"})]}),e.jsxs(k,{fontSize:"sm",color:"gray.600",children:["Cr le ",new Date(I.createdAt).toLocaleDateString("fr-FR"),I.expiresAt&&e.jsxs(e.Fragment,{children:["  Expire le ",new Date(I.expiresAt).toLocaleDateString("fr-FR")]})]})]})]}),e.jsxs(ee,{spacing:1,children:[e.jsx(ti,{label:I.active?"Dsactiver":"Activer",children:e.jsx(xt,{icon:I.active?e.jsx(ate,{}):e.jsx(_A,{}),size:"sm",colorScheme:I.active?"orange":"green",variant:"ghost",onClick:()=>M(I)})}),e.jsx(ti,{label:"Modifier",children:e.jsx(xt,{icon:e.jsx(pz,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>D(I)})}),e.jsx(ti,{label:"Supprimer",children:e.jsx(xt,{icon:e.jsx(gz,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>N(I.id)})})]})]})}),e.jsx(ke,{pt:0,children:e.jsx(k,{children:I.content})})]},I.id)})}),e.jsxs(Et,{isOpen:f,onClose:x,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:e.jsxs(ee,{children:[e.jsx(Ej,{}),e.jsx(k,{children:l?"Modifier le flash":"Nouveau flash"})]})}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Type"}),e.jsx(ut,{value:d.type,onChange:I=>p(V=>({...V,type:I.target.value})),children:Object.entries(Rj).map(([I,V])=>e.jsx("option",{value:I,children:V.label},I))})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Contenu du message"}),e.jsx(Xt,{value:d.content,onChange:I=>p(V=>({...V,content:I.target.value})),placeholder:"Message  afficher...",rows:4})]}),e.jsxs(ni,{templateColumns:"1fr 1fr",gap:4,width:"100%",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Statut"}),e.jsxs(ee,{children:[e.jsx(Jn,{isChecked:d.active,onChange:I=>p(V=>({...V,active:I.target.checked}))}),e.jsx(k,{children:d.active?"Actif":"Inactif"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Afficher sur l'externe"}),e.jsxs(ee,{children:[e.jsx(Jn,{isChecked:d.showOnExternal,onChange:I=>p(V=>({...V,showOnExternal:I.target.checked}))}),e.jsx(k,{children:d.showOnExternal?"Oui":"Non"})]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date d'expiration (optionnelle)"}),e.jsx(ge,{type:"datetime-local",value:d.expiresAt,onChange:I=>p(V=>({...V,expiresAt:I.target.value}))}),e.jsx(k,{fontSize:"sm",color:"gray.500",mt:1,children:"Laissez vide pour un flash permanent"})]}),d.showOnExternal&&e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Ce flash sera visible sur le site public externe"]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:x,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:P,children:l?"Mettre  jour":"Crer"})]})]})]})]})}const xu="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),Ete={PENDING:{label:"En attente",color:"yellow",progress:25},ACTIVE:{label:"Actif",color:"green",progress:100},EXPIRED:{label:"Expir",color:"red",progress:0},SUSPENDED:{label:"Suspendu",color:"orange",progress:50}},kj={STANDARD:"Adhsion Standard",FAMILY:"Adhsion Famille",STUDENT:"Adhsion tudiant",HONORARY:"Membre d'Honneur",BIENFAITEUR:"Bienfaiteur"},Dj={CASH:"Espces",CHECK:"Chque",BANK_TRANSFER:"Virement",CARD:"Carte bancaire",PAYPAL:"PayPal",HELLOASSO:"HelloAsso"};function _te(){const{user:t,member:n,memberLoading:r,memberError:i,memberApiBase:l,refreshMember:u}=es(),[d,p]=v.useState(null),[f,g]=v.useState(!0),[x,y]=v.useState(null),[b,w]=v.useState(null),[C,_]=v.useState(!1),[A,D]=v.useState({}),[P,M]=v.useState([]),[N,z]=v.useState(!1),[I,V]=v.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{isOpen:$,onOpen:ae,onClose:he}=It(),{isOpen:re,onOpen:ce,onClose:Se}=It(),{isOpen:je,onOpen:de,onClose:G}=It(),[U,W]=v.useState({reason:"",notes:"",pv:null,resignation:null}),[me,F]=v.useState(!1),[fe,te]=v.useState([]),[R,Y]=v.useState(""),q=on();v.useEffect(()=>{u()},[]),v.useEffect(()=>{p(n||null),g(r),y(i),w(l||null)},[n,r,i,l]),v.useEffect(()=>{d&&d.id?ye():M([])},[d?.id]);const le=async()=>{await u(!0)},We=()=>{_(!0),D({...d})},pe=async()=>{try{if(!A.firstName||!A.lastName)throw new Error("Prnom et nom requis");const Me=[b??"",xu||""];let nt=null;for(const Xe of Me)try{const pt=await fetch(`${Xe}/api/members/me`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(A)});if(pt.ok){nt=pt;break}}catch{}if(!nt)throw new Error("Erreur de sauvegarde");const wt=await nt.json();p(wt),_(!1),q({status:"success",title:"Profil mis  jour",description:"Vos informations ont t sauvegardes",duration:3e3})}catch(Me){q({status:"error",title:"Erreur",description:Me.message,duration:5e3})}},ye=async()=>{try{z(!0);const Me=[b??"",xu||""];let nt=!1;for(const wt of Me)try{const Xe=await fetch(`${wt}/api/members/me/documents`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Xe.ok){const pt=await Xe.json();M(pt?.documents||[]),nt=!0;break}}catch{}if(!nt)throw new Error("Chargement des documents impossible")}catch(Me){console.error("Docs error",Me),M([])}finally{z(!1)}},Ze=async Me=>{try{const nt=[b??"",xu||""];let wt=null;for(const Ne of nt)try{const Mt=await fetch(`${Ne}/api/documents/${Me.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Mt.ok){wt=Mt;break}}catch{}if(!wt)throw new Error("Tlchargement impossible");const Xe=await wt.blob(),pt=URL.createObjectURL(Xe),ot=document.createElement("a");ot.href=pt,ot.download=Me.fileName||"document",document.body.appendChild(ot),ot.click(),ot.remove(),URL.revokeObjectURL(pt)}catch(nt){q({status:"error",title:"Erreur",description:nt.message})}},ht=()=>{_(!1),D({...d})},rt=async()=>{if(I.newPassword!==I.confirmPassword){q({status:"error",title:"Erreur",description:"Les mots de passe ne correspondent pas",duration:3e3});return}if(I.newPassword.length<6){q({status:"error",title:"Erreur",description:"Le mot de passe doit faire au moins 6 caractres",duration:3e3});return}try{const Me=await fetch(`${xu}/api/members/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({currentPassword:I.currentPassword,newPassword:I.newPassword})});if(!Me.ok){const nt=await Me.json();throw new Error(nt.error||"Erreur de changement de mot de passe")}q({status:"success",title:"Mot de passe modifi",description:"Votre mot de passe a t mis  jour avec succs",duration:3e3}),V({currentPassword:"",newPassword:"",confirmPassword:""}),he()}catch(Me){q({status:"error",title:"Erreur",description:Me.message,duration:5e3})}};if(f)return e.jsx(yn,{h:"400px",children:e.jsx(pn,{size:"xl"})});const vt=Me=>{try{const nt=typeof Me=="string"?new Date(Me):Me;return nt?nt.toLocaleDateString("fr-FR"):"-"}catch{return"-"}},Ue=(Me,nt)=>{const wt=new Date(Me.getTime());return wt.setFullYear(wt.getFullYear()+nt),wt},qt=(Me,nt)=>Math.ceil((nt.getTime()-Me.getTime())/(1e3*60*60*24)),Je=d?.membershipStartDate?new Date(d.membershipStartDate):null,Ge=d?.membershipEndDate?new Date(d.membershipEndDate):null,Ve=Je?Ue(Je,1):null,se=Ge||Ve,be=new Date,at=se?se<be:!1,St=se?qt(be,se):null,An=Me=>{switch(Me){case"ACTIVE":return"green";case"PENDING":return"orange";case"EXPIRED":return"red";case"SUSPENDED":return"gray";default:return"gray"}},qe=Ete[d?.membershipStatus]||{label:d?.membershipStatus||"Non dfini",progress:0};return e.jsxs(oe,{p:6,maxW:"4xl",mx:"auto",children:[e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(Te,{size:"lg",display:"flex",alignItems:"center",children:[e.jsx(yj,{style:{marginRight:"8px"}}),"Mon Adhsion"]}),C?e.jsxs(ee,{children:[e.jsx(Q,{leftIcon:e.jsx(Il,{}),colorScheme:"green",onClick:pe,children:"Sauvegarder"}),e.jsx(Q,{leftIcon:e.jsx(qu,{}),variant:"outline",onClick:ht,children:"Annuler"})]}):e.jsx(Q,{leftIcon:e.jsx(Bs,{}),onClick:We,children:"Modifier"})]}),!d&&e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",children:"Profil adhrent introuvable"}),e.jsx(k,{fontSize:"sm",children:x===401?"Vous ntes pas autoris. Veuillez vous reconnecter.":x===404?"Votre profil nest pas encore li. Si vous venez de raliser une liaison, actualisez la page ou reconnectez-vous. Sinon, merci de contacter un administrateur pour lassocier depuis la Gestion des Adhrents.":x===500?"Erreur serveur lors de la rcupration du profil.":x==="network-error"?"Impossible de joindre lAPI. Rseau ou CORS ? Essayez  nouveau.":"Votre profil n'est pas encore li. Merci de contacter un administrateur pour l'associer depuis la Gestion des Adhrents."}),e.jsxs(ee,{mt:3,children:[e.jsx(Q,{size:"sm",onClick:le,children:"Ressayer"}),(t?.roles||[]).map(wt=>String(wt).toUpperCase()).some(wt=>["ADMIN","PRESIDENT","VICE_PRESIDENT","TRESORIER","SECRETAIRE_GENERAL"].includes(wt))?e.jsx(Q,{size:"sm",variant:"outline",onClick:async()=>{try{F(!0);const wt=[b??"",xu||""];let Xe=null;for(const pt of wt)try{const ot=await fetch(`${pt}/api/members?limit=500`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(ot.ok){Xe=await ot.json();break}}catch{}te(Xe?.members||[]),de()}finally{F(!1)}},isLoading:me,children:"Associer mon compte"}):null]})]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs(ga,{variant:"enclosed",colorScheme:"blue",children:[e.jsxs(xa,{children:[e.jsx(hn,{children:"Informations personnelles"}),e.jsx(hn,{children:"Informations Adhrent"}),e.jsx(hn,{children:"Documents d'adhsions"})]}),e.jsxs(va,{children:[e.jsx(fn,{px:0,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Informations personnelles"})}),e.jsx(ke,{children:e.jsx(J,{spacing:4,align:"stretch",children:C?e.jsxs(e.Fragment,{children:[e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Prnom"}),e.jsx(ge,{value:A.firstName||"",onChange:Me=>D(nt=>({...nt,firstName:Me.target.value}))})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nom"}),e.jsx(ge,{value:A.lastName||"",onChange:Me=>D(nt=>({...nt,lastName:Me.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Email"}),e.jsx(ge,{type:"email",value:A.email||"",onChange:Me=>D(nt=>({...nt,email:Me.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Tlphone"}),e.jsx(ge,{value:A.phone||"",onChange:Me=>D(nt=>({...nt,phone:Me.target.value}))})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Adresse"}),e.jsx(ge,{value:A.address||"",onChange:Me=>D(nt=>({...nt,address:Me.target.value}))})]}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Code postal"}),e.jsx(ge,{value:A.postalCode||"",onChange:Me=>D(nt=>({...nt,postalCode:Me.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Ville"}),e.jsx(ge,{value:A.city||"",onChange:Me=>D(nt=>({...nt,city:Me.target.value}))})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date de naissance"}),e.jsx(ge,{type:"date",value:A.birthDate?A.birthDate.split("T")[0]:"",onChange:Me=>D(nt=>({...nt,birthDate:Me.target.value}))})]})]}):e.jsxs(mt,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(oe,{children:[e.jsxs(ee,{mb:4,children:[e.jsx(yj,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Nom complet"}),e.jsxs(k,{fontWeight:"bold",children:[d.firstName," ",d.lastName]})]})]}),d.email&&e.jsxs(ee,{mb:4,children:[e.jsx($l,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Email"}),e.jsx(k,{fontWeight:"bold",children:d.email})]})]}),d.phone&&e.jsxs(ee,{mb:4,children:[e.jsx(UM,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Tlphone"}),e.jsx(k,{fontWeight:"bold",children:d.phone})]})]})]}),e.jsxs(oe,{children:[(d.address||d.city)&&e.jsxs(ee,{mb:4,children:[e.jsx(kc,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Adresse"}),e.jsxs(k,{fontWeight:"bold",children:[d.address&&`${d.address}, `,d.postalCode," ",d.city]})]})]}),d.birthDate&&e.jsxs(ee,{mb:4,children:[e.jsx(Os,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Date de naissance"}),e.jsx(k,{fontWeight:"bold",children:new Date(d.birthDate).toLocaleDateString("fr-FR")})]})]})]})]})})})]})}),e.jsx(fn,{px:0,children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Statut de l'Adhsion"})}),e.jsxs(ke,{children:[e.jsxs(mt,{columns:{base:1,md:3},spacing:{base:4,md:6},children:[e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:2,children:"Statut actuel"}),e.jsx(Qe,{colorScheme:An(d.membershipStatus),fontSize:"md",p:2,children:qe.label}),e.jsx(Rc,{value:qe.progress,colorScheme:An(d.membershipStatus),mt:2,size:"sm"})]}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:2,children:"Type d'adhsion"}),e.jsx(k,{fontWeight:"bold",children:kj[d.membershipType]||d.membershipType})]}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:2,children:"Matricule"}),e.jsx(k,{fontWeight:"bold",color:"blue.600",children:d.matricule}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:"Utilis pour se connecter au site"})]}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:2,children:"Numro d'adhrent"}),e.jsx(k,{fontWeight:"bold",color:"purple.600",children:d.memberNumber}),e.jsx(k,{fontSize:"xs",color:"gray.500",children:"Numro unique d'adhsion"})]})]}),e.jsx(xn,{my:4}),e.jsxs(mt,{columns:{base:1,md:3},spacing:{base:4,md:6},children:[e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:1,children:"Dbut d'adhsion"}),e.jsx(k,{fontWeight:"bold",children:Je?vt(Je):"-"})]}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:1,children:"Expiration prvue"}),e.jsx(k,{fontWeight:"bold",color:at?"red.600":"gray.800",children:se?vt(se):"-"}),se&&e.jsx(k,{fontSize:"xs",color:at?"red.500":"gray.500",children:at?"Adhsion expire":`${St} jour(s) restant(s)`})]}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",mb:1,children:"Dernier paiement"}),e.jsx(k,{fontWeight:"bold",children:Je?vt(Je):"-"}),d?.paymentAmount&&e.jsxs(k,{fontSize:"xs",color:"gray.600",children:[d.paymentAmount," (",Dj[d.paymentMethod]||d.paymentMethod,")"]})]})]}),!at&&St!==null&&St<=60&&e.jsxs(Ut,{status:"warning",mt:4,borderRadius:"md",children:[e.jsx(Ht,{}),"Votre adhsion arrive  chance dans ",St," jour(s). Pensez  la renouveler."]}),at&&e.jsxs(Ut,{status:"error",mt:4,borderRadius:"md",children:[e.jsx(Ht,{}),"Votre adhsion est expire. Veuillez procder au renouvellement."]})]})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Dtails d'adhsion"})}),e.jsx(ke,{children:C?e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Type d'adhsion"}),e.jsx(ut,{value:A.membershipType||"STANDARD",onChange:Me=>D(nt=>({...nt,membershipType:Me.target.value})),children:Object.entries(kj).map(([Me,nt])=>e.jsx("option",{value:Me,children:nt},Me))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Montant cotisation ()"}),e.jsx(ge,{type:"number",value:A.paymentAmount||"",onChange:Me=>D(nt=>({...nt,paymentAmount:Me.target.value}))})]})]}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Mode de paiement"}),e.jsx(ut,{value:A.paymentMethod||"CASH",onChange:Me=>D(nt=>({...nt,paymentMethod:Me.target.value})),children:Object.entries(Dj).map(([Me,nt])=>e.jsx("option",{value:Me,children:nt},Me))})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{htmlFor:"newsletter",mb:"0",children:"Newsletter"}),e.jsx(Jn,{id:"newsletter",isChecked:A.newsletter,onChange:Me=>D(nt=>({...nt,newsletter:Me.target.checked}))})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Notes"}),e.jsx(Xt,{value:A.notes||"",onChange:Me=>D(nt=>({...nt,notes:Me.target.value})),placeholder:"Notes personnelles..."})]})]}):e.jsxs(mt,{columns:{base:1,md:2},spacing:{base:4,md:6},children:[e.jsxs(oe,{children:[d.paymentAmount&&e.jsxs(ee,{mb:4,children:[e.jsx(Yx,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Cotisation"}),e.jsxs(k,{fontWeight:"bold",children:[d.paymentAmount," (",Dj[d.paymentMethod]||d.paymentMethod,")"]})]})]}),e.jsxs(ee,{mb:4,children:[e.jsx(yj,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Type"}),e.jsx(k,{fontWeight:"bold",children:kj[d.membershipType]||d.membershipType})]})]}),Je&&e.jsxs(ee,{mb:4,children:[e.jsx(Os,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Dbut d'adhsion"}),e.jsx(k,{fontWeight:"bold",children:vt(Je)})]})]})]}),e.jsxs(oe,{children:[e.jsxs(ee,{mb:4,children:[e.jsx(Lu,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Matricule"}),e.jsx(k,{fontWeight:"bold",color:"blue.600",children:d.matricule})]})]}),e.jsxs(ee,{mb:4,children:[e.jsx(Lu,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Numro d'adhrent"}),e.jsx(k,{fontWeight:"bold",color:"purple.600",children:d.memberNumber})]})]}),se&&e.jsxs(ee,{mb:4,children:[e.jsx(Os,{}),e.jsxs(oe,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Expiration prvue"}),e.jsx(k,{fontWeight:"bold",color:at?"red.600":"gray.800",children:vt(se)})]})]})]})]})})]})]})}),e.jsx(fn,{px:0,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Documents d'adhsions"})}),e.jsx(ke,{children:N?e.jsx(yn,{children:e.jsx(pn,{})}):P.length===0?e.jsx(k,{color:"gray.600",children:"Aucun document pour le moment."}):e.jsxs(Fn,{size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Fichier"}),e.jsx(_e,{children:"Type"}),e.jsx(_e,{children:"Ajout le"}),e.jsx(_e,{children:"Expiration"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{})]})}),e.jsx(Wn,{children:P.map(Me=>e.jsxs(bt,{children:[e.jsx(Ee,{children:Me.fileName}),e.jsx(Ee,{children:Me.documentType||"-"}),e.jsx(Ee,{children:Me.uploadedAt?new Date(Me.uploadedAt).toLocaleString("fr-FR"):"-"}),e.jsx(Ee,{children:Me.expiryDate?new Date(Me.expiryDate).toLocaleDateString("fr-FR"):"-"}),e.jsx(Ee,{children:e.jsx(Qe,{children:Me.status||"PENDING"})}),e.jsx(Ee,{textAlign:"right",children:e.jsx(Q,{size:"sm",leftIcon:e.jsx(ua,{}),onClick:()=>Ze(Me),children:"Tlcharger"})})]},Me.id))})]})})]})})]})]}),!C&&e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Actions"})}),e.jsx(ke,{children:e.jsxs(ee,{spacing:4,wrap:"wrap",children:[e.jsx(Q,{leftIcon:e.jsx(Lu,{}),onClick:ae,children:"Changer le mot de passe"}),e.jsx(Q,{leftIcon:e.jsx(ua,{}),variant:"outline",children:"Tlcharger ma carte d'adhrent"}),(t?.roles||[]).map(wt=>String(wt).toUpperCase()).some(wt=>["PRESIDENT","VICE_PRESIDENT","TRESORIER","SECRETAIRE_GENERAL"].includes(wt))&&e.jsx(Q,{colorScheme:"red",variant:"outline",onClick:ce,children:"Supprimer l'adhsion"})]})})]}),d.notes&&!C&&e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Notes"})}),e.jsx(ke,{children:e.jsx(k,{children:d.notes})})]})]})]}),e.jsxs(Et,{isOpen:$,onClose:he,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Changer le mot de passe"}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Mot de passe actuel"}),e.jsx(ge,{type:"password",value:I.currentPassword,onChange:Me=>V(nt=>({...nt,currentPassword:Me.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Nouveau mot de passe"}),e.jsx(ge,{type:"password",value:I.newPassword,onChange:Me=>V(nt=>({...nt,newPassword:Me.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Confirmer le nouveau mot de passe"}),e.jsx(ge,{type:"password",value:I.confirmPassword,onChange:Me=>V(nt=>({...nt,confirmPassword:Me.target.value}))})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:he,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:rt,children:"Modifier"})]})]})]}),e.jsxs(Et,{isOpen:re,onClose:Se,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Supprimer l'adhsion"}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),"Cette action met fin  l'adhsion. L'accs site associ sera dsactiv."]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Motif"}),e.jsxs(ut,{value:U.reason,onChange:Me=>W(nt=>({...nt,reason:Me.target.value})),children:[e.jsx("option",{value:"",children:"Choisir un motif..."}),e.jsx("option",{value:"FIN",children:"Fin d'adhsion"}),e.jsx("option",{value:"NON_RECONDUITE",children:"Non reconduite"}),e.jsx("option",{value:"EXCLUSION",children:"Exclusion vote (joindre le PV)"}),e.jsx("option",{value:"DEMISSION",children:"Dmission (joindre PV et lettre de dmission)"}),e.jsx("option",{value:"INFORMATIQUE",children:"INFORMATIQUE"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Notes (optionnel)"}),e.jsx(Xt,{value:U.notes,onChange:Me=>W(nt=>({...nt,notes:Me.target.value}))})]}),U.reason==="EXCLUSION"||U.reason==="DEMISSION"?e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Procs-verbal (PDF/Image)"}),e.jsx(ge,{type:"file",accept:"application/pdf,image/*",onChange:Me=>W(nt=>({...nt,pv:Me.target.files?.[0]||null}))})]}):null,U.reason==="DEMISSION"?e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Lettre de dmission (PDF/Image)"}),e.jsx(ge,{type:"file",accept:"application/pdf,image/*",onChange:Me=>W(nt=>({...nt,resignation:Me.target.files?.[0]||null}))})]}):null]})}),e.jsx(Vt,{children:e.jsxs(ee,{children:[e.jsx(Q,{variant:"ghost",onClick:Se,children:"Annuler"}),e.jsx(Q,{colorScheme:"red",onClick:async()=>{try{if(!U.reason){q({title:"Motif requis",status:"error"});return}if(U.reason==="EXCLUSION"&&!U.pv){q({title:"PV obligatoire",status:"error"});return}if(U.reason==="DEMISSION"&&(!U.pv||!U.resignation)){q({title:"PV et lettre requis",status:"error"});return}const Me=new FormData;Me.append("reason",U.reason),U.notes&&Me.append("notes",U.notes),U.pv&&Me.append("pv",U.pv),U.resignation&&Me.append("resignation",U.resignation);let nt=null,wt=null;for(const Xe of[b??"",xu||""])try{const pt=await fetch(`${Xe}/api/members/${d?.id}/terminate`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:Me});if(pt.ok){nt=pt,wt=await pt.json();break}else wt=await pt.json().catch(()=>({}))}catch{}if(!nt)throw new Error(wt?.error||"Erreur de suppression");q({title:"Adhsion supprime",status:"success",duration:3e3}),Se(),le()}catch(Me){q({title:"Erreur",description:Me.message,status:"error"})}},children:"Confirmer"})]})})]})]}),e.jsxs(Et,{isOpen:je,onClose:G,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Associer mon compte  un adhrent"}),e.jsx(_t,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Slectionnez ladhrent correspondant  votre compte afin dactiver la page Mon Adhsion."}),e.jsxs(X,{children:[e.jsx(Z,{children:"Adhrent"}),e.jsx(ut,{value:R,onChange:Me=>Y(Me.target.value),placeholder:"Choisir",children:fe.map(Me=>e.jsxs("option",{value:Me.id,children:[Me.lastName?.toUpperCase()," ",Me.firstName,"  ",Me.email," ",Me.memberNumber?`(${Me.memberNumber})`:""]},Me.id))})]})]})}),e.jsx(Vt,{children:e.jsxs(ee,{children:[e.jsx(Q,{variant:"ghost",onClick:G,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",isDisabled:!R,onClick:async()=>{try{F(!0);let Me=!1,nt=null;for(const wt of[b??"",xu||""])try{const Xe=await fetch(`${wt}/api/members/${R}/link-access`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({username:(t?.username||"").toLowerCase()})}),pt=await Xe.json().catch(()=>({}));if(Xe.ok){Me=!0;break}else nt=pt?.error||"Erreur de liaison"}catch{}if(!Me)throw new Error(nt||"Erreur de liaison");q({status:"success",title:"Compte associ"}),G(),await u(!0)}catch(Me){q({status:"error",title:"chec",description:Me.message})}finally{F(!1)}},children:"Associer"})]})})]})]})]})}const Tte="/univers_rbe.png";function Ate(){const[t,n]=v.useState(""),[r,i]=v.useState(""),[l,u]=v.useState(""),[d,p]=v.useState(!1),f=Ua(),{setToken:g,setUser:x}=es(),y=Tn("rbe.500","rbe.300"),b=Tn("gray.100","gray.700"),w=async()=>{if(!t.trim()||!r.trim()){u("Champs requis.");return}p(!0),u("");try{const _=t.trim(),D=/^\d{4}-\d{3}$/i.test(_)||_.includes("@")?await cQ(_,r):await lQ(_.toLowerCase(),r);g(D.token),x(D.user),f("/dashboard")}catch(_){u(_.message)}finally{p(!1)}},C=_=>_.key==="Enter"&&w();return e.jsxs(oe,{minH:"100vh",bg:"white",overflowX:"hidden",children:[e.jsx(oe,{as:"header",w:"100%",bg:"gray.50",borderBottom:"1px solid",borderColor:"gray.200",children:e.jsx(oe,{maxW:"2000px",mx:"auto",children:e.jsx(Li,{src:Tte,alt:"Bannire Intranet",w:"100%",h:{base:"100px",md:"200px",lg:"300px"},objectFit:"cover",fallbackSrc:"https://via.placeholder.com/2000x600?text=Intranet+Banner"})})}),e.jsx(oe,{as:"main",px:4,pb:12,children:e.jsx(oe,{maxW:"xs",w:"full",mx:"auto",mt:{base:-12,md:-20},position:"relative",children:e.jsxs(J,{spacing:3,bg:"white",p:6,borderRadius:"md",shadow:"xl",border:"1px solid",borderColor:b,borderTop:"4px solid",borderTopColor:"rbe.500",children:[e.jsx(k,{fontSize:"xl",fontWeight:"bold",textAlign:"center",children:"Connexion Intranet"}),e.jsx(k,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Accs rserv aux membres et bnvoles"}),l&&e.jsx(k,{color:"red.500",textAlign:"center",children:l}),e.jsx(ge,{size:"sm",placeholder:"Identifiant",value:t,onChange:_=>n(_.target.value),onKeyDown:C,_focus:{borderColor:y,boxShadow:`0 0 0 1px ${y}`}}),e.jsx(ge,{size:"sm",placeholder:"Mot de passe",type:"password",value:r,onChange:_=>i(_.target.value),onKeyDown:C,_focus:{borderColor:y,boxShadow:`0 0 0 1px ${y}`}}),e.jsx(Q,{size:"sm",colorScheme:"rbe",w:"full",onClick:w,isLoading:d,loadingText:"Connexion...",children:"Se connecter"})]})})})]})}function Rte(){const[t,n]=v.useState([]),[r,i]=v.useState(!1),[l,u]=v.useState(!1),[d,p]=v.useState(""),[f,g]=v.useState("CONFIRMED"),[x,y]=v.useState(!1),[b,w]=v.useState({total:0,confirmed:0,pending:0}),[C,_]=v.useState(null),[A,D]=v.useState("ALL"),P=on(),{token:M,isAuthenticated:N}=es(),z=Ua(),{isOpen:I,onOpen:V,onClose:$}=It(),ae=v.useCallback(async(G={manual:!1})=>{if(!M){console.log("[Newsletter] Waiting for token...");return}i(!0),y(!1);try{console.log("[Newsletter] Fetching subscribers...");const U=await Kg.getAll();console.log("[Newsletter] Received:",U),n(Array.isArray(U)?U:[]);const W=U.length,me=U.filter(fe=>fe.status==="CONFIRMED").length,F=U.filter(fe=>fe.status==="PENDING").length;w({total:W,confirmed:me,pending:F})}catch(U){if(console.error("[Newsletter] fetch error:",U),U.status===401){P({status:"error",title:"Session expire",description:"Veuillez vous reconnecter"}),n([]);return}y(!0),G.manual||P({status:"warning",title:"Mode dgrad",description:"Affichage de donnes de dmonstration (chec API)"}),n([{id:"demo1",email:"demo@example.com",status:"CONFIRMED",createdAt:new Date().toISOString()},{id:"demo2",email:"test@rbe.fr",status:"PENDING",createdAt:new Date().toISOString()}]),w({total:2,confirmed:1,pending:1})}finally{i(!1)}},[M,P]);v.useEffect(()=>{M&&ae()},[M,ae]);const he=async()=>{if(!d.includes("@")){P({status:"error",title:"Email invalide"});return}if(!M){P({status:"error",title:"Authentification requise"});return}u(!0);try{await Kg.create({email:d.trim().toLowerCase(),status:f}),P({status:"success",title:"Abonn ajout avec succs"}),p(""),g("CONFIRMED"),ae({manual:!0})}catch(G){if(G.status===401){P({status:"error",title:"Session expire"});return}if(G.status===409){P({status:"info",title:"Email dj existant",description:"Cet email est dj dans la liste"});return}P({status:"error",title:"Erreur lors de l'ajout"})}finally{u(!1)}},re=async(G,U)=>{if(confirm(`Supprimer l'abonn ${U} ?`)){if(!M){P({status:"error",title:"Authentification requise"});return}try{await Kg.delete(G),P({status:"success",title:"Abonn supprim"}),n(W=>W.filter(me=>me.id!==G)),w(W=>({...W,total:W.total-1,confirmed:W.confirmed-(t.find(me=>me.id===G)?.status==="CONFIRMED"?1:0),pending:W.pending-(t.find(me=>me.id===G)?.status==="PENDING"?1:0)}))}catch(W){if(W.status===401){P({status:"error",title:"Session expire"});return}P({status:"error",title:"Erreur lors de la suppression"})}}},ce=G=>{_(G),V()},Se=async G=>{if(C)try{await Kg.updateStatus(C.id,G),P({status:"success",title:"Statut mis  jour",description:`${C.email}  ${G}`}),n(U=>U.map(W=>W.id===C.id?{...W,status:G}:W)),$(),ae({manual:!0})}catch{P({status:"error",title:"Erreur lors de la mise  jour"})}},je=async()=>{try{P({status:"info",title:"Export en cours...",description:"Gnration du fichier CSV"});const G=t.map(F=>({Email:F.email,Statut:F.status,"Date inscription":new Date(F.createdAt).toLocaleDateString("fr-FR")})),U=[Object.keys(G[0]).join(";"),...G.map(F=>Object.values(F).join(";"))].join(`
`),W=new Blob([U],{type:"text/csv;charset=utf-8;"}),me=document.createElement("a");me.href=URL.createObjectURL(W),me.download=`newsletter-subscribers-${new Date().toISOString().split("T")[0]}.csv`,me.click(),P({status:"success",title:"Export termin"})}catch{P({status:"error",title:"Erreur lors de l'export"})}},de=A==="ALL"?t:t.filter(G=>G.status===A);return N?e.jsx(oe,{p:6,children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"lg",children:" Gestion Newsletter"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Grez les abonnements  la newsletter RtroBus Essonne"})]}),e.jsxs(ee,{children:[e.jsx(Q,{leftIcon:e.jsx(Fa,{}),size:"sm",variant:"outline",onClick:()=>ae({manual:!0}),isLoading:r,children:"Rafrachir"}),e.jsx(Q,{leftIcon:e.jsx(ua,{}),size:"sm",colorScheme:"green",variant:"outline",onClick:je,isDisabled:t.length===0,children:"Exporter CSV"}),e.jsx(Q,{leftIcon:e.jsx($l,{}),size:"sm",colorScheme:"blue",onClick:()=>z("/dashboard/newsletter-campaigns"),title:"Grer les campagnes de mailing",children:"Campagnes"})]})]}),e.jsxs(Y1,{children:[e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total abonns"}),e.jsx(Dt,{color:"blue.500",children:b.total})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Confirms"}),e.jsx(Dt,{color:"green.500",children:b.confirmed})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"En attente"}),e.jsx(Dt,{color:"orange.500",children:b.pending})]})]}),x&&e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"bold",children:"Mode dgrad"}),e.jsx(k,{fontSize:"sm",children:"Donnes de dmonstration affiches (API indisponible)"})]})]}),e.jsx(oe,{p:4,borderWidth:"1px",borderRadius:"lg",bg:"gray.50",children:e.jsxs(J,{spacing:4,children:[e.jsx(Te,{size:"sm",children:" Ajouter un nouvel abonn"}),e.jsxs(ee,{w:"100%",spacing:4,children:[e.jsxs(X,{flex:2,children:[e.jsx(Z,{fontSize:"sm",children:"Email"}),e.jsx(ge,{placeholder:"nouvel.abonne@email.com",value:d,onChange:G=>p(G.target.value),bg:"white"})]}),e.jsxs(X,{flex:1,children:[e.jsx(Z,{fontSize:"sm",children:"Statut"}),e.jsxs(ut,{value:f,onChange:G=>g(G.target.value),bg:"white",children:[e.jsx("option",{value:"CONFIRMED",children:"Confirm"}),e.jsx("option",{value:"PENDING",children:"En attente"})]})]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"green",onClick:he,isLoading:l,alignSelf:"end",children:"Ajouter"})]})]})}),e.jsxs(ee,{justify:"space-between",children:[e.jsxs(ee,{children:[e.jsx(k,{fontSize:"sm",fontWeight:"medium",children:"Filtrer par statut :"}),e.jsxs(ut,{size:"sm",value:A,onChange:G=>D(G.target.value),maxW:"150px",children:[e.jsx("option",{value:"ALL",children:"Tous"}),e.jsx("option",{value:"CONFIRMED",children:"Confirms"}),e.jsx("option",{value:"PENDING",children:"En attente"})]})]}),e.jsxs(Yo,{size:"lg",variant:"subtle",colorScheme:"purple",children:[e.jsxs(Zo,{children:[e.jsx(Va,{style:{marginRight:"4px"}}),de.length," affich",de.length>1?"s":""]}),t.length>0&&e.jsx(Z1,{title:"Vider la liste locale (ne supprime pas en base)",onClick:()=>{confirm("Vider la liste locale affiche ? (ne supprime pas en base)")&&(n([]),w({total:0,confirmed:0,pending:0}))}})]})]}),e.jsx(oe,{borderWidth:"1px",borderRadius:"lg",overflowX:"auto",children:r?e.jsx(yn,{py:10,children:e.jsxs(J,{children:[e.jsx(pn,{size:"lg",color:"blue.500"}),e.jsx(k,{color:"gray.600",children:"Chargement des abonns..."})]})}):e.jsxs(Fn,{size:"sm",children:[e.jsx(qn,{bg:"gray.50",children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Email"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Date d'inscription"}),e.jsx(_e,{children:"Actions"})]})}),e.jsxs(Wn,{children:[de.map(G=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{fontWeight:"semibold",maxW:"300px",isTruncated:!0,children:G.email}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:G.status==="CONFIRMED"?"green":"orange",variant:"subtle",fontSize:"xs",px:2,py:1,borderRadius:"md",cursor:"pointer",onClick:()=>ce(G),_hover:{opacity:.8},title:"Cliquer pour modifier",children:G.status==="CONFIRMED"?" Confirm":" En attente"})}),e.jsx(Ee,{fontSize:"sm",color:"gray.600",children:G.createdAt?new Date(G.createdAt).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"-"}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:1,children:[e.jsx(xt,{"aria-label":"Modifier le statut",icon:e.jsx(Bs,{}),size:"xs",colorScheme:"blue",variant:"ghost",onClick:()=>ce(G),title:"Modifier le statut"}),e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(Qn,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:()=>re(G.id,G.email),title:"Supprimer cet abonn"})]})})]},G.id)),de.length===0&&!r&&e.jsx(bt,{children:e.jsx(Ee,{colSpan:4,children:e.jsx(yn,{py:8,children:e.jsxs(J,{children:[e.jsx(k,{fontSize:"lg",children:""}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:A==="ALL"?"Aucun abonn pour le moment.":`Aucun abonn avec le statut "${A}".`}),A!=="ALL"&&e.jsx(Q,{size:"sm",variant:"link",onClick:()=>D("ALL"),children:"Voir tous les abonns"})]})})})})]})]})}),e.jsx(oe,{mt:8,p:4,bg:"blue.50",borderRadius:"lg",children:e.jsxs(J,{align:"start",spacing:3,children:[e.jsx(Te,{size:"sm",color:"blue.700",children:" Feuille de route"}),e.jsxs(J,{align:"start",spacing:1,fontSize:"sm",color:"blue.600",children:[e.jsx(k,{children:" Ajout / suppression manuelle d'abonns"}),e.jsx(k,{children:" Gestion des statuts (confirm / en attente)"}),e.jsx(k,{children:" Export CSV des abonns"}),e.jsx(k,{children:" Statistiques en temps rel"}),e.jsx(k,{children:" Import CSV en masse"}),e.jsx(k,{children:" Double opt-in avec email de confirmation"}),e.jsx(k,{children:" Intgration service de mailing (Sendinblue, Mailjet...)"}),e.jsx(k,{children:" Templates d'emails personnalisables"}),e.jsx(k,{children:" Segmentation avance des abonns"})]})]})}),e.jsxs(Et,{isOpen:I,onClose:$,isCentered:!0,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Modifier le statut de l'abonn"}),e.jsx($t,{}),e.jsx(_t,{children:C&&e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Email :"})," ",C.email]}),e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Statut actuel :"})," ",C.status]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Nouveau statut"}),e.jsxs(ut,{defaultValue:C.status,onChange:G=>_({...C,newStatus:G.target.value}),children:[e.jsx("option",{value:"CONFIRMED",children:"Confirm"}),e.jsx("option",{value:"PENDING",children:"En attente"})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:$,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:()=>Se(C?.newStatus||C?.status),children:"Mettre  jour"})]})]})]})]})}):e.jsx(yn,{minH:"300px",children:e.jsxs(J,{children:[e.jsx(k,{children:"Veuillez vous connecter pour accder  la gestion newsletter."}),e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Cette section ncessite des droits d'administration."})]})})}const wc="https://attractive-kindness-rbe-serveurs.up.railway.app";function kte(){const[t,n]=v.useState([]),[r,i]=v.useState(!1),[l,u]=v.useState(null),[d,p]=v.useState(null),[f,g]=v.useState({title:"",subject:"",content:"",scheduledAt:""}),[x,y]=v.useState(""),[b,w]=v.useState(null),[C,_]=v.useState(null),[A,D]=v.useState({}),{token:P}=es(),M=on(),{isOpen:N,onOpen:z,onClose:I}=It(),{isOpen:V,onOpen:$,onClose:ae}=It(),{isOpen:he,onOpen:re,onClose:ce}=It(),Se=async()=>{i(!0);try{const te=await fetch(`${wc}/newsletter/campaigns`,{headers:{Authorization:`Bearer ${P}`}});if(!te.ok)throw new Error("Erreur chargement");const R=await te.json();n(R)}catch{M({status:"error",title:"Erreur",description:"Impossible de charger les campagnes"})}finally{i(!1)}};v.useEffect(()=>{P&&Se()},[P]);const je=async()=>{if(!f.title||!f.subject||!f.content){M({status:"error",title:"Erreur",description:"Tous les champs sont requis"});return}try{if(!(await fetch(`${wc}/newsletter/campaigns`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify(f)})).ok)throw new Error("Erreur cration");M({status:"success",title:"Succs",description:"Campagne cre avec succs"}),g({title:"",subject:"",content:"",scheduledAt:""}),I(),Se()}catch{M({status:"error",title:"Erreur",description:"Impossible de crer la campagne"})}},de=async te=>{try{const R=await fetch(`${wc}/newsletter/campaigns/${te}/preview`,{headers:{Authorization:`Bearer ${P}`}});if(!R.ok)throw new Error("Erreur prvisualisation");const Y=await R.json();p(te),w(Y),$()}catch{M({status:"error",title:"Erreur",description:"Impossible de prvisualiser"})}},G=async te=>{if(!x){M({status:"error",title:"Erreur",description:"Email de test requis"});return}try{if(!(await fetch(`${wc}/newsletter/campaigns/${te}/test`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({email:x})})).ok)throw new Error("Erreur envoi test");M({status:"success",title:"Test envoy",description:`Email de test envoy  ${x}`}),y("")}catch{M({status:"error",title:"Erreur",description:"Impossible d'envoyer le test"})}},U=async te=>{if(confirm("tes-vous sr de vouloir envoyer cette campagne ? Cette action est irrversible.")){_(te);try{const R=await fetch(`${wc}/newsletter/campaigns/${te}/prepare`,{method:"POST",headers:{Authorization:`Bearer ${P}`}});if(!R.ok)throw new Error("Erreur prparation");const Y=await R.json();M({status:"info",title:"Prparation termine",description:`${Y.preparedSends} emails prpars. Envoi en cours...`});const q=await fetch(`${wc}/newsletter/campaigns/${te}/send`,{method:"POST",headers:{Authorization:`Bearer ${P}`}});if(!q.ok)throw new Error("Erreur envoi");const le=await q.json();M({status:"success",title:"Envoi termin",description:`${le.success} emails envoys avec succs, ${le.errors} erreurs`}),Se()}catch{M({status:"error",title:"Erreur",description:"Impossible d'envoyer la campagne"})}finally{_(null)}}},W=async te=>{u(te);try{const R=await fetch(`${wc}/newsletter/campaigns/${te.id}/stats`,{headers:{Authorization:`Bearer ${P}`}});if(!R.ok)throw new Error("Erreur stats");const Y=await R.json();D(Y),re()}catch{M({status:"error",title:"Erreur",description:"Impossible de charger les statistiques"})}},me=async(te,R)=>{if(confirm(`Supprimer dfinitivement la campagne "${R}" ?`))try{if(!(await fetch(`${wc}/newsletter/campaigns/${te}`,{method:"DELETE",headers:{Authorization:`Bearer ${P}`}})).ok)throw new Error("Erreur suppression");M({status:"success",title:"Supprim",description:"Campagne supprime avec succs"}),Se()}catch{M({status:"error",title:"Erreur",description:"Impossible de supprimer la campagne"})}},F=te=>{const R={DRAFT:{color:"gray",text:"Brouillon"},SENDING:{color:"blue",text:"En cours"},SENT:{color:"green",text:"Envoy"},CANCELLED:{color:"red",text:"Annul"}},Y=R[te]||R.DRAFT;return e.jsx(Qe,{colorScheme:Y.color,children:Y.text})},fe={event:{title:"Nouvel vnement",subject:" Nouveau vnement RtroBus Essonne !",content:`
        <h2> Nouvel vnement  ne pas manquer !</h2>
        <p>Chers passionns de vhicules d'poque,</p>
        <p>Nous avons le plaisir de vous annoncer un nouvel vnement organis par l'association RtroBus Essonne :</p>
        
        <h3> [Nom de l'vnement]</h3>
        <p><strong>Date :</strong> [Date]<br>
        <strong>Lieu :</strong> [Lieu]<br>
        <strong>Heure :</strong> [Heure]</p>
        
        <p>[Description de l'vnement]</p>
        
        <a href="#" class="button">S'inscrire  l'vnement</a>
        
        <p>Au plaisir de vous retrouver nombreux !</p>
        <p><strong>L'quipe RtroBus Essonne</strong></p>
      `},news:{title:"Actualits du parc",subject:" Actualits RtroBus Essonne",content:`
        <h2> Les dernires nouvelles de notre parc</h2>
        <p>Bonjour  tous,</p>
        <p>Voici les dernires actualits de l'association RtroBus Essonne :</p>
        
        <h3> Nouveau vhicule au parc</h3>
        <p>[Informations sur le nouveau vhicule]</p>
        
        <h3> Travaux de restauration</h3>
        <p>[Avancement des travaux]</p>
        
        <h3> Retour en images</h3>
        <p>[Galerie photos rcente]</p>
        
        <a href="#" class="button">Voir toutes les actualits</a>
        
        <p>Merci pour votre soutien !</p>
        <p><strong>L'quipe RtroBus Essonne</strong></p>
      `}};return e.jsxs(oe,{p:6,children:[e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"lg",children:" Campagnes Newsletter"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Crez et grez vos campagnes d'emailing"})]}),e.jsxs(ee,{children:[e.jsx(Q,{leftIcon:e.jsx(Fa,{}),onClick:Se,isLoading:r,variant:"outline",size:"sm",children:"Actualiser"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:z,children:"Nouvelle campagne"})]})]}),e.jsx(oe,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",children:r?e.jsx(yn,{py:10,children:e.jsx(pn,{size:"lg"})}):t.length===0?e.jsx(yn,{py:10,children:e.jsxs(J,{children:[e.jsx(k,{fontSize:"lg",children:""}),e.jsx(k,{color:"gray.500",children:"Aucune campagne cre"}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",size:"sm",onClick:z,children:"Crer votre premire campagne"})]})}):e.jsxs(Fn,{children:[e.jsx(qn,{bg:"gray.50",children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Campagne"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Cre le"}),e.jsx(_e,{children:"Abonns"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:t.map(te=>e.jsxs(bt,{children:[e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"semibold",children:te.title}),e.jsx(k,{fontSize:"sm",color:"gray.600",isTruncated:!0,maxW:"300px",children:te.subject})]})}),e.jsx(Ee,{children:F(te.status)}),e.jsx(Ee,{children:e.jsx(k,{fontSize:"sm",children:new Date(te.createdAt).toLocaleDateString("fr-FR")})}),e.jsx(Ee,{children:e.jsx(k,{fontSize:"sm",children:te.totalSent||te._count?.sends||0})}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:1,children:[e.jsx(xt,{"aria-label":"Prvisualiser",icon:e.jsx(Rh,{}),size:"sm",variant:"ghost",onClick:()=>de(te.id)}),te.status==="DRAFT"&&e.jsxs(e.Fragment,{children:[e.jsx(xt,{"aria-label":"Envoyer",icon:e.jsx(mJ,{}),size:"sm",colorScheme:"green",variant:"ghost",onClick:()=>U(te.id),isLoading:C===te.id}),e.jsx(xt,{"aria-label":"Supprimer",icon:e.jsx(Qn,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>me(te.id,te.title)})]}),te.status==="SENT"&&e.jsx(xt,{"aria-label":"Statistiques",icon:e.jsx(sJ,{}),size:"sm",colorScheme:"purple",variant:"ghost",onClick:()=>W(te)})]})})]},te.id))})]})})]}),e.jsxs(Et,{isOpen:N,onClose:I,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsx(Tt,{children:" Nouvelle campagne newsletter"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Titre de la campagne"}),e.jsx(ge,{placeholder:"ex: Newsletter mensuelle octobre 2025",value:f.title,onChange:te=>g(R=>({...R,title:te.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Sujet de l'email"}),e.jsx(ge,{placeholder:"ex:  Actualits RtroBus Essonne - Octobre 2025",value:f.subject,onChange:te=>g(R=>({...R,subject:te.target.value}))})]}),e.jsx(zD,{allowToggle:!0,w:"100%",children:e.jsxs(LD,{children:[e.jsxs(ID,{children:[e.jsx(oe,{flex:"1",textAlign:"left",children:" Utiliser un template prdfini"}),e.jsx(ND,{})]}),e.jsx(OD,{children:e.jsx(J,{spacing:2,children:Object.entries(fe).map(([te,R])=>e.jsx(Q,{size:"sm",variant:"outline",w:"100%",onClick:()=>g(Y=>({...Y,title:R.title,subject:R.subject,content:R.content})),children:R.title},te))})})]})}),e.jsxs(X,{children:[e.jsx(Z,{children:"Contenu de la newsletter (HTML)"}),e.jsx(Xt,{value:f.content,onChange:te=>g(R=>({...R,content:te.target.value})),minH:"400px",fontFamily:"mono",fontSize:"sm",placeholder:"Entrez votre contenu HTML..."})]}),e.jsxs(Ut,{status:"info",fontSize:"sm",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"semibold",children:" Conseils"}),e.jsx(k,{children:" Utilisez des titres avec <h2> et <h3>"}),e.jsx(k,{children:' Ajoutez des liens avec <a href="#" class="button">Texte</a>'}),e.jsx(k,{children:" Sparez les sections avec des paragraphes <p>"})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:I,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:je,children:"Crer la campagne"})]})]})]}),e.jsxs(Et,{isOpen:V,onClose:ae,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",children:[e.jsx(Tt,{children:" Prvisualisation de la campagne"}),e.jsx($t,{}),e.jsx(_t,{children:b&&e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Sujet"}),e.jsx(wh,{p:2,w:"100%",children:b.subject})]}),e.jsx(xn,{}),e.jsxs(J,{spacing:2,children:[e.jsx(k,{fontWeight:"semibold",children:"Aperu de l'email :"}),e.jsx(oe,{border:"1px solid",borderColor:"gray.200",borderRadius:"md",h:"400px",w:"100%",overflow:"auto",children:e.jsx("iframe",{srcDoc:b.html,style:{width:"100%",height:"100%",border:"none"},title:"Prvisualisation email"})})]}),e.jsx(xn,{}),e.jsxs(X,{children:[e.jsx(Z,{children:"Envoyer un test  :"}),e.jsxs(ee,{children:[e.jsx(ge,{placeholder:"votre-email@test.com",value:x,onChange:te=>y(te.target.value)}),e.jsx(Q,{leftIcon:e.jsx($l,{}),colorScheme:"orange",onClick:()=>G(d),isDisabled:!x||!d,children:"Envoyer le test"})]})]})]})}),e.jsx(Vt,{children:e.jsx(Q,{onClick:ae,children:"Fermer"})})]})]}),e.jsxs(Et,{isOpen:he,onClose:ce,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Statistiques de la campagne"}),e.jsx($t,{}),e.jsx(_t,{children:l&&e.jsxs(J,{spacing:6,children:[e.jsxs(J,{align:"start",w:"100%",children:[e.jsx(k,{fontWeight:"semibold",children:l.title}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:l.subject}),e.jsxs(k,{fontSize:"sm",color:"gray.500",children:["Envoye le ",new Date(l.sentAt).toLocaleDateString("fr-FR")]})]}),e.jsxs(Y1,{w:"100%",children:[e.jsxs(Rt,{children:[e.jsx(kt,{children:"Envoys"}),e.jsx(Dt,{color:"blue.500",children:A.sent||0})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"checs"}),e.jsx(Dt,{color:"red.500",children:A.failed||0})]}),e.jsxs(Rt,{children:[e.jsx(kt,{children:"Ouvertures"}),e.jsx(Dt,{color:"green.500",children:A.opened||0})]})]}),A.sent>0&&e.jsxs(oe,{w:"100%",children:[e.jsx(k,{fontSize:"sm",mb:2,children:"Taux de russite"}),e.jsx(Rc,{value:A.sent/(A.sent+A.failed)*100,colorScheme:"green",size:"lg"}),e.jsxs(k,{fontSize:"xs",color:"gray.500",mt:1,children:[Math.round(A.sent/(A.sent+A.failed)*100),"% des emails ont t envoys avec succs"]})]})]})}),e.jsx(Vt,{children:e.jsx(Q,{onClick:ce,children:"Fermer"})})]})]})]})}const Dte=({label:t,value:n,change:r,icon:i,color:l="brand",loading:u=!1})=>{const d=Tn("white","gray.800"),p=Tn(`${l}.600`,`${l}.400`);return e.jsx(Pe,{variant:"modern",bg:d,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsxs(ee,{justify:"space-between",align:"start",mb:2,children:[e.jsx(kt,{color:"gray.600",fontSize:"sm",fontWeight:"500",children:t}),i&&e.jsx(Cn,{as:i,color:p,boxSize:5})]}),e.jsx(Dt,{color:p,fontSize:"2xl",fontWeight:"700",children:u?e.jsx(pn,{size:"sm"}):n}),r&&!u&&e.jsxs(Mi,{mb:0,children:[e.jsx(eh,{type:r.type}),r.value]})]})})})},Pte=({stats:t,loading:n=!1})=>e.jsx(mt,{columns:{base:1,md:2,lg:4},spacing:6,mb:8,children:t.map((r,i)=>e.jsx(Dte,{...r,loading:n},i))}),Vd={STANDARD:{label:"Standard",price:60,description:"Adhsion individuelle classique",color:"blue"},FAMILY:{label:"Famille",price:100,description:"2 adultes + enfants mineurs",color:"green"},STUDENT:{label:"tudiant",price:35,description:"Tarif rduit sur justificatif",color:"purple"},HONORARY:{label:"Honneur",price:0,description:"Membre d'honneur",color:"gold"},LIFETIME:{label:" vie",price:0,description:"Adhsion permanente",color:"red"}},Qg={PENDING:{label:"En attente",color:"yellow",icon:Eu,description:"Dossier en cours de traitement"},ACTIVE:{label:"Actif",color:"green",icon:K1,description:"Adhsion  jour"},EXPIRED:{label:"Expir",color:"red",icon:SJ,description:"Adhsion expire"},SUSPENDED:{label:"Suspendu",color:"orange",icon:Pv,description:"Adhsion suspendue"},CANCELLED:{label:"Annul",color:"gray",icon:Zx,description:"Adhsion annule"}},Jg={MEMBER:{label:"Adhrent",icon:Va,color:"blue",description:"Membre standard de l'association",permissions:["participate_events","access_newsletter"]},DRIVER:{label:"Conducteur",icon:Wu,color:"green",description:"Autoris  conduire les vhicules",permissions:["drive_vehicles","access_myrbe"]},ADMIN:{label:"Administrateur",icon:jm,color:"red",description:"Accs complet aux fonctions d'administration",permissions:["admin_full_access"]},BUREAU:{label:"Bureau",icon:rJ,color:"purple",description:"Membre du bureau de l'association",permissions:["bureau_access","admin_events","admin_members"]}},Mte={CASH:{label:"Espces",icon:Hu,color:"green"},CHECK:{label:"Chque",icon:Yx,color:"blue"},TRANSFER:{label:"Virement",icon:_l,color:"purple"},HELLOASSO:{label:"HelloAsso",icon:$M,color:"orange"},CARD:{label:"Carte bancaire",icon:Yx,color:"teal"}},Pj={IDENTITY_CARD:{label:"Pice d'identit",icon:qM,color:"green",required:!0,maxSizeMB:5,allowedTypes:["image/jpeg","image/png","application/pdf"]},DRIVING_LICENSE:{label:"Permis de conduire",icon:Wu,color:"blue",required:!1,maxSizeMB:5,allowedTypes:["image/jpeg","image/png","application/pdf"]},INSURANCE_RECORD:{label:"Relev d'assurance",icon:jm,color:"orange",required:!0,maxSizeMB:3,allowedTypes:["application/pdf"]},MEMBERSHIP_FORM:{label:"Bulletin d'adhsion",icon:Hb,color:"purple",required:!0,maxSizeMB:3,allowedTypes:["application/pdf"]},MEDICAL_CERTIFICATE:{label:"Certificat mdical",icon:K1,color:"teal",required:!1,maxSizeMB:3,allowedTypes:["application/pdf"]}};function zte(){const[t,n]=v.useState([]),[r,i]=v.useState([]),[l,u]=v.useState(null),[d,p]=v.useState(!0),[f,g]=v.useState(!1),[x,y]=v.useState("table"),[b,w]=v.useState([]),[C,_]=v.useState({search:"",status:"ALL",role:"ALL",membershipType:"ALL",hasMyRBEAccess:"ALL",expiringOnly:!1}),{isOpen:A,onOpen:D,onClose:P}=It(),{isOpen:M,onOpen:N,onClose:z}=It(),{isOpen:I,onOpen:V,onClose:$}=It(),{isOpen:ae,onOpen:he,onClose:re}=It(),[ce,Se]=v.useState(null),[je,de]=v.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"PENDING",joinDate:new Date().toISOString().split("T")[0],renewalDate:"",paymentAmount:"",paymentMethod:"HELLOASSO",role:"MEMBER",hasExternalAccess:!1,hasInternalAccess:!1,newsletter:!0,matricule:"",loginEnabled:!1,temporaryPassword:"",mustChangePassword:!1,driverLicense:"",licenseExpiryDate:"",medicalCertificateDate:"",emergencyContact:"",emergencyPhone:"",driverCertifications:[],vehicleAuthorizations:[],maxPassengers:"",driverNotes:"",notes:""}),[G,U]=v.useState([]),[W,me]=v.useState({type:"IDENTITY_CARD",expiryDate:"",notes:""}),F=v.useRef(null),fe=on();Tn("white","gray.800");const te=()=>{const se=new Date().getFullYear(),be=Math.floor(Math.random()*900)+100;return`${se}-${be}`},R=()=>{const se="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let be="";for(let at=0;at<8;at++)be+=se.charAt(Math.floor(Math.random()*se.length));return be},Y=(se,be)=>{const at=new Date(se),St=new Date(at);return St.setFullYear(at.getFullYear()+1,11,31),St.toISOString().split("T")[0]},q=(se,be=60)=>{if(!se)return!1;const at=new Date(se),St=new Date(Date.now()+be*24*60*60*1e3);return at<=St},le=v.useCallback(async()=>{try{if(p(!0),console.log(" Chargement des membres..."),!await Rl.testConnectivity()){console.warn(" API non accessible, mode dgrad activ"),fe({status:"warning",title:"Mode dgrad",description:"L'API n'est pas accessible. Certaines fonctionnalits peuvent tre limites.",duration:5e3,isClosable:!0}),n([]);return}const be=await Rl.getAll();console.log(" Rponse API membres:",be);let at=[];be?.members?at=Array.isArray(be.members)?be.members:[be.members]:be?.data?at=Array.isArray(be.data)?be.data:[be.data]:Array.isArray(be)?at=be:(console.warn(" Structure de rponse inattendue:",be),at=[]),n(at),console.log(` ${at.length} membres chargs avec succs`),at.length===0&&fe({status:"info",title:"Aucun membre",description:"Aucun membre trouv dans la base de donnes",duration:3e3,isClosable:!0})}catch(se){console.error(" Erreur chargement membres:",se);let be="Impossible de charger les membres",at="error";se.message.includes("404")?be="Endpoint membres non trouv. Vrifiez la configuration de l'API.":se.message.includes("401")?(be="Session expire. Veuillez vous reconnecter.",setTimeout(()=>{window.location.href="/login"},2e3)):se.message.includes("500")?be="Erreur serveur. Contactez l'administrateur.":se.message.includes("Network")&&(be="Problme de rseau. Vrifiez votre connexion.",at="warning"),fe({status:at,title:"Erreur de chargement",description:be,duration:8e3,isClosable:!0}),n([])}finally{p(!1)}},[fe]),We=v.useCallback(async()=>{try{if(t.length===0)return;const se=new Date,be=new Date(se.getTime()-720*60*60*1e3),at={totalMembers:t.length,activeMembers:t.filter(St=>St.membershipStatus==="ACTIVE").length,expiredMembers:t.filter(St=>St.membershipStatus==="EXPIRED").length,pendingMembers:t.filter(St=>St.membershipStatus==="PENDING").length,driversCount:t.filter(St=>St.role==="DRIVER"||St.driverLicense).length,myRBEEnabled:t.filter(St=>St.loginEnabled).length,recentJoins:t.filter(St=>new Date(St.joinDate||St.createdAt)>be).length,expiringSoon:t.filter(St=>q(St.renewalDate)).length,totalRevenue:t.filter(St=>St.membershipStatus==="ACTIVE"&&St.paymentAmount).reduce((St,An)=>St+(parseFloat(An.paymentAmount)||0),0)};u(at)}catch(se){console.error(" Erreur calcul statistiques:",se)}},[t]),pe=v.useCallback(()=>{let se=[...t];if(C.search){const be=C.search.toLowerCase();se=se.filter(at=>`${at.firstName} ${at.lastName}`.toLowerCase().includes(be)||at.email?.toLowerCase().includes(be)||at.matricule?.toLowerCase().includes(be)||at.phone?.includes(be))}if(C.status!=="ALL"&&(se=se.filter(be=>be.membershipStatus===C.status)),C.role!=="ALL"&&(se=se.filter(be=>be.role===C.role)),C.membershipType!=="ALL"&&(se=se.filter(be=>be.membershipType===C.membershipType)),C.hasMyRBEAccess!=="ALL"){const be=C.hasMyRBEAccess==="true";se=se.filter(at=>!!at.loginEnabled===be)}C.expiringOnly&&(se=se.filter(be=>q(be.renewalDate))),i(se)},[t,C]);v.useEffect(()=>{le()},[le]),v.useEffect(()=>{We()},[We]),v.useEffect(()=>{pe()},[pe]);const ye=()=>{de({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"PENDING",joinDate:new Date().toISOString().split("T")[0],renewalDate:"",paymentAmount:Vd.STANDARD.price.toString(),paymentMethod:"HELLOASSO",role:"MEMBER",hasExternalAccess:!1,hasInternalAccess:!1,newsletter:!0,matricule:"",loginEnabled:!1,temporaryPassword:"",mustChangePassword:!1,driverLicense:"",licenseExpiryDate:"",medicalCertificateDate:"",emergencyContact:"",emergencyPhone:"",driverCertifications:[],vehicleAuthorizations:[],maxPassengers:"",driverNotes:"",notes:""}),Se(null)},Ze=()=>{ye(),D()},ht=se=>{de({...se,joinDate:se.joinDate?se.joinDate.split("T")[0]:"",renewalDate:se.renewalDate?se.renewalDate.split("T")[0]:"",birthDate:se.birthDate?se.birthDate.split("T")[0]:"",licenseExpiryDate:se.licenseExpiryDate?se.licenseExpiryDate.split("T")[0]:"",medicalCertificateDate:se.medicalCertificateDate?se.medicalCertificateDate.split("T")[0]:"",paymentAmount:se.paymentAmount?.toString()||"",maxPassengers:se.maxPassengers?.toString()||"",driverCertifications:se.driverCertifications||[],vehicleAuthorizations:se.vehicleAuthorizations||[]}),Se(se),N()},rt=async()=>{try{if(g(!0),!je.firstName?.trim()||!je.lastName?.trim()||!je.email?.trim()){fe({status:"error",title:"Champs requis",description:"Nom, prnom et email sont obligatoires",duration:5e3,isClosable:!0});return}je.joinDate&&!je.renewalDate&&(je.renewalDate=Y(je.joinDate,je.membershipType)),je.loginEnabled&&!je.matricule&&(je.matricule=te()),je.loginEnabled&&!je.temporaryPassword&&(je.temporaryPassword=R(),je.mustChangePassword=!0);const se={...je,paymentAmount:je.paymentAmount?parseFloat(je.paymentAmount):null,maxPassengers:je.maxPassengers?parseInt(je.maxPassengers):null};ce?(await Rl.update(ce.id,se),fe({status:"success",title:"Membre mis  jour",description:`${je.firstName} ${je.lastName} a t modifi avec succs`,duration:5e3,isClosable:!0})):(await Rl.create(se),fe({status:"success",title:"Membre cr",description:`${je.firstName} ${je.lastName} a t ajout avec succs`,duration:5e3,isClosable:!0})),P(),z(),ye(),le()}catch(se){console.error(" Erreur sauvegarde:",se),fe({status:"error",title:"Erreur de sauvegarde",description:se.message||"Impossible de sauvegarder le membre",duration:5e3,isClosable:!0})}finally{g(!1)}},vt=()=>l?[{label:"Total adhrents",value:l.totalMembers,icon:Va,color:"brand",change:l.recentJoins>0?{type:"increase",value:`+${l.recentJoins} ce mois`}:void 0},{label:"Membres actifs",value:l.activeMembers,icon:K1,color:"success",change:{type:"increase",value:`${Math.round(l.activeMembers/l.totalMembers*100)}% du total`}},{label:"Conducteurs habilits",value:l.driversCount,icon:Wu,color:"blue"},{label:"Accs MyRBE",value:l.myRBEEnabled,icon:Lu,color:"purple"},{label:"Expirant bientt",value:l.expiringSoon,icon:Pv,color:"warning"},{label:"Revenus adhsions",value:`${l.totalRevenue||0}`,icon:Hu,color:"green",change:{type:"increase",value:"Cotisations encaisses"}}]:[],Ue=se=>{const be=Qg[se]||Qg.PENDING;return e.jsx(ti,{label:be.description,children:e.jsx(Qe,{colorScheme:be.color,variant:"subtle",children:e.jsxs(ee,{spacing:1,children:[e.jsx(Icon,{as:be.icon,size:"12px"}),e.jsx(k,{children:be.label})]})})})},qt=se=>{const be=Jg[se]||Jg.MEMBER;return e.jsx(ti,{label:be.description,children:e.jsx(Qe,{colorScheme:be.color,variant:"outline",children:e.jsxs(ee,{spacing:1,children:[e.jsx(Icon,{as:be.icon,size:"12px"}),e.jsx(k,{children:be.label})]})})})},Je=se=>{const be=Vd[se]||Vd.STANDARD;return e.jsx(Qe,{colorScheme:be.color,variant:"subtle",children:be.label})},Ge=se=>{console.log(`Action en masse: ${se} sur ${b.length} membres`)},Ve=()=>{console.log("Export des donnes membres")};return d?e.jsx(kh,{title:" Gestion des Adhsions",subtitle:"Chargement des donnes membres...",children:e.jsxs(J,{spacing:8,py:16,children:[e.jsx(pn,{size:"xl",color:"brand.500",thickness:"4px"}),e.jsx(k,{color:"gray.600",children:"Synchronisation avec la base de donnes..."})]})}):e.jsxs(kh,{title:" Gestion des Adhsions",subtitle:"Administration complte des membres de l'association RtroBus Essonne",breadcrumbs:[{label:"MyRBE",href:"/dashboard/myrbe"},{label:"Gestion des Adhsions",href:"/dashboard/members-management"}],headerActions:e.jsxs(ee,{spacing:3,children:[e.jsx(Q,{leftIcon:e.jsx(ua,{}),variant:"secondary",bg:"whiteAlpha.200",color:"white",borderColor:"whiteAlpha.300",onClick:Ve,children:"Exporter"}),e.jsx(Q,{leftIcon:e.jsx(hA,{}),variant:"secondary",bg:"whiteAlpha.200",color:"white",borderColor:"whiteAlpha.300",onClick:Ze,children:"Nouvel adhrent"})]}),children:[e.jsxs(J,{spacing:8,align:"stretch",children:[e.jsx(Pte,{stats:vt(),loading:!l}),e.jsx(Tl,{title:"Filtres et recherche",icon:oJ,color:"gray",children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(mt,{columns:{base:1,md:2,lg:4},spacing:4,children:[e.jsxs(zc,{children:[e.jsx(Ic,{children:e.jsx(ym,{color:"gray.400"})}),e.jsx(ge,{placeholder:"Rechercher un membre...",value:C.search,onChange:se=>_(be=>({...be,search:se.target.value}))})]}),e.jsxs(ut,{value:C.status,onChange:se=>_(be=>({...be,status:se.target.value})),children:[e.jsx("option",{value:"ALL",children:"Tous les statuts"}),Object.entries(Qg).map(([se,be])=>e.jsx("option",{value:se,children:be.label},se))]}),e.jsxs(ut,{value:C.role,onChange:se=>_(be=>({...be,role:se.target.value})),children:[e.jsx("option",{value:"ALL",children:"Tous les rles"}),Object.entries(Jg).map(([se,be])=>e.jsx("option",{value:se,children:be.label},se))]}),e.jsxs(ut,{value:C.membershipType,onChange:se=>_(be=>({...be,membershipType:se.target.value})),children:[e.jsx("option",{value:"ALL",children:"Tous les types"}),Object.entries(Vd).map(([se,be])=>e.jsx("option",{value:se,children:be.label},se))]})]}),e.jsxs(ee,{spacing:4,justify:"space-between",children:[e.jsxs(ee,{spacing:4,children:[e.jsx(Na,{isChecked:C.expiringOnly,onChange:se=>_(be=>({...be,expiringOnly:se.target.checked})),children:"Expirant bientt"}),e.jsxs(ut,{maxW:"200px",value:C.hasMyRBEAccess,onChange:se=>_(be=>({...be,hasMyRBEAccess:se.target.value})),children:[e.jsx("option",{value:"ALL",children:"Tous les accs"}),e.jsx("option",{value:"true",children:"Avec MyRBE"}),e.jsx("option",{value:"false",children:"Sans MyRBE"})]})]}),e.jsxs(ee,{spacing:2,children:[e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[r.length," membre",r.length>1?"s":""," affich",r.length>1?"s":""]}),e.jsxs(wb,{size:"sm",isAttached:!0,variant:"outline",children:[e.jsx(Q,{leftIcon:e.jsx(pJ,{}),onClick:()=>y("cards"),colorScheme:x==="cards"?"blue":"gray",children:"Cartes"}),e.jsx(Q,{leftIcon:e.jsx(_l,{}),onClick:()=>y("table"),colorScheme:x==="table"?"blue":"gray",children:"Tableau"})]})]})]})]})}),b.length>0&&e.jsxs(Ut,{status:"info",borderRadius:"lg",children:[e.jsx(Ht,{}),e.jsxs(ee,{justify:"space-between",w:"full",children:[e.jsxs(k,{children:[b.length," membre",b.length>1?"s":""," slectionn",b.length>1?"s":""]}),e.jsxs(wb,{size:"sm",children:[e.jsx(Q,{onClick:()=>Ge("enable_myrbe"),children:"Activer MyRBE"}),e.jsx(Q,{onClick:()=>Ge("send_renewal"),children:"Envoi renouvellement"}),e.jsx(Q,{colorScheme:"red",onClick:()=>Ge("archive"),children:"Archiver"})]})]})]}),r.length===0?e.jsx(Tl,{children:e.jsxs(J,{spacing:4,py:12,children:[e.jsx(Icon,{as:Va,size:"48px",color:"gray.300"}),e.jsxs(J,{spacing:2,children:[e.jsx(k,{fontSize:"lg",fontWeight:"600",color:"gray.500",children:"Aucun membre trouv"}),e.jsx(k,{fontSize:"sm",color:"gray.400",children:C.search||C.status!=="ALL"?"Aucun membre ne correspond aux critres de recherche":"Commencez par crer votre premier membre"})]}),e.jsx(Q,{leftIcon:e.jsx(hA,{}),colorScheme:"blue",onClick:Ze,children:"Crer un membre"})]})}):x==="cards"?e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:6,children:r.map(se=>e.jsx(Tl,{variant:"modern",color:"blue",onClick:()=>ht(se),children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",align:"start",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsxs(k,{fontWeight:"600",fontSize:"lg",children:[se.firstName," ",se.lastName]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:se.email}),se.matricule&&e.jsx(Qe,{colorScheme:"purple",size:"sm",children:se.matricule})]}),e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(ph,{}),variant:"ghost",size:"sm"}),e.jsxs(Go,{children:[e.jsx(Dn,{icon:e.jsx(Bs,{}),onClick:()=>ht(se),children:"Modifier"}),e.jsx(Dn,{icon:e.jsx(Hb,{}),onClick:()=>{Se(se),he()},children:"Documents"}),e.jsx(Dn,{icon:e.jsx(Lu,{}),children:"Rinitialiser mot de passe"}),e.jsx(Dn,{icon:e.jsx($l,{}),children:"Envoyer email"}),e.jsx(xn,{}),e.jsx(Dn,{icon:e.jsx(Qn,{}),color:"red.500",children:"Supprimer"})]})]})]}),e.jsxs(ee,{spacing:2,wrap:"wrap",children:[Ue(se.membershipStatus),qt(se.role),Je(se.membershipType),se.loginEnabled&&e.jsx(Qe,{colorScheme:"green",variant:"outline",size:"sm",children:"MyRBE"})]}),e.jsxs(J,{spacing:2,align:"stretch",fontSize:"sm",children:[se.phone&&e.jsxs(ee,{children:[e.jsx(Icon,{as:UM,color:"gray.400"}),e.jsx(k,{children:se.phone})]}),se.renewalDate&&e.jsxs(ee,{children:[e.jsx(Icon,{as:Os,color:"gray.400"}),e.jsxs(k,{children:["Expire le ",new Date(se.renewalDate).toLocaleDateString("fr-FR"),q(se.renewalDate)&&e.jsx(Qe,{colorScheme:"orange",size:"sm",ml:2,children:"Bientt"})]})]}),se.paymentAmount&&e.jsxs(ee,{children:[e.jsx(Icon,{as:Hu,color:"gray.400"}),e.jsxs(k,{children:[se.paymentAmount,""]})]})]})]})},se.id))}):e.jsx(Tl,{children:e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{variant:"simple",size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:e.jsx(Na,{isChecked:b.length===r.length,isIndeterminate:b.length>0&&b.length<r.length,onChange:se=>{se.target.checked?w(r.map(be=>be.id)):w([])}})}),e.jsx(_e,{children:"Membre"}),e.jsx(_e,{children:"Contact"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Rle"}),e.jsx(_e,{children:"Type"}),e.jsx(_e,{children:"Renouvellement"}),e.jsx(_e,{children:"MyRBE"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:r.map(se=>e.jsxs(bt,{_hover:{bg:"gray.50"},children:[e.jsx(Ee,{children:e.jsx(Na,{isChecked:b.includes(se.id),onChange:be=>{be.target.checked?w(at=>[...at,se.id]):w(at=>at.filter(St=>St!==se.id))}})}),e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:0,children:[e.jsxs(k,{fontWeight:"600",children:[se.firstName," ",se.lastName]}),se.memberNumber&&e.jsxs(k,{fontSize:"xs",color:"gray.500",fontFamily:"mono",children:["#",se.memberNumber]})]})}),e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontSize:"sm",children:se.email}),se.phone&&e.jsx(k,{fontSize:"xs",color:"gray.500",children:se.phone})]})}),e.jsx(Ee,{children:Ue(se.membershipStatus)}),e.jsx(Ee,{children:qt(se.role)}),e.jsx(Ee,{children:Je(se.membershipType)}),e.jsx(Ee,{children:e.jsxs(J,{align:"start",spacing:0,children:[e.jsx(k,{fontSize:"sm",children:se.renewalDate?new Date(se.renewalDate).toLocaleDateString("fr-FR"):""}),q(se.renewalDate)&&e.jsx(Qe,{colorScheme:"orange",size:"sm",children:"Expire bientt"})]})}),e.jsx(Ee,{children:e.jsx(J,{align:"start",spacing:1,children:se.loginEnabled?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{colorScheme:"green",size:"sm",children:"Activ"}),se.matricule&&e.jsx(k,{fontSize:"xs",color:"gray.500",fontFamily:"mono",children:se.matricule}),se.mustChangePassword&&e.jsx(Qe,{colorScheme:"orange",size:"sm",children:"Changer MDP"})]}):e.jsx(Qe,{colorScheme:"gray",size:"sm",children:"Dsactiv"})})}),e.jsx(Ee,{children:e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(ph,{}),variant:"ghost",size:"sm"}),e.jsxs(Go,{children:[e.jsx(Dn,{icon:e.jsx(Bs,{}),onClick:()=>ht(se),children:"Modifier"}),e.jsx(Dn,{icon:e.jsx(Hb,{}),onClick:()=>{Se(se),he()},children:"Documents"}),e.jsx(Dn,{icon:e.jsx(Lu,{}),children:"Rinitialiser MDP"}),e.jsx(Dn,{icon:e.jsx($l,{}),children:"Envoyer email"}),e.jsx(xn,{}),e.jsx(Dn,{icon:e.jsx(Qn,{}),color:"red.500",children:"Supprimer"})]})]})})]},se.id))})]})})})]}),e.jsxs(Et,{isOpen:A||M,onClose:()=>{P(),z(),ye()},size:"6xl",children:[e.jsx(At,{}),e.jsxs(Pt,{maxH:"90vh",overflowY:"auto",children:[e.jsx(Tt,{children:ce?`Modifier ${ce.firstName} ${ce.lastName}`:"Nouveau membre"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(ga,{variant:"enclosed",children:[e.jsxs(xa,{children:[e.jsx(hn,{children:" Informations personnelles"}),e.jsx(hn,{children:" Adhsion"}),e.jsx(hn,{children:" Accs MyRBE"}),e.jsx(hn,{children:" Conduite"}),e.jsx(hn,{children:" Notes"})]}),e.jsxs(va,{children:[e.jsx(fn,{children:e.jsxs(mt,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Prnom"}),e.jsx(ge,{value:je.firstName,onChange:se=>de(be=>({...be,firstName:se.target.value})),placeholder:"Prnom"})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nom"}),e.jsx(ge,{value:je.lastName,onChange:se=>de(be=>({...be,lastName:se.target.value})),placeholder:"Nom"})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Email"}),e.jsx(ge,{type:"email",value:je.email,onChange:se=>de(be=>({...be,email:se.target.value})),placeholder:"email@exemple.com"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Tlphone"}),e.jsx(ge,{type:"tel",value:je.phone,onChange:se=>de(be=>({...be,phone:se.target.value})),placeholder:"06 12 34 56 78"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date de naissance"}),e.jsx(ge,{type:"date",value:je.birthDate,onChange:se=>de(be=>({...be,birthDate:se.target.value}))})]})]}),e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Adresse"}),e.jsx(Xt,{value:je.address,onChange:se=>de(be=>({...be,address:se.target.value})),placeholder:"Adresse complte",rows:3})]}),e.jsxs(ee,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Ville"}),e.jsx(ge,{value:je.city,onChange:se=>de(be=>({...be,city:se.target.value})),placeholder:"Ville"})]}),e.jsxs(X,{maxW:"150px",children:[e.jsx(Z,{children:"Code postal"}),e.jsx(ge,{value:je.postalCode,onChange:se=>de(be=>({...be,postalCode:se.target.value})),placeholder:"91000"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Contact d'urgence"}),e.jsx(ge,{value:je.emergencyContact,onChange:se=>de(be=>({...be,emergencyContact:se.target.value})),placeholder:"Nom et relation"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Tlphone d'urgence"}),e.jsx(ge,{type:"tel",value:je.emergencyPhone,onChange:se=>de(be=>({...be,emergencyPhone:se.target.value})),placeholder:"06 12 34 56 78"})]})]})]})}),e.jsx(fn,{children:e.jsxs(mt,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Type d'adhsion"}),e.jsx(ut,{value:je.membershipType,onChange:se=>{const be=se.target.value;de(at=>({...at,membershipType:be,paymentAmount:Vd[be].price.toString()}))},children:Object.entries(Vd).map(([se,be])=>e.jsxs("option",{value:se,children:[be.label," - ",be.price," (",be.description,")"]},se))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Statut d'adhsion"}),e.jsx(ut,{value:je.membershipStatus,onChange:se=>de(be=>({...be,membershipStatus:se.target.value})),children:Object.entries(Qg).map(([se,be])=>e.jsx("option",{value:se,children:be.label},se))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Rle"}),e.jsx(ut,{value:je.role,onChange:se=>de(be=>({...be,role:se.target.value})),children:Object.entries(Jg).map(([se,be])=>e.jsx("option",{value:se,children:be.label},se))})]}),e.jsxs(ee,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Date d'adhsion"}),e.jsx(ge,{type:"date",value:je.joinDate,onChange:se=>{const be=se.target.value;de(at=>({...at,joinDate:be,renewalDate:Y(be,at.membershipType)}))}})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Renouvellement"}),e.jsx(ge,{type:"date",value:je.renewalDate,onChange:se=>de(be=>({...be,renewalDate:se.target.value}))})]})]})]}),e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Montant pay"}),e.jsxs(zc,{children:[e.jsx(ge,{type:"number",step:"0.01",value:je.paymentAmount,onChange:se=>de(be=>({...be,paymentAmount:se.target.value})),placeholder:"60.00"}),e.jsx(Ic,{children:""})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Mthode de paiement"}),e.jsx(ut,{value:je.paymentMethod,onChange:se=>de(be=>({...be,paymentMethod:se.target.value})),children:Object.entries(Mte).map(([se,be])=>e.jsx("option",{value:se,children:be.label},se))})]})]}),e.jsx(xn,{}),e.jsxs(J,{spacing:3,align:"stretch",children:[e.jsx(k,{fontWeight:"600",color:"gray.700",children:"Accs et prfrences"}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:0,flex:1,children:"Accs site externe"}),e.jsx(Jn,{isChecked:je.hasExternalAccess,onChange:se=>de(be=>({...be,hasExternalAccess:se.target.checked}))})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:0,flex:1,children:"Accs interne"}),e.jsx(Jn,{isChecked:je.hasInternalAccess,onChange:se=>de(be=>({...be,hasInternalAccess:se.target.checked}))})]}),e.jsxs(X,{display:"flex",alignItems:"center",children:[e.jsx(Z,{mb:0,flex:1,children:"Newsletter"}),e.jsx(Jn,{isChecked:je.newsletter,onChange:se=>de(be=>({...be,newsletter:se.target.checked}))})]})]})]})]})}),e.jsx(fn,{children:e.jsxs(mt,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Numro de permis de conduire"}),e.jsx(ge,{value:je.driverLicense,onChange:se=>de(be=>({...be,driverLicense:se.target.value})),placeholder:"AB123456"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Catgories"}),e.jsxs(ut,{multiple:!0,value:je.driverCertifications,onChange:se=>de(be=>({...be,driverCertifications:Array.from(se.target.selectedOptions,at=>at.value)})),children:[e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"D",children:"D"}),e.jsx("option",{value:"E",children:"E"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date d'expiration du permis"}),e.jsx(ge,{type:"date",value:je.licenseExpiryDate,onChange:se=>de(be=>({...be,licenseExpiryDate:se.target.value}))})]})]}),e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Vhicules autoriss"}),e.jsxs(ut,{multiple:!0,value:je.vehicleAuthorizations,onChange:se=>de(be=>({...be,vehicleAuthorizations:Array.from(se.target.selectedOptions,at=>at.value)})),children:[e.jsx("option",{value:"VL",children:"Vhicule lger"}),e.jsx("option",{value:"PL",children:"Poids lourd"}),e.jsx("option",{value:"TC",children:"Transport en commun"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Nombre maximum de passagers"}),e.jsx(ge,{type:"number",value:je.maxPassengers,onChange:se=>de(be=>({...be,maxPassengers:se.target.value})),placeholder:"4"})]})]})]})}),e.jsx(fn,{children:e.jsxs(X,{children:[e.jsx(Z,{children:"Notes internes"}),e.jsx(Xt,{value:je.notes,onChange:se=>de(be=>({...be,notes:se.target.value})),placeholder:"Remarques ou informations supplmentaires",rows:6})]})})]})]})}),e.jsx(Vt,{children:e.jsxs(ee,{spacing:4,children:[e.jsx(Q,{colorScheme:"blue",isLoading:f,onClick:rt,children:ce?"Sauvegarder les modifications":"Crer le membre"}),e.jsx(Q,{variant:"outline",onClick:()=>{P(),z(),ye()},children:"Annuler"})]})})]})]}),e.jsxs(Et,{isOpen:ae,onClose:()=>{re(),Se(null)},size:"4xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsxs(Tt,{children:["Documents de ",ce?.firstName," ",ce?.lastName]}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"600",mb:2,children:"Documents tlchargs"}),e.jsxs(Sv,{spacing:3,children:[G.length===0&&e.jsx(k,{color:"gray.500",fontSize:"sm",children:"Aucun document trouv pour ce membre."}),G.map(se=>e.jsxs(kP,{p:3,borderWidth:"1px",borderRadius:"md",display:"flex",alignItems:"center",children:[e.jsxs(ee,{spacing:3,flex:1,children:[e.jsx(Icon,{as:Pj[se.type]?.icon,boxSize:8,color:Pj[se.type]?.color}),e.jsxs(J,{align:"start",spacing:1,flex:1,children:[e.jsxs(k,{fontWeight:"500",children:[se.type==="IDENTITY_CARD"&&"Pice d'identit",se.type==="DRIVING_LICENSE"&&"Permis de conduire",se.type==="INSURANCE_RECORD"&&"Relev d'assurance",se.type==="MEMBERSHIP_FORM"&&"Bulletin d'adhsion",se.type==="MEDICAL_CERTIFICATE"&&"Certificat mdical"]}),e.jsxs(ee,{spacing:2,children:[e.jsxs(k,{fontSize:"sm",color:"gray.500",children:[se.size," Mo"]}),e.jsxs(Qe,{colorScheme:se.status==="VALIDATED"?"green":"yellow",variant:"outline",fontSize:"sm",children:[se.status==="VALIDATED"&&"Valid",se.status==="PENDING"&&"En attente"]})]})]})]}),e.jsxs(ee,{spacing:2,children:[e.jsx(Q,{size:"sm",variant:"outline",leftIcon:e.jsx(ua,{}),onClick:()=>{_j.download(se.id).then(()=>{fe({status:"success",title:"Tlchargement lanc",description:"Le document est en cours de tlchargement",duration:5e3,isClosable:!0})}).catch(be=>{console.error(" Erreur tlchargement document:",be),fe({status:"error",title:"Erreur de tlchargement",description:"Impossible de tlcharger le document",duration:5e3,isClosable:!0})})},children:"Tlcharger"}),e.jsx(Q,{size:"sm",variant:"outline",colorScheme:"red",leftIcon:e.jsx(Qn,{}),onClick:async()=>{if(window.confirm("tes-vous sr de vouloir supprimer ce document ?"))try{await _j.remove(se.id),U(be=>be.filter(at=>at.id!==se.id)),fe({status:"success",title:"Document supprim",description:"Le document a t supprim avec succs",duration:5e3,isClosable:!0})}catch(be){console.error(" Erreur suppression document:",be),fe({status:"error",title:"Erreur de suppression",description:"Impossible de supprimer le document",duration:5e3,isClosable:!0})}},children:"Supprimer"})]})]},se.id))]})]}),e.jsx(xn,{}),e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsx(k,{fontWeight:"600",children:"Tlcharger un nouveau document"}),e.jsxs(X,{children:[e.jsx(Z,{children:"Type de document"}),e.jsx(ut,{value:W.type,onChange:se=>me(be=>({...be,type:se.target.value})),children:Object.entries(Pj).map(([se,be])=>e.jsxs("option",{value:se,children:[be.label," (",be.maxSizeMB," Mo max)"]},se))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date d'expiration"}),e.jsx(ge,{type:"date",value:W.expiryDate,onChange:se=>me(be=>({...be,expiryDate:se.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Notes"}),e.jsx(Xt,{value:W.notes,onChange:se=>me(be=>({...be,notes:se.target.value})),placeholder:"Remarques ou informations supplmentaires",rows:3})]}),e.jsx(Q,{colorScheme:"blue",isLoading:f,onClick:async()=>{try{if(g(!0),!W.type||!W.expiryDate){fe({status:"error",title:"Champs requis",description:"Type de document et date d'expiration sont obligatoires",duration:5e3,isClosable:!0});return}const se=new FormData;se.append("file",F.current.files[0]),se.append("type",W.type),se.append("expiryDate",W.expiryDate),se.append("notes",W.notes);const be=await _j.upload(se,ce.id),at=be?.document||be?.data;U(St=>[...St,at]),me({type:"IDENTITY_CARD",expiryDate:"",notes:""}),F.current.value=null,fe({status:"success",title:"Document tlcharg",description:"Le document a t ajout avec succs",duration:5e3,isClosable:!0})}catch(se){console.error(" Erreur upload document:",se),fe({status:"error",title:"Erreur de tlchargement",description:"Impossible de tlcharger le document",duration:5e3,isClosable:!0})}finally{g(!1)}},children:"Tlcharger le document"})]})]})})]})]})]})}const Ite={STANDARD:"Adhsion Standard",FAMILY:"Adhsion Famille",STUDENT:"Adhsion tudiant",HONORARY:"Membre d'Honneur",BIENFAITEUR:"Bienfaiteur"},Nte={PENDING:"En attente",ACTIVE:"Actif",EXPIRED:"Expir",SUSPENDED:"Suspendu"};function Lte({isOpen:t,onClose:n,onMemberCreated:r}){const[i,l]=v.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"ACTIVE",paymentAmount:"",paymentMethod:"CASH",notes:"",newsletter:!0}),[u,d]=v.useState(!1),p=on(),f=()=>l({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",birthDate:"",membershipType:"STANDARD",membershipStatus:"ACTIVE",paymentAmount:"",paymentMethod:"CASH",notes:"",newsletter:!0}),g=async()=>{if(!i.firstName.trim()||!i.lastName.trim()||!i.email.trim()){p({title:"Champs requis",description:"Prnom, nom et email sont requis",status:"error",duration:3e3});return}try{d(!0);const y={...i},b=await Rl.create(y);p({title:"Adhrent cr",status:"success",duration:3e3}),r?.(b),f(),n()}catch(y){p({title:"Erreur",description:y.message,status:"error",duration:5e3})}finally{d(!1)}},x=()=>{f(),n()};return e.jsxs(Et,{isOpen:t,onClose:x,size:"xl",scrollBehavior:"inside",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Crer un adhrent"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Informations personnelles"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(mt,{columns:2,spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Prnom"}),e.jsx(ge,{value:i.firstName,onChange:y=>l(b=>({...b,firstName:y.target.value}))})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nom"}),e.jsx(ge,{value:i.lastName,onChange:y=>l(b=>({...b,lastName:y.target.value}))})]})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Email"}),e.jsx(ge,{type:"email",value:i.email,onChange:y=>l(b=>({...b,email:y.target.value}))})]}),e.jsxs(mt,{columns:2,spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Tlphone"}),e.jsx(ge,{value:i.phone,onChange:y=>l(b=>({...b,phone:y.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date de naissance"}),e.jsx(ge,{type:"date",value:i.birthDate,onChange:y=>l(b=>({...b,birthDate:y.target.value}))})]})]})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Adresse"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Adresse"}),e.jsx(ge,{value:i.address,onChange:y=>l(b=>({...b,address:y.target.value}))})]}),e.jsxs(mt,{columns:2,spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Code postal"}),e.jsx(ge,{value:i.postalCode,onChange:y=>l(b=>({...b,postalCode:y.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Ville"}),e.jsx(ge,{value:i.city,onChange:y=>l(b=>({...b,city:y.target.value}))})]})]})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Adhsion"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(mt,{columns:2,spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Type d'adhsion"}),e.jsx(ut,{value:i.membershipType,onChange:y=>l(b=>({...b,membershipType:y.target.value})),children:Object.entries(Ite).map(([y,b])=>e.jsx("option",{value:y,children:b},y))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Statut"}),e.jsx(ut,{value:i.membershipStatus,onChange:y=>l(b=>({...b,membershipStatus:y.target.value})),children:Object.entries(Nte).map(([y,b])=>e.jsx("option",{value:y,children:b},y))})]})]}),e.jsxs(mt,{columns:2,spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Montant cotisation ()"}),e.jsx(ge,{type:"number",value:i.paymentAmount,onChange:y=>l(b=>({...b,paymentAmount:y.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Mode de paiement"}),e.jsxs(ut,{value:i.paymentMethod,onChange:y=>l(b=>({...b,paymentMethod:y.target.value})),children:[e.jsx("option",{value:"CASH",children:"Espces"}),e.jsx("option",{value:"CHECK",children:"Chque"}),e.jsx("option",{value:"BANK_TRANSFER",children:"Virement"}),e.jsx("option",{value:"CARD",children:"Carte"}),e.jsx("option",{value:"PAYPAL",children:"PayPal"}),e.jsx("option",{value:"HELLOASSO",children:"HelloAsso"})]})]})]})]})})]}),e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Notes"})}),e.jsx(ke,{children:e.jsxs(X,{children:[e.jsx(Z,{children:"Notes administratives"}),e.jsx(Xt,{value:i.notes,onChange:y=>l(b=>({...b,notes:y.target.value})),placeholder:"Notes internes sur l'adhrent..."})]})})]})]})}),e.jsx(Vt,{children:e.jsxs(ee,{spacing:3,children:[e.jsx(Q,{variant:"ghost",onClick:x,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:g,isLoading:u,loadingText:"Cration...",children:"Crer l'adhrent"})]})})]})]})}const AA="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),ex=t=>AA?`${AA}${t}`:t,eS={PENDING:{label:"En attente",color:"yellow",icon:Eu},ACTIVE:{label:"Actif",color:"green",icon:qM},EXPIRED:{label:"Expir",color:"red",icon:Zx},SUSPENDED:{label:"Suspendu",color:"orange",icon:Ko},CANCELLED:{label:"Annul",color:"gray",icon:Zx}},tS={MEMBER:{label:"Adhrent",color:"blue",permissions:["VIEW_PROFILE"]},DRIVER:{label:"Conducteur",color:"green",permissions:["VIEW_PROFILE","DRIVE_VEHICLES"]},MODERATOR:{label:"Modrateur",color:"purple",permissions:["VIEW_PROFILE","MODERATE_CONTENT"]},ADMIN:{label:"Administrateur",color:"red",permissions:["FULL_ACCESS"]}};function Ote({member:t,onEdit:n,onLinkAccess:r,onTerminate:i,onDeleteMember:l}){const u=Tn("white","gray.800"),d=eS[t.membershipStatus]||eS.PENDING,p=tS[t.role]||tS.MEMBER;return e.jsxs(Pe,{bg:u,borderWidth:1,borderColor:"gray.200",children:[e.jsx(zt,{pb:2,children:e.jsxs(sr,{justify:"space-between",align:"start",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsxs(ee,{children:[e.jsxs(k,{fontWeight:"bold",fontSize:"md",children:[t.firstName," ",t.lastName]}),e.jsx(Qe,{colorScheme:d.color,size:"sm",children:d.label}),e.jsx(Qe,{colorScheme:p.color,variant:"outline",size:"sm",children:p.label})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:t.email}),t.matricule&&e.jsxs(ee,{spacing:2,children:[e.jsxs(Qe,{colorScheme:"blue",variant:"subtle",children:[" ",t.matricule]}),t.loginEnabled?e.jsx(Qe,{colorScheme:"green",size:"sm",children:" Accs activ"}):e.jsx(Qe,{colorScheme:"gray",size:"sm",children:" Accs dsactiv"})]})]}),e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(Qu,{}),variant:"ghost",size:"sm"}),e.jsxs(Go,{children:[e.jsx(Dn,{icon:e.jsx(Bs,{}),onClick:()=>n(t),children:"Modifier"}),e.jsx(Dn,{icon:e.jsx(Zx,{}),onClick:()=>i(t),color:"red.500",children:"Terminer l'adhsion"}),e.jsx(Dn,{icon:e.jsx(Lu,{}),onClick:()=>r(t),children:"Associer  un accs existant"}),t.membershipStatus==="CANCELLED"&&e.jsx(Dn,{icon:e.jsx(Qn,{}),onClick:()=>l(t),color:"red.600",children:"Effacer l'adhrent"})]})]})]})}),e.jsx(ke,{pt:0,children:e.jsxs(J,{align:"start",spacing:2,children:[t.phone&&e.jsxs(k,{fontSize:"sm",children:[" ",t.phone]}),t.lastLoginAt&&e.jsxs(k,{fontSize:"xs",color:"gray.500",children:["Dernire connexion: ",new Date(t.lastLoginAt).toLocaleDateString("fr-FR")]}),t.mustChangePassword&&e.jsx(Qe,{colorScheme:"orange",size:"sm",children:" Doit changer le mot de passe"})]})})]})}function Bte(){const[t,n]=v.useState([]),[r,i]=v.useState(!0),[l,u]=v.useState(""),[d,p]=v.useState("ALL"),[f,g]=v.useState("ALL"),[x,y]=v.useState(!1),[b,w]=v.useState(null),[C,_]=v.useState({}),{isOpen:A,onOpen:D,onClose:P}=It(),{isOpen:M,onOpen:N,onClose:z}=It(),{isOpen:I,onOpen:V,onClose:$}=It(),{isOpen:ae,onOpen:he,onClose:re}=It(),ce=on(),Se=Tn("white","gray.800"),je=()=>e.jsx(yn,{py:20,children:e.jsxs(J,{spacing:4,children:[e.jsx(pn,{size:"xl",color:"purple.500"}),e.jsx(k,{color:"gray.500",children:"Chargement des membres..."})]})}),[de,G]=v.useState(null),[U,W]=v.useState(null),[me,F]=v.useState({reason:"",notes:"",pv:null,resignation:null}),{isOpen:fe,onOpen:te,onClose:R}=It(),[Y,q]=v.useState({username:"",email:""});v.useEffect(()=>{le()},[]);const le=async()=>{try{i(!0);const qe=await Rl.getAll();n(qe.members||[]),We(qe.members||[])}catch(qe){console.error("Erreur chargement membres:",qe),ce({title:"Erreur",description:"Impossible de charger les membres",status:"error",duration:5e3})}finally{i(!1)}},We=qe=>{const Me=qe.length,nt=qe.filter(pt=>pt.loginEnabled).length,wt=qe.filter(pt=>pt.membershipStatus==="ACTIVE").length,Xe=qe.filter(pt=>{if(!pt.lastLoginAt)return!1;const ot=new Date(pt.lastLoginAt),Ne=new Date;return Ne.setMonth(Ne.getMonth()-1),ot>Ne}).length;_({total:Me,withLogin:nt,active:wt,recentlyActive:Xe})},pe=t.filter(qe=>{const Me=qe.firstName?.toLowerCase().includes(l.toLowerCase())||qe.lastName?.toLowerCase().includes(l.toLowerCase())||qe.email?.toLowerCase().includes(l.toLowerCase())||qe.matricule?.toLowerCase().includes(l.toLowerCase()),nt=d==="ALL"||qe.membershipStatus===d,wt=f==="ALL"||qe.role===f,Xe=!x||qe.loginEnabled;return Me&&nt&&wt&&Xe}),ye=qe=>{w(qe),G({...qe}),V()},Ze=async()=>{try{if(!b)return;const qe=["firstName","lastName","email","phone","address","city","postalCode","membershipType","membershipStatus","paymentAmount","paymentMethod","newsletter","notes"],Me={};for(const pt of qe)pt in de&&(Me[pt]=de[pt]);const nt=await fetch(ex(`/api/members/${b.id}`),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(Me)}),wt=await nt.json().catch(()=>({}));if(!nt.ok)throw new Error(wt?.error||"chec de la mise  jour");const Xe=wt.member||wt;n(pt=>pt.map(ot=>ot.id===b.id?{...ot,...Xe}:ot)),ce({title:"Membre mis  jour",status:"success"}),$()}catch(qe){ce({title:"Erreur",description:qe.message,status:"error"})}},ht=qe=>{W(qe),F({reason:"",notes:"",pv:null,resignation:null}),he()},rt=async()=>{try{if(!U)return;if(!me.reason){ce({title:"Motif requis",status:"error"});return}if(me.reason==="EXCLUSION"&&!me.pv){ce({title:"PV obligatoire",status:"error"});return}if(me.reason==="DEMISSION"&&(!me.pv||!me.resignation)){ce({title:"PV et lettre obligatoires",status:"error"});return}const qe=new FormData;qe.append("reason",me.reason),me.notes&&qe.append("notes",me.notes),me.pv&&qe.append("pv",me.pv),me.resignation&&qe.append("resignation",me.resignation);const Me=await fetch(ex(`/api/members/${U.id}/terminate`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:qe}),nt=await Me.json().catch(()=>({}));if(!Me.ok)throw new Error(nt?.error||"chec de la rsiliation");ce({title:"Adhsion termine",status:"success"}),await le(),re()}catch(qe){ce({title:"Erreur",description:qe.message,status:"error"})}},vt=async qe=>{try{if(qe.membershipStatus!=="CANCELLED"){ce({title:"Rsiliez d'abord l'adhsion",status:"warning"});return}if(!window.confirm(`Effacer dfinitivement ${qe.firstName} ${qe.lastName} ?`))return;const Me=await fetch(ex(`/api/members/${qe.id}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Me.ok&&Me.status!==204){const nt=await Me.json().catch(()=>({}));throw new Error(nt?.error||"Suppression impossible")}ce({title:"Adhrent effac",status:"success"}),n(nt=>nt.filter(wt=>wt.id!==qe.id))}catch(Me){ce({title:"Erreur",description:Me.message,status:"error"})}},Ue=qe=>{n(Me=>[qe,...Me]),We([qe,...t]),P()},qt=qe=>{w(qe),q({username:"",email:""}),te()},Je=async()=>{try{if(!b)return;if(!Y.username&&!Y.email){ce({title:"Renseignez matricule ou email",status:"warning"});return}const qe=await fetch(ex(`/api/members/${b.id}/link-access`),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({username:Y.username||void 0,email:Y.email||void 0})}),Me=await qe.json().catch(()=>({}));if(!qe.ok)throw new Error(Me?.error||"chec de lassociation");ce({title:"Accs associ",status:"success"}),await le(),R()}catch(qe){ce({title:"Erreur",description:qe.message,status:"error"})}},Ge=()=>{if(r)return je();const qe={total:C.total||0,withLogin:C.withLogin||0,active:C.active||0,recentlyActive:C.recentlyActive||0};return e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsx(k,{color:"gray.600",children:"Suivi global des adhsions et des connexions MyRBE."}),e.jsxs(mt,{columns:{base:2,md:4},spacing:4,children:[e.jsx(Pe,{bg:Se,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Total membres"}),e.jsx(Dt,{color:"blue.500",children:qe.total})]})})}),e.jsx(Pe,{bg:Se,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Avec accs MyRBE"}),e.jsx(Dt,{color:"green.500",children:qe.withLogin}),e.jsxs(Mi,{children:[qe.total>0?Math.round(qe.withLogin/qe.total*100):0,"%"]})]})})}),e.jsx(Pe,{bg:Se,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Adhsions actives"}),e.jsx(Dt,{color:"purple.500",children:qe.active})]})})}),e.jsx(Pe,{bg:Se,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{children:"Connexions rcentes"}),e.jsx(Dt,{color:"orange.500",children:qe.recentlyActive}),e.jsx(Mi,{children:"30 derniers jours"})]})})})]})]})},Ve=()=>r?je():e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsx(Pe,{bg:Se,children:e.jsx(ke,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{w:"full",spacing:4,align:{base:"stretch",md:"center"},flexWrap:"wrap",children:[e.jsxs(zc,{flex:2,children:[e.jsx(Ic,{children:e.jsx(ym,{})}),e.jsx(ge,{placeholder:"Rechercher par nom, email ou matricule...",value:l,onChange:qe=>u(qe.target.value)})]}),e.jsxs(ut,{value:d,onChange:qe=>p(qe.target.value),maxW:"200px",children:[e.jsx("option",{value:"ALL",children:"Tous statuts"}),Object.entries(eS).map(([qe,Me])=>e.jsx("option",{value:qe,children:Me.label},qe))]}),e.jsxs(ut,{value:f,onChange:qe=>g(qe.target.value),maxW:"200px",children:[e.jsx("option",{value:"ALL",children:"Tous rles"}),Object.entries(tS).map(([qe,Me])=>e.jsx("option",{value:qe,children:Me.label},qe))]})]}),e.jsxs(ee,{spacing:4,justify:"space-between",flexWrap:"wrap",children:[e.jsx(Na,{isChecked:x,onChange:qe=>y(qe.target.checked),children:"Afficher seulement les membres avec accs MyRBE"}),e.jsx(Q,{leftIcon:e.jsx(Fa,{}),size:"sm",onClick:le,children:"Actualiser"})]})]})})}),e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[pe.length," membre(s) affich(s)"]}),e.jsx(mt,{columns:{base:1,md:2,lg:3},spacing:4,children:pe.map(qe=>e.jsx(Ote,{member:qe,onEdit:ye,onLinkAccess:qt,onTerminate:ht,onDeleteMember:vt},qe.id))}),pe.length===0&&e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),"Aucun membre ne correspond aux critres de recherche"]})]}),se=()=>e.jsxs(oe,{children:[e.jsx(Te,{size:"md",mb:4,children:"Gestion des Rles"}),e.jsx(k,{mb:4,color:"gray.600",children:"Configuration des rles et permissions"}),at("roles")]}),be=()=>e.jsxs(oe,{children:[e.jsx(Te,{size:"md",mb:4,children:"Paramtres"}),at("settings")]}),at=qe=>e.jsx(Pe,{bg:Se,children:e.jsx(ke,{children:e.jsxs(k,{color:"gray.500",children:["Contenu de ",qe,"  implmenter"]})})}),St=[{id:"dashboard",label:"Tableau de bord",icon:X1,description:"Vue synthtique",render:Ge},{id:"members",label:"Adhrents",icon:Va,description:"Cration et recherche",render:Ve},{id:"roles",label:"Rles",icon:jm,description:"Permissions",render:se},{id:"settings",label:"Paramtres",icon:Qu,description:"Options avances",render:be}],An=[e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:D,children:"Nouvel adhrent"},"create")];return e.jsxs(e.Fragment,{children:[e.jsx(Bh,{title:"Gestion des Adhsions",subtitle:"Crer et grer les adhrents (les identifiants sont grs sparment)",sections:St,defaultSectionId:"dashboard",sidebarTitle:"Adhsions",sidebarSubtitle:"Espace MyRBE",sidebarTitleIcon:Va,versionLabel:"Adhsions v2",headerActions:An}),e.jsx(Lte,{isOpen:A,onClose:P,onMemberCreated:Ue}),e.jsxs(Et,{isOpen:fe,onClose:R,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Associer  un accs existant"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),'La cration daccs se fait dans "Gestion des accs". Ici, vous pouvez lier un accs existant (fusion).']}),e.jsxs(X,{children:[e.jsx(Z,{children:"Matricule (username)"}),e.jsx(ge,{value:Y.username,onChange:qe=>q(Me=>({...Me,username:qe.target.value})),placeholder:"ex: jd2025"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Email"}),e.jsx(ge,{type:"email",value:Y.email,onChange:qe=>q(Me=>({...Me,email:qe.target.value})),placeholder:"utilisateur@domaine.fr"})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Renseignez au moins lun des deux champs."})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:R,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:Je,children:"Associer"})]})]})]}),e.jsxs(Et,{isOpen:I,onClose:$,size:"xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Modifier le membre"}),e.jsx($t,{}),e.jsx(_t,{children:de&&e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Prnom"}),e.jsx(ge,{value:de.firstName||"",onChange:qe=>G(Me=>({...Me,firstName:qe.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Nom"}),e.jsx(ge,{value:de.lastName||"",onChange:qe=>G(Me=>({...Me,lastName:qe.target.value}))})]})]}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Email"}),e.jsx(ge,{type:"email",value:de.email||"",onChange:qe=>G(Me=>({...Me,email:qe.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Tlphone"}),e.jsx(ge,{value:de.phone||"",onChange:qe=>G(Me=>({...Me,phone:qe.target.value}))})]})]}),e.jsxs(mt,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Statut"}),e.jsxs(ut,{value:de.membershipStatus||"ACTIVE",onChange:qe=>G(Me=>({...Me,membershipStatus:qe.target.value})),children:[e.jsx("option",{value:"PENDING",children:"En attente"}),e.jsx("option",{value:"ACTIVE",children:"Actif"}),e.jsx("option",{value:"EXPIRED",children:"Expir"}),e.jsx("option",{value:"SUSPENDED",children:"Suspendu"}),e.jsx("option",{value:"CANCELLED",children:"Annul"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Type d'adhsion"}),e.jsxs(ut,{value:de.membershipType||"STANDARD",onChange:qe=>G(Me=>({...Me,membershipType:qe.target.value})),children:[e.jsx("option",{value:"STANDARD",children:"Standard"}),e.jsx("option",{value:"FAMILY",children:"Famille"}),e.jsx("option",{value:"STUDENT",children:"tudiant"}),e.jsx("option",{value:"HONORARY",children:"Honneur"})]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Notes"}),e.jsx(Xt,{value:de.notes||"",onChange:qe=>G(Me=>({...Me,notes:qe.target.value}))})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:$,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:Ze,children:"Enregistrer"})]})]})]}),e.jsxs(Et,{isOpen:ae,onClose:re,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Terminer l'adhsion"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(Ut,{status:"warning",children:[e.jsx(Ht,{}),"Cette action met fin  l'adhsion. L'accs site associ sera dsactiv."]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Motif"}),e.jsxs(ut,{value:me.reason,onChange:qe=>F(Me=>({...Me,reason:qe.target.value})),children:[e.jsx("option",{value:"",children:"Choisir un motif..."}),e.jsx("option",{value:"FIN",children:"Fin d'adhsion"}),e.jsx("option",{value:"NON_RECONDUITE",children:"Non reconduite"}),e.jsx("option",{value:"EXCLUSION",children:"Exclusion vote (joindre le PV)"}),e.jsx("option",{value:"DEMISSION",children:"Dmission (joindre PV et lettre de dmission)"}),e.jsx("option",{value:"INFORMATIQUE",children:"INFORMATIQUE"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Notes (optionnel)"}),e.jsx(Xt,{value:me.notes,onChange:qe=>F(Me=>({...Me,notes:qe.target.value}))})]}),(me.reason==="EXCLUSION"||me.reason==="DEMISSION")&&e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Procs-verbal (PDF/Image)"}),e.jsx(ge,{type:"file",accept:"application/pdf,image/*",onChange:qe=>F(Me=>({...Me,pv:qe.target.files?.[0]||null}))})]}),me.reason==="DEMISSION"&&e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Lettre de dmission (PDF/Image)"}),e.jsx(ge,{type:"file",accept:"application/pdf,image/*",onChange:qe=>F(Me=>({...Me,resignation:qe.target.files?.[0]||null}))})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:re,children:"Annuler"}),e.jsx(Q,{colorScheme:"red",onClick:rt,children:"Confirmer"})]})]})]})]})}function $te({report:t,onUpdate:n,onComment:r,onStatusChange:i,onDelete:l}){const u=Tn("white","gray.800"),d={low:"green",medium:"yellow",high:"orange",critical:"red"},p={open:"blue",in_progress:"orange",resolved:"green",closed:"gray"},f=v.useMemo(()=>{switch(t.priority){case"low":return" Faible";case"medium":return" Moyen";case"high":return" lev";default:return" Critique"}},[t.priority]),g=v.useMemo(()=>{switch(t.status){case"open":return"Ouvert";case"in_progress":return"En cours";case"resolved":return"Rsolu";default:return"Ferm"}},[t.status]),x=t.createdAt?new Date(t.createdAt):null;return e.jsxs(Pe,{bg:u,borderLeftWidth:4,borderLeftColor:`${d[t.priority]||"gray"}.500`,children:[e.jsx(zt,{pb:3,children:e.jsxs(sr,{justify:"space-between",align:"start",children:[e.jsxs(J,{align:"start",spacing:2,children:[e.jsxs(ee,{children:[e.jsx(Qe,{colorScheme:d[t.priority]||"gray",variant:"solid",size:"sm",children:f}),e.jsx(Qe,{colorScheme:p[t.status]||"gray",variant:"subtle",children:g})]}),e.jsx(Te,{size:"sm",children:t.title}),e.jsxs(k,{fontSize:"xs",color:"gray.500",children:["Cr par ",t.createdBy," ",x?`le ${x.toLocaleDateString("fr-FR")}`:""]})]}),e.jsxs(Wo,{children:[e.jsx(qo,{as:xt,icon:e.jsx(ph,{}),variant:"ghost",size:"sm"}),e.jsxs(Go,{zIndex:10,position:"relative",children:[e.jsx(Dn,{icon:e.jsx(nh,{}),onClick:()=>n(t),children:"Modifier"}),e.jsx(Dn,{icon:e.jsx(fJ,{}),onClick:()=>r(t),children:"Commenter"}),t.status==="open"&&e.jsx(Dn,{icon:e.jsx(Fa,{}),onClick:()=>i(t.id,"in_progress"),children:"Marquer en cours"}),(t.status==="open"||t.status==="in_progress")&&e.jsx(Dn,{icon:e.jsx(Kp,{}),onClick:()=>i(t.id,"resolved"),children:"Marquer comme rsolu"}),t.status==="resolved"&&e.jsx(Dn,{icon:e.jsx(qu,{}),onClick:()=>i(t.id,"closed"),children:"Fermer dfinitivement"}),t.status==="closed"&&e.jsx(Dn,{icon:e.jsx(Fa,{}),onClick:()=>i(t.id,"open"),children:"Rouvrir"}),e.jsx(Vx,{}),e.jsx(Dn,{icon:e.jsx(Qn,{}),onClick:()=>l(t.id),color:"red.500",children:"Supprimer"})]})]})]})}),e.jsx(ke,{pt:0,children:e.jsxs(J,{align:"start",spacing:3,children:[e.jsx(k,{fontSize:"sm",children:t.description}),t.category&&e.jsx(Yo,{size:"sm",variant:"subtle",children:e.jsx(Zo,{children:t.category})}),t.assignedTo&&e.jsxs(ee,{children:[e.jsx(UD,{size:"xs",name:t.assignedTo}),e.jsxs(k,{fontSize:"xs",children:["Assign  ",t.assignedTo]})]}),Array.isArray(t.comments)&&t.comments.length>0&&e.jsxs(J,{align:"start",spacing:2,w:"full",children:[e.jsx(xn,{}),e.jsx(ee,{children:e.jsxs(k,{fontSize:"xs",fontWeight:"bold",children:[t.comments.length," commentaire(s)"]})}),e.jsxs(oe,{bg:"gray.50",p:2,borderRadius:"md",w:"full",children:[e.jsx(k,{fontSize:"xs",children:t.comments[t.comments.length-1].message}),e.jsxs(k,{fontSize:"xs",color:"gray.500",mt:1,children:["Par ",t.comments[t.comments.length-1].author," - ",new Date(t.comments[t.comments.length-1].createdAt).toLocaleDateString("fr-FR")]})]})]})]})})]})}function Fte(){const{user:t}=es(),n=on(),{isOpen:r,onOpen:i,onClose:l}=It(),{isOpen:u,onOpen:d,onClose:p}=It(),{isOpen:f,onOpen:g,onClose:x}=It(),[y,b]=v.useState(!0),[w,C]=v.useState([]),[_,A]=v.useState(null),[D,P]=v.useState({title:"",description:"",category:"",priority:"medium",type:"bug"}),[M,N]=v.useState({title:"",description:"",category:"",priority:"medium",type:"bug"}),[z,I]=v.useState({message:"",status:""}),[V,$]=v.useState([]),ae=Tn("white","gray.800"),he=async()=>{try{const U="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),W=await fetch(`${U}/api/retro-reports`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!W.ok)throw new Error("load failed");const me=await W.json();C(me.reports||[])}catch(U){console.error("Erreur chargement rtroreports:",U)}};v.useEffect(()=>{(async()=>(b(!0),await he(),b(!1)))()},[]);const re=async()=>{if(!D.title||!D.description){n({title:"Erreur",description:"Veuillez remplir le titre et la description",status:"error",duration:3e3,isClosable:!0});return}try{const U="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),W=new FormData;W.append("title",D.title),W.append("description",D.description),W.append("category",D.category||""),W.append("priority",D.priority||"medium"),W.append("type",D.type||"bug"),V&&V.length>0&&V.forEach(F=>W.append("screenshots",F,F.name));const me=await fetch(`${U}/api/retro-reports`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:W});if(!me.ok){const F=await me.json().catch(()=>({error:"create failed"}));throw new Error(F.error||"create failed")}await he(),P({title:"",description:"",category:"",priority:"medium",type:"bug"}),$([]),l(),n({title:"Succs",description:"RtroReport cr avec succs",status:"success",duration:3e3,isClosable:!0})}catch(U){n({title:"Erreur",description:U.message||"Impossible de crer le RtroReport",status:"error",duration:3e3})}},ce=async()=>{if(!z.message){n({title:"Erreur",description:"Veuillez crire un commentaire",status:"error",duration:3e3,isClosable:!0});return}try{const U="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),W={message:z.message,author:t?.name||"Administrateur",status:z.status||void 0};let me=await fetch(`${U}/api/retro-reports/${_.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(W)});if(!me.ok&&(me=await fetch(`${U}/api/retro-reports/${_.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({appendComment:{message:W.message,author:W.author},status:W.status})}),!me.ok))throw new Error("Impossible de persister le commentaire");await he(),I({message:"",status:""}),p(),n({title:"Succs",description:"Commentaire ajout avec succs",status:"success",duration:3e3,isClosable:!0})}catch(U){console.error(U),n({title:"Erreur",description:"Impossible d'ajouter le commentaire",status:"error",duration:3e3})}},Se=async(U,W)=>{try{const me="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,"");let F=await fetch(`${me}/api/retro-reports/${U}/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:W})});if(!F.ok&&(F=await fetch(`${me}/api/retro-reports/${U}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:W})}),!F.ok))throw new Error("status failed");await he(),n({title:"Statut mis  jour",description:`RtroReport marqu comme ${{open:"Ouvert",in_progress:"En cours",resolved:"Rsolu",closed:"Ferm"}[W]?.toLowerCase()||W}`,status:"success",duration:3e3})}catch{n({title:"Erreur",description:"Impossible de changer le statut",status:"error",duration:3e3})}},je=async U=>{if(window.confirm("tes-vous sr de vouloir supprimer ce RtroReport ?"))try{const W="https://attractive-kindness-rbe-serveurs.up.railway.app".replace(/\/$/,""),me=localStorage.getItem("token");if(!me){n({title:"Erreur",description:"Token non trouv",status:"error",duration:3e3});return}const F=`${W}/api/retro-reports/${U}`;console.log(" Suppression ticket:",F);const fe=await fetch(F,{method:"DELETE",headers:{Authorization:`Bearer ${me}`,"Content-Type":"application/json"}});if(console.log("Delete response status:",fe.status),!fe.ok){const R=await fe.text();throw console.error("Delete error:",R),new Error(`HTTP ${fe.status}: ${R}`)}const te=await fe.json();console.log("Delete result:",te),await he(),n({title:"RtroReport supprim",description:"Le ticket a t supprim avec succs",status:"success",duration:3e3})}catch(W){console.error(" Erreur suppression:",W),n({title:"Erreur",description:`Suppression impossible: ${W.message}`,status:"error",duration:5e3})}},de=U=>{A(U),N({title:U.title,description:U.description,category:U.category||"",priority:U.priority||"medium",type:U.type||"bug"}),g()},G=async()=>{if(!_?.id||!M.title||!M.description){n({title:"Erreur",description:"Titre et description requis",status:"error",duration:3e3,isClosable:!0});return}try{if(!(await fetch(`https://attractive-kindness-rbe-serveurs.up.railway.app/api/retro-reports/${_.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({title:M.title,description:M.description,category:M.category||"",priority:M.priority||"medium",type:M.type||"bug"})})).ok)throw new Error("update failed");await he(),x(),n({title:"Succs",description:"RtroReport mis  jour",status:"success",duration:3e3})}catch{n({title:"Erreur",description:"Mise  jour impossible",status:"error",duration:3e3})}};return y?e.jsx(ei,{maxW:"container.xl",py:8,children:e.jsxs(J,{spacing:8,children:[e.jsx(pn,{size:"xl",color:"green.500"}),e.jsx(k,{children:"Chargement du support"})]})}):e.jsxs(ei,{maxW:"container.xl",py:8,children:[e.jsxs(oe,{bgGradient:"linear(to-r, red.500, orange.500)",color:"white",p:8,borderRadius:"xl",mb:8,textAlign:"center",children:[e.jsx(Te,{size:"xl",mb:2,children:" Support du site"}),e.jsx(k,{opacity:.9,children:"Tickets: incidents, bugs et amliorations"})]}),e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(ee,{justify:"space-between",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"md",children:"Systme de tickets"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Signalez et suivez les incidents et demandes"})]}),e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"red",onClick:i,children:"Nouveau ticket"})]}),e.jsxs(mt,{columns:{base:1,md:4},spacing:4,children:[e.jsx(Pe,{bg:ae,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"Ouverts"}),e.jsx(Dt,{color:"red.500",fontSize:"lg",children:w.filter(U=>U.status==="open").length})]})})}),e.jsx(Pe,{bg:ae,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"En cours"}),e.jsx(Dt,{color:"orange.500",fontSize:"lg",children:w.filter(U=>U.status==="in_progress").length})]})})}),e.jsx(Pe,{bg:ae,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"Rsolus"}),e.jsx(Dt,{color:"green.500",fontSize:"lg",children:w.filter(U=>U.status==="resolved").length})]})})}),e.jsx(Pe,{bg:ae,children:e.jsx(ke,{children:e.jsxs(Rt,{children:[e.jsx(kt,{fontSize:"xs",children:"Total"}),e.jsx(Dt,{color:"blue.500",fontSize:"lg",children:w.length})]})})})]}),e.jsx(J,{spacing:4,align:"stretch",children:w.length===0?e.jsxs(Ut,{status:"info",children:[e.jsx(Ht,{}),e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",children:"Aucun ticket"}),e.jsx(k,{fontSize:"xs",children:"Crez votre premier ticket."})]})]}):w.map(U=>e.jsx($te,{report:U,onUpdate:de,onComment:W=>{A(W),d()},onStatusChange:Se,onDelete:je},U.id))})]}),e.jsxs(Et,{isOpen:r,onClose:l,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Nouveau ticket"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{value:D.title,onChange:U=>P(W=>({...W,title:U.target.value})),placeholder:"Ex: Problme de connexion, Page lente..."})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:D.description,onChange:U=>P(W=>({...W,description:U.target.value})),rows:4,placeholder:"Dcrivez le problme..."})]}),e.jsxs(mt,{columns:2,spacing:4,w:"full",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Type"}),e.jsxs(ut,{value:D.type,onChange:U=>P(W=>({...W,type:U.target.value})),children:[e.jsx("option",{value:"bug",children:" Bug"}),e.jsx("option",{value:"feature",children:" Amlioration"}),e.jsx("option",{value:"performance",children:" Performance"}),e.jsx("option",{value:"security",children:" Scurit"}),e.jsx("option",{value:"other",children:" Autre"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Priorit"}),e.jsxs(ut,{value:D.priority,onChange:U=>P(W=>({...W,priority:U.target.value})),children:[e.jsx("option",{value:"low",children:" Faible"}),e.jsx("option",{value:"medium",children:" Moyen"}),e.jsx("option",{value:"high",children:" lev"}),e.jsx("option",{value:"critical",children:" Critique"})]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Catgorie"}),e.jsx(ge,{value:D.category,onChange:U=>P(W=>({...W,category:U.target.value})),placeholder:"Ex: Technique, Interface, Base de donnes..."})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Captures dcran (optionnel)"}),e.jsx(ge,{type:"file",accept:"image/*",multiple:!0,onChange:U=>$(Array.from(U.target.files||[]))})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:l,children:"Annuler"}),e.jsx(Q,{colorScheme:"red",onClick:re,leftIcon:e.jsx(Bn,{}),children:"Crer"})]})]})]}),e.jsxs(Et,{isOpen:u,onClose:p,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Ajouter un commentaire"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Commentaire"}),e.jsx(Xt,{value:z.message,onChange:U=>I(W=>({...W,message:U.target.value})),rows:3})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Changer le statut (optionnel)"}),e.jsxs(ut,{value:z.status,onChange:U=>I(W=>({...W,status:U.target.value})),children:[e.jsx("option",{value:"",children:"Ne pas changer"}),e.jsx("option",{value:"open",children:"Ouvert"}),e.jsx("option",{value:"in_progress",children:"En cours"}),e.jsx("option",{value:"resolved",children:"Rsolu"}),e.jsx("option",{value:"closed",children:"Ferm"})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:p,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:ce,children:"Publier"})]})]})]}),e.jsxs(Et,{isOpen:f,onClose:x,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Modifier le ticket"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{value:M.title,onChange:U=>N(W=>({...W,title:U.target.value}))})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{rows:4,value:M.description,onChange:U=>N(W=>({...W,description:U.target.value}))})]}),e.jsxs(mt,{columns:2,spacing:4,w:"full",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Catgorie"}),e.jsx(ge,{value:M.category,onChange:U=>N(W=>({...W,category:U.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Priorit"}),e.jsxs(ut,{value:M.priority,onChange:U=>N(W=>({...W,priority:U.target.value})),children:[e.jsx("option",{value:"low",children:"Faible"}),e.jsx("option",{value:"medium",children:"Moyen"}),e.jsx("option",{value:"high",children:"lev"}),e.jsx("option",{value:"critical",children:"Critique"})]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Type"}),e.jsxs(ut,{value:M.type,onChange:U=>N(W=>({...W,type:U.target.value})),children:[e.jsx("option",{value:"bug",children:"Bug"}),e.jsx("option",{value:"feature",children:"Amlioration"}),e.jsx("option",{value:"performance",children:"Performance"}),e.jsx("option",{value:"security",children:"Scurit"}),e.jsx("option",{value:"other",children:"Autre"})]})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:x,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:G,children:"Enregistrer"})]})]})]})]})}function Mj({p:t,onEdit:n,onDelete:r}){return e.jsxs(Pe,{overflow:"hidden",children:[e.jsx(Li,{src:t.image||"/assets/fallback/_MG_1006.jpg",alt:t.name,w:"100%",h:"160px",objectFit:"cover"}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:2,children:[e.jsxs(ee,{justify:"space-between",align:"start",children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"sm",children:t.name}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:t.category})]}),e.jsx(Yo,{size:"sm",colorScheme:t.active?"green":"gray",children:e.jsx(Zo,{children:t.active?"Actif":"Masqu"})})]}),e.jsxs(ee,{justify:"space-between",children:[e.jsxs(k,{fontWeight:"bold",children:[t.price.toFixed(2)," "]}),e.jsxs(ee,{children:[e.jsx(xt,{"aria-label":"diter",size:"sm",icon:e.jsx(Bs,{}),onClick:()=>n(t)}),e.jsx(xt,{"aria-label":"Supprimer",size:"sm",colorScheme:"red",icon:e.jsx(Qn,{}),onClick:()=>r(t)})]})]})]})})]})}function Vte(){const t=on(),[n,r]=v.useState(["Textiles","Goodies","Affiches"]),[i,l]=v.useState([{id:"tee-classic",name:"T-shirt RtroBus Classique",price:20,category:"Textiles",image:"",active:!0},{id:"mug-logo",name:"Mug Logo RBE",price:12,category:"Goodies",image:"",active:!0},{id:"poster-920",name:"Affiche R312 n920",price:15,category:"Affiches",image:"",active:!1}]),[u,d]=v.useState([]),[p,f]=v.useState("Toutes"),[g,x]=v.useState(null),[y,b]=v.useState({id:"",name:"",price:0,category:"Textiles",image:"",active:!0,description:""}),w=It(),C=v.useMemo(()=>p==="Toutes"?i:i.filter(R=>R.category===p),[i,p]),_=()=>b({id:"",name:"",price:0,category:n[0]||"Textiles",image:"",active:!0,description:""}),A=()=>{x(null),_(),w.onOpen()},D=R=>{x(R),b({...R}),w.onOpen()},P=()=>{const R=(y.id||y.name||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-");if(!y.name||!R)return t({status:"warning",title:"Nom requis"});const Y={...y,id:R};l(q=>g?q.map(le=>le.id===g.id?Y:le):[{...Y},...q]),w.onClose(),t({status:"success",title:g?"Produit mis  jour":"Produit ajout"})},M=R=>{confirm(`Supprimer ${R.name} ?`)&&(l(Y=>Y.filter(q=>q.id!==R.id)),t({status:"info",title:"Produit supprim"}))},N=[{id:"hero-1",type:"banner",colSpan:12,data:{title:"Bienvenue sur RtroMerch",subtitle:"Slection spciale",image:"",ctaText:"Dcouvrir",ctaHref:"/retromerch"}},{id:"promo-1",type:"promo",colSpan:6,data:{label:"Promo",productId:"tee-classic",discount:20}},{id:"product-1",type:"product",colSpan:6,data:{productId:"mug-logo"}},{id:"grid-1",type:"grid",colSpan:12,data:{category:"Textiles",count:4}}],[z,I]=v.useState(()=>{try{const R=localStorage.getItem("retromerch_layout");return R?JSON.parse(R):N}catch{return N}}),[V,$]=v.useState(null),[ae,he]=v.useState(!0);v.useEffect(()=>{try{localStorage.setItem("retromerch_layout",JSON.stringify(z))}catch{}},[z]);const re=R=>`${R}-${Date.now().toString(36)}`,ce=R=>{const Y={colSpan:12,data:{}},q={id:re(R),type:R,...Y};R==="banner"&&(q.data={title:"Titre",subtitle:"Sous-titre",image:"",ctaText:"Voir",ctaHref:"/retromerch"}),R==="promo"&&(q.data={label:"Promo",productId:i[0]?.id||"",discount:10}),R==="product"&&(q.data={productId:i[0]?.id||""}),R==="grid"&&(q.data={category:n[0]||"Textiles",count:4}),R==="text"&&(q.data={text:"Texte libre de prsentation"}),R==="spacer"&&(q.data={size:6}),I(le=>[...le,q]),$(q.id)},Se=R=>I(Y=>Y.filter(q=>q.id!==R)),je=R=>{const Y=z.find(pe=>pe.id===R);if(!Y)return;const q={...Y,id:re("copy")},le=z.findIndex(pe=>pe.id===R),We=[...z];We.splice(le+1,0,q),I(We),$(q.id)},de=(R,Y)=>I(q=>q.map(le=>le.id===R?{...le,...Y,data:{...le.data,...Y.data||{}}}:le)),G=(R,Y)=>{const q=z.findIndex(pe=>pe.id===R);if(q<0)return;const le=[...z],We=Y==="up"?q-1:q+1;We<0||We>=le.length||([le[q],le[We]]=[le[We],le[q]],I(le))},U=(R,Y)=>de(R,{colSpan:Y}),[W,me]=v.useState(null),F=R=>Y=>{me(R),Y.dataTransfer.setData("text/plain",R)},fe=R=>{R.preventDefault()},te=R=>Y=>{Y.preventDefault();const q=W||Y.dataTransfer.getData("text/plain");if(!q||q===R)return;const le=[...z],We=le.findIndex(Ze=>Ze.id===q),pe=le.findIndex(Ze=>Ze.id===R);if(We===-1||pe===-1)return;const[ye]=le.splice(We,1);le.splice(pe,0,ye),I(le),me(null)};return e.jsxs(oe,{p:6,maxW:"7xl",mx:"auto",children:[e.jsxs(J,{align:"stretch",spacing:6,children:[e.jsxs(ee,{justify:"space-between",align:"center",children:[e.jsxs(Te,{size:"lg",display:"flex",alignItems:"center",gap:2,children:[e.jsx(mh,{})," Administration RtroMerch"]}),e.jsxs(ee,{children:[e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:A,children:"Ajouter un produit"}),e.jsx(Q,{leftIcon:e.jsx(Qu,{}),variant:"outline",children:"Paramtres"})]})]}),e.jsxs(ga,{colorScheme:"red",variant:"enclosed",children:[e.jsxs(xa,{children:[e.jsxs(hn,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(mh,{})," Catalogue"]}),e.jsxs(hn,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(xJ,{})," Commandes"]}),e.jsx(hn,{children:"Catgories"}),e.jsx(hn,{children:"Mise en page"}),e.jsx(hn,{children:"Paramtres"})]}),e.jsxs(va,{children:[e.jsx(fn,{px:0,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"md",children:"Catalogue"}),e.jsxs(ee,{children:[e.jsxs(ut,{size:"sm",value:p,onChange:R=>f(R.target.value),children:[e.jsx("option",{children:"Toutes"}),n.map(R=>e.jsx("option",{children:R},R))]}),e.jsx(Q,{size:"sm",onClick:A,leftIcon:e.jsx(Bn,{}),children:"Nouveau"})]})]})}),e.jsx(ke,{children:C.length===0?e.jsx(yn,{py:10,children:e.jsx(k,{color:"gray.600",children:"Aucun produit pour linstant."})}):e.jsx(mt,{columns:{base:1,sm:2,md:3,xl:4},spacing:4,children:C.map(R=>e.jsx(Mj,{p:R,onEdit:D,onDelete:M},R.id))})})]})}),e.jsx(fn,{px:0,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Commandes"})}),e.jsx(ke,{children:u.length===0?e.jsx(yn,{py:10,children:e.jsx(k,{color:"gray.600",children:"Aucune commande pour le moment."})}):e.jsxs(Fn,{size:"sm",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"#"}),e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Client"}),e.jsx(_e,{children:"Montant"}),e.jsx(_e,{children:"Statut"})]})}),e.jsx(Wn,{children:u.map(R=>e.jsxs(bt,{children:[e.jsx(Ee,{children:R.id}),e.jsx(Ee,{children:new Date(R.createdAt).toLocaleString("fr-FR")}),e.jsx(Ee,{children:R.customerName}),e.jsxs(Ee,{children:[R.total.toFixed(2)," "]}),e.jsx(Ee,{children:R.status})]},R.id))})]})})]})}),e.jsx(fn,{px:0,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(ee,{justify:"space-between",children:e.jsx(Te,{size:"md",children:"Catgories"})})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[n.map((R,Y)=>e.jsxs(ee,{justify:"space-between",borderWidth:"1px",p:3,borderRadius:"md",children:[e.jsx(k,{children:R}),e.jsxs(ee,{children:[e.jsx(xt,{"aria-label":"Renommer",size:"sm",icon:e.jsx(Bs,{}),onClick:()=>{const q=prompt("Nouveau nom de catgorie",R);q&&(r(le=>le.map(We=>We===R?q:We)),l(le=>le.map(We=>We.category===R?{...We,category:q}:We)))}}),e.jsx(xt,{"aria-label":"Supprimer",size:"sm",colorScheme:"red",icon:e.jsx(Qn,{}),onClick:()=>{confirm(`Supprimer la catgorie ${R} ?`)&&(r(q=>q.filter(le=>le!==R)),l(q=>q.map(le=>le.category===R?{...le,category:"Autre"}:le)))}})]})]},R)),e.jsxs(ee,{children:[e.jsx(ge,{placeholder:"Nouvelle catgorie",size:"sm",id:"newCat"}),e.jsx(Q,{size:"sm",onClick:()=>{const R=document.getElementById("newCat"),Y=(R?.value||"").trim();if(Y){if(n.includes(Y))return t({status:"info",title:"Existe dj"});r(q=>[...q,Y]),R.value=""}},children:"Ajouter"})]})]})})]})}),e.jsx(fn,{px:0,children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(ee,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"md",children:"Mise en page  diteur  puzzle "}),e.jsxs(ee,{children:[e.jsxs(Q,{size:"sm",leftIcon:e.jsx(Rh,{}),onClick:()=>he(R=>!R),children:[ae?"Masquer":"Afficher"," laperu"]}),e.jsx(Q,{size:"sm",variant:"outline",leftIcon:e.jsx(uA,{}),onClick:()=>{navigator.clipboard.writeText(JSON.stringify(z,null,2)),t({status:"success",title:"Layout copi"})},children:"Exporter JSON"})]})]}),e.jsxs(mt,{columns:{base:1,xl:3},spacing:4,children:[e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Palette"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:2,children:[e.jsx(Q,{onClick:()=>ce("banner"),children:"Bannire"}),e.jsx(Q,{onClick:()=>ce("promo"),children:"Produit en promo"}),e.jsx(Q,{onClick:()=>ce("product"),children:"Produit (slection)"}),e.jsx(Q,{onClick:()=>ce("grid"),children:"Grille par catgorie"}),e.jsx(Q,{onClick:()=>ce("text"),children:"Texte"}),e.jsx(Q,{onClick:()=>ce("spacer"),children:"Espace"})]})})]}),e.jsxs(Pe,{gridColumn:{base:"auto",xl:"span 2"},children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"diteur"})}),e.jsx(ke,{children:e.jsx(oe,{borderWidth:"1px",borderRadius:"md",p:3,children:e.jsx(ni,{templateColumns:"repeat(12, 1fr)",gap:3,gridAutoFlow:"row dense",children:z.map(R=>e.jsxs(oe,{gridColumn:`span ${Math.min(12,Math.max(3,R.colSpan||12))}`,p:0,borderWidth:V===R.id?"2px":"1px",borderColor:V===R.id?"blue.400":"gray.200",borderRadius:"md",bg:V===R.id?"blue.50":"white",draggable:!0,onDragStart:F(R.id),onDragOver:fe,onDrop:te(R.id),onClick:()=>$(R.id),children:[e.jsxs(ee,{justify:"space-between",p:2,bg:"gray.50",borderBottomWidth:"1px",borderTopRadius:"md",children:[e.jsxs(ee,{children:[e.jsx(Yo,{size:"sm",children:e.jsx(Zo,{children:R.type})}),e.jsx(ut,{size:"xs",w:"auto",value:R.colSpan,onChange:Y=>U(R.id,parseInt(Y.target.value)),children:[12,8,6,4,3].map(Y=>e.jsxs("option",{value:Y,children:[Y,"/12"]},Y))})]}),e.jsxs(ee,{children:[e.jsx(xt,{"aria-label":"Monter",size:"xs",icon:e.jsx(J1,{}),onClick:Y=>{Y.stopPropagation(),G(R.id,"up")}}),e.jsx(xt,{"aria-label":"Descendre",size:"xs",icon:e.jsx(Q1,{}),onClick:Y=>{Y.stopPropagation(),G(R.id,"down")}}),e.jsx(xt,{"aria-label":"Dupliquer",size:"xs",icon:e.jsx(uA,{}),onClick:Y=>{Y.stopPropagation(),je(R.id)}}),e.jsx(xt,{"aria-label":"Supprimer",size:"xs",colorScheme:"red",icon:e.jsx(Qn,{}),onClick:Y=>{Y.stopPropagation(),Se(R.id)}})]})]}),e.jsxs(oe,{p:3,children:[R.type==="banner"&&e.jsxs(J,{align:"stretch",spacing:2,children:[e.jsx(ge,{size:"sm",placeholder:"Titre",value:R.data.title||"",onChange:Y=>de(R.id,{data:{title:Y.target.value}})}),e.jsx(ge,{size:"sm",placeholder:"Sous-titre",value:R.data.subtitle||"",onChange:Y=>de(R.id,{data:{subtitle:Y.target.value}})}),e.jsx(ge,{size:"sm",placeholder:"Image URL",value:R.data.image||"",onChange:Y=>de(R.id,{data:{image:Y.target.value}})}),e.jsxs(ee,{children:[e.jsx(ge,{size:"sm",placeholder:"Texte du bouton",value:R.data.ctaText||"",onChange:Y=>de(R.id,{data:{ctaText:Y.target.value}})}),e.jsx(ge,{size:"sm",placeholder:"Lien",value:R.data.ctaHref||"",onChange:Y=>de(R.id,{data:{ctaHref:Y.target.value}})})]})]}),R.type==="promo"&&e.jsxs(mt,{columns:{base:1,md:2},spacing:2,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Produit"}),e.jsx(ut,{size:"sm",value:R.data.productId||"",onChange:Y=>de(R.id,{data:{productId:Y.target.value}}),children:i.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Label"}),e.jsx(ge,{size:"sm",value:R.data.label||"",onChange:Y=>de(R.id,{data:{label:Y.target.value}})})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Rduction (%)"}),e.jsx(Ln,{size:"sm",min:0,max:90,value:R.data.discount||0,onChange:(Y,q)=>de(R.id,{data:{discount:isNaN(q)?0:q}}),children:e.jsx(On,{})})]})]}),R.type==="product"&&e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Produit"}),e.jsx(ut,{size:"sm",value:R.data.productId||"",onChange:Y=>de(R.id,{data:{productId:Y.target.value}}),children:i.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))})]}),R.type==="grid"&&e.jsxs(mt,{columns:{base:1,md:2},spacing:2,children:[e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Catgorie"}),e.jsx(ut,{size:"sm",value:R.data.category||"",onChange:Y=>de(R.id,{data:{category:Y.target.value}}),children:n.map(Y=>e.jsx("option",{value:Y,children:Y},Y))})]}),e.jsxs(X,{children:[e.jsx(Z,{fontSize:"xs",children:"Nombre"}),e.jsx(Ln,{size:"sm",min:1,max:12,value:R.data.count||4,onChange:(Y,q)=>de(R.id,{data:{count:isNaN(q)?4:q}}),children:e.jsx(On,{})})]})]}),R.type==="text"&&e.jsx(Xt,{size:"sm",rows:3,value:R.data.text||"",onChange:Y=>de(R.id,{data:{text:Y.target.value}})}),R.type==="spacer"&&e.jsxs(ee,{children:[e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Espace (px)"}),e.jsx(Ln,{size:"sm",min:8,max:96,value:R.data.size||24,onChange:(Y,q)=>de(R.id,{data:{size:isNaN(q)?24:q}}),children:e.jsx(On,{})})]})]})]},R.id))})})})]})]}),ae&&e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"sm",children:"Aperu dynamique"})}),e.jsx(ke,{children:e.jsx(oe,{children:e.jsx(ni,{templateColumns:{base:"1fr",md:"repeat(12, 1fr)"},gap:4,gridAutoFlow:"row dense",children:z.map(R=>e.jsxs(oe,{gridColumn:{base:"auto",md:`span ${Math.min(12,Math.max(3,R.colSpan||12))}`},children:[R.type==="banner"&&e.jsx(sr,{bgImage:R.data.image||void 0,bgSize:"cover",bgPos:"center",borderRadius:"md",p:10,minH:"160px",align:"center",justify:"space-between",bg:R.data.image?void 0:"gray.100",children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsx(Te,{size:"lg",children:R.data.title||"Titre"}),e.jsx(k,{color:"gray.700",children:R.data.subtitle||"Sous-titre"}),R.data.ctaText&&e.jsx(Q,{colorScheme:"blue",size:"sm",children:R.data.ctaText})]})}),R.type==="promo"&&(()=>{const Y=i.find(q=>q.id===R.data.productId);return Y?e.jsxs(Pe,{overflow:"hidden",borderColor:"red.200",borderWidth:"1px",children:[e.jsx(Li,{src:Y.image||"/assets/fallback/_MG_1006.jpg",alt:Y.name,h:"160px",w:"100%",objectFit:"cover"}),e.jsxs(ke,{children:[e.jsxs(ee,{justify:"space-between",align:"start",children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsx(Te,{size:"sm",children:Y.name}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:Y.category})]}),e.jsx(Yo,{colorScheme:"red",children:e.jsxs(Zo,{children:[R.data.label||"Promo"," -",R.data.discount||0,"%"]})})]}),e.jsxs(ee,{justify:"space-between",pt:2,children:[e.jsxs(k,{fontWeight:"bold",children:[(Y.price*(1-(R.data.discount||0)/100)).toFixed(2),"  ",e.jsxs(k,{as:"span",color:"gray.500",textDecor:"line-through",ml:2,children:[Y.price.toFixed(2)," "]})]}),e.jsx(Q,{size:"sm",colorScheme:"blue",children:"Voir"})]})]})]}):e.jsx(oe,{borderWidth:"1px",p:3,borderRadius:"md",children:"Produit introuvable"})})(),R.type==="product"&&(()=>{const Y=i.find(q=>q.id===R.data.productId);return Y?e.jsx(Mj,{p:Y,onEdit:()=>{},onDelete:()=>{}}):e.jsx(oe,{borderWidth:"1px",p:3,borderRadius:"md",children:"Produit introuvable"})})(),R.type==="grid"&&(()=>{const Y=i.filter(q=>q.active&&(R.data.category?q.category===R.data.category:!0)).slice(0,R.data.count||4);return e.jsx(mt,{columns:{base:1,sm:2,md:2,lg:3,xl:4},spacing:4,children:Y.map(q=>e.jsx(Mj,{p:q,onEdit:()=>{},onDelete:()=>{}},q.id))})})(),R.type==="text"&&e.jsx(oe,{p:3,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:e.jsx(k,{children:R.data.text||""})}),R.type==="spacer"&&e.jsx(oe,{h:`${R.data.size||24}px`})]},R.id))})})})]})]})}),e.jsx(fn,{px:0,children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Paramtres"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:4,children:[e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{children:"Activer la boutique"}),e.jsx(Jn,{defaultChecked:!0,isDisabled:!0})]}),e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{children:"Mode test (paiements simuls)"}),e.jsx(Jn,{isDisabled:!0})]}),e.jsx(k,{color:"gray.600",children:"Connecteurs (HelloAsso/Stripe), TVA, frais de port, etc. seront configurables ici."})]})})]})})]})]})]}),w.isOpen&&e.jsx(oe,{position:"fixed",inset:0,bg:"blackAlpha.600",zIndex:1e3,onClick:w.onClose,children:e.jsx(oe,{as:"dialog",onClick:R=>R.stopPropagation(),style:{border:0},children:e.jsxs(Pe,{position:"fixed",top:"10%",left:"50%",transform:"translateX(-50%)",w:{base:"95%",md:"560px"},children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:g?"Modifier le produit":"Nouveau produit"})}),e.jsx(ke,{children:e.jsxs(J,{align:"stretch",spacing:3,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Nom"}),e.jsx(ge,{value:y.name,onChange:R=>b(Y=>({...Y,name:R.target.value}))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Identifiant (URL)"}),e.jsx(ge,{value:y.id,onChange:R=>b(Y=>({...Y,id:R.target.value})),placeholder:"auto depuis le nom"})]}),e.jsxs(mt,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Prix ()"}),e.jsx(Ln,{min:0,value:y.price,onChange:(R,Y)=>b(q=>({...q,price:isNaN(Y)?0:Y})),children:e.jsx(On,{})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Catgorie"}),e.jsx(ut,{value:y.category,onChange:R=>b(Y=>({...Y,category:R.target.value})),children:n.map(R=>e.jsx("option",{children:R},R))})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Image (URL)"}),e.jsx(ge,{value:y.image,onChange:R=>b(Y=>({...Y,image:R.target.value})),placeholder:"https://"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{value:y.description,onChange:R=>b(Y=>({...Y,description:R.target.value})),rows:3})]}),e.jsxs(ee,{justify:"space-between",children:[e.jsx(k,{children:"Actif"}),e.jsx(Jn,{isChecked:y.active,onChange:R=>b(Y=>({...Y,active:R.target.checked}))})]}),e.jsxs(ee,{justify:"flex-end",pt:2,children:[e.jsx(Q,{variant:"ghost",onClick:w.onClose,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:P,children:g?"Enregistrer":"Crer"})]})]})})]})})})]})}const iw=[{value:"tournee",label:"Tourne",color:"orange"},{value:"campagne",label:"Campagne",color:"purple"},{value:"maintenance",label:"Maintenance",color:"red"},{value:"evenement",label:"vnement",color:"green"},{value:"livraison",label:"Livraison",color:"cyan"},{value:"cotisation",label:"Cotisation",color:"yellow"}];function Ute({events:t,currentDate:n,onDateClick:r,onPrevMonth:i,onNextMonth:l}){const u=n.getFullYear(),d=n.getMonth(),p=new Date(u,d,1).getDay(),f=new Date(u,d+1,0).getDate(),g=new Date(u,d,0).getDate(),x=[];for(let w=p-1;w>=0;w--)x.push({day:g-w,isCurrentMonth:!1});for(let w=1;w<=f;w++)x.push({day:w,isCurrentMonth:!0});const y=42-x.length;for(let w=1;w<=y;w++)x.push({day:w,isCurrentMonth:!1});const b=w=>t.filter(C=>{const _=new Date(C.startDate);return _.getDate()===w&&_.getMonth()===d&&_.getFullYear()===u});return e.jsx(Pe,{mb:6,children:e.jsx(ke,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(sr,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"md",children:n.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),e.jsxs(ee,{children:[e.jsx(xt,{icon:e.jsx(iQ,{}),onClick:i,variant:"ghost","aria-label":"Mois prcdent"}),e.jsx(xt,{icon:e.jsx(aQ,{}),onClick:l,variant:"ghost","aria-label":"Mois suivant"})]})]}),e.jsxs(ni,{templateColumns:"repeat(7, 1fr)",gap:2,children:[["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(w=>e.jsx(oe,{textAlign:"center",fontWeight:"bold",fontSize:"sm",children:w},w)),x.map((w,C)=>{const _=w.isCurrentMonth?b(w.day):[];return e.jsxs(oe,{p:2,border:"1px solid",borderColor:"gray.200",borderRadius:"md",minH:"100px",bg:w.isCurrentMonth?"white":"gray.50",cursor:w.isCurrentMonth?"pointer":"default",onClick:()=>w.isCurrentMonth&&r(w.day),_hover:w.isCurrentMonth?{bg:"blue.50"}:{},children:[e.jsx(k,{fontSize:"xs",fontWeight:"bold",mb:1,children:w.day}),e.jsx(J,{spacing:1,align:"stretch",children:_.map(A=>e.jsx(Qe,{fontSize:"2xs",colorScheme:nS(A.type),cursor:"pointer",title:A.title,noOfLines:1,children:A.title},A.id))})]},C)})]})]})})})}const nS=t=>iw.find(r=>r.value===t)?.color||"gray",RA=t=>iw.find(r=>r.value===t)?.label||t,zj=t=>t?new Date(t).toLocaleDateString("fr-FR"):"";function Hte(){const t=on(),{isOpen:n,onOpen:r,onClose:i}=It(),{isOpen:l,onOpen:u,onClose:d}=It(),[p,f]=v.useState([]),[g,x]=v.useState(null),[y,b]=v.useState(new Date),[w,C]=v.useState([]),[_,A]=v.useState(!0),[D,P]=v.useState([]),[M,N]=v.useState(!0),[z,I]=v.useState({title:"",description:"",type:"tournee",startDate:"",startTime:"08:00",endDate:"",endTime:"17:00",location:"",vehicleId:"",driverId:"",selectedMembers:[],externalEmails:""});v.useEffect(()=>{ae(),V(),$()},[]);const V=async()=>{try{A(!0);const W=await Ma("/api/members");if(Array.isArray(W)){const me=W.map(F=>({id:F.id,name:`${F.firstName} ${F.lastName}`,email:F.email,membershipStatus:F.membershipStatus}));C(me)}else console.warn("Unexpected members response format:",W),C([])}catch(W){console.error("Erreur chargement membres:",W),C([]),t({title:"Attention",description:"Impossible de charger la liste des membres",status:"warning",duration:3})}finally{A(!1)}},$=async()=>{try{N(!0);const W=await Ma("/api/vehicles");Array.isArray(W)?P(W):(console.warn("Unexpected vehicles response format:",W),P([]))}catch(W){console.error("Erreur chargement vhicules:",W),P([])}finally{N(!1)}},ae=async()=>{try{const W=await Ma("/api/planning/events");Array.isArray(W)?f(W):W&&typeof W=="object"&&W.data&&Array.isArray(W.data)?f(W.data):(console.warn("Unexpected response format, using demo data:",W),f([{id:"1",title:"Tourne fvrier",type:"tournee",description:"Collecte standard fvrier",startDate:new Date().toISOString(),vehicleId:"bus-1",driverId:"driver-1"}]))}catch(W){console.error("Erreur chargement:",W),f([{id:"1",title:"Tourne fvrier",type:"tournee",description:"Collecte standard fvrier",startDate:new Date().toISOString(),vehicleId:"bus-1",driverId:"driver-1"}])}},he=W=>{const{name:me,value:F}=W.target;I(fe=>({...fe,[me]:F}))},re=W=>{I(me=>({...me,selectedMembers:W}))},ce=async()=>{if(!z.title||!z.startDate){t({title:"Erreur",description:"Veuillez remplir au minimum le titre et la date",status:"error",duration:3});return}try{const W={title:z.title,type:z.type,description:z.description,startDate:new Date(`${z.startDate}T${z.startTime||"08:00"}`).toISOString(),endDate:z.endDate?new Date(`${z.endDate}T${z.endTime||"17:00"}`).toISOString():null,startTime:z.startTime||"08:00",endTime:z.endTime||"17:00",location:z.location,vehicleId:z.vehicleId||null,driverId:z.driverId||null,selectedMembers:z.selectedMembers,externalEmails:z.externalEmails},me=await Ma("/api/planning/events",{method:"POST",body:JSON.stringify(W)});if(me.success||me.event)await ae(),t({title:"Succs",description:`vnement cr et ${me.emailsSent?.members||0} invitation(s) envoye(s)`,status:"success",duration:3}),I({title:"",description:"",type:"tournee",startDate:"",startTime:"08:00",endDate:"",endTime:"17:00",location:"",vehicleId:"",driverId:"",selectedMembers:[],externalEmails:""}),i();else throw new Error(me.error||"Erreur inconnue")}catch(W){console.error("Erreur cration vnement:",W),t({title:"Erreur",description:W.message||"Impossible de crer l'vnement",status:"error",duration:3})}},Se=W=>{x(W),u()},je=async W=>{try{const me=await Ma(`/api/planning/events/${W}`,{method:"DELETE"});if(me.success)await ae(),t({title:"Succs",description:"vnement supprim",status:"success",duration:3}),d();else throw new Error(me.error||"Erreur inconnue")}catch(me){console.error("Erreur suppression:",me),t({title:"Erreur",description:me.message||"Impossible de supprimer l'vnement",status:"error",duration:3})}},de=()=>{b(W=>new Date(W.getFullYear(),W.getMonth()-1,1))},G=()=>{b(W=>new Date(W.getFullYear(),W.getMonth()+1,1))},U=W=>{const me=new Date(y.getFullYear(),y.getMonth(),W);I(F=>({...F,startDate:me.toISOString().split("T")[0]})),r()};return e.jsx(kh,{children:e.jsxs(ei,{maxW:"container.xl",py:8,children:[e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(sr,{justify:"space-between",align:"center",children:[e.jsx(Te,{as:"h1",size:"lg",children:" RtroPlanning"}),e.jsx(Q,{colorScheme:"blue",onClick:r,children:" Ajouter un vnement"})]}),e.jsx(Ute,{events:p,currentDate:y,onDateClick:U,onPrevMonth:de,onNextMonth:G}),e.jsxs(oe,{children:[e.jsx(Te,{size:"md",mb:4,children:" vnements prvus"}),!Array.isArray(p)||p.length===0?e.jsx(Pe,{children:e.jsx(ke,{children:e.jsx(k,{textAlign:"center",color:"gray.500",children:"Aucun vnement prvu pour le moment"})})}):e.jsx(ni,{templateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:4,children:p.map(W=>e.jsx(Pe,{cursor:"pointer",onClick:()=>Se(W),_hover:{shadow:"md",transform:"translateY(-2px)"},transition:"all 0.2s",children:e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:3,children:[e.jsxs(ee,{justify:"space-between",w:"full",children:[e.jsx(Te,{size:"sm",children:W.title}),e.jsx(Qe,{colorScheme:nS(W.type),children:RA(W.type)})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:W.description}),e.jsxs(ee,{fontSize:"xs",color:"gray.500",spacing:4,children:[e.jsxs(k,{children:[" ",zj(W.startDate)]}),W.vehicleId&&e.jsxs(k,{children:[" ",W.vehicleId]})]})]})})},W.id))})]})]}),e.jsxs(Et,{isOpen:n,onClose:i,size:"xl",scrollBehavior:"inside",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:" Crer un nouvel vnement"}),e.jsx($t,{}),e.jsx(_t,{pb:6,children:e.jsxs(J,{spacing:4,children:[e.jsxs(oe,{w:"full",children:[e.jsx(Te,{size:"sm",mb:3,children:" Dtails"}),e.jsxs(J,{spacing:3,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{name:"title",value:z.title,onChange:he,placeholder:"Titre de l'vnement"})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Type"}),e.jsx(ut,{name:"type",value:z.type,onChange:he,children:iw.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{name:"description",value:z.description,onChange:he,placeholder:"Dtails de l'vnement",rows:3})]})]})]}),e.jsx(xn,{}),e.jsxs(oe,{w:"full",children:[e.jsx(Te,{size:"sm",mb:3,children:" Date et Heure"}),e.jsxs(ni,{templateColumns:"repeat(2, 1fr)",gap:3,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Date dbut"}),e.jsx(ge,{type:"date",name:"startDate",value:z.startDate,onChange:he})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Heure dbut"}),e.jsx(ge,{type:"time",name:"startTime",value:z.startTime,onChange:he})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Date fin"}),e.jsx(ge,{type:"date",name:"endDate",value:z.endDate,onChange:he})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Heure fin"}),e.jsx(ge,{type:"time",name:"endTime",value:z.endTime,onChange:he})]})]})]}),e.jsx(xn,{}),e.jsxs(oe,{w:"full",children:[e.jsx(Te,{size:"sm",mb:3,children:" Affectations"}),e.jsxs(J,{spacing:3,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Vhicule"}),M?e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Chargement des vhicules..."}):D.length===0?e.jsx(k,{fontSize:"sm",color:"red.500",children:"Aucun vhicule disponible"}):e.jsxs(ut,{name:"vehicleId",value:z.vehicleId,onChange:he,children:[e.jsx("option",{value:"",children:"-- Slectionner un vhicule --"}),D.map(W=>e.jsxs("option",{value:W.id,children:[W.parc," - ",W.modele," (",W.marque,")"]},W.id))]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Chauffeur (Membre)"}),_?e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Chargement des chauffeurs..."}):w.length===0?e.jsx(k,{fontSize:"sm",color:"red.500",children:"Aucun membre disponible"}):e.jsxs(ut,{name:"driverId",value:z.driverId,onChange:he,children:[e.jsx("option",{value:"",children:"-- Slectionner un chauffeur --"}),w.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})]})]})]}),e.jsx(xn,{}),e.jsxs(oe,{w:"full",children:[e.jsx(Te,{size:"sm",mb:3,children:" Participants"}),e.jsxs(J,{spacing:3,align:"start",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Membres de l'association"}),_?e.jsx(k,{fontSize:"sm",color:"gray.500",children:"Chargement des membres..."}):w.length===0?e.jsx(k,{fontSize:"sm",color:"orange.500",children:"Aucun membre disponible"}):e.jsx(GD,{value:z.selectedMembers,onChange:re,children:e.jsx(fo,{spacing:2,children:w.map(W=>e.jsxs(Na,{value:W.id,children:[W.name," (",W.email,")"]},W.id))})})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Invitations externes"}),e.jsx(Xt,{name:"externalEmails",value:z.externalEmails,onChange:he,placeholder:`Adresses emails spares par des virgules
exemple@mail.com, autre@mail.com`,rows:3}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"Sparez les adresses par des virgules pour envoyer des invitations par email"})]})]})]}),e.jsx(xn,{}),e.jsxs(ee,{justify:"flex-end",w:"full",pt:4,children:[e.jsx(Q,{variant:"ghost",onClick:i,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:ce,children:" Crer l'vnement"})]})]})})]})]}),e.jsxs(Et,{isOpen:l,onClose:d,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:g?.title}),e.jsx($t,{}),e.jsx(_t,{pb:6,children:g&&e.jsxs(J,{spacing:4,align:"start",children:[e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:1,children:"Type:"}),e.jsx(Qe,{colorScheme:nS(g.type),children:RA(g.type)})]}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:1,children:"Description:"}),e.jsx(k,{children:g.description||"-"})]}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:1,children:"Date dbut:"}),e.jsx(k,{children:zj(g.startDate)})]}),g.endDate&&e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:1,children:"Date fin:"}),e.jsx(k,{children:zj(g.endDate)})]}),g.vehicleId&&e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:1,children:"Vhicule:"}),e.jsx(k,{children:g.vehicleId})]}),g.driverId&&e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",mb:1,children:"Chauffeur:"}),e.jsx(k,{children:g.driverId})]}),e.jsxs(ee,{spacing:3,w:"full",pt:4,children:[e.jsx(Q,{colorScheme:"red",flex:1,onClick:()=>je(g.id),children:" Supprimer"}),e.jsx(Q,{variant:"ghost",flex:1,onClick:d,children:"Fermer"})]})]})})]})]})]})})}const Wte="https://attractive-kindness-rbe-serveurs.up.railway.app";function qte(){const{eventId:t,memberId:n}=Qx(),r=Ua(),i=on(),l=Tn("white","gray.800"),[u,d]=v.useState(!0),[p,f]=v.useState(null),[g,x]=v.useState(null),[y,b]=v.useState(!1),[w,C]=v.useState(null);v.useEffect(()=>{_()},[t,n]);const _=async()=>{try{d(!0),f({id:t,title:"Tourne collecte fvrier",date:new Date(2025,1,15).toISOString(),description:"Tourne de collecte bi-mensuelle",type:"TOURNEE"}),x({id:n,prenom:"Jean",nom:"Dupont",email:"jean@retrobus.fr"})}catch(P){console.error("Fetch error:",P),C("Impossible de charger les informations")}finally{d(!1)}},A=async P=>{try{if(d(!0),!(await fetch(`${Wte}/api/planning/attendance/${t}/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmed:P})})).ok)throw new Error("Failed");b(!0),i({status:"success",title:P?"Prsence confirme !":"Absence enregistre",duration:3e3}),setTimeout(()=>r("/"),2e3)}catch(M){i({status:"error",title:"Erreur",description:M.message})}finally{d(!1)}};if(u)return e.jsx(yn,{p:6,children:e.jsx(pn,{size:"xl"})});if(w)return e.jsx(yn,{p:6,minH:"100vh",children:e.jsxs(Ut,{status:"error",borderRadius:"lg",children:[e.jsx(Ht,{}),w]})});if(y)return e.jsx(yn,{p:6,minH:"100vh",children:e.jsx(Pe,{bg:l,maxW:"500px",w:"100%",children:e.jsxs(ke,{textAlign:"center",py:10,children:[e.jsxs(oe,{mb:4,children:[e.jsx(oe,{fontSize:"60px",mb:4,children:""}),e.jsx(Te,{size:"lg",mb:2,children:"Merci !"}),e.jsx(k,{color:"gray.600",children:"Votre rponse a t enregistre."})]}),e.jsx(Q,{mt:6,onClick:()=>r("/"),children:"Retourner  l'accueil"})]})})});const D=new Date(p.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx(yn,{p:6,minH:"100vh",bg:"gray.50",children:e.jsxs(Pe,{bg:l,maxW:"600px",w:"100%",boxShadow:"xl",borderRadius:"xl",children:[e.jsx(zt,{p:8,borderBottomWidth:"1px",children:e.jsxs(J,{spacing:4,align:"center",children:[e.jsx(oe,{fontSize:"48px",children:""}),e.jsx(Te,{size:"lg",textAlign:"center",children:"Confirmation de prsence"}),e.jsxs(k,{color:"gray.600",textAlign:"center",children:["Bonjour ",g?.prenom," ",g?.nom]})]})}),e.jsx(ke,{p:8,children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(oe,{bg:"blue.50",p:4,borderRadius:"lg",borderLeft:"4px",borderLeftColor:"blue.500",children:[e.jsxs(ee,{spacing:3,mb:2,children:[e.jsx(Os,{size:20,color:"#3b82f6"}),e.jsx(Te,{size:"sm",children:p?.title})]}),e.jsx(k,{fontSize:"sm",color:"gray.600",mb:2,children:D}),p?.description&&e.jsx(k,{fontSize:"sm",children:p.description})]}),e.jsxs(J,{spacing:3,pt:4,children:[e.jsx(k,{fontWeight:"600",textAlign:"center",children:"Confirmer votre prsence ?"}),e.jsxs(ee,{spacing:3,w:"100%",children:[e.jsx(Q,{leftIcon:e.jsx(Kp,{}),colorScheme:"green",size:"lg",flex:"1",onClick:()=>A(!0),isLoading:u,children:" Je serai prsent"}),e.jsx(Q,{leftIcon:e.jsx(qu,{}),colorScheme:"red",size:"lg",flex:"1",variant:"outline",onClick:()=>A(!1),isLoading:u,children:" Je ne pourrai pas"})]})]}),e.jsx(oe,{pt:4,borderTopWidth:"1px",children:e.jsxs(k,{fontSize:"xs",color:"gray.500",textAlign:"center",children:["Votre email: ",g?.email]})})]})})]})})}const kA={confirmed:{label:"Confirmer ma prsence",color:"green",icon:""},declined:{label:"Refuser",color:"red",icon:""},proposed_reschedule:{label:"Proposer un report",color:"orange",icon:""}};function Gte(){const t=on(),{isOpen:n,onOpen:r,onClose:i}=It(),[l,u]=v.useState([]),[d,p]=v.useState(!0),[f,g]=v.useState(null),[x,y]=v.useState("confirmed"),[b,w]=v.useState(""),[C,_]=v.useState(""),[A,D]=v.useState(!1);v.useEffect(()=>{P()},[]);const P=async()=>{try{p(!0);const I=await Ma("/api/planning/my-invitations");Array.isArray(I)?u(I):u([])}catch(I){console.error("Erreur chargement invitations:",I),t({title:"Erreur",description:"Impossible de charger les invitations",status:"error",duration:3}),u([])}finally{p(!1)}},M=async()=>{if(f)try{D(!0);const I={participantId:f.participantId,status:x,rescheduleProposal:x==="proposed_reschedule"?b:null,rescheduleReason:x==="proposed_reschedule"?C:null},V=await Ma(`/api/planning/respond-invitation/${f.planningId}/${f.participantId}`,{method:"POST",body:JSON.stringify(I)});if(V.success)t({title:"Succs",description:`Votre rponse a t enregistre: ${kA[x].label}`,status:"success",duration:3}),u($=>$.map(ae=>ae.participantId===f.participantId?{...ae,status:x}:ae)),i();else throw new Error(V.error||"Erreur lors de la soumission")}catch(I){console.error("Erreur rponse:",I),t({title:"Erreur",description:I.message||"Impossible de soumettre votre rponse",status:"error",duration:3})}finally{D(!1)}},N=I=>({pending:"yellow",confirmed:"green",declined:"red",proposed_reschedule:"orange"})[I]||"gray",z=I=>({pending:"En attente de rponse",confirmed:"Confirm",declined:"Refus",proposed_reschedule:"Report propos"})[I]||I;return e.jsx(kh,{children:e.jsxs(ei,{maxW:"container.lg",py:8,children:[e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsxs(oe,{children:[e.jsx(Te,{size:"lg",mb:2,children:" Mes Invitations"}),e.jsxs(k,{color:"gray.600",children:["Vous avez ",l.length," invitation",l.length!==1?"s":""]})]}),d?e.jsx(k,{children:"Chargement..."}):l.length===0?e.jsx(Pe,{children:e.jsx(ke,{children:e.jsx(k,{textAlign:"center",color:"gray.500",children:"Vous n'avez pas d'invitations en attente"})})}):e.jsx(J,{spacing:4,children:l.map(I=>e.jsx(Pe,{w:"full",children:e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:3,w:"full",children:[e.jsxs(sr,{w:"full",justify:"space-between",align:"start",children:[e.jsxs(J,{align:"start",flex:1,spacing:2,children:[e.jsx(Te,{size:"md",children:I.eventTitle}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:I.eventType?`Type: ${I.eventType}`:""}),e.jsxs(ee,{spacing:4,fontSize:"sm",children:[e.jsxs(k,{children:[" ",new Date(I.eventDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]}),e.jsxs(k,{children:[" ",I.eventStartTime||"Heure non dfinie"]})]}),I.eventLocation&&e.jsxs(k,{fontSize:"sm",color:"gray.600",children:[" ",I.eventLocation]}),I.eventDescription&&e.jsx(k,{fontSize:"sm",color:"gray.600",noOfLines:2,children:I.eventDescription})]}),e.jsx(Qe,{colorScheme:N(I.status),ml:4,textTransform:"capitalize",children:z(I.status)})]}),I.status==="pending"&&e.jsxs(ee,{spacing:2,pt:2,borderTop:"1px solid",borderColor:"gray.200",w:"full",children:[e.jsx(Q,{size:"sm",colorScheme:"green",onClick:()=>{g(I),y("confirmed"),r()},children:" Confirmer"}),e.jsx(Q,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>{g(I),y("declined"),r()},children:" Refuser"}),e.jsx(Q,{size:"sm",colorScheme:"orange",variant:"outline",onClick:()=>{g(I),y("proposed_reschedule"),r()},children:" Reporter"})]}),I.status==="proposed_reschedule"&&I.rescheduleProposal&&e.jsxs(oe,{fontSize:"sm",p:2,bg:"orange.50",borderRadius:"md",w:"full",children:[e.jsxs(k,{fontWeight:"bold",color:"orange.700",children:["Report propos au: ",new Date(I.rescheduleProposal).toLocaleDateString("fr-FR")]}),I.rescheduleReason&&e.jsx(k,{color:"orange.700",children:I.rescheduleReason})]})]})})},I.participantId))})]}),e.jsxs(Et,{isOpen:n,onClose:i,size:"lg",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:f&&`Rpondre : ${f.eventTitle}`}),e.jsx($t,{}),e.jsx(_t,{pb:6,children:e.jsxs(J,{spacing:4,children:[x==="proposed_reschedule"&&e.jsxs(e.Fragment,{children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Date propose"}),e.jsx(ge,{type:"date",value:b,onChange:I=>w(I.target.value)})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Raison du report"}),e.jsx(Xt,{value:C,onChange:I=>_(I.target.value),placeholder:"Expliquez pourquoi vous proposez ce report...",rows:4})]})]}),x==="declined"&&e.jsxs(X,{children:[e.jsx(Z,{children:"Motif du refus (optionnel)"}),e.jsx(Xt,{value:C,onChange:I=>_(I.target.value),placeholder:"Expliquez pourquoi vous refusez cette invitation...",rows:4})]}),e.jsxs(ee,{w:"full",pt:4,children:[e.jsx(Q,{flex:1,colorScheme:x==="confirmed"?"green":x==="declined"?"red":"orange",isLoading:A,onClick:M,children:kA[x].label}),e.jsx(Q,{flex:1,variant:"outline",onClick:i,isDisabled:A,children:"Annuler"})]})]})})]})]})]})})}const Yte=()=>{const t=on(),{user:n}=es(),{isOpen:r,onOpen:i,onClose:l}=It(),{isOpen:u,onOpen:d,onClose:p}=It(),[f,g]=v.useState([]),[x,y]=v.useState([]),[b,w]=v.useState(!1),[C,_]=v.useState(null),[A,D]=v.useState(null),[P,M]=v.useState({title:"",description:"",category:"GENERAL",priority:"NORMAL"}),N=v.useCallback(()=>n?(Array.isArray(n.roles)?n.roles:[]).some(te=>te==="ADMIN"||te==="PRESIDENT"||te==="VICE-PRESIDENT"||te==="TREASURER"):!1,[n]),z=v.useCallback(async()=>{try{w(!0);const F=await yt.get("/api/retro-requests");F.requests&&g(F.requests)}catch(F){console.error("Erreur chargement mes demandes:",F),t({title:"Erreur",description:"Impossible de charger vos demandes",status:"error",duration:5e3,isClosable:!0})}finally{w(!1)}},[t]),I=v.useCallback(async()=>{if(N())try{w(!0);const F=await yt.get("/api/retro-requests/admin/all");F.requests&&y(F.requests)}catch(F){console.error("Erreur chargement toutes les demandes:",F),t({title:"Erreur",description:"Impossible de charger toutes les demandes",status:"error",duration:5e3,isClosable:!0})}finally{w(!1)}},[N,t]);v.useEffect(()=>{z(),N()&&I()},[z,I,N]);const V=async F=>{if(F?.preventDefault(),!P.title||!P.description){t({title:"Erreur",description:"Le titre et la description sont obligatoires",status:"warning"});return}try{w(!0),A?(await yt.put(`/api/retro-requests/${A}`,P),t({title:"Succs",description:"Demande modifie",status:"success"})):(await yt.post("/api/retro-requests",P),t({title:"Succs",description:"Demande cre",status:"success"})),M({title:"",description:"",category:"GENERAL",priority:"NORMAL"}),D(null),l(),await z()}catch(fe){console.error("Erreur sauvegarde:",fe),t({title:"Erreur",description:"Impossible de sauvegarder la demande",status:"error"})}finally{w(!1)}},$=()=>{D(null),M({title:"",description:"",category:"GENERAL",priority:"NORMAL"}),i()},ae=F=>{D(F.id),M({title:F.title,description:F.description,category:F.category,priority:F.priority}),i()},he=async F=>{if(window.confirm("tes-vous sr de vouloir supprimer cette demande ?"))try{w(!0),await yt.delete(`/api/retro-requests/${F}`),t({title:"Succs",description:"Demande supprime",status:"success"}),await z()}catch(fe){console.error("Erreur suppression:",fe),t({title:"Erreur",description:"Impossible de supprimer la demande",status:"error"})}finally{w(!1)}},re=F=>{_(F),d()},ce=F=>{const te={PENDING:{label:" En attente",color:"orange"},APPROVED:{label:" Approuve",color:"green"},REJECTED:{label:" Refuse",color:"red"},PROCESSING:{label:" En traitement",color:"blue"}}[F]||{label:F,color:"gray"};return e.jsx(Qe,{colorScheme:te.color,children:te.label})},Se=F=>({GENERAL:"Gnral",REPAIR:"Rparation",MAINTENANCE:"Maintenance",SERVICE:"Service",CUSTOM:"Personnalis"})[F]||F,je=PP({base:!0,md:!1}),de=je?"sm":"md",G=()=>e.jsx(J,{align:"stretch",spacing:6,children:e.jsxs(Pe,{children:[e.jsx(zt,{pb:0,children:e.jsxs(J,{align:"flex-start",spacing:1,children:[e.jsx(Te,{size:"md",children:"Mes demandes"}),e.jsx(k,{color:"gray.600",children:"Suivez, modifiez ou crez vos RtroDemandes."})]})}),e.jsx(ke,{children:b&&f.length===0?e.jsx(sr,{justify:"center",py:10,children:e.jsx(pn,{})}):f.length===0?e.jsxs(oe,{textAlign:"center",py:10,color:"gray.500",children:[e.jsx(k,{mb:4,children:"Aucune demande pour le moment"}),e.jsx(Q,{colorScheme:"blue",size:"sm",leftIcon:e.jsx(Bn,{}),onClick:$,children:"Crer une demande"})]}):je?e.jsx(mt,{spacing:4,columns:1,children:f.map(F=>e.jsx(Pe,{variant:"outline",children:e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:3,children:[e.jsxs(ee,{justify:"space-between",width:"100%",children:[e.jsx(Te,{size:"sm",children:F.title}),ce(F.status)]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:F.description}),e.jsxs(ee,{spacing:2,fontSize:"xs",color:"gray.500",children:[e.jsx(Qe,{children:Se(F.category)}),e.jsx(k,{children:new Date(F.createdAt).toLocaleDateString()})]}),e.jsxs(ee,{spacing:2,width:"100%",pt:2,children:[e.jsx(xt,{icon:e.jsx(Zp,{}),size:"sm",variant:"ghost",onClick:()=>re(F),title:"Voir dtails"}),F.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx(xt,{icon:e.jsx(Hx,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>ae(F),title:"diter"}),e.jsx(xt,{icon:e.jsx(Xp,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>he(F.id),title:"Supprimer"})]})]})]})})},F.id))}):e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{size:de,variant:"striped",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Titre"}),e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{children:"Priorit"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Date"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:f.map(F=>e.jsxs(bt,{children:[e.jsx(Ee,{fontWeight:"medium",children:F.title}),e.jsx(Ee,{fontSize:"sm",children:Se(F.category)}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:F.priority==="URGENT"?"red":F.priority==="HIGH"?"orange":F.priority==="NORMAL"?"blue":"gray",children:F.priority})}),e.jsx(Ee,{children:ce(F.status)}),e.jsx(Ee,{fontSize:"sm",children:new Date(F.createdAt).toLocaleDateString()}),e.jsx(Ee,{children:e.jsxs(ee,{spacing:2,children:[e.jsx(xt,{icon:e.jsx(Zp,{}),size:"sm",variant:"ghost",onClick:()=>re(F),title:"Voir dtails"}),F.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx(xt,{icon:e.jsx(Hx,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>ae(F),title:"diter"}),e.jsx(xt,{icon:e.jsx(Xp,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>he(F.id),title:"Supprimer"})]})]})})]},F.id))})]})})})]})}),U=()=>e.jsx(J,{align:"stretch",spacing:6,children:e.jsxs(Pe,{children:[e.jsx(zt,{pb:0,children:e.jsxs(J,{align:"flex-start",spacing:1,children:[e.jsx(Te,{size:"md",children:"Rcapitulatif global"}),e.jsx(k,{color:"gray.600",children:"Vue consolide pour le bureau."})]})}),e.jsx(ke,{children:b&&x.length===0?e.jsx(sr,{justify:"center",py:10,children:e.jsx(pn,{})}):x.length===0?e.jsx(oe,{textAlign:"center",py:10,color:"gray.500",children:e.jsx(k,{children:"Aucune demande"})}):je?e.jsx(mt,{spacing:4,columns:1,children:x.map(F=>e.jsx(Pe,{variant:"outline",children:e.jsx(ke,{children:e.jsxs(J,{align:"start",spacing:3,children:[e.jsxs(ee,{justify:"space-between",width:"100%",children:[e.jsx(Te,{size:"sm",children:F.title}),ce(F.status)]}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:F.user?.name||"Anonyme"}),e.jsxs(ee,{spacing:2,fontSize:"xs",color:"gray.500",children:[e.jsx(Qe,{children:Se(F.category)}),e.jsx(k,{children:new Date(F.createdAt).toLocaleDateString()})]})]})})},F.id))}):e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{size:de,variant:"striped",children:[e.jsx(qn,{children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Titre"}),e.jsx(_e,{children:"Utilisateur"}),e.jsx(_e,{children:"Catgorie"}),e.jsx(_e,{children:"Priorit"}),e.jsx(_e,{children:"Statut"}),e.jsx(_e,{children:"Date"})]})}),e.jsx(Wn,{children:x.map(F=>e.jsxs(bt,{children:[e.jsx(Ee,{fontWeight:"medium",children:F.title}),e.jsx(Ee,{fontSize:"sm",children:F.user?.name||"Anonyme"}),e.jsx(Ee,{fontSize:"sm",children:Se(F.category)}),e.jsx(Ee,{children:e.jsx(Qe,{colorScheme:F.priority==="URGENT"?"red":F.priority==="HIGH"?"orange":F.priority==="NORMAL"?"blue":"gray",children:F.priority})}),e.jsx(Ee,{children:ce(F.status)}),e.jsx(Ee,{fontSize:"sm",children:new Date(F.createdAt).toLocaleDateString()})]},F.id))})]})})})]})}),W=[{id:"my-requests",label:"Mes demandes",icon:Qp,description:"Cration & suivi",render:G}];N()&&W.push({id:"recap",label:"Rcapitulatif",icon:ua,description:"Vue bureau",render:U});const me=[e.jsx(Q,{leftIcon:e.jsx(Bn,{}),colorScheme:"blue",onClick:$,size:je?"sm":"md",children:"Nouvelle demande"},"new")];return e.jsxs(e.Fragment,{children:[e.jsx(Bh,{title:"RtroDemandes",subtitle:"Gestion de vos demandes et suivi global",sections:W,defaultSectionId:"my-requests",sidebarTitle:"RtroDemandes",sidebarSubtitle:"Support & demandes",sidebarTitleIcon:Qp,versionLabel:"RtroDemandes v2",headerActions:me}),e.jsxs(Et,{isOpen:r,onClose:l,size:je?"full":"2xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:A?"Modifier la demande":"Nouvelle demande"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,as:"form",onSubmit:V,children:[e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Titre"}),e.jsx(ge,{placeholder:"Titre de la demande",value:P.title,onChange:F=>M({...P,title:F.target.value})})]}),e.jsxs(X,{isRequired:!0,children:[e.jsx(Z,{children:"Description"}),e.jsx(Xt,{placeholder:"Dtails de votre demande",value:P.description,onChange:F=>M({...P,description:F.target.value}),rows:4})]}),e.jsxs(ni,{templateColumns:"1fr 1fr",gap:4,width:"100%",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Catgorie"}),e.jsxs(ut,{value:P.category,onChange:F=>M({...P,category:F.target.value}),children:[e.jsx("option",{value:"GENERAL",children:"Gnral"}),e.jsx("option",{value:"REPAIR",children:"Rparation"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"SERVICE",children:"Service"}),e.jsx("option",{value:"CUSTOM",children:"Personnalis"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Priorit"}),e.jsxs(ut,{value:P.priority,onChange:F=>M({...P,priority:F.target.value}),children:[e.jsx("option",{value:"LOW",children:"Basse"}),e.jsx("option",{value:"NORMAL",children:"Normal"}),e.jsx("option",{value:"HIGH",children:"leve"}),e.jsx("option",{value:"URGENT",children:"Urgent"})]})]})]})]})}),e.jsx(Vt,{children:e.jsxs(ee,{spacing:3,children:[e.jsx(Q,{variant:"outline",onClick:l,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:V,isLoading:b,children:A?"Modifier":"Crer"})]})})]})]}),e.jsxs(Et,{isOpen:u,onClose:p,size:"2xl",children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Dtails de la demande"}),e.jsx($t,{}),e.jsx(_t,{children:C&&e.jsxs(J,{spacing:4,align:"start",width:"100%",children:[e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",children:"Titre:"}),e.jsx(k,{children:C.title})]}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",children:"Description:"}),e.jsx(k,{whiteSpace:"pre-wrap",fontSize:"sm",children:C.description})]}),e.jsx(xn,{}),e.jsxs(mt,{columns:{base:2,md:4},gap:4,width:"100%",children:[e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",children:"Catgorie:"}),e.jsx(k,{children:Se(C.category)})]}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",children:"Priorit:"}),e.jsx(k,{children:C.priority})]}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",children:"Statut:"}),ce(C.status)]}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",fontSize:"sm",children:"Date:"}),e.jsx(k,{children:new Date(C.createdAt).toLocaleDateString()})]})]})]})})]})]})]})};function Zte(){on();const{isOpen:t,onOpen:n,onClose:r}=It(),[i,l]=v.useState(!0),[u,d]=v.useState(null),[p,f]=v.useState(null),[g,x]=v.useState({functions:[],roles:[],roleFunctionDefaults:{}}),[y,b]=v.useState([]),[w,C]=v.useState(null),[_,A]=v.useState({}),[D,P]=v.useState(""),[M,N]=v.useState(""),[z,I]=v.useState({userId:"",functionId:"",access:!1,read:!1,write:!1,expiresAt:null});v.useEffect(()=>{V()},[]);const V=async()=>{try{l(!0);const ce=localStorage.getItem("token");if(!ce)throw new Error("No authentication token");const Se=await fetch("/api/permissions/definitions",{headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"}});if(!Se.ok)throw new Error(`API error: ${Se.status}`);const je=await Se.json();x({functions:Array.isArray(je.functions)?je.functions:Object.values(je.functions||{}),roles:je.roles||[],roleFunctionDefaults:je.roleFunctionDefaults||{}}),d(null)}catch(ce){console.error("Error fetching permission definitions:",ce),d(`Erreur lors du chargement des permissions: ${ce.message}`)}finally{l(!1)}},$=async ce=>{try{const Se=localStorage.getItem("token");if(!Se)throw new Error("No authentication token");const je=await fetch(`/api/permissions/user/${ce}`,{headers:{Authorization:`Bearer ${Se}`,"Content-Type":"application/json"}});if(!je.ok)throw new Error(`API error: ${je.status}`);const de=await je.json();A(de.permissions||{})}catch(Se){console.error("Error fetching user permissions:",Se),d(`Erreur lors du chargement des permissions utilisateur: ${Se.message}`)}},ae=async()=>{try{if(!z.userId||!z.functionId){d("Veuillez slectionner un utilisateur et une fonction");return}const ce=localStorage.getItem("token");if(!ce)throw new Error("No authentication token");const Se=await fetch("/api/permissions/grant",{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"},body:JSON.stringify({userId:z.userId,functionId:z.functionId,access:z.access,read:z.read,write:z.write,expiresAt:z.expiresAt})});if(!Se.ok)throw new Error(`API error: ${Se.status}`);f("Permission accorde avec succs"),r(),I({userId:"",functionId:"",access:!1,read:!1,write:!1,expiresAt:null}),w&&$(w.id)}catch(ce){console.error("Error granting permission:",ce),d(`Erreur lors de l'octroi de la permission: ${ce.message}`)}},he=async ce=>{try{const Se=localStorage.getItem("token");if(!Se)throw new Error("No authentication token");const je=await fetch(`/api/permissions/${ce}`,{method:"DELETE",headers:{Authorization:`Bearer ${Se}`,"Content-Type":"application/json"}});if(!je.ok)throw new Error(`API error: ${je.status}`);f("Permission rvoque avec succs"),w&&$(w.id)}catch(Se){console.error("Error revoking permission:",Se),d(`Erreur lors de la rvocation: ${Se.message}`)}},re=(Array.isArray(g.functions)?g.functions:[]).filter(ce=>!(D&&!ce.name.toLowerCase().includes(D.toLowerCase())||M&&!ce.group?.toLowerCase().includes(M.toLowerCase())));return i?e.jsx(oe,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",children:e.jsxs(J,{spacing:4,children:[e.jsx(fM,{isIndeterminate:!0,color:"blue.300"}),e.jsx(k,{children:"Chargement des permissions..."})]})}):e.jsxs(ei,{maxW:"container.lg",py:8,children:[e.jsx(Te,{size:"2xl",mb:6,children:" Gestionnaire des Permissions du Site"}),u&&e.jsxs(Ut,{status:"error",mb:4,borderRadius:"md",children:[e.jsx(Ht,{}),e.jsxs(oe,{children:[e.jsx(k,{fontWeight:"bold",children:"Erreur"}),e.jsx(k,{fontSize:"sm",children:u})]})]}),p&&e.jsxs(Ut,{status:"success",mb:4,borderRadius:"md",children:[e.jsx(Ht,{}),e.jsx(k,{children:p})]}),e.jsxs(ga,{colorScheme:"blue",variant:"enclosed",children:[e.jsxs(xa,{mb:4,children:[e.jsx(hn,{children:"Vue d'ensemble des permissions"}),e.jsx(hn,{children:"Gestion des utilisateurs"}),e.jsx(hn,{children:"Audit et logs"})]}),e.jsxs(va,{children:[e.jsx(fn,{children:e.jsxs(J,{spacing:4,align:"stretch",children:[e.jsxs(ee,{spacing:2,children:[e.jsx(ge,{placeholder:"Rechercher une fonction...",value:D,onChange:ce=>P(ce.target.value)}),e.jsxs(ut,{value:M,onChange:ce=>N(ce.target.value),maxW:"200px",children:[e.jsx("option",{value:"",children:"Tous les groupes"}),[...new Set(g.functions.map(ce=>ce.group))].map(ce=>e.jsx("option",{value:ce,children:ce},ce))]})]}),e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{size:"sm",variant:"striped",children:[e.jsx(qn,{bg:"gray.100",children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Fonction"}),e.jsx(_e,{children:"Groupe"}),e.jsx(_e,{children:"Description"}),e.jsx(_e,{children:"Rles par dfaut"})]})}),e.jsx(Wn,{children:re.map(ce=>e.jsxs(bt,{children:[e.jsx(Ee,{fontWeight:"medium",children:ce.name}),e.jsx(Ee,{children:ce.group}),e.jsx(Ee,{children:ce.description}),e.jsx(Ee,{children:e.jsx(ee,{spacing:1,children:g.roleFunctionDefaults[ce.id]?.roles?.map(Se=>e.jsx(Qe,{colorScheme:"purple",size:"sm",children:Se},Se))})})]},ce.id))})]})})]})}),e.jsx(fn,{children:e.jsxs(ni,{templateColumns:{base:"1fr",md:"1fr 2fr"},gap:4,children:[e.jsx(Vu,{children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Utilisateurs"})}),e.jsx(ke,{children:e.jsxs(J,{spacing:2,align:"stretch",children:[e.jsx(ge,{placeholder:"Rechercher un utilisateur...",size:"sm"}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Chargement des utilisateurs..."})]})})]})}),e.jsx(Vu,{children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsxs(ee,{justify:"space-between",children:[e.jsx(Te,{size:"md",children:"Permissions"}),e.jsx(Q,{leftIcon:e.jsx(kM,{}),colorScheme:"blue",size:"sm",onClick:n,children:"Ajouter une permission"})]})}),e.jsx(ke,{children:w?e.jsx(oe,{overflowX:"auto",children:e.jsxs(Fn,{size:"sm",variant:"striped",children:[e.jsx(qn,{bg:"gray.100",children:e.jsxs(bt,{children:[e.jsx(_e,{children:"Fonction"}),e.jsx(_e,{textAlign:"center",children:"Accs"}),e.jsx(_e,{textAlign:"center",children:"Lecture"}),e.jsx(_e,{textAlign:"center",children:"criture"}),e.jsx(_e,{children:"Expiration"}),e.jsx(_e,{children:"Actions"})]})}),e.jsx(Wn,{children:Object.entries(_).map(([ce,Se])=>e.jsxs(bt,{children:[e.jsx(Ee,{children:ce}),e.jsx(Ee,{textAlign:"center",children:Se.access&&e.jsx(Qe,{colorScheme:"green",children:""})}),e.jsx(Ee,{textAlign:"center",children:Se.read&&e.jsx(Qe,{colorScheme:"green",children:""})}),e.jsx(Ee,{textAlign:"center",children:Se.write&&e.jsx(Qe,{colorScheme:"green",children:""})}),e.jsx(Ee,{fontSize:"sm",children:Se.expiresAt||"Jamais"}),e.jsx(Ee,{children:e.jsx(Q,{leftIcon:e.jsx(Xp,{}),size:"xs",colorScheme:"red",onClick:()=>he(Se.id),children:"Rvoquer"})})]},ce))})]})}):e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Slectionnez un utilisateur pour voir ses permissions"})})]})})]})}),e.jsx(fn,{children:e.jsxs(Pe,{children:[e.jsx(zt,{children:e.jsx(Te,{size:"md",children:"Audit des permissions"})}),e.jsx(ke,{children:e.jsx(k,{color:"gray.600",children:"Historique des modifications de permissions (en dveloppement)"})})]})})]})]}),e.jsxs(Et,{isOpen:t,onClose:r,children:[e.jsx(At,{}),e.jsxs(Pt,{children:[e.jsx(Tt,{children:"Accorder une permission"}),e.jsx($t,{}),e.jsx(_t,{children:e.jsxs(J,{spacing:4,children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Utilisateur"}),e.jsxs(ut,{value:z.userId,onChange:ce=>I({...z,userId:ce.target.value}),children:[e.jsx("option",{value:"",children:"Slectionner..."}),y.map(ce=>e.jsxs("option",{value:ce.id,children:[ce.firstName," ",ce.lastName," (",ce.email,")"]},ce.id))]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Fonction"}),e.jsxs(ut,{value:z.functionId,onChange:ce=>I({...z,functionId:ce.target.value}),children:[e.jsx("option",{value:"",children:"Slectionner..."}),g.functions.map(ce=>e.jsxs("option",{value:ce.id,children:[ce.name," (",ce.group,")"]},ce.id))]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Autorisations"}),e.jsxs(fo,{spacing:2,children:[e.jsx(Na,{isChecked:z.access,onChange:ce=>I({...z,access:ce.target.checked}),children:"Accs"}),e.jsx(Na,{isChecked:z.read,onChange:ce=>I({...z,read:ce.target.checked}),children:"Lecture"}),e.jsx(Na,{isChecked:z.write,onChange:ce=>I({...z,write:ce.target.checked}),children:"criture"})]})]}),e.jsxs(X,{children:[e.jsx(Z,{children:"Expiration (optionnel)"}),e.jsx(ge,{type:"datetime-local",value:z.expiresAt||"",onChange:ce=>I({...z,expiresAt:ce.target.value})})]})]})}),e.jsxs(Vt,{children:[e.jsx(Q,{variant:"ghost",mr:3,onClick:r,children:"Annuler"}),e.jsx(Q,{colorScheme:"blue",onClick:ae,children:"Accorder"})]})]})]})]})}const DA=["ADMIN","PRESIDENT","VICE_PRESIDENT","TRESORIER","SECRETAIRE_GENERAL"],Xte={VEHICLES:{label:" Vhicules",permissions:{READ:"Consulter",CREATE:"Crer",EDIT:"Modifier",DELETE:"Supprimer"}},FINANCE:{label:" Finances",permissions:{READ:"Consulter",CREATE:"Crer transactions",EDIT:"Modifier",DELETE:"Supprimer"}},EVENTS:{label:" vnements",permissions:{READ:"Consulter",CREATE:"Crer",EDIT:"Modifier",DELETE:"Supprimer"}},STOCK:{label:" Stock",permissions:{READ:"Consulter",CREATE:"Ajouter articles",EDIT:"Modifier",DELETE:"Supprimer"}},PLANNING:{label:" Planning",permissions:{READ:"Consulter",CREATE:"Crer",EDIT:"Modifier",DELETE:"Supprimer"}},MEMBERS:{label:" Membres",permissions:{READ:"Consulter",CREATE:"Ajouter",EDIT:"Modifier",DELETE:"Supprimer"}}},PA=t=>({ADMIN:"red",PRESIDENT:"purple",VICE_PRESIDENT:"indigo",TRESORIER:"blue",SECRETAIRE_GENERAL:"cyan",MEMBER:"gray"})[t]||"gray",MA=t=>({ADMIN:" Admin",PRESIDENT:" Prsident",VICE_PRESIDENT:" Vice-Prsident",TRESORIER:" Trsorier",SECRETAIRE_GENERAL:" Secrtaire Gnral",MEMBER:" Membre"})[t]||t;function Kte(){const{user:t,roles:n,isAdmin:r}=es(),[i,l]=v.useState([]),[u,d]=v.useState(!0),[p,f]=v.useState(null),[g,x]=v.useState({}),[y,b]=v.useState(""),w=on(),C=Tn("white","gray.800"),_=r||t&&t.roles&&t.roles.some(I=>DA.includes(I));v.useEffect(()=>{_&&A()},[_]);const A=async()=>{try{d(!0);const I=await yt.get("/api/admin/users");Array.isArray(I.data)?l(I.data):I.data?.users&&l(I.data.users)}catch(I){console.error("Erreur chargement utilisateurs:",I),w({title:"Erreur",description:"Impossible de charger les utilisateurs",status:"error",duration:3e3})}finally{d(!1)}},D=async I=>{try{const V=await yt.get(`/api/admin/users/${I}/permissions`);V.data&&x(V.data)}catch(V){console.error("Erreur chargement permissions:",V),w({title:"Erreur",description:"Impossible de charger les permissions",status:"error",duration:3e3})}},P=I=>{f(I),D(I.id)},M=async(I,V,$)=>{if(!(!p||!_))try{!$?await yt.post(`/api/admin/users/${p.id}/permissions`,{resource:I,actions:[V]}):await yt.delete(`/api/admin/users/${p.id}/permissions/${I}/${V}`),await D(p.id),w({title:"Succs",description:"Permission mise  jour",status:"success",duration:2e3})}catch(ae){console.error("Erreur mise  jour permission:",ae),w({title:"Erreur",description:"Impossible de mettre  jour la permission",status:"error",duration:3e3})}},N=(I,V)=>g[I]?g[I].includes&&g[I].includes(V):!1,z=i.filter(I=>`${I.firstName} ${I.lastName}`.toLowerCase().includes(y.toLowerCase())||I.email.toLowerCase().includes(y.toLowerCase()));return _?u?e.jsx(yn,{minH:"80vh",children:e.jsxs(J,{children:[e.jsx(pn,{size:"xl",color:"var(--rbe-red)"}),e.jsx(k,{children:"Chargement..."})]})}):e.jsx(ei,{maxW:"container.xl",py:8,children:e.jsxs(J,{spacing:6,align:"stretch",children:[e.jsx(oe,{children:e.jsxs(ee,{justify:"space-between",mb:4,children:[e.jsxs(J,{align:"start",spacing:1,children:[e.jsxs(Te,{size:"xl",display:"flex",alignItems:"center",gap:2,children:[e.jsx(jm,{})," Gestion des Permissions"]}),e.jsx(k,{color:"gray.600",fontSize:"sm",children:"Configurez les droits d'accs pour chaque utilisateur"})]}),e.jsx(Q,{leftIcon:e.jsx(Fa,{}),onClick:A,isLoading:u,colorScheme:"blue",variant:"outline",children:"Actualiser"})]})}),e.jsxs(mt,{columns:{base:1,md:2,lg:3},spacing:6,w:"full",children:[e.jsxs(Pe,{bg:C,children:[e.jsxs(zt,{pb:3,children:[e.jsx(Te,{size:"md",mb:4,children:" Utilisateurs"}),e.jsx(ge,{placeholder:"Rechercher...",size:"sm",value:y,onChange:I=>b(I.target.value)})]}),e.jsx(ke,{pt:0,children:e.jsx(J,{spacing:2,maxH:"600px",overflowY:"auto",align:"stretch",children:z.length>0?z.map(I=>e.jsx(Q,{justifyContent:"start",variant:p?.id===I.id?"solid":"ghost",colorScheme:"blue",onClick:()=>P(I),isFullWidth:!0,textAlign:"left",p:3,height:"auto",whiteSpace:"normal",children:e.jsxs(J,{align:"start",spacing:0,width:"100%",children:[e.jsxs(k,{fontWeight:"bold",fontSize:"sm",children:[I.firstName," ",I.lastName]}),e.jsxs(ee,{spacing:2,children:[e.jsx(k,{fontSize:"xs",color:"gray.500",children:I.email}),I.role&&e.jsx(Qe,{colorScheme:PA(I.role),fontSize:"xs",children:MA(I.role)})]})]})},I.id)):e.jsx(k,{textAlign:"center",color:"gray.500",py:8,children:"Aucun utilisateur trouv"})})})]}),e.jsx(oe,{gridColumn:{lg:"2 / 4"},children:p?e.jsxs(Pe,{bg:C,children:[e.jsx(zt,{children:e.jsxs(J,{align:"start",spacing:2,children:[e.jsxs(Te,{size:"md",children:[p.firstName," ",p.lastName]}),p.role&&e.jsx(Qe,{colorScheme:PA(p.role),fontSize:"sm",children:MA(p.role)})]})}),e.jsx(ke,{pt:0,children:e.jsx(J,{spacing:6,align:"stretch",children:Object.entries(Xte).map(([I,V])=>e.jsxs(oe,{p:4,borderWidth:1,borderRadius:"md",borderColor:"gray.200",children:[e.jsx(Te,{size:"sm",mb:4,children:V.label}),e.jsx(mt,{columns:{base:2,md:4},spacing:3,children:Object.entries(V.permissions).map(([$,ae])=>e.jsxs(ee,{spacing:2,children:[e.jsx(Na,{isChecked:N(I,$),onChange:()=>M(I,$,N(I,$)),colorScheme:"blue"}),e.jsx(k,{fontSize:"sm",children:ae})]},`${I}-${$}`))})]},I))})})]}):e.jsx(Pe,{bg:C,children:e.jsx(ke,{children:e.jsx(yn,{p:10,children:e.jsxs(J,{children:[e.jsx(Pv,{size:32,color:"gray"}),e.jsx(k,{color:"gray.500",children:"Slectionnez un utilisateur pour grer ses permissions"})]})})})})})]}),e.jsxs(mt,{columns:{base:2,md:4},spacing:4,children:[e.jsx(Pe,{children:e.jsxs(ke,{textAlign:"center",children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",color:"blue.500",children:i.length}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Utilisateurs"})]})}),e.jsx(Pe,{children:e.jsxs(ke,{textAlign:"center",children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",color:"red.500",children:i.filter(I=>I.role==="ADMIN").length}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Admins"})]})}),e.jsx(Pe,{children:e.jsxs(ke,{textAlign:"center",children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",color:"purple.500",children:i.filter(I=>DA.includes(I.role)).length}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Administrateurs"})]})}),e.jsx(Pe,{children:e.jsxs(ke,{textAlign:"center",children:[e.jsx(k,{fontSize:"2xl",fontWeight:"bold",color:"gray.500",children:i.filter(I=>I.role==="MEMBER").length}),e.jsx(k,{fontSize:"sm",color:"gray.600",children:"Membres"})]})})]})]})}):e.jsx(ei,{maxW:"container.xl",py:8,children:e.jsxs(Ut,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"auto",p:6,children:[e.jsx(Ht,{boxSize:"40px",mr:0,mb:4}),e.jsx(Te,{size:"md",mb:2,children:"Accs Refus"}),e.jsx(k,{children:"Seuls les administrateurs peuvent grer les permissions."})]})})}function Qte(){const{isAuthenticated:t}=es(),n=ho();console.log(" Current route:",n.pathname);const r=t&&n.pathname!=="/login";return e.jsxs(e.Fragment,{children:[r&&e.jsx(GQ,{}),e.jsxs(PN,{children:[e.jsx(Un,{path:"/login",element:e.jsx(Ate,{})}),e.jsx(Un,{path:"/dashboard/home",element:e.jsx(Po,{children:e.jsx(bj,{})})}),e.jsx(Un,{path:"/dashboard/myrbe",element:e.jsx(Po,{children:e.jsx(QJ,{})})}),e.jsx(Un,{path:"/dashboard/myrbe/:parc",element:e.jsx(Po,{children:e.jsx(eee,{})})}),e.jsx(Un,{path:"/dashboard/retro-demandes",element:e.jsx(Po,{children:e.jsx(Yte,{})})}),e.jsx(Un,{path:"/admin/finance",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(uee,{})})}),e.jsx(Un,{path:"/admin/finance-v2",element:e.jsx(Hr,{allowedRoles:["ADMIN","PRESIDENT","TRESORIER"],children:e.jsx(wee,{})})}),e.jsx(Un,{path:"/dashboard/retrobus",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(ree,{})})}),e.jsx(Un,{path:"/dashboard/vehicules",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(zJ,{})})}),e.jsx(Un,{path:"/dashboard/vehicules/ajouter",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(CJ,{children:e.jsx(VJ,{})})})}),e.jsx(Un,{path:"/dashboard/vehicules/:parc",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(GJ,{})})}),e.jsx(Un,{path:"/dashboard/evenements",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Cee,{})})}),e.jsx(Un,{path:"/dashboard/events-management",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(ete,{})})}),e.jsx(Un,{path:"/dashboard/events-creation",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(nte,{})})}),e.jsx(Un,{path:"/dashboard/test-events",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(rte,{})})}),e.jsx(Un,{path:"/dashboard/site-management",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Wg,{resource:Ae.SITE_MANAGEMENT,children:e.jsx(jte,{})})})}),e.jsx(Un,{path:"/dashboard/flash-management",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Cte,{})})}),e.jsx(Un,{path:"/dashboard/retromerch",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Vte,{})})}),e.jsx(Un,{path:"/dashboard/stock-management",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(wte,{})})}),e.jsx(Un,{path:"/dashboard/members-management",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Bte,{})})}),e.jsx(Un,{path:"/members",element:e.jsx(Po,{children:e.jsx(zte,{})})}),e.jsx(Un,{path:"/adhesion",element:e.jsx(Po,{children:e.jsx(_te,{})})}),e.jsx(Un,{path:"/dashboard/permissions",element:e.jsx(Hr,{allowedRoles:["ADMIN"],children:e.jsx(Zte,{})})}),e.jsx(Un,{path:"/dashboard/permissions-management",element:e.jsx(Po,{children:e.jsx(Kte,{})})}),e.jsx(Un,{path:"/dashboard/newsletter",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Rte,{})})}),e.jsx(Un,{path:"/dashboard/newsletter-campaigns",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(kte,{})})}),e.jsx(Un,{path:"/dashboard/retroplanning",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Wg,{resource:Ae.RETROPLANNING,children:e.jsx(Hte,{})})})}),e.jsx(Un,{path:"/planning/attendance/:eventId/:memberId",element:e.jsx(qte,{})}),e.jsx(Un,{path:"/planning/my-invitations",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Wg,{resource:Ae.RETROPLANNING_RESPOND,children:e.jsx(Gte,{})})})}),e.jsx(Un,{path:"/dashboard/support",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(Wg,{resource:Ae.RETROSUPPORT,children:e.jsx(Fte,{})})})}),e.jsx(Un,{path:"/retromail",element:e.jsx(Hr,{deniedRoles:["CLIENT","GUEST"],children:e.jsx(oee,{})})}),e.jsx(Un,{path:"/mobile/v/:parc",element:e.jsx(Po,{children:e.jsx(OJ,{})})}),e.jsx(Un,{path:"/",element:e.jsx(Po,{children:e.jsx(bj,{})})}),e.jsx(Un,{path:"*",element:e.jsx(Po,{children:e.jsx(bj,{})})})]})]})}VI.createRoot(document.getElementById("root")).render(e.jsx(wn.StrictMode,{children:e.jsx(xW,{theme:tQ,children:e.jsx(nL,{children:e.jsx(pQ,{children:e.jsx(Qte,{})})})})}));
